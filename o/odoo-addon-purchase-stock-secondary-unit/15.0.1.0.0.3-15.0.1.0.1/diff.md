# Comparing `tmp/odoo_addon_purchase_stock_secondary_unit-15.0.1.0.0.3-py3-none-any.whl.zip` & `tmp/odoo_addon_purchase_stock_secondary_unit-15.0.1.0.1-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,22 +1,22 @@
-Zip file size: 25830 bytes, number of entries: 20
--rw-r--r--  2.0 unx     3375 b- defN 23-May-13 06:43 odoo/addons/purchase_stock_secondary_unit/README.rst
--rw-r--r--  2.0 unx      119 b- defN 23-May-13 06:43 odoo/addons/purchase_stock_secondary_unit/__init__.py
--rw-r--r--  2.0 unx      630 b- defN 23-May-13 06:43 odoo/addons/purchase_stock_secondary_unit/__manifest__.py
--rw-r--r--  2.0 unx      719 b- defN 23-May-13 06:43 odoo/addons/purchase_stock_secondary_unit/i18n/de.po
--rw-r--r--  2.0 unx      808 b- defN 23-May-13 06:43 odoo/addons/purchase_stock_secondary_unit/i18n/es.po
--rw-r--r--  2.0 unx      676 b- defN 23-May-13 06:43 odoo/addons/purchase_stock_secondary_unit/i18n/purchase_stock_secondary_unit.pot
--rw-r--r--  2.0 unx      157 b- defN 23-May-13 06:43 odoo/addons/purchase_stock_secondary_unit/models/__init__.py
--rw-r--r--  2.0 unx     1705 b- defN 23-May-13 06:43 odoo/addons/purchase_stock_secondary_unit/models/purchase_order_line.py
--rw-r--r--  2.0 unx      508 b- defN 23-May-13 06:43 odoo/addons/purchase_stock_secondary_unit/models/stock_move.py
--rw-r--r--  2.0 unx      135 b- defN 23-May-13 06:43 odoo/addons/purchase_stock_secondary_unit/readme/CONTRIBUTORS.rst
--rw-r--r--  2.0 unx      191 b- defN 23-May-13 06:43 odoo/addons/purchase_stock_secondary_unit/readme/DESCRIPTION.rst
--rw-r--r--  2.0 unx      371 b- defN 23-May-13 06:43 odoo/addons/purchase_stock_secondary_unit/readme/USAGE.rst
--rw-r--r--  2.0 unx     9455 b- defN 23-May-13 06:43 odoo/addons/purchase_stock_secondary_unit/static/description/icon.png
--rw-r--r--  2.0 unx    12955 b- defN 23-May-13 06:43 odoo/addons/purchase_stock_secondary_unit/static/description/index.html
--rw-r--r--  2.0 unx      147 b- defN 23-May-13 06:43 odoo/addons/purchase_stock_secondary_unit/tests/__init__.py
--rw-r--r--  2.0 unx     4558 b- defN 23-May-13 06:43 odoo/addons/purchase_stock_secondary_unit/tests/test_purchase_stock_secondary_unit.py
--rw-r--r--  2.0 unx     4133 b- defN 23-May-13 06:43 odoo_addon_purchase_stock_secondary_unit-15.0.1.0.0.3.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-May-13 06:43 odoo_addon_purchase_stock_secondary_unit-15.0.1.0.0.3.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 23-May-13 06:43 odoo_addon_purchase_stock_secondary_unit-15.0.1.0.0.3.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     2369 b- defN 23-May-13 06:43 odoo_addon_purchase_stock_secondary_unit-15.0.1.0.0.3.dist-info/RECORD
-20 files, 43108 bytes uncompressed, 21692 bytes compressed:  49.7%
+Zip file size: 26070 bytes, number of entries: 20
+-rw-r--r--  2.0 unx     3375 b- defN 23-Jul-18 08:26 odoo/addons/purchase_stock_secondary_unit/README.rst
+-rw-r--r--  2.0 unx      119 b- defN 23-Jul-18 08:26 odoo/addons/purchase_stock_secondary_unit/__init__.py
+-rw-r--r--  2.0 unx      679 b- defN 23-Jul-18 08:26 odoo/addons/purchase_stock_secondary_unit/__manifest__.py
+-rw-r--r--  2.0 unx      719 b- defN 23-Jul-18 08:26 odoo/addons/purchase_stock_secondary_unit/i18n/de.po
+-rw-r--r--  2.0 unx      928 b- defN 23-Jul-18 08:26 odoo/addons/purchase_stock_secondary_unit/i18n/es.po
+-rw-r--r--  2.0 unx      676 b- defN 23-Jul-18 08:26 odoo/addons/purchase_stock_secondary_unit/i18n/purchase_stock_secondary_unit.pot
+-rw-r--r--  2.0 unx      157 b- defN 23-Jul-18 08:26 odoo/addons/purchase_stock_secondary_unit/models/__init__.py
+-rw-r--r--  2.0 unx     2523 b- defN 23-Jul-18 08:26 odoo/addons/purchase_stock_secondary_unit/models/purchase_order_line.py
+-rw-r--r--  2.0 unx      508 b- defN 23-Jul-18 08:26 odoo/addons/purchase_stock_secondary_unit/models/stock_move.py
+-rw-r--r--  2.0 unx      135 b- defN 23-Jul-18 08:26 odoo/addons/purchase_stock_secondary_unit/readme/CONTRIBUTORS.rst
+-rw-r--r--  2.0 unx      191 b- defN 23-Jul-18 08:26 odoo/addons/purchase_stock_secondary_unit/readme/DESCRIPTION.rst
+-rw-r--r--  2.0 unx      371 b- defN 23-Jul-18 08:26 odoo/addons/purchase_stock_secondary_unit/readme/USAGE.rst
+-rw-r--r--  2.0 unx     9455 b- defN 23-Jul-18 08:26 odoo/addons/purchase_stock_secondary_unit/static/description/icon.png
+-rw-r--r--  2.0 unx    12955 b- defN 23-Jul-18 08:26 odoo/addons/purchase_stock_secondary_unit/static/description/index.html
+-rw-r--r--  2.0 unx      147 b- defN 23-Jul-18 08:26 odoo/addons/purchase_stock_secondary_unit/tests/__init__.py
+-rw-r--r--  2.0 unx     4558 b- defN 23-Jul-18 08:26 odoo/addons/purchase_stock_secondary_unit/tests/test_purchase_stock_secondary_unit.py
+-rw-r--r--  2.0 unx     4131 b- defN 23-Jul-18 08:26 odoo_addon_purchase_stock_secondary_unit-15.0.1.0.1.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jul-18 08:26 odoo_addon_purchase_stock_secondary_unit-15.0.1.0.1.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 23-Jul-18 08:26 odoo_addon_purchase_stock_secondary_unit-15.0.1.0.1.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     2361 b- defN 23-Jul-18 08:26 odoo_addon_purchase_stock_secondary_unit-15.0.1.0.1.dist-info/RECORD
+20 files, 44085 bytes uncompressed, 21948 bytes compressed:  50.2%
```

## zipnote {}

```diff
@@ -42,20 +42,20 @@
 
 Filename: odoo/addons/purchase_stock_secondary_unit/tests/__init__.py
 Comment: 
 
 Filename: odoo/addons/purchase_stock_secondary_unit/tests/test_purchase_stock_secondary_unit.py
 Comment: 
 
-Filename: odoo_addon_purchase_stock_secondary_unit-15.0.1.0.0.3.dist-info/METADATA
+Filename: odoo_addon_purchase_stock_secondary_unit-15.0.1.0.1.dist-info/METADATA
 Comment: 
 
-Filename: odoo_addon_purchase_stock_secondary_unit-15.0.1.0.0.3.dist-info/WHEEL
+Filename: odoo_addon_purchase_stock_secondary_unit-15.0.1.0.1.dist-info/WHEEL
 Comment: 
 
-Filename: odoo_addon_purchase_stock_secondary_unit-15.0.1.0.0.3.dist-info/top_level.txt
+Filename: odoo_addon_purchase_stock_secondary_unit-15.0.1.0.1.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo_addon_purchase_stock_secondary_unit-15.0.1.0.0.3.dist-info/RECORD
+Filename: odoo_addon_purchase_stock_secondary_unit-15.0.1.0.1.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/purchase_stock_secondary_unit/__manifest__.py

```diff
@@ -1,17 +1,21 @@
 # Copyright 2020 Jarsa Sistemas
 # Copyright 2021 Tecnativa - Sergio Teruel
 # License AGPL-3.0 or later (https://www.gnu.org/licenses/lgpl).
 {
     "name": "Purchase Stock Secondary Unit",
     "summary": "Get product quantities in a secondary unit",
-    "version": "15.0.1.0.0",
+    "version": "15.0.1.0.1",
     "development_status": "Beta",
     "category": "stock",
     "website": "https://github.com/OCA/purchase-workflow",
     "author": "Jarsa, Odoo Community Association (OCA)",
     "license": "AGPL-3",
     "application": False,
     "installable": True,
-    "depends": ["purchase_order_secondary_unit", "stock_secondary_unit"],
+    "depends": [
+        "purchase_order_secondary_unit",
+        "stock_secondary_unit",
+        "purchase_stock",
+    ],
     "auto_install": True,
 }
```

## odoo/addons/purchase_stock_secondary_unit/i18n/es.po

```diff
@@ -3,25 +3,26 @@
 # 	* purchase_stock_secondary_unit
 #
 msgid ""
 msgstr ""
 "Project-Id-Version: Odoo Server 13.0+e\n"
 "Report-Msgid-Bugs-To: \n"
 "POT-Creation-Date: 2020-12-25 15:30+0000\n"
-"PO-Revision-Date: 2020-12-25 15:30+0000\n"
-"Last-Translator: \n"
+"PO-Revision-Date: 2023-07-18 08:10+0000\n"
+"Last-Translator: Ivorra78 <informatica@totmaterial.es>\n"
 "Language-Team: \n"
-"Language: \n"
+"Language: es\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: \n"
-"Plural-Forms: \n"
+"Plural-Forms: nplurals=2; plural=n != 1;\n"
+"X-Generator: Weblate 4.17\n"
 
 #. module: purchase_stock_secondary_unit
 #: model:ir.model,name:purchase_stock_secondary_unit.model_purchase_order_line
 msgid "Purchase Order Line"
 msgstr "LÃ­nea de pedido de compra"
 
 #. module: purchase_stock_secondary_unit
 #: model:ir.model,name:purchase_stock_secondary_unit.model_stock_move
 msgid "Stock Move"
-msgstr ""
+msgstr "movimiento de existencias"
```

## odoo/addons/purchase_stock_secondary_unit/models/purchase_order_line.py

```diff
@@ -1,12 +1,12 @@
 # Copyright 2020 Jarsa Sistemas
 # Copyright 2021 Tecnativa - Sergio Teruel
 # License LGPL-3.0 or later (https://www.gnu.org/licenses/lgpl).
 
-from odoo import models
+from odoo import api, models
 
 
 class PurchaseOrderLine(models.Model):
     _inherit = "purchase.order.line"
 
     def _get_secondary_uom_for_move(self, product_uom_qty):
         if not self.secondary_uom_id:
@@ -38,7 +38,28 @@
 
     def _create_or_update_picking(self):
         # Inject a context to recompute secondary unit in stock moves after
         # they have been assigned only for po lines updated and confirmed.
         return super(
             PurchaseOrderLine, self.with_context(secondary_uom_for_update_moves=True)
         )._create_or_update_picking()
+
+    def _prepare_stock_move_vals(
+        self, picking, price_unit, product_uom_qty, product_uom
+    ):
+        vals = super()._prepare_stock_move_vals(
+            picking, price_unit, product_uom_qty, product_uom
+        )
+        if self.secondary_uom_id:
+            vals["secondary_uom_id"] = self.secondary_uom_id.id
+        return vals
+
+    @api.model
+    def _prepare_purchase_order_line_from_procurement(
+        self, product_id, product_qty, product_uom, company_id, values, po
+    ):
+        res = super()._prepare_purchase_order_line_from_procurement(
+            product_id, product_qty, product_uom, company_id, values, po
+        )
+        res["secondary_uom_id"] = values.get("secondary_uom_id", False)
+        res["secondary_uom_qty"] = values.get("secondary_uom_qty", 0.0)
+        return res
```

## Comparing `odoo_addon_purchase_stock_secondary_unit-15.0.1.0.0.3.dist-info/METADATA` & `odoo_addon_purchase_stock_secondary_unit-15.0.1.0.1.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: odoo-addon-purchase-stock-secondary-unit
-Version: 15.0.1.0.0.3
+Version: 15.0.1.0.1
 Summary: Get product quantities in a secondary unit
 Home-page: https://github.com/OCA/purchase-workflow
 Author: Jarsa, Odoo Community Association (OCA)
 Author-email: support@odoo-community.org
 License: AGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
```

## Comparing `odoo_addon_purchase_stock_secondary_unit-15.0.1.0.0.3.dist-info/RECORD` & `odoo_addon_purchase_stock_secondary_unit-15.0.1.0.1.dist-info/RECORD`

 * *Files 19% similar despite different names*

```diff
@@ -1,20 +1,20 @@
 odoo/addons/purchase_stock_secondary_unit/README.rst,sha256=WxC5d9O9oLpJHzSa3RuiwcESM-uyAFXG6BRjv2izbfY,3375
 odoo/addons/purchase_stock_secondary_unit/__init__.py,sha256=PfdTBC_rATvgWM4PEDgjB7XrdiPN06fLXYP0CfftzNw,119
-odoo/addons/purchase_stock_secondary_unit/__manifest__.py,sha256=twWmvY0zbx8w1mdcm5zPIsUqvrJIUA9uxQy78d9igyo,630
+odoo/addons/purchase_stock_secondary_unit/__manifest__.py,sha256=mEqh9EYdGwkIaYLwfcZIhakB9TfWlTyksq62xL7GpEA,679
 odoo/addons/purchase_stock_secondary_unit/i18n/de.po,sha256=7m01NoHTBhUToQFOlV-uHgXoIJ2BpbkH2Hu5RptSiqg,719
-odoo/addons/purchase_stock_secondary_unit/i18n/es.po,sha256=_1RGcAwAD78YuIjOXr5azhyCy4HF2uk64ZuYEfBKKxo,808
+odoo/addons/purchase_stock_secondary_unit/i18n/es.po,sha256=ybxBH2WsaVD3IKt35C2VqsMJo-uV_3xnMf0dH-G42VM,928
 odoo/addons/purchase_stock_secondary_unit/i18n/purchase_stock_secondary_unit.pot,sha256=__0HV4srWS7Q_DPro5waoPdMsRLJ5BJsEo7sDGF6bRg,676
 odoo/addons/purchase_stock_secondary_unit/models/__init__.py,sha256=Lu4Yf1_0qVsc8tGN9HZ-7AYQxFybVK2qFLD1HNCo7eI,157
-odoo/addons/purchase_stock_secondary_unit/models/purchase_order_line.py,sha256=knt4bXX4oJOeONbZDYRwbH22kT9XC9UomEU9XIDkx64,1705
+odoo/addons/purchase_stock_secondary_unit/models/purchase_order_line.py,sha256=kTDnpC5lUkxmDLrAzCYj7wi7Ce7gb0p3QSRZ_8bNZBU,2523
 odoo/addons/purchase_stock_secondary_unit/models/stock_move.py,sha256=OuEe3O1t377SeDX2a0QeN8He2WZ99i6mM9ViB_c_f2I,508
 odoo/addons/purchase_stock_secondary_unit/readme/CONTRIBUTORS.rst,sha256=E6laPjKglF7bBB1j9fYFR5TQf0sbUkLtHfI9YLyXn1s,135
 odoo/addons/purchase_stock_secondary_unit/readme/DESCRIPTION.rst,sha256=r-s_WwJk-rwibYH5vPvhyqA4HXLxeUcHn_aWpscCr2I,191
 odoo/addons/purchase_stock_secondary_unit/readme/USAGE.rst,sha256=MEvzbGfi2yP5m37xuuqalvs7hKdYr7OPX4dPvqPkI44,371
 odoo/addons/purchase_stock_secondary_unit/static/description/icon.png,sha256=6xBPJauaFOF0KDHfHgQopSc28kKvxMaeoQFQWZtfZDo,9455
 odoo/addons/purchase_stock_secondary_unit/static/description/index.html,sha256=4nyKaCa7fIVZQPXdCh6Q9zPUL9lEg0nU6Zbv2r78e30,12955
 odoo/addons/purchase_stock_secondary_unit/tests/__init__.py,sha256=QxNizWnrHHVMH2v3zbauf60XAcn-dcYljCAp1mT_1xU,147
 odoo/addons/purchase_stock_secondary_unit/tests/test_purchase_stock_secondary_unit.py,sha256=NIfj5srdBB6cEPArpoXNygOtunH-oX2j7RVW0HgyjL4,4558
-odoo_addon_purchase_stock_secondary_unit-15.0.1.0.0.3.dist-info/METADATA,sha256=DdyS0rOttKsPBnVzO7IZtAzn3k9E55C-Witz81Q6Jns,4133
-odoo_addon_purchase_stock_secondary_unit-15.0.1.0.0.3.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
-odoo_addon_purchase_stock_secondary_unit-15.0.1.0.0.3.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo_addon_purchase_stock_secondary_unit-15.0.1.0.0.3.dist-info/RECORD,,
+odoo_addon_purchase_stock_secondary_unit-15.0.1.0.1.dist-info/METADATA,sha256=8ag7ybPoFGg7z-6E6bRq2Y8WFWcsc1I3nLy9ar7uIQU,4131
+odoo_addon_purchase_stock_secondary_unit-15.0.1.0.1.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+odoo_addon_purchase_stock_secondary_unit-15.0.1.0.1.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo_addon_purchase_stock_secondary_unit-15.0.1.0.1.dist-info/RECORD,,
```

