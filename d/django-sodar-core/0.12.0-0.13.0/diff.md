# Comparing `tmp/django-sodar-core-0.12.0.tar.gz` & `tmp/django-sodar-core-0.13.0.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "django-sodar-core-0.12.0.tar", last modified: Fri Feb  3 11:28:15 2023, max compression
+gzip compressed data, was "django-sodar-core-0.13.0.tar", last modified: Thu Jun  1 12:22:25 2023, max compression
```

## Comparing `django-sodar-core-0.12.0.tar` & `django-sodar-core-0.13.0.tar`

### file list

```diff
@@ -1,457 +1,466 @@
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.740671 django-sodar-core-0.12.0/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      397 2023-01-10 09:22:19.000000 django-sodar-core-0.12.0/AUTHORS.rst
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1093 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/LICENSE
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      691 2022-09-23 15:05:02.000000 django-sodar-core-0.12.0/MANIFEST.in
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     7675 2023-02-03 11:28:15.744671 django-sodar-core-0.12.0/PKG-INFO
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     6703 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/README.rst
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.708670 django-sodar-core-0.12.0/adminalerts/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/adminalerts/__init__.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      127 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/adminalerts/admin.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)       97 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/adminalerts/apps.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2070 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/adminalerts/forms.py
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.708670 django-sodar-core-0.12.0/adminalerts/migrations/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1238 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/adminalerts/migrations/0001_initial.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      726 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/adminalerts/migrations/0002_adminalert_user.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1134 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/adminalerts/migrations/0003_auto_20180802_1558.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      464 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/adminalerts/migrations/0004_rename_uuid.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      524 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/adminalerts/migrations/0005_update_uuid.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      508 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/adminalerts/migrations/0006_adminalert_require_auth.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/adminalerts/migrations/__init__.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2709 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/adminalerts/models.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2499 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/adminalerts/plugins.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      741 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/adminalerts/rules.py
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.700670 django-sodar-core-0.12.0/adminalerts/templates/
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.708670 django-sodar-core-0.12.0/adminalerts/templates/adminalerts/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      923 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/adminalerts/templates/adminalerts/adminalert_confirm_delete.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1064 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/adminalerts/templates/adminalerts/adminalert_form.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1598 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/adminalerts/templates/adminalerts/alert_detail.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     6208 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/adminalerts/templates/adminalerts/alert_list.html
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.708670 django-sodar-core-0.12.0/adminalerts/tests/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/adminalerts/tests/__init__.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2145 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/adminalerts/tests/test_models.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     4999 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/adminalerts/tests/test_permissions.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1768 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/adminalerts/tests/test_permissions_ajax.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2096 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/adminalerts/tests/test_plugins.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     3287 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/adminalerts/tests/test_ui.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     7195 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/adminalerts/tests/test_views.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1491 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/adminalerts/tests/test_views_ajax.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1065 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/adminalerts/urls.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2947 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/adminalerts/views.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      863 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/adminalerts/views_ajax.py
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.708670 django-sodar-core-0.12.0/appalerts/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/appalerts/__init__.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      132 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/appalerts/admin.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1991 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/appalerts/api.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)       93 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/appalerts/apps.py
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.708670 django-sodar-core-0.12.0/appalerts/migrations/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2158 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/appalerts/migrations/0001_initial.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/appalerts/migrations/__init__.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     3422 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/appalerts/models.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1359 2021-05-06 14:50:32.000000 django-sodar-core-0.12.0/appalerts/plugins.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      457 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/appalerts/rules.py
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.700670 django-sodar-core-0.12.0/appalerts/static/
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.700670 django-sodar-core-0.12.0/appalerts/static/appalerts/
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.712671 django-sodar-core-0.12.0/appalerts/static/appalerts/js/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2119 2021-09-20 10:55:06.000000 django-sodar-core-0.12.0/appalerts/static/appalerts/js/appalerts.js
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2677 2021-08-19 13:55:34.000000 django-sodar-core-0.12.0/appalerts/static/appalerts/js/appalerts_list.js
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.700670 django-sodar-core-0.12.0/appalerts/templates/
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.712671 django-sodar-core-0.12.0/appalerts/templates/appalerts/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     4155 2021-11-19 12:42:42.000000 django-sodar-core-0.12.0/appalerts/templates/appalerts/alert_list.html
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.712671 django-sodar-core-0.12.0/appalerts/tests/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/appalerts/tests/__init__.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     3770 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/appalerts/tests/test_api.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     5253 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/appalerts/tests/test_models.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2626 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/appalerts/tests/test_permissions.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    10301 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/appalerts/tests/test_ui.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     7017 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/appalerts/tests/test_views.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      817 2021-08-19 13:55:34.000000 django-sodar-core-0.12.0/appalerts/urls.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1615 2022-03-22 08:21:22.000000 django-sodar-core-0.12.0/appalerts/views.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1647 2021-08-19 13:55:34.000000 django-sodar-core-0.12.0/appalerts/views_ajax.py
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.712671 django-sodar-core-0.12.0/bgjobs/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)       99 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/bgjobs/__init__.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      199 2023-02-01 11:39:18.000000 django-sodar-core-0.12.0/bgjobs/admin.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      135 2022-03-22 08:21:22.000000 django-sodar-core-0.12.0/bgjobs/apps.py
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.712671 django-sodar-core-0.12.0/bgjobs/migrations/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2074 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/bgjobs/migrations/0001_initial.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1779 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/bgjobs/migrations/0002_backgroundjoblogentry.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      654 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/bgjobs/migrations/0003_backgroundjob_date_created.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      812 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/bgjobs/migrations/0004_backgroundjob_user.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      375 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/bgjobs/migrations/0005_auto_20190128_1210.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      612 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/bgjobs/migrations/0006_auto_20200526_1657.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/bgjobs/migrations/__init__.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     5640 2022-03-22 08:21:22.000000 django-sodar-core-0.12.0/bgjobs/models.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2120 2022-03-22 08:21:22.000000 django-sodar-core-0.12.0/bgjobs/plugins.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1686 2022-03-22 08:21:22.000000 django-sodar-core-0.12.0/bgjobs/rules.py
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.700670 django-sodar-core-0.12.0/bgjobs/templates/
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.712671 django-sodar-core-0.12.0/bgjobs/templates/bgjobs/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      559 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/bgjobs/templates/bgjobs/_backgroundjob_item.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1193 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/bgjobs/templates/bgjobs/_backgroundjob_list.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      766 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/bgjobs/templates/bgjobs/_details_card.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1050 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/bgjobs/templates/bgjobs/_list_buttons.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1187 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/bgjobs/templates/bgjobs/backgroundjob_confirm_clear.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      949 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/bgjobs/templates/bgjobs/project_backgroundjobs.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      750 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/bgjobs/templates/bgjobs/site_backgroundjobs.html
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.712671 django-sodar-core-0.12.0/bgjobs/templatetags/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/bgjobs/templatetags/__init__.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1330 2022-03-22 08:21:22.000000 django-sodar-core-0.12.0/bgjobs/templatetags/bgjobs_tags.py
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.712671 django-sodar-core-0.12.0/bgjobs/tests/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/bgjobs/tests/__init__.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      469 2022-03-22 08:21:22.000000 django-sodar-core-0.12.0/bgjobs/tests/factories.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      941 2022-03-22 08:21:22.000000 django-sodar-core-0.12.0/bgjobs/urls.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     3921 2022-03-22 08:21:22.000000 django-sodar-core-0.12.0/bgjobs/views.py
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.712671 django-sodar-core-0.12.0/django_sodar_core.egg-info/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     7675 2023-02-03 11:28:15.000000 django-sodar-core-0.12.0/django_sodar_core.egg-info/PKG-INFO
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    14652 2023-02-03 11:28:15.000000 django-sodar-core-0.12.0/django_sodar_core.egg-info/SOURCES.txt
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        1 2023-02-03 11:28:15.000000 django-sodar-core-0.12.0/django_sodar_core.egg-info/dependency_links.txt
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        1 2023-02-03 11:28:15.000000 django-sodar-core-0.12.0/django_sodar_core.egg-info/not-zip-safe
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      664 2023-02-03 11:28:15.000000 django-sodar-core-0.12.0/django_sodar_core.egg-info/requires.txt
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      103 2023-02-03 11:28:15.000000 django-sodar-core-0.12.0/django_sodar_core.egg-info/top_level.txt
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.716671 django-sodar-core-0.12.0/filesfolders/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/filesfolders/__init__.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      461 2023-02-01 11:39:18.000000 django-sodar-core-0.12.0/filesfolders/admin.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)       99 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/filesfolders/apps.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    16324 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/filesfolders/forms.py
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.716671 django-sodar-core-0.12.0/filesfolders/migrations/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     4576 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/filesfolders/migrations/0001_initial.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     3261 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/filesfolders/migrations/0002_auto_20180411_1758.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      753 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/filesfolders/migrations/0003_rename_uuid.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      947 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/filesfolders/migrations/0004_update_uuid.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/filesfolders/migrations/__init__.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     9154 2022-03-22 08:21:22.000000 django-sodar-core-0.12.0/filesfolders/models.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     7163 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/filesfolders/plugins.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1581 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/filesfolders/rules.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     5087 2022-03-22 08:21:22.000000 django-sodar-core-0.12.0/filesfolders/serializers.py
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.700670 django-sodar-core-0.12.0/filesfolders/static/
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.700670 django-sodar-core-0.12.0/filesfolders/static/filesfolders/
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.716671 django-sodar-core-0.12.0/filesfolders/static/filesfolders/js/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      904 2021-11-19 12:42:42.000000 django-sodar-core-0.12.0/filesfolders/static/filesfolders/js/filesfolders.js
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.704671 django-sodar-core-0.12.0/filesfolders/templates/
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.716671 django-sodar-core-0.12.0/filesfolders/templates/filesfolders/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1898 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/filesfolders/templates/filesfolders/_details_card.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1198 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/filesfolders/templates/filesfolders/_file_buttons.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     3027 2021-11-19 12:42:42.000000 django-sodar-core-0.12.0/filesfolders/templates/filesfolders/_file_item.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      756 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/filesfolders/templates/filesfolders/_flag_select.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      904 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/filesfolders/templates/filesfolders/_folder_buttons.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      905 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/filesfolders/templates/filesfolders/_hyperlink_buttons.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2071 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/filesfolders/templates/filesfolders/_list_buttons.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      492 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/filesfolders/templates/filesfolders/_list_header.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2286 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/filesfolders/templates/filesfolders/_search_item.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2194 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/filesfolders/templates/filesfolders/_search_results.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     4398 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/filesfolders/templates/filesfolders/batch_edit_confirm.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1145 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/filesfolders/templates/filesfolders/file_confirm_delete.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2607 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/filesfolders/templates/filesfolders/file_form.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2014 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/filesfolders/templates/filesfolders/folder_confirm_delete.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1981 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/filesfolders/templates/filesfolders/folder_form.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1164 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/filesfolders/templates/filesfolders/hyperlink_confirm_delete.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2094 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/filesfolders/templates/filesfolders/hyperlink_form.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     9792 2022-02-16 09:51:08.000000 django-sodar-core-0.12.0/filesfolders/templates/filesfolders/project_files.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1174 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/filesfolders/templates/filesfolders/public_link.html
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.716671 django-sodar-core-0.12.0/filesfolders/templatetags/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/filesfolders/templatetags/__init__.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2923 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/filesfolders/templatetags/filesfolders_tags.py
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.716671 django-sodar-core-0.12.0/filesfolders/tests/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/filesfolders/tests/__init__.py
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.716671 django-sodar-core-0.12.0/filesfolders/tests/data/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      178 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/filesfolders/tests/data/no_files.zip
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      656 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/filesfolders/tests/data/unpack_test.zip
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    12712 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/filesfolders/tests/test_models.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    29789 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/filesfolders/tests/test_permissions.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    62404 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/filesfolders/tests/test_permissions_api.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     5016 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/filesfolders/tests/test_plugins.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    18413 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/filesfolders/tests/test_ui.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    55153 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/filesfolders/tests/test_views.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    25089 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/filesfolders/tests/test_views_api.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     4403 2023-02-01 11:39:18.000000 django-sodar-core-0.12.0/filesfolders/urls.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      512 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/filesfolders/utils.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    31778 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/filesfolders/views.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     9155 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/filesfolders/views_api.py
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.744671 django-sodar-core-0.12.0/projectroles/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      225 2022-09-23 15:05:02.000000 django-sodar-core-0.12.0/projectroles/__init__.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      498 2023-02-03 11:28:15.744671 django-sodar-core-0.12.0/projectroles/_version.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      270 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/projectroles/admin.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    30563 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/projectroles/app_settings.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)       99 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/projectroles/apps.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2302 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/projectroles/auth_backends.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1936 2022-09-23 15:05:02.000000 django-sodar-core-0.12.0/projectroles/constants.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1377 2021-06-02 12:19:00.000000 django-sodar-core-0.12.0/projectroles/context_processors.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    22957 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/projectroles/email.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    40950 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/projectroles/forms.py
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.720671 django-sodar-core-0.12.0/projectroles/management/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/projectroles/management/__init__.py
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.720671 django-sodar-core-0.12.0/projectroles/management/commands/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/projectroles/management/commands/__init__.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     4491 2021-11-19 12:42:42.000000 django-sodar-core-0.12.0/projectroles/management/commands/addremotesite.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    10215 2023-01-10 09:22:19.000000 django-sodar-core-0.12.0/projectroles/management/commands/batchupdateroles.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1510 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/projectroles/management/commands/cleanappsettings.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     3298 2022-09-23 15:05:02.000000 django-sodar-core-0.12.0/projectroles/management/commands/geticons.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1057 2021-11-19 12:42:42.000000 django-sodar-core-0.12.0/projectroles/management/commands/syncgroups.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2191 2022-09-23 15:05:02.000000 django-sodar-core-0.12.0/projectroles/management/commands/syncmodifyapi.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     3168 2021-11-19 12:42:42.000000 django-sodar-core-0.12.0/projectroles/management/commands/syncremote.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2033 2022-02-02 10:25:46.000000 django-sodar-core-0.12.0/projectroles/management/logging.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      998 2021-11-19 12:42:42.000000 django-sodar-core-0.12.0/projectroles/middleware.py
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.724671 django-sodar-core-0.12.0/projectroles/migrations/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     5623 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/projectroles/migrations/0001_initial.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     3702 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/projectroles/migrations/0002_auto_20180411_1758.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1430 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/projectroles/migrations/0003_populate_roles.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1057 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/projectroles/migrations/0004_rename_uuid.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1403 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/projectroles/migrations/0005_update_uuid.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2994 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/projectroles/migrations/0006_add_remote_projects.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      792 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/projectroles/migrations/0007_fix_remoteproject_foreign_key.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1083 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/projectroles/migrations/0008_auto_20190426_0606.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2651 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/projectroles/migrations/0009_rename_projectsetting.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      795 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/projectroles/migrations/0010_update_appsetting.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      565 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/projectroles/migrations/0011_remove_indexes.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      736 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/projectroles/migrations/0012_update_remotesite.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      491 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/projectroles/migrations/0013_update_appsetting_type.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      594 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/projectroles/migrations/0014_update_appsetting_value_json.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      609 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/projectroles/migrations/0015_fix_appsetting_constraint.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      645 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/projectroles/migrations/0016_app_plugin_field_none.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1361 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/projectroles/migrations/0017_project_full_title.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      458 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/projectroles/migrations/0018_update_jsonfield.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      520 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/projectroles/migrations/0019_project_public_guest_access.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1167 2021-11-19 12:42:42.000000 django-sodar-core-0.12.0/projectroles/migrations/0020_project_has_public_children.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      351 2022-09-23 15:05:02.000000 django-sodar-core-0.12.0/projectroles/migrations/0021_remove_project_submit_status.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      938 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/projectroles/migrations/0022_role_rank.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      431 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/projectroles/migrations/0023_project_archive.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/projectroles/migrations/__init__.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    37338 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/projectroles/models.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    24940 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/projectroles/plugins.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1599 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/projectroles/project_tags.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    44581 2022-09-23 15:05:02.000000 django-sodar-core-0.12.0/projectroles/remote_projects.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     6216 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/projectroles/rules.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    17721 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/projectroles/serializers.py
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.704671 django-sodar-core-0.12.0/projectroles/static/
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.704671 django-sodar-core-0.12.0/projectroles/static/projectroles/
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.724671 django-sodar-core-0.12.0/projectroles/static/projectroles/css/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2073 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/projectroles/static/projectroles/css/pagedown.css
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    12834 2022-10-14 08:30:26.000000 django-sodar-core-0.12.0/projectroles/static/projectroles/css/projectroles.css
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    13033 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/projectroles/static/projectroles/css/shepherd-theme-sodar.css
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.724671 django-sodar-core-0.12.0/projectroles/static/projectroles/images/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     7465 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/projectroles/static/projectroles/images/wmd-buttons.png
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.724671 django-sodar-core-0.12.0/projectroles/static/projectroles/js/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     5079 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/projectroles/static/projectroles/js/autocomplete_redirect.js
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    22894 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/projectroles/static/projectroles/js/iconify.min.js
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    14833 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/projectroles/static/projectroles/js/project_list.js
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      970 2022-02-16 09:51:08.000000 django-sodar-core-0.12.0/projectroles/static/projectroles/js/project_star.js
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     9675 2022-04-19 07:56:30.000000 django-sodar-core-0.12.0/projectroles/static/projectroles/js/projectroles.js
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2193 2021-11-19 12:42:42.000000 django-sodar-core-0.12.0/projectroles/static/projectroles/js/search.js
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.704671 django-sodar-core-0.12.0/projectroles/templates/
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.728671 django-sodar-core-0.12.0/projectroles/templates/projectroles/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      338 2021-05-06 14:50:32.000000 django-sodar-core-0.12.0/projectroles/templates/projectroles/_appalerts_include.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      235 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/projectroles/templates/projectroles/_footer.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1502 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/projectroles/templates/projectroles/_messages.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      905 2022-02-16 09:51:08.000000 django-sodar-core-0.12.0/projectroles/templates/projectroles/_modal.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1809 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/projectroles/templates/projectroles/_pagination.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     4085 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/projectroles/templates/projectroles/_project_header.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      878 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/projectroles/templates/projectroles/_project_invites_buttons.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     3767 2022-03-03 13:27:56.000000 django-sodar-core-0.12.0/projectroles/templates/projectroles/_project_list.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     4546 2022-04-19 07:56:30.000000 django-sodar-core-0.12.0/projectroles/templates/projectroles/_project_menu_btn.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1313 2023-01-09 16:11:52.000000 django-sodar-core-0.12.0/projectroles/templates/projectroles/_project_navi.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      972 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/projectroles/templates/projectroles/_project_roles_buttons.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      868 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/projectroles/templates/projectroles/_project_roles_buttons_owner.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      839 2021-11-19 12:42:42.000000 django-sodar-core-0.12.0/projectroles/templates/projectroles/_project_search_item.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     5976 2022-04-19 07:56:30.000000 django-sodar-core-0.12.0/projectroles/templates/projectroles/_project_sidebar.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      888 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/projectroles/templates/projectroles/_remote_project_list_item.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1477 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/projectroles/templates/projectroles/_remote_site_buttons.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1271 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/projectroles/templates/projectroles/_remote_site_list_item.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1828 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/projectroles/templates/projectroles/_role_list_buttons.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)       15 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/projectroles/templates/projectroles/_search_footer.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1297 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/projectroles/templates/projectroles/_search_header.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     5069 2022-02-02 10:25:46.000000 django-sodar-core-0.12.0/projectroles/templates/projectroles/_site_titlebar.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     4132 2022-02-02 10:25:46.000000 django-sodar-core-0.12.0/projectroles/templates/projectroles/_site_titlebar_dropdown.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     4941 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/projectroles/templates/projectroles/base.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     5900 2021-06-02 14:40:08.000000 django-sodar-core-0.12.0/projectroles/templates/projectroles/base_site.html
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.728671 django-sodar-core-0.12.0/projectroles/templates/projectroles/error/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      341 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/projectroles/templates/projectroles/error/403_csrf.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      396 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/projectroles/templates/projectroles/error/404.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      451 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/projectroles/templates/projectroles/error/500.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2894 2022-02-16 09:51:08.000000 django-sodar-core-0.12.0/projectroles/templates/projectroles/home.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1068 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/projectroles/templates/projectroles/invite_revoke_confirm.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     3905 2022-09-23 15:05:02.000000 django-sodar-core-0.12.0/projectroles/templates/projectroles/login.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2430 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/projectroles/templates/projectroles/project_archive_confirm.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      991 2022-02-16 09:51:08.000000 django-sodar-core-0.12.0/projectroles/templates/projectroles/project_base.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     9206 2022-02-16 09:51:08.000000 django-sodar-core-0.12.0/projectroles/templates/projectroles/project_detail.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     3148 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/projectroles/templates/projectroles/project_form.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     3985 2022-02-16 09:51:08.000000 django-sodar-core-0.12.0/projectroles/templates/projectroles/project_invites.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     6357 2022-02-16 09:51:08.000000 django-sodar-core-0.12.0/projectroles/templates/projectroles/project_roles.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2293 2022-02-16 09:51:08.000000 django-sodar-core-0.12.0/projectroles/templates/projectroles/projectinvite_form.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     3354 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/projectroles/templates/projectroles/remote_projects.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     3535 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/projectroles/templates/projectroles/remote_sites.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    10385 2021-09-20 10:55:06.000000 django-sodar-core-0.12.0/projectroles/templates/projectroles/remoteproject_sync.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2885 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/projectroles/templates/projectroles/remoteproject_update.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1183 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/projectroles/templates/projectroles/remotesite_confirm_delete.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1195 2022-09-23 15:05:02.000000 django-sodar-core-0.12.0/projectroles/templates/projectroles/remotesite_form.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1043 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/projectroles/templates/projectroles/roleassignment_confirm_delete.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2725 2022-09-23 15:05:02.000000 django-sodar-core-0.12.0/projectroles/templates/projectroles/roleassignment_form.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1043 2022-09-23 15:05:02.000000 django-sodar-core-0.12.0/projectroles/templates/projectroles/roleassignment_owner_transfer.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1496 2021-05-06 14:50:32.000000 django-sodar-core-0.12.0/projectroles/templates/projectroles/search_advanced.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     7333 2022-03-22 08:21:22.000000 django-sodar-core-0.12.0/projectroles/templates/projectroles/search_results.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      903 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/projectroles/templates/projectroles/user_form.html
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.732671 django-sodar-core-0.12.0/projectroles/templatetags/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/projectroles/templatetags/__init__.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     9839 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/projectroles/templatetags/projectroles_common_tags.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     9720 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/projectroles/templatetags/projectroles_tags.py
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.732671 django-sodar-core-0.12.0/projectroles/tests/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/projectroles/tests/__init__.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    32385 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/projectroles/tests/test_app_settings.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    20280 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/projectroles/tests/test_commands.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    17161 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/projectroles/tests/test_email.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    45196 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/projectroles/tests/test_models.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    75641 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/projectroles/tests/test_permissions.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     8572 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/projectroles/tests/test_permissions_ajax.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    44521 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/projectroles/tests/test_permissions_api.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    76519 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/projectroles/tests/test_remote_projects_api.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    21931 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/projectroles/tests/test_templatetags.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    64344 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/projectroles/tests/test_ui.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)   153498 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/projectroles/tests/test_views.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    14879 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/projectroles/tests/test_views_ajax.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)   124566 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/projectroles/tests/test_views_api.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     8703 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/projectroles/urls.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2834 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/projectroles/utils.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)   107842 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/projectroles/views.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    18698 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/projectroles/views_ajax.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    39863 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/projectroles/views_api.py
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.732671 django-sodar-core-0.12.0/requirements/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1559 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/requirements/base.txt
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      565 2023-02-03 11:28:15.744671 django-sodar-core-0.12.0/setup.cfg
--rwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)     2652 2022-09-23 15:05:02.000000 django-sodar-core-0.12.0/setup.py
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.732671 django-sodar-core-0.12.0/siteinfo/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/siteinfo/__init__.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)       91 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/siteinfo/apps.py
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.732671 django-sodar-core-0.12.0/siteinfo/migrations/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/siteinfo/migrations/__init__.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      713 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/siteinfo/plugins.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      419 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/siteinfo/rules.py
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.704671 django-sodar-core-0.12.0/siteinfo/templates/
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.732671 django-sodar-core-0.12.0/siteinfo/templates/siteinfo/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1222 2021-08-19 13:55:34.000000 django-sodar-core-0.12.0/siteinfo/templates/siteinfo/_app_stats.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      731 2022-03-11 12:36:54.000000 django-sodar-core-0.12.0/siteinfo/templates/siteinfo/_plugin_settings.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     8797 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/siteinfo/templates/siteinfo/site_info.html
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.732671 django-sodar-core-0.12.0/siteinfo/templatetags/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-08-19 13:55:34.000000 django-sodar-core-0.12.0/siteinfo/templatetags/__init__.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      398 2021-08-19 13:55:34.000000 django-sodar-core-0.12.0/siteinfo/templatetags/siteinfo_tags.py
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.732671 django-sodar-core-0.12.0/siteinfo/tests/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/siteinfo/tests/__init__.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1172 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/siteinfo/tests/test_permissions.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1096 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/siteinfo/tests/test_views.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      176 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/siteinfo/urls.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     5804 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/siteinfo/views.py
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.732671 django-sodar-core-0.12.0/sodarcache/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/sodarcache/__init__.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)       29 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/sodarcache/admin.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     6578 2023-01-30 14:57:47.000000 django-sodar-core-0.12.0/sodarcache/api.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)       95 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/sodarcache/apps.py
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.704671 django-sodar-core-0.12.0/sodarcache/management/
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.732671 django-sodar-core-0.12.0/sodarcache/management/commands/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2015 2023-01-10 09:22:19.000000 django-sodar-core-0.12.0/sodarcache/management/commands/deletecache.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2544 2023-01-10 09:22:19.000000 django-sodar-core-0.12.0/sodarcache/management/commands/synccache.py
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.736671 django-sodar-core-0.12.0/sodarcache/migrations/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1915 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/sodarcache/migrations/0001_initial.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      648 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/sodarcache/migrations/0002_make_user_optional.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      493 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/sodarcache/migrations/0003_add_index.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      417 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/sodarcache/migrations/0004_update_jsonfield.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/sodarcache/migrations/__init__.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2285 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/sodarcache/models.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      710 2023-01-09 16:11:52.000000 django-sodar-core-0.12.0/sodarcache/plugins.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      910 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/sodarcache/rules.py
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.736671 django-sodar-core-0.12.0/sodarcache/tests/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/sodarcache/tests/__init__.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    10454 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/sodarcache/tests/test_api.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     3290 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/sodarcache/tests/test_models.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     6770 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/sodarcache/tests/test_views_api.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      573 2023-01-09 16:11:52.000000 django-sodar-core-0.12.0/sodarcache/urls.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2863 2023-01-09 16:11:52.000000 django-sodar-core-0.12.0/sodarcache/views_api.py
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.736671 django-sodar-core-0.12.0/timeline/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/timeline/__init__.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      229 2023-02-01 11:39:18.000000 django-sodar-core-0.12.0/timeline/admin.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    12643 2022-09-23 15:05:02.000000 django-sodar-core-0.12.0/timeline/api.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)       91 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/timeline/apps.py
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.736671 django-sodar-core-0.12.0/timeline/migrations/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     3482 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/timeline/migrations/0001_initial.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      699 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/timeline/migrations/0002_projectevent_user.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      462 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/timeline/migrations/0003_rename_uuid.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      728 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/timeline/migrations/0004_update_uuid.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      874 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/timeline/migrations/0005_update_jsonfield.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      646 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/timeline/migrations/0006_update_user_optional.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      653 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/timeline/migrations/0007_allow_null_project.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      530 2022-04-19 07:56:30.000000 django-sodar-core-0.12.0/timeline/migrations/0008_projectevent_plugin.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      462 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/timeline/migrations/0009_create_status_uuid.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      571 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/timeline/migrations/0010_populate_uuid.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      460 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/timeline/migrations/0011_make_uuid_unique.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/timeline/migrations/__init__.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    10087 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/timeline/models.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     6117 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/timeline/plugins.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1219 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/timeline/rules.py
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.704671 django-sodar-core-0.12.0/timeline/static/
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.704671 django-sodar-core-0.12.0/timeline/static/timeline/
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.736671 django-sodar-core-0.12.0/timeline/static/timeline/css/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2044 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/timeline/static/timeline/css/timeline.css
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.736671 django-sodar-core-0.12.0/timeline/static/timeline/js/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     3406 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/timeline/static/timeline/js/timeline.js
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.704671 django-sodar-core-0.12.0/timeline/templates/
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.736671 django-sodar-core-0.12.0/timeline/templates/timeline/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1135 2022-02-16 09:51:08.000000 django-sodar-core-0.12.0/timeline/templates/timeline/_details_card.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      137 2022-02-02 10:25:46.000000 django-sodar-core-0.12.0/timeline/templates/timeline/_list_header.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1957 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/timeline/templates/timeline/_list_item.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      382 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/timeline/templates/timeline/_project_badge.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1179 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/timeline/templates/timeline/_search_item.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1672 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/timeline/templates/timeline/_search_results.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     3388 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/timeline/templates/timeline/timeline.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     4103 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/timeline/templates/timeline/timeline_site.html
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.740671 django-sodar-core-0.12.0/timeline/templatetags/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/timeline/templatetags/__init__.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     4267 2023-01-13 09:56:17.000000 django-sodar-core-0.12.0/timeline/templatetags/timeline_tags.py
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.740671 django-sodar-core-0.12.0/timeline/tests/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/timeline/tests/__init__.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    20627 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/timeline/tests/test_api.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    17835 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/timeline/tests/test_models.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     5539 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/timeline/tests/test_permissions.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    14440 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/timeline/tests/test_permissions_ajax.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     9584 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/timeline/tests/test_templatetags.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    16679 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/timeline/tests/test_ui.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     7483 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/timeline/tests/test_views.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    11804 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/timeline/tests/test_views_ajax.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1865 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/timeline/urls.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     4584 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/timeline/views.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     9776 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/timeline/views_ajax.py
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.740671 django-sodar-core-0.12.0/tokens/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/tokens/__init__.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)       87 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/tokens/apps.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      428 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/tokens/forms.py
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.740671 django-sodar-core-0.12.0/tokens/migrations/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/tokens/migrations/__init__.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      424 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/tokens/plugins.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      159 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/tokens/rules.py
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.704671 django-sodar-core-0.12.0/tokens/templates/
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.740671 django-sodar-core-0.12.0/tokens/templates/tokens/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      375 2021-07-01 11:56:22.000000 django-sodar-core-0.12.0/tokens/templates/tokens/_token_item.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      486 2021-06-14 15:43:33.000000 django-sodar-core-0.12.0/tokens/templates/tokens/_token_item_buttons.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      978 2021-07-01 11:56:22.000000 django-sodar-core-0.12.0/tokens/templates/tokens/token_confirm_delete.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      851 2021-07-01 11:56:22.000000 django-sodar-core-0.12.0/tokens/templates/tokens/token_create.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1227 2022-03-03 13:27:56.000000 django-sodar-core-0.12.0/tokens/templates/tokens/token_create_success.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1781 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/tokens/templates/tokens/token_list.html
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.740671 django-sodar-core-0.12.0/tokens/tests/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/tokens/tests/__init__.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2448 2021-07-01 11:56:22.000000 django-sodar-core-0.12.0/tokens/tests/test_permissions.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1758 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/tokens/tests/test_ui.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     3454 2023-01-09 16:39:55.000000 django-sodar-core-0.12.0/tokens/tests/test_views.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      417 2022-03-03 13:27:56.000000 django-sodar-core-0.12.0/tokens/urls.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1966 2022-03-03 13:27:56.000000 django-sodar-core-0.12.0/tokens/views.py
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.740671 django-sodar-core-0.12.0/userprofile/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/userprofile/__init__.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)       97 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/userprofile/apps.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     6614 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/userprofile/forms.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1258 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/userprofile/plugins.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      430 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/userprofile/rules.py
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.704671 django-sodar-core-0.12.0/userprofile/templates/
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.740671 django-sodar-core-0.12.0/userprofile/templates/userprofile/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     3245 2021-07-01 11:56:22.000000 django-sodar-core-0.12.0/userprofile/templates/userprofile/detail.html
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1249 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/userprofile/templates/userprofile/settings_form.html
-drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-02-03 11:28:15.740671 django-sodar-core-0.12.0/userprofile/tests/
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.12.0/userprofile/tests/__init__.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2166 2021-05-06 08:16:48.000000 django-sodar-core-0.12.0/userprofile/tests/test_permissions.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      783 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/userprofile/tests/test_ui.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     7792 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/userprofile/tests/test_views.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      334 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/userprofile/urls.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     3180 2023-02-03 11:26:05.000000 django-sodar-core-0.12.0/userprofile/views.py
--rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    81295 2022-12-16 16:07:03.000000 django-sodar-core-0.12.0/versioneer.py
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.656530 django-sodar-core-0.13.0/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      397 2023-01-10 09:22:19.000000 django-sodar-core-0.13.0/AUTHORS.rst
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1093 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/LICENSE
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      691 2022-09-23 15:05:02.000000 django-sodar-core-0.13.0/MANIFEST.in
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     7675 2023-06-01 12:22:25.656530 django-sodar-core-0.13.0/PKG-INFO
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     6703 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/README.rst
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.624530 django-sodar-core-0.13.0/adminalerts/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/adminalerts/__init__.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      127 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/adminalerts/admin.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)       97 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/adminalerts/apps.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2070 2023-02-03 11:26:05.000000 django-sodar-core-0.13.0/adminalerts/forms.py
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.624530 django-sodar-core-0.13.0/adminalerts/migrations/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1238 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/adminalerts/migrations/0001_initial.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      726 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/adminalerts/migrations/0002_adminalert_user.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1134 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/adminalerts/migrations/0003_auto_20180802_1558.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      464 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/adminalerts/migrations/0004_rename_uuid.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      524 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/adminalerts/migrations/0005_update_uuid.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      508 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/adminalerts/migrations/0006_adminalert_require_auth.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/adminalerts/migrations/__init__.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2709 2023-02-03 11:26:05.000000 django-sodar-core-0.13.0/adminalerts/models.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2499 2023-02-03 11:26:05.000000 django-sodar-core-0.13.0/adminalerts/plugins.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      741 2023-02-03 11:26:05.000000 django-sodar-core-0.13.0/adminalerts/rules.py
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.616530 django-sodar-core-0.13.0/adminalerts/templates/
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.624530 django-sodar-core-0.13.0/adminalerts/templates/adminalerts/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      923 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/adminalerts/templates/adminalerts/adminalert_confirm_delete.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1064 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/adminalerts/templates/adminalerts/adminalert_form.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1598 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/adminalerts/templates/adminalerts/alert_detail.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     6208 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/adminalerts/templates/adminalerts/alert_list.html
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.624530 django-sodar-core-0.13.0/adminalerts/tests/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/adminalerts/tests/__init__.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2145 2023-02-03 11:26:05.000000 django-sodar-core-0.13.0/adminalerts/tests/test_models.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     4999 2023-02-03 11:26:05.000000 django-sodar-core-0.13.0/adminalerts/tests/test_permissions.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1768 2023-02-03 11:26:05.000000 django-sodar-core-0.13.0/adminalerts/tests/test_permissions_ajax.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2096 2023-02-03 11:26:05.000000 django-sodar-core-0.13.0/adminalerts/tests/test_plugins.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     3287 2023-02-03 11:26:05.000000 django-sodar-core-0.13.0/adminalerts/tests/test_ui.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     7195 2023-02-03 11:26:05.000000 django-sodar-core-0.13.0/adminalerts/tests/test_views.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1491 2023-02-03 11:26:05.000000 django-sodar-core-0.13.0/adminalerts/tests/test_views_ajax.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1046 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/adminalerts/urls.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2947 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/adminalerts/views.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      863 2023-02-03 11:26:05.000000 django-sodar-core-0.13.0/adminalerts/views_ajax.py
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.624530 django-sodar-core-0.13.0/appalerts/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/appalerts/__init__.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      132 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/appalerts/admin.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     3024 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/appalerts/api.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)       93 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/appalerts/apps.py
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.624530 django-sodar-core-0.13.0/appalerts/migrations/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2158 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/appalerts/migrations/0001_initial.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/appalerts/migrations/__init__.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     3449 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/appalerts/models.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1359 2021-05-06 14:50:32.000000 django-sodar-core-0.13.0/appalerts/plugins.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      457 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/appalerts/rules.py
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.616530 django-sodar-core-0.13.0/appalerts/static/
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.616530 django-sodar-core-0.13.0/appalerts/static/appalerts/
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.624530 django-sodar-core-0.13.0/appalerts/static/appalerts/js/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2119 2021-09-20 10:55:06.000000 django-sodar-core-0.13.0/appalerts/static/appalerts/js/appalerts.js
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2677 2021-08-19 13:55:34.000000 django-sodar-core-0.13.0/appalerts/static/appalerts/js/appalerts_list.js
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.616530 django-sodar-core-0.13.0/appalerts/templates/
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.624530 django-sodar-core-0.13.0/appalerts/templates/appalerts/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     5999 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/appalerts/templates/appalerts/alert_list.html
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.628530 django-sodar-core-0.13.0/appalerts/tests/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/appalerts/tests/__init__.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     4356 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/appalerts/tests/test_api.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     5253 2023-02-03 11:26:05.000000 django-sodar-core-0.13.0/appalerts/tests/test_models.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2626 2023-02-03 11:26:05.000000 django-sodar-core-0.13.0/appalerts/tests/test_permissions.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    12653 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/appalerts/tests/test_ui.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     7017 2023-02-03 11:26:05.000000 django-sodar-core-0.13.0/appalerts/tests/test_views.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      989 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/appalerts/urls.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2306 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/appalerts/views.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1647 2021-08-19 13:55:34.000000 django-sodar-core-0.13.0/appalerts/views_ajax.py
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.628530 django-sodar-core-0.13.0/bgjobs/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/bgjobs/__init__.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      199 2023-02-01 11:39:18.000000 django-sodar-core-0.13.0/bgjobs/admin.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      135 2022-03-22 08:21:22.000000 django-sodar-core-0.13.0/bgjobs/apps.py
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.628530 django-sodar-core-0.13.0/bgjobs/migrations/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2074 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/bgjobs/migrations/0001_initial.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1779 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/bgjobs/migrations/0002_backgroundjoblogentry.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      654 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/bgjobs/migrations/0003_backgroundjob_date_created.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      812 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/bgjobs/migrations/0004_backgroundjob_user.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      375 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/bgjobs/migrations/0005_auto_20190128_1210.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      612 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/bgjobs/migrations/0006_auto_20200526_1657.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/bgjobs/migrations/__init__.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     5640 2022-03-22 08:21:22.000000 django-sodar-core-0.13.0/bgjobs/models.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2120 2022-03-22 08:21:22.000000 django-sodar-core-0.13.0/bgjobs/plugins.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1686 2022-03-22 08:21:22.000000 django-sodar-core-0.13.0/bgjobs/rules.py
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.616530 django-sodar-core-0.13.0/bgjobs/templates/
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.628530 django-sodar-core-0.13.0/bgjobs/templates/bgjobs/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      559 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/bgjobs/templates/bgjobs/_backgroundjob_item.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1193 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/bgjobs/templates/bgjobs/_backgroundjob_list.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      766 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/bgjobs/templates/bgjobs/_details_card.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1050 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/bgjobs/templates/bgjobs/_list_buttons.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1187 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/bgjobs/templates/bgjobs/backgroundjob_confirm_clear.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      949 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/bgjobs/templates/bgjobs/project_backgroundjobs.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      750 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/bgjobs/templates/bgjobs/site_backgroundjobs.html
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.628530 django-sodar-core-0.13.0/bgjobs/templatetags/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/bgjobs/templatetags/__init__.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1330 2022-03-22 08:21:22.000000 django-sodar-core-0.13.0/bgjobs/templatetags/bgjobs_tags.py
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.628530 django-sodar-core-0.13.0/bgjobs/tests/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/bgjobs/tests/__init__.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      469 2022-03-22 08:21:22.000000 django-sodar-core-0.13.0/bgjobs/tests/factories.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      902 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/bgjobs/urls.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     3921 2022-03-22 08:21:22.000000 django-sodar-core-0.13.0/bgjobs/views.py
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.628530 django-sodar-core-0.13.0/django_sodar_core.egg-info/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     7675 2023-06-01 12:22:25.000000 django-sodar-core-0.13.0/django_sodar_core.egg-info/PKG-INFO
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    15077 2023-06-01 12:22:25.000000 django-sodar-core-0.13.0/django_sodar_core.egg-info/SOURCES.txt
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        1 2023-06-01 12:22:25.000000 django-sodar-core-0.13.0/django_sodar_core.egg-info/dependency_links.txt
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        1 2023-06-01 12:22:25.000000 django-sodar-core-0.13.0/django_sodar_core.egg-info/not-zip-safe
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      716 2023-06-01 12:22:25.000000 django-sodar-core-0.13.0/django_sodar_core.egg-info/requires.txt
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      103 2023-06-01 12:22:25.000000 django-sodar-core-0.13.0/django_sodar_core.egg-info/top_level.txt
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.628530 django-sodar-core-0.13.0/filesfolders/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/filesfolders/__init__.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      461 2023-02-01 11:39:18.000000 django-sodar-core-0.13.0/filesfolders/admin.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)       99 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/filesfolders/apps.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    16324 2023-02-03 11:26:05.000000 django-sodar-core-0.13.0/filesfolders/forms.py
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.632530 django-sodar-core-0.13.0/filesfolders/migrations/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     4576 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/filesfolders/migrations/0001_initial.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     3261 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/filesfolders/migrations/0002_auto_20180411_1758.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      753 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/filesfolders/migrations/0003_rename_uuid.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      947 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/filesfolders/migrations/0004_update_uuid.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/filesfolders/migrations/__init__.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     9154 2022-03-22 08:21:22.000000 django-sodar-core-0.13.0/filesfolders/models.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     7127 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/filesfolders/plugins.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1581 2023-02-03 12:25:54.000000 django-sodar-core-0.13.0/filesfolders/rules.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     5087 2022-03-22 08:21:22.000000 django-sodar-core-0.13.0/filesfolders/serializers.py
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.616530 django-sodar-core-0.13.0/filesfolders/static/
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.616530 django-sodar-core-0.13.0/filesfolders/static/filesfolders/
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.632530 django-sodar-core-0.13.0/filesfolders/static/filesfolders/js/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      904 2021-11-19 12:42:42.000000 django-sodar-core-0.13.0/filesfolders/static/filesfolders/js/filesfolders.js
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.616530 django-sodar-core-0.13.0/filesfolders/templates/
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.632530 django-sodar-core-0.13.0/filesfolders/templates/filesfolders/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1898 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/filesfolders/templates/filesfolders/_details_card.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1198 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/filesfolders/templates/filesfolders/_file_buttons.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     3027 2021-11-19 12:42:42.000000 django-sodar-core-0.13.0/filesfolders/templates/filesfolders/_file_item.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      756 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/filesfolders/templates/filesfolders/_flag_select.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      904 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/filesfolders/templates/filesfolders/_folder_buttons.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      905 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/filesfolders/templates/filesfolders/_hyperlink_buttons.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2071 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/filesfolders/templates/filesfolders/_list_buttons.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      492 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/filesfolders/templates/filesfolders/_list_header.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2286 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/filesfolders/templates/filesfolders/_search_item.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2194 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/filesfolders/templates/filesfolders/_search_results.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     4398 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/filesfolders/templates/filesfolders/batch_edit_confirm.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1145 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/filesfolders/templates/filesfolders/file_confirm_delete.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2607 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/filesfolders/templates/filesfolders/file_form.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2014 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/filesfolders/templates/filesfolders/folder_confirm_delete.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1981 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/filesfolders/templates/filesfolders/folder_form.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1164 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/filesfolders/templates/filesfolders/hyperlink_confirm_delete.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2094 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/filesfolders/templates/filesfolders/hyperlink_form.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     9780 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/filesfolders/templates/filesfolders/project_files.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1174 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/filesfolders/templates/filesfolders/public_link.html
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.632530 django-sodar-core-0.13.0/filesfolders/templatetags/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/filesfolders/templatetags/__init__.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2923 2023-02-03 11:26:05.000000 django-sodar-core-0.13.0/filesfolders/templatetags/filesfolders_tags.py
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.632530 django-sodar-core-0.13.0/filesfolders/tests/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/filesfolders/tests/__init__.py
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.632530 django-sodar-core-0.13.0/filesfolders/tests/data/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      178 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/filesfolders/tests/data/no_files.zip
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      656 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/filesfolders/tests/data/unpack_test.zip
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    12712 2023-02-03 12:25:54.000000 django-sodar-core-0.13.0/filesfolders/tests/test_models.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    35624 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/filesfolders/tests/test_permissions.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    68508 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/filesfolders/tests/test_permissions_api.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     4992 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/filesfolders/tests/test_plugins.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    21523 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/filesfolders/tests/test_ui.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    54847 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/filesfolders/tests/test_views.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    25089 2023-02-03 12:25:54.000000 django-sodar-core-0.13.0/filesfolders/tests/test_views_api.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     4103 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/filesfolders/urls.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      512 2023-02-03 11:26:05.000000 django-sodar-core-0.13.0/filesfolders/utils.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    31777 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/filesfolders/views.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     9155 2023-02-03 11:26:05.000000 django-sodar-core-0.13.0/filesfolders/views_api.py
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.656530 django-sodar-core-0.13.0/projectroles/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      225 2023-03-20 10:05:50.000000 django-sodar-core-0.13.0/projectroles/__init__.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      498 2023-06-01 12:22:25.656530 django-sodar-core-0.13.0/projectroles/_version.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      270 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/projectroles/admin.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    30732 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/app_settings.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)       99 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/projectroles/apps.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2302 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/projectroles/auth_backends.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2019 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/constants.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2048 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/context_processors.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    22953 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/email.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    47848 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/forms.py
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.636530 django-sodar-core-0.13.0/projectroles/management/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/projectroles/management/__init__.py
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.636530 django-sodar-core-0.13.0/projectroles/management/commands/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/projectroles/management/commands/__init__.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     4791 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/management/commands/addremotesite.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    10284 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/management/commands/batchupdateroles.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2947 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/management/commands/cleanappsettings.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     3365 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/management/commands/geticons.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1124 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/management/commands/syncgroups.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2165 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/management/commands/syncmodifyapi.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     3239 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/management/commands/syncremote.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2033 2022-02-02 10:25:46.000000 django-sodar-core-0.13.0/projectroles/management/logging.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      998 2021-11-19 12:42:42.000000 django-sodar-core-0.13.0/projectroles/middleware.py
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.640530 django-sodar-core-0.13.0/projectroles/migrations/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     5623 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/projectroles/migrations/0001_initial.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     3702 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/projectroles/migrations/0002_auto_20180411_1758.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1430 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/projectroles/migrations/0003_populate_roles.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1057 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/projectroles/migrations/0004_rename_uuid.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1403 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/projectroles/migrations/0005_update_uuid.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2994 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/projectroles/migrations/0006_add_remote_projects.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      792 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/projectroles/migrations/0007_fix_remoteproject_foreign_key.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1083 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/projectroles/migrations/0008_auto_20190426_0606.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2651 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/projectroles/migrations/0009_rename_projectsetting.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      795 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/projectroles/migrations/0010_update_appsetting.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      565 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/projectroles/migrations/0011_remove_indexes.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      736 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/projectroles/migrations/0012_update_remotesite.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      491 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/projectroles/migrations/0013_update_appsetting_type.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      594 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/projectroles/migrations/0014_update_appsetting_value_json.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      609 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/projectroles/migrations/0015_fix_appsetting_constraint.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      645 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/projectroles/migrations/0016_app_plugin_field_none.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1361 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/projectroles/migrations/0017_project_full_title.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      458 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/projectroles/migrations/0018_update_jsonfield.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      520 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/projectroles/migrations/0019_project_public_guest_access.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1167 2021-11-19 12:42:42.000000 django-sodar-core-0.13.0/projectroles/migrations/0020_project_has_public_children.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      351 2022-09-23 15:05:02.000000 django-sodar-core-0.13.0/projectroles/migrations/0021_remove_project_submit_status.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      938 2023-02-03 12:25:54.000000 django-sodar-core-0.13.0/projectroles/migrations/0022_role_rank.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      431 2023-02-03 12:25:54.000000 django-sodar-core-0.13.0/projectroles/migrations/0023_project_archive.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      773 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/migrations/0024_project_star_app_setting.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      315 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/migrations/0025_delete_projectusertag.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1292 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/migrations/0026_delete_category_settings.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      966 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/migrations/0027_role_project_type.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1100 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/migrations/0028_populate_finder_role.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/projectroles/migrations/__init__.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    42510 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/models.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    25954 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/plugins.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    45801 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/remote_projects.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     6401 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/rules.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    20834 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/serializers.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      581 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/signals.py
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.620530 django-sodar-core-0.13.0/projectroles/static/
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.620530 django-sodar-core-0.13.0/projectroles/static/projectroles/
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.640530 django-sodar-core-0.13.0/projectroles/static/projectroles/css/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2073 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/projectroles/static/projectroles/css/pagedown.css
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    12837 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/static/projectroles/css/projectroles.css
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    13033 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/projectroles/static/projectroles/css/shepherd-theme-sodar.css
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.640530 django-sodar-core-0.13.0/projectroles/static/projectroles/images/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     7465 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/projectroles/static/projectroles/images/wmd-buttons.png
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.640530 django-sodar-core-0.13.0/projectroles/static/projectroles/js/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     5079 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/projectroles/static/projectroles/js/autocomplete_redirect.js
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    22894 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/projectroles/static/projectroles/js/iconify.min.js
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     4253 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/static/projectroles/js/project_form.js
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    15626 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/static/projectroles/js/project_list.js
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      970 2022-02-16 09:51:08.000000 django-sodar-core-0.13.0/projectroles/static/projectroles/js/project_star.js
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     9675 2022-04-19 07:56:30.000000 django-sodar-core-0.13.0/projectroles/static/projectroles/js/projectroles.js
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2193 2021-11-19 12:42:42.000000 django-sodar-core-0.13.0/projectroles/static/projectroles/js/search.js
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1388 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/tasks.py
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.620530 django-sodar-core-0.13.0/projectroles/templates/
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.644530 django-sodar-core-0.13.0/projectroles/templates/projectroles/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      338 2021-05-06 14:50:32.000000 django-sodar-core-0.13.0/projectroles/templates/projectroles/_appalerts_include.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      235 2023-04-24 14:41:39.000000 django-sodar-core-0.13.0/projectroles/templates/projectroles/_footer.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1502 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/projectroles/templates/projectroles/_messages.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      905 2022-02-16 09:51:08.000000 django-sodar-core-0.13.0/projectroles/templates/projectroles/_modal.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1809 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/projectroles/templates/projectroles/_pagination.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     4085 2023-02-03 12:25:54.000000 django-sodar-core-0.13.0/projectroles/templates/projectroles/_project_header.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      878 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/projectroles/templates/projectroles/_project_invites_buttons.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     3707 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/templates/projectroles/_project_list.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     4546 2022-04-19 07:56:30.000000 django-sodar-core-0.13.0/projectroles/templates/projectroles/_project_menu_btn.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1313 2023-01-09 16:11:52.000000 django-sodar-core-0.13.0/projectroles/templates/projectroles/_project_navi.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1984 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/templates/projectroles/_project_roles_buttons.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      887 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/templates/projectroles/_project_roles_buttons_owner.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1616 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/templates/projectroles/_project_search_item.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     5976 2022-04-19 07:56:30.000000 django-sodar-core-0.13.0/projectroles/templates/projectroles/_project_sidebar.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      888 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/projectroles/templates/projectroles/_remote_project_list_item.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1477 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/projectroles/templates/projectroles/_remote_site_buttons.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1271 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/projectroles/templates/projectroles/_remote_site_list_item.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1870 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/templates/projectroles/_role_list_buttons.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)       15 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/projectroles/templates/projectroles/_search_footer.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1297 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/projectroles/templates/projectroles/_search_header.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     5194 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/templates/projectroles/_site_titlebar.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     4132 2022-02-02 10:25:46.000000 django-sodar-core-0.13.0/projectroles/templates/projectroles/_site_titlebar_dropdown.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     4912 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/templates/projectroles/base.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     5900 2021-06-02 14:40:08.000000 django-sodar-core-0.13.0/projectroles/templates/projectroles/base_site.html
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.644530 django-sodar-core-0.13.0/projectroles/templates/projectroles/error/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      341 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/projectroles/templates/projectroles/error/403_csrf.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      396 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/projectroles/templates/projectroles/error/404.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      451 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/projectroles/templates/projectroles/error/500.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2899 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/templates/projectroles/home.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1068 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/projectroles/templates/projectroles/invite_revoke_confirm.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     4030 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/templates/projectroles/login.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2430 2023-02-03 12:25:54.000000 django-sodar-core-0.13.0/projectroles/templates/projectroles/project_archive_confirm.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      991 2022-02-16 09:51:08.000000 django-sodar-core-0.13.0/projectroles/templates/projectroles/project_base.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     9206 2022-02-16 09:51:08.000000 django-sodar-core-0.13.0/projectroles/templates/projectroles/project_detail.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     3443 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/templates/projectroles/project_form.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     3715 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/templates/projectroles/project_invites.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     5198 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/templates/projectroles/project_roles.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2293 2022-02-16 09:51:08.000000 django-sodar-core-0.13.0/projectroles/templates/projectroles/projectinvite_form.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     3354 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/projectroles/templates/projectroles/remote_projects.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     3535 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/projectroles/templates/projectroles/remote_sites.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     9890 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/templates/projectroles/remoteproject_sync.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2785 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/templates/projectroles/remoteproject_update.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1183 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/projectroles/templates/projectroles/remotesite_confirm_delete.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1195 2022-09-23 15:05:02.000000 django-sodar-core-0.13.0/projectroles/templates/projectroles/remotesite_form.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2104 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/templates/projectroles/roleassignment_confirm_delete.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     3095 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/templates/projectroles/roleassignment_form.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1043 2022-09-23 15:05:02.000000 django-sodar-core-0.13.0/projectroles/templates/projectroles/roleassignment_owner_transfer.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1496 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/templates/projectroles/search_advanced.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     7333 2022-03-22 08:21:22.000000 django-sodar-core-0.13.0/projectroles/templates/projectroles/search_results.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      903 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/projectroles/templates/projectroles/user_form.html
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.644530 django-sodar-core-0.13.0/projectroles/templatetags/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/projectroles/templatetags/__init__.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    10044 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/templatetags/projectroles_common_tags.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2620 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/templatetags/projectroles_role_tags.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     8681 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/templatetags/projectroles_tags.py
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.648530 django-sodar-core-0.13.0/projectroles/tests/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/projectroles/tests/__init__.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    39914 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/tests/test_app_settings.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    24929 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/tests/test_commands.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    16832 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/tests/test_email.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    53457 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/tests/test_models.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    83762 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/tests/test_permissions.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     9658 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/tests/test_permissions_ajax.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    47365 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/tests/test_permissions_api.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    79683 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/tests/test_remote_projects_api.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     3796 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/tests/test_tasks.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    21979 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/tests/test_templatetags.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    84225 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/tests/test_ui.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)   201507 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/tests/test_views.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    17583 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/tests/test_views_ajax.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)   150447 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/tests/test_views_api.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     8661 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/urls.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2834 2023-03-17 14:12:55.000000 django-sodar-core-0.13.0/projectroles/utils.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)   117506 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/views.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    21049 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/views_ajax.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    41499 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/projectroles/views_api.py
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.648530 django-sodar-core-0.13.0/requirements/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1751 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/requirements/base.txt
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      565 2023-06-01 12:22:25.656530 django-sodar-core-0.13.0/setup.cfg
+-rwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)     2652 2022-09-23 15:05:02.000000 django-sodar-core-0.13.0/setup.py
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.648530 django-sodar-core-0.13.0/siteinfo/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/siteinfo/__init__.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)       91 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/siteinfo/apps.py
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.648530 django-sodar-core-0.13.0/siteinfo/migrations/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/siteinfo/migrations/__init__.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      713 2023-02-03 12:25:54.000000 django-sodar-core-0.13.0/siteinfo/plugins.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      419 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/siteinfo/rules.py
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.620530 django-sodar-core-0.13.0/siteinfo/templates/
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.648530 django-sodar-core-0.13.0/siteinfo/templates/siteinfo/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1222 2021-08-19 13:55:34.000000 django-sodar-core-0.13.0/siteinfo/templates/siteinfo/_app_stats.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      731 2022-03-11 12:36:54.000000 django-sodar-core-0.13.0/siteinfo/templates/siteinfo/_plugin_settings.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     8797 2023-02-03 12:25:54.000000 django-sodar-core-0.13.0/siteinfo/templates/siteinfo/site_info.html
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.648530 django-sodar-core-0.13.0/siteinfo/templatetags/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-08-19 13:55:34.000000 django-sodar-core-0.13.0/siteinfo/templatetags/__init__.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      398 2021-08-19 13:55:34.000000 django-sodar-core-0.13.0/siteinfo/templatetags/siteinfo_tags.py
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.648530 django-sodar-core-0.13.0/siteinfo/tests/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/siteinfo/tests/__init__.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1172 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/siteinfo/tests/test_permissions.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1096 2023-02-03 11:26:05.000000 django-sodar-core-0.13.0/siteinfo/tests/test_views.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      202 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/siteinfo/urls.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     6031 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/siteinfo/views.py
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.648530 django-sodar-core-0.13.0/sodarcache/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/sodarcache/__init__.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)       29 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/sodarcache/admin.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     7099 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/sodarcache/api.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)       95 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/sodarcache/apps.py
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.620530 django-sodar-core-0.13.0/sodarcache/management/
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.648530 django-sodar-core-0.13.0/sodarcache/management/commands/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2082 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/sodarcache/management/commands/deletecache.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2615 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/sodarcache/management/commands/synccache.py
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.648530 django-sodar-core-0.13.0/sodarcache/migrations/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1915 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/sodarcache/migrations/0001_initial.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      648 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/sodarcache/migrations/0002_make_user_optional.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      493 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/sodarcache/migrations/0003_add_index.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      417 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/sodarcache/migrations/0004_update_jsonfield.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/sodarcache/migrations/__init__.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2285 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/sodarcache/models.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      710 2023-01-09 16:11:52.000000 django-sodar-core-0.13.0/sodarcache/plugins.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      910 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/sodarcache/rules.py
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.648530 django-sodar-core-0.13.0/sodarcache/tests/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/sodarcache/tests/__init__.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    11410 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/sodarcache/tests/test_api.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     3180 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/sodarcache/tests/test_models.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     6353 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/sodarcache/tests/test_views_api.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      535 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/sodarcache/urls.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2863 2023-01-09 16:11:52.000000 django-sodar-core-0.13.0/sodarcache/views_api.py
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.652530 django-sodar-core-0.13.0/timeline/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/timeline/__init__.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      229 2023-02-01 11:39:18.000000 django-sodar-core-0.13.0/timeline/admin.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    12643 2022-09-23 15:05:02.000000 django-sodar-core-0.13.0/timeline/api.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)       91 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/timeline/apps.py
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.652530 django-sodar-core-0.13.0/timeline/migrations/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     3482 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/timeline/migrations/0001_initial.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      699 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/timeline/migrations/0002_projectevent_user.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      462 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/timeline/migrations/0003_rename_uuid.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      728 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/timeline/migrations/0004_update_uuid.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      874 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/timeline/migrations/0005_update_jsonfield.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      646 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/timeline/migrations/0006_update_user_optional.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      653 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/timeline/migrations/0007_allow_null_project.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      530 2022-04-19 07:56:30.000000 django-sodar-core-0.13.0/timeline/migrations/0008_projectevent_plugin.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      462 2023-02-03 12:25:54.000000 django-sodar-core-0.13.0/timeline/migrations/0009_create_status_uuid.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      571 2023-02-03 12:25:54.000000 django-sodar-core-0.13.0/timeline/migrations/0010_populate_uuid.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      460 2023-02-03 12:25:54.000000 django-sodar-core-0.13.0/timeline/migrations/0011_make_uuid_unique.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/timeline/migrations/__init__.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    10248 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/timeline/models.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     5596 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/timeline/plugins.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1382 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/timeline/rules.py
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.620530 django-sodar-core-0.13.0/timeline/static/
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.620530 django-sodar-core-0.13.0/timeline/static/timeline/
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.652530 django-sodar-core-0.13.0/timeline/static/timeline/css/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2044 2023-02-16 14:39:14.000000 django-sodar-core-0.13.0/timeline/static/timeline/css/timeline.css
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.652530 django-sodar-core-0.13.0/timeline/static/timeline/js/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     3406 2023-03-31 11:07:34.000000 django-sodar-core-0.13.0/timeline/static/timeline/js/timeline.js
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.620530 django-sodar-core-0.13.0/timeline/templates/
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.652530 django-sodar-core-0.13.0/timeline/templates/timeline/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1135 2022-02-16 09:51:08.000000 django-sodar-core-0.13.0/timeline/templates/timeline/_details_card.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      137 2022-02-02 10:25:46.000000 django-sodar-core-0.13.0/timeline/templates/timeline/_list_header.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2534 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/timeline/templates/timeline/_list_item.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      382 2023-02-03 12:25:54.000000 django-sodar-core-0.13.0/timeline/templates/timeline/_project_badge.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1179 2023-02-03 12:25:54.000000 django-sodar-core-0.13.0/timeline/templates/timeline/_search_item.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1672 2023-02-03 12:25:54.000000 django-sodar-core-0.13.0/timeline/templates/timeline/_search_results.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     3388 2023-02-16 14:39:14.000000 django-sodar-core-0.13.0/timeline/templates/timeline/timeline.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     4103 2023-02-16 14:39:14.000000 django-sodar-core-0.13.0/timeline/templates/timeline/timeline_site.html
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.652530 django-sodar-core-0.13.0/timeline/templatetags/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/timeline/templatetags/__init__.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     4267 2023-01-13 09:56:17.000000 django-sodar-core-0.13.0/timeline/templatetags/timeline_tags.py
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.652530 django-sodar-core-0.13.0/timeline/tests/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/timeline/tests/__init__.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    20627 2023-02-03 12:25:54.000000 django-sodar-core-0.13.0/timeline/tests/test_api.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    17724 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/timeline/tests/test_models.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     6330 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/timeline/tests/test_permissions.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    14979 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/timeline/tests/test_permissions_ajax.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     9584 2023-02-03 11:26:05.000000 django-sodar-core-0.13.0/timeline/tests/test_templatetags.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    19155 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/timeline/tests/test_ui.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     7068 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/timeline/tests/test_views.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    11804 2023-02-03 12:25:54.000000 django-sodar-core-0.13.0/timeline/tests/test_views_ajax.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1704 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/timeline/urls.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     4584 2023-02-03 12:25:54.000000 django-sodar-core-0.13.0/timeline/views.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    10045 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/timeline/views_ajax.py
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.656530 django-sodar-core-0.13.0/tokens/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/tokens/__init__.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)       87 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/tokens/apps.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      428 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/tokens/forms.py
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.656530 django-sodar-core-0.13.0/tokens/migrations/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/tokens/migrations/__init__.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      424 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/tokens/plugins.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      159 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/tokens/rules.py
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.620530 django-sodar-core-0.13.0/tokens/templates/
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.656530 django-sodar-core-0.13.0/tokens/templates/tokens/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      375 2021-07-01 11:56:22.000000 django-sodar-core-0.13.0/tokens/templates/tokens/_token_item.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      486 2021-06-14 15:43:33.000000 django-sodar-core-0.13.0/tokens/templates/tokens/_token_item_buttons.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      978 2021-07-01 11:56:22.000000 django-sodar-core-0.13.0/tokens/templates/tokens/token_confirm_delete.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      851 2021-07-01 11:56:22.000000 django-sodar-core-0.13.0/tokens/templates/tokens/token_create.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1227 2022-03-03 13:27:56.000000 django-sodar-core-0.13.0/tokens/templates/tokens/token_create_success.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1781 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/tokens/templates/tokens/token_list.html
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.656530 django-sodar-core-0.13.0/tokens/tests/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/tokens/tests/__init__.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2448 2021-07-01 11:56:22.000000 django-sodar-core-0.13.0/tokens/tests/test_permissions.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1758 2023-02-03 11:26:05.000000 django-sodar-core-0.13.0/tokens/tests/test_ui.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     3454 2023-01-09 16:39:55.000000 django-sodar-core-0.13.0/tokens/tests/test_views.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      437 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/tokens/urls.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1966 2022-03-03 13:27:56.000000 django-sodar-core-0.13.0/tokens/views.py
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.656530 django-sodar-core-0.13.0/userprofile/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/userprofile/__init__.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)       97 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/userprofile/apps.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     8075 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/userprofile/forms.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1258 2023-02-03 11:26:05.000000 django-sodar-core-0.13.0/userprofile/plugins.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      430 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/userprofile/rules.py
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.620530 django-sodar-core-0.13.0/userprofile/templates/
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.656530 django-sodar-core-0.13.0/userprofile/templates/userprofile/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     3245 2021-07-01 11:56:22.000000 django-sodar-core-0.13.0/userprofile/templates/userprofile/detail.html
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     1249 2021-05-06 08:16:48.000000 django-sodar-core-0.13.0/userprofile/templates/userprofile/settings_form.html
+drwxrwxr-x   0 mikkopen  (1000) mikkopen  (1000)        0 2023-06-01 12:22:25.656530 django-sodar-core-0.13.0/userprofile/tests/
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)        0 2021-04-12 08:48:10.000000 django-sodar-core-0.13.0/userprofile/tests/__init__.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2132 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/userprofile/tests/test_permissions.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     2083 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/userprofile/tests/test_ui.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     8374 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/userprofile/tests/test_views.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)      357 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/userprofile/urls.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)     3180 2023-02-03 11:26:05.000000 django-sodar-core-0.13.0/userprofile/views.py
+-rw-rw-r--   0 mikkopen  (1000) mikkopen  (1000)    83607 2023-06-01 12:19:00.000000 django-sodar-core-0.13.0/versioneer.py
```

### Comparing `django-sodar-core-0.12.0/LICENSE` & `django-sodar-core-0.13.0/LICENSE`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/MANIFEST.in` & `django-sodar-core-0.13.0/MANIFEST.in`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/PKG-INFO` & `django-sodar-core-0.13.0/PKG-INFO`

 * *Files 2% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: django-sodar-core
-Version: 0.12.0
+Version: 0.13.0
 Summary: SODAR Core framework and project management apps
 Home-page: https://github.com/bihealth/sodar-core
 Author: Berlin Institute of Health, Core Unit Bioinformatics
 Author-email: cubi@bih-charite.de
 Classifier: Framework :: Django
 Classifier: Framework :: Django :: 3.2
 Classifier: Intended Audience :: Developers
@@ -136,15 +136,15 @@
 The ``django-sodar-core`` package can be installed into your Django project
 from PyPI as follows. Note that it is strongly recommended to freeze the
 dependency to a specific version, as this package is under active development
 and breaking changes are possible.
 
 .. code-block:: console
 
-    pip install django-sodar-core==0.12.0
+    pip install django-sodar-core==0.13.0
 
 For installing a development version you can point your dependency to a specific
 commit ID in GitHub. Note that these versions may not be stable.
 
 .. code-block:: console
 
     pip install -e git+https://github.com/bihealth/sodar-core.git@xxxxxxxxxxxxx#egg=django-sodar-core
```

### Comparing `django-sodar-core-0.12.0/README.rst` & `django-sodar-core-0.13.0/README.rst`

 * *Files 0% similar despite different names*

```diff
@@ -111,15 +111,15 @@
 The ``django-sodar-core`` package can be installed into your Django project
 from PyPI as follows. Note that it is strongly recommended to freeze the
 dependency to a specific version, as this package is under active development
 and breaking changes are possible.
 
 .. code-block:: console
 
-    pip install django-sodar-core==0.12.0
+    pip install django-sodar-core==0.13.0
 
 For installing a development version you can point your dependency to a specific
 commit ID in GitHub. Note that these versions may not be stable.
 
 .. code-block:: console
 
     pip install -e git+https://github.com/bihealth/sodar-core.git@xxxxxxxxxxxxx#egg=django-sodar-core
```

### Comparing `django-sodar-core-0.12.0/adminalerts/forms.py` & `django-sodar-core-0.13.0/adminalerts/forms.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/adminalerts/migrations/0001_initial.py` & `django-sodar-core-0.13.0/adminalerts/migrations/0001_initial.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/adminalerts/migrations/0002_adminalert_user.py` & `django-sodar-core-0.13.0/adminalerts/migrations/0002_adminalert_user.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/adminalerts/migrations/0003_auto_20180802_1558.py` & `django-sodar-core-0.13.0/adminalerts/migrations/0003_auto_20180802_1558.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/adminalerts/migrations/0005_update_uuid.py` & `django-sodar-core-0.13.0/adminalerts/migrations/0005_update_uuid.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/adminalerts/models.py` & `django-sodar-core-0.13.0/adminalerts/models.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/adminalerts/plugins.py` & `django-sodar-core-0.13.0/adminalerts/plugins.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/adminalerts/rules.py` & `django-sodar-core-0.13.0/adminalerts/rules.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/adminalerts/templates/adminalerts/adminalert_confirm_delete.html` & `django-sodar-core-0.13.0/adminalerts/templates/adminalerts/adminalert_confirm_delete.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/adminalerts/templates/adminalerts/adminalert_form.html` & `django-sodar-core-0.13.0/adminalerts/templates/adminalerts/adminalert_form.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/adminalerts/templates/adminalerts/alert_detail.html` & `django-sodar-core-0.13.0/adminalerts/templates/adminalerts/alert_detail.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/adminalerts/templates/adminalerts/alert_list.html` & `django-sodar-core-0.13.0/adminalerts/templates/adminalerts/alert_list.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/adminalerts/tests/test_models.py` & `django-sodar-core-0.13.0/adminalerts/tests/test_models.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/adminalerts/tests/test_permissions.py` & `django-sodar-core-0.13.0/adminalerts/tests/test_permissions.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/adminalerts/tests/test_permissions_ajax.py` & `django-sodar-core-0.13.0/adminalerts/tests/test_permissions_ajax.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/adminalerts/tests/test_plugins.py` & `django-sodar-core-0.13.0/adminalerts/tests/test_plugins.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/adminalerts/tests/test_ui.py` & `django-sodar-core-0.13.0/adminalerts/tests/test_ui.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/adminalerts/tests/test_views.py` & `django-sodar-core-0.13.0/adminalerts/tests/test_views.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/adminalerts/tests/test_views_ajax.py` & `django-sodar-core-0.13.0/adminalerts/tests/test_views_ajax.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/adminalerts/urls.py` & `django-sodar-core-0.13.0/adminalerts/urls.py`

 * *Files 26% similar despite different names*

```diff
@@ -1,42 +1,46 @@
 """URL configuration for the adminalerts app"""
 
-from django.conf.urls import url
+from django.urls import path
 
 import adminalerts.views_ajax
 from adminalerts import views
 
 app_name = 'adminalerts'
 
 urls_ui = [
-    url(regex=r'^list$', view=views.AdminAlertListView.as_view(), name='list'),
-    url(
-        regex=r'^detail/(?P<adminalert>[0-9a-f-]+)$',
+    path(
+        route='list',
+        view=views.AdminAlertListView.as_view(),
+        name='list',
+    ),
+    path(
+        route='detail/<uuid:adminalert>',
         view=views.AdminAlertDetailView.as_view(),
         name='detail',
     ),
-    url(
-        regex=r'^create$',
+    path(
+        route='create',
         view=views.AdminAlertCreateView.as_view(),
         name='create',
     ),
-    url(
-        regex=r'^update/(?P<adminalert>[0-9a-f-]+)$',
+    path(
+        route='update/<uuid:adminalert>',
         view=views.AdminAlertUpdateView.as_view(),
         name='update',
     ),
-    url(
-        regex=r'^delete/(?P<adminalert>[0-9a-f-]+)/delete',
+    path(
+        route='delete/<uuid:adminalert>/delete',
         view=views.AdminAlertDeleteView.as_view(),
         name='delete',
     ),
 ]
 
 urls_ajax = [
-    url(
-        regex=r'^ajax/active/toggle/(?P<adminalert>[0-9a-f-]+)',
+    path(
+        route='ajax/active/toggle/<uuid:adminalert>',
         view=adminalerts.views_ajax.AdminAlertActiveToggleAjaxView.as_view(),
         name='ajax_active_toggle',
     ),
 ]
 
 urlpatterns = urls_ui + urls_ajax
```

### Comparing `django-sodar-core-0.12.0/adminalerts/views.py` & `django-sodar-core-0.13.0/adminalerts/views.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/adminalerts/views_ajax.py` & `django-sodar-core-0.13.0/adminalerts/views_ajax.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/appalerts/migrations/0001_initial.py` & `django-sodar-core-0.13.0/appalerts/migrations/0001_initial.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/appalerts/models.py` & `django-sodar-core-0.13.0/appalerts/models.py`

 * *Files 2% similar despite different names*

```diff
@@ -99,15 +99,15 @@
         )
 
     def __repr__(self):
         values = (
             self.app_plugin.name if self.app_plugin else 'projectroles',
             self.alert_name,
             self.user.username,
-            self.project.title,
+            self.project.title if self.project else 'N/A',
         )
         return 'AppAlert({})'.format(', '.join(repr(v) for v in values))
 
     def save(self, *args, **kwargs):
         """Custom validation for AppAlert"""
         self._validate_level()
         super().save(*args, **kwargs)
```

### Comparing `django-sodar-core-0.12.0/appalerts/plugins.py` & `django-sodar-core-0.13.0/appalerts/plugins.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/appalerts/static/appalerts/js/appalerts.js` & `django-sodar-core-0.13.0/appalerts/static/appalerts/js/appalerts.js`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/appalerts/static/appalerts/js/appalerts_list.js` & `django-sodar-core-0.13.0/appalerts/static/appalerts/js/appalerts_list.js`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/appalerts/templates/appalerts/alert_list.html` & `django-sodar-core-0.13.0/projectroles/templates/projectroles/_project_header.html`

 * *Files 24% similar despite different names*

```diff
@@ -1,260 +1,256 @@
-00000000: 7b25 2065 7874 656e 6473 2027 7072 6f6a  {% extends 'proj
-00000010: 6563 7472 6f6c 6573 2f62 6173 652e 6874  ectroles/base.ht
-00000020: 6d6c 2720 257d 0a0a 7b25 206c 6f61 6420  ml' %}..{% load 
-00000030: 7374 6174 6963 2025 7d0a 7b25 206c 6f61  static %}.{% loa
-00000040: 6420 7072 6f6a 6563 7472 6f6c 6573 5f63  d projectroles_c
-00000050: 6f6d 6d6f 6e5f 7461 6773 2025 7d0a 0a7b  ommon_tags %}..{
-00000060: 2520 626c 6f63 6b20 7469 746c 6520 257d  % block title %}
-00000070: 4170 7020 416c 6572 7473 7b25 2065 6e64  App Alerts{% end
-00000080: 626c 6f63 6b20 7469 746c 6520 257d 0a0a  block title %}..
-00000090: 7b25 2062 6c6f 636b 2063 7373 2025 7d0a  {% block css %}.
-000000a0: 2020 7b7b 2062 6c6f 636b 2e73 7570 6572    {{ block.super
-000000b0: 207d 7d0a 2020 3c73 7479 6c65 2074 7970   }}.  <style typ
-000000c0: 653d 2274 6578 742f 6373 7322 3e0a 2020  e="text/css">.  
-000000d0: 2020 2e73 6f64 6172 2d61 7070 2d61 6c65    .sodar-app-ale
-000000e0: 7274 2d70 726f 6a65 6374 2d62 6164 6765  rt-project-badge
-000000f0: 207b 0a20 2020 2020 2020 2076 6572 7469   {.        verti
-00000100: 6361 6c2d 616c 6967 6e3a 2074 6f70 3b0a  cal-align: top;.
-00000110: 2020 2020 2020 2020 6d61 7267 696e 2d74          margin-t
-00000120: 6f70 3a20 3270 783b 0a20 2020 2020 2020  op: 2px;.       
-00000130: 206f 7665 7266 6c6f 773a 2068 6964 6465   overflow: hidde
-00000140: 6e3b 0a20 2020 2020 2020 2074 6578 742d  n;.        text-
-00000150: 6f76 6572 666c 6f77 3a20 656c 6c69 7073  overflow: ellips
-00000160: 6973 3b0a 2020 2020 2020 2020 6d61 782d  is;.        max-
-00000170: 7769 6474 683a 2033 3030 7078 3b0a 2020  width: 300px;.  
-00000180: 2020 7d0a 0a20 2020 202e 736f 6461 722d    }..    .sodar-
-00000190: 6170 702d 616c 6572 742d 7072 6f6a 6563  app-alert-projec
-000001a0: 742d 6261 6467 6520 6120 7b0a 2020 2020  t-badge a {.    
-000001b0: 2020 2020 636f 6c6f 723a 2069 6e68 6572      color: inher
-000001c0: 6974 3b0a 2020 2020 7d0a 0a20 2020 202e  it;.    }..    .
-000001d0: 736f 6461 722d 6170 702d 616c 6572 742d  sodar-app-alert-
-000001e0: 726f 7720 6469 763a 6e74 682d 6368 696c  row div:nth-chil
-000001f0: 6428 3129 207b 0a20 2020 2020 2020 206d  d(1) {.        m
-00000200: 6178 2d77 6964 7468 3a20 3430 7078 3b0a  ax-width: 40px;.
-00000210: 2020 2020 7d0a 2020 3c2f 7374 796c 653e      }.  </style>
-00000220: 0a7b 2520 656e 6462 6c6f 636b 2063 7373  .{% endblock css
-00000230: 2025 7d0a 0a7b 2520 626c 6f63 6b20 7072   %}..{% block pr
-00000240: 6f6a 6563 7472 6f6c 6573 2025 7d0a 0a3c  ojectroles %}..<
-00000250: 6469 7620 636c 6173 733d 2272 6f77 2073  div class="row s
-00000260: 6f64 6172 2d73 7562 7469 746c 652d 636f  odar-subtitle-co
-00000270: 6e74 6169 6e65 7222 3e0a 2020 3c68 323e  ntainer">.  <h2>
-00000280: 3c69 2063 6c61 7373 3d22 6963 6f6e 6966  <i class="iconif
-00000290: 7922 2064 6174 612d 6963 6f6e 3d22 6d64  y" data-icon="md
-000002a0: 693a 616c 6572 742d 6f63 7461 6772 616d  i:alert-octagram
-000002b0: 223e 3c2f 693e 2041 7070 2041 6c65 7274  "></i> App Alert
-000002c0: 733c 2f68 323e 0a20 203c 6120 636c 6173  s</h2>.  <a clas
-000002d0: 733d 2262 746e 2062 746e 2d70 7269 6d61  s="btn btn-prima
-000002e0: 7279 206d 6c2d 6175 746f 2073 6f64 6172  ry ml-auto sodar
-000002f0: 2d61 7070 2d61 6c65 7274 2d62 746e 2d64  -app-alert-btn-d
-00000300: 6973 6d69 7373 0a20 2020 2020 2020 2020  ismiss.         
-00000310: 2020 7b25 2069 6620 6f62 6a65 6374 5f6c    {% if object_l
-00000320: 6973 742e 636f 756e 7420 3d3d 2030 2025  ist.count == 0 %
-00000330: 7d64 6973 6162 6c65 647b 2520 656e 6469  }disabled{% endi
-00000340: 6620 257d 220a 2020 2020 2069 643d 2273  f %}".     id="s
-00000350: 6f64 6172 2d61 7070 2d61 6c65 7274 2d62  odar-app-alert-b
-00000360: 746e 2d64 6973 6d69 7373 2d61 6c6c 220a  tn-dismiss-all".
-00000370: 2020 2020 2072 6f6c 653d 2262 7574 746f       role="butto
-00000380: 6e22 0a20 2020 2020 6461 7461 2d75 7569  n".     data-uui
-00000390: 643d 2222 0a20 2020 2020 6461 7461 2d64  d="".     data-d
-000003a0: 6973 6d69 7373 2d75 726c 3d22 7b25 2075  ismiss-url="{% u
-000003b0: 726c 2027 6170 7061 6c65 7274 733a 616a  rl 'appalerts:aj
-000003c0: 6178 5f64 6973 6d69 7373 5f61 6c6c 2720  ax_dismiss_all' 
-000003d0: 257d 223e 0a20 2020 203c 6920 636c 6173  %}">.    <i clas
-000003e0: 733d 2269 636f 6e69 6679 2220 6461 7461  s="iconify" data
-000003f0: 2d69 636f 6e3d 226d 6469 3a63 6c6f 7365  -icon="mdi:close
-00000400: 2d74 6869 636b 223e 3c2f 693e 2044 6973  -thick"></i> Dis
-00000410: 6d69 7373 2041 6c6c 0a20 203c 2f61 3e0a  miss All.  </a>.
-00000420: 3c2f 6469 763e 0a0a 3c64 6976 2063 6c61  </div>..<div cla
-00000430: 7373 3d22 636f 6e74 6169 6e65 722d 666c  ss="container-fl
-00000440: 7569 6420 736f 6461 722d 7061 6765 2d63  uid sodar-page-c
-00000450: 6f6e 7461 696e 6572 223e 0a20 207b 2520  ontainer">.  {% 
-00000460: 666f 7220 6120 696e 206f 626a 6563 745f  for a in object_
-00000470: 6c69 7374 2025 7d0a 2020 2020 3c64 6976  list %}.    <div
-00000480: 2063 6c61 7373 3d22 616c 6572 7420 616c   class="alert al
-00000490: 6572 742d 7b7b 2061 2e6c 6576 656c 207c  ert-{{ a.level |
-000004a0: 206c 6f77 6572 207d 7d20 736f 6461 722d   lower }} sodar-
-000004b0: 6170 702d 616c 6572 742d 6974 656d 220a  app-alert-item".
-000004c0: 2020 2020 2020 2020 2064 6174 612d 616c           data-al
-000004d0: 6572 742d 7575 6964 3d22 7b7b 2061 2e73  ert-uuid="{{ a.s
-000004e0: 6f64 6172 5f75 7569 6420 7d7d 223e 0a20  odar_uuid }}">. 
-000004f0: 2020 2020 203c 6469 7620 636c 6173 733d       <div class=
-00000500: 2272 6f77 2073 6f64 6172 2d61 7070 2d61  "row sodar-app-a
-00000510: 6c65 7274 2d72 6f77 223e 0a20 2020 2020  lert-row">.     
-00000520: 2020 203c 6469 7620 636c 6173 733d 2263     <div class="c
-00000530: 6f6c 2063 6f6c 2d73 6d2d 3120 7078 2d30  ol col-sm-1 px-0
-00000540: 223e 0a20 2020 2020 2020 2020 203c 7370  ">.          <sp
-00000550: 616e 2064 6174 612d 746f 6767 6c65 3d22  an data-toggle="
-00000560: 746f 6f6c 7469 7022 2064 6174 612d 706c  tooltip" data-pl
-00000570: 6163 656d 656e 743d 2274 6f70 220a 2020  acement="top".  
-00000580: 2020 2020 2020 2020 2020 2020 2020 7469                ti
-00000590: 746c 653d 227b 2520 6966 2061 2e61 7070  tle="{% if a.app
-000005a0: 5f70 6c75 6769 6e20 257d 7b7b 2061 2e61  _plugin %}{{ a.a
-000005b0: 7070 5f70 6c75 6769 6e2e 7469 746c 6520  pp_plugin.title 
-000005c0: 7d7d 7b25 2065 6c73 6520 257d 5072 6f6a  }}{% else %}Proj
-000005d0: 6563 7472 6f6c 6573 7b25 2065 6e64 6966  ectroles{% endif
-000005e0: 2025 7d22 3e0a 2020 2020 2020 2020 2020   %}">.          
-000005f0: 2020 3c69 2063 6c61 7373 3d22 6963 6f6e    <i class="icon
-00000600: 6966 7922 0a20 2020 2020 2020 2020 2020  ify".           
-00000610: 2020 2020 6461 7461 2d69 636f 6e3d 227b      data-icon="{
-00000620: 2520 6966 2061 2e61 7070 5f70 6c75 6769  % if a.app_plugi
-00000630: 6e20 257d 7b7b 2061 2e61 7070 5f70 6c75  n %}{{ a.app_plu
-00000640: 6769 6e2e 6765 745f 706c 7567 696e 2e69  gin.get_plugin.i
-00000650: 636f 6e20 7d7d 7b25 2065 6c73 6520 257d  con }}{% else %}
-00000660: 6d64 693a 6375 6265 7b25 2065 6e64 6966  mdi:cube{% endif
-00000670: 2025 7d22 3e3c 2f69 3e0a 2020 2020 2020   %}"></i>.      
-00000680: 2020 2020 3c2f 7370 616e 3e0a 2020 2020      </span>.    
-00000690: 2020 2020 2020 3c73 7061 6e20 6461 7461        <span data
-000006a0: 2d74 6f67 676c 653d 2274 6f6f 6c74 6970  -toggle="tooltip
-000006b0: 2220 6461 7461 2d70 6c61 6365 6d65 6e74  " data-placement
-000006c0: 3d22 746f 7022 0a20 2020 2020 2020 2020  ="top".         
-000006d0: 2020 2020 2020 2074 6974 6c65 3d22 7b7b         title="{{
-000006e0: 2061 2e64 6174 655f 6372 6561 7465 6420   a.date_created 
-000006f0: 7c20 6461 7465 3a27 592d 6d2d 6420 483a  | date:'Y-m-d H:
-00000700: 6927 207d 7d22 3e0a 2020 2020 2020 2020  i' }}">.        
-00000710: 2020 2020 3c69 2063 6c61 7373 3d22 6963      <i class="ic
-00000720: 6f6e 6966 7922 2064 6174 612d 6963 6f6e  onify" data-icon
-00000730: 3d22 6d64 693a 636c 6f63 6b22 3e3c 2f69  ="mdi:clock"></i
-00000740: 3e0a 2020 2020 2020 2020 2020 3c2f 7370  >.          </sp
-00000750: 616e 3e0a 2020 2020 2020 2020 3c2f 6469  an>.        </di
-00000760: 763e 0a20 2020 2020 2020 203c 6469 7620  v>.        <div 
-00000770: 636c 6173 733d 2263 6f6c 2070 6c2d 3022  class="col pl-0"
-00000780: 3e0a 2020 2020 2020 2020 2020 7b25 2069  >.          {% i
-00000790: 6620 612e 7072 6f6a 6563 7420 257d 0a20  f a.project %}. 
-000007a0: 2020 2020 2020 2020 2020 203c 7370 616e             <span
-000007b0: 2063 6c61 7373 3d22 6261 6467 6520 6261   class="badge ba
-000007c0: 6467 652d 7b7b 2061 2e6c 6576 656c 207c  dge-{{ a.level |
-000007d0: 206c 6f77 6572 207d 7d20 736f 6461 722d   lower }} sodar-
-000007e0: 6170 702d 616c 6572 742d 7072 6f6a 6563  app-alert-projec
-000007f0: 742d 6261 6467 6520 6d72 2d31 220a 2020  t-badge mr-1".  
-00000800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000810: 7469 746c 653d 227b 2520 6765 745f 6469  title="{% get_di
-00000820: 7370 6c61 795f 6e61 6d65 2061 2e70 726f  splay_name a.pro
-00000830: 6a65 6374 2e74 7970 6520 7469 746c 653d  ject.type title=
-00000840: 5472 7565 2025 7d3a 207b 7b20 612e 7072  True %}: {{ a.pr
-00000850: 6f6a 6563 742e 7469 746c 6520 7d7d 220a  oject.title }}".
-00000860: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000870: 2020 6461 7461 2d74 6f67 676c 653d 2274    data-toggle="t
-00000880: 6f6f 6c74 6970 2220 6461 7461 2d70 6c61  ooltip" data-pla
-00000890: 6365 6d65 6e74 3d22 746f 7022 3e0a 2020  cement="top">.  
-000008a0: 2020 2020 2020 2020 2020 2020 3c69 2063              <i c
-000008b0: 6c61 7373 3d22 6963 6f6e 6966 7922 0a20  lass="iconify". 
-000008c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000008d0: 6461 7461 2d69 636f 6e3d 227b 2520 6966  data-icon="{% if
-000008e0: 2061 2e70 726f 6a65 6374 2e74 7970 6520   a.project.type 
-000008f0: 3d3d 2027 5052 4f4a 4543 5427 2025 7d6d  == 'PROJECT' %}m
-00000900: 6469 3a63 7562 657b 2520 656c 7365 2025  di:cube{% else %
-00000910: 7d6d 6469 3a72 686f 6d62 7573 2d73 706c  }mdi:rhombus-spl
-00000920: 6974 7b25 2065 6e64 6966 2025 7d22 3e0a  it{% endif %}">.
-00000930: 2020 2020 2020 2020 2020 2020 2020 3c2f                </
-00000940: 693e 0a20 2020 2020 2020 2020 2020 2020  i>.             
-00000950: 203c 6120 6872 6566 3d22 7b25 2075 726c   <a href="{% url
-00000960: 2027 7072 6f6a 6563 7472 6f6c 6573 3a64   'projectroles:d
-00000970: 6574 6169 6c27 2070 726f 6a65 6374 3d61  etail' project=a
-00000980: 2e70 726f 6a65 6374 2e73 6f64 6172 5f75  .project.sodar_u
-00000990: 7569 6420 257d 223e 0a20 2020 2020 2020  uid %}">.       
-000009a0: 2020 2020 2020 2020 207b 7b20 612e 7072           {{ a.pr
-000009b0: 6f6a 6563 742e 7469 746c 6520 7d7d 0a20  oject.title }}. 
-000009c0: 2020 2020 2020 2020 2020 2020 203c 2f61               </a
-000009d0: 3e0a 2020 2020 2020 2020 2020 2020 3c2f  >.            </
-000009e0: 7370 616e 3e0a 2020 2020 2020 2020 2020  span>.          
-000009f0: 7b25 2065 6e64 6966 2025 7d0a 2020 2020  {% endif %}.    
-00000a00: 2020 2020 2020 7b7b 2061 2e6d 6573 7361        {{ a.messa
-00000a10: 6765 207c 2073 6166 6520 7d7d 0a20 2020  ge | safe }}.   
-00000a20: 2020 2020 203c 2f64 6976 3e0a 2020 2020       </div>.    
-00000a30: 2020 2020 3c64 6976 3e0a 2020 2020 2020      <div>.      
-00000a40: 2020 2020 3c73 7061 6e20 636c 6173 733d      <span class=
-00000a50: 2273 6f64 6172 2d61 7070 2d61 6c65 7274  "sodar-app-alert
-00000a60: 2d62 7574 746f 6e73 2070 756c 6c2d 7269  -buttons pull-ri
-00000a70: 6768 7422 3e0a 2020 2020 2020 2020 2020  ght">.          
-00000a80: 2020 7b25 2069 6620 612e 7572 6c20 257d    {% if a.url %}
-00000a90: 0a20 2020 2020 2020 2020 2020 2020 203c  .              <
-00000aa0: 6120 6872 6566 3d22 7b25 2075 726c 2027  a href="{% url '
-00000ab0: 6170 7061 6c65 7274 733a 7265 6469 7265  appalerts:redire
-00000ac0: 6374 2720 6170 7061 6c65 7274 3d61 2e73  ct' appalert=a.s
-00000ad0: 6f64 6172 5f75 7569 6420 257d 220a 2020  odar_uuid %}".  
-00000ae0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-00000af0: 6c61 7373 3d22 6274 6e20 6274 6e2d 7b7b  lass="btn btn-{{
-00000b00: 2061 2e6c 6576 656c 207c 206c 6f77 6572   a.level | lower
-00000b10: 207d 7d0a 2020 2020 2020 2020 2020 2020   }}.            
-00000b20: 2020 2020 2020 2020 2020 2020 736f 6461              soda
-00000b30: 722d 6c69 7374 2d62 746e 2073 6f64 6172  r-list-btn sodar
-00000b40: 2d61 7070 2d61 6c65 7274 2d62 746e 2d6c  -app-alert-btn-l
-00000b50: 696e 6b22 0a20 2020 2020 2020 2020 2020  ink".           
-00000b60: 2020 2020 2020 726f 6c65 3d22 6275 7474        role="butt
-00000b70: 6f6e 220a 2020 2020 2020 2020 2020 2020  on".            
-00000b80: 2020 2020 2074 6974 6c65 3d22 466f 6c6c       title="Foll
-00000b90: 6f77 206c 696e 6b20 616e 6420 6469 736d  ow link and dism
-00000ba0: 6973 7322 0a20 2020 2020 2020 2020 2020  iss".           
-00000bb0: 2020 2020 2020 6461 7461 2d74 6f67 676c        data-toggl
-00000bc0: 653d 2274 6f6f 6c74 6970 2220 6461 7461  e="tooltip" data
-00000bd0: 2d70 6c61 6365 6d65 6e74 3d22 746f 7022  -placement="top"
-00000be0: 3e0a 2020 2020 2020 2020 2020 2020 2020  >.              
-00000bf0: 2020 3c69 2063 6c61 7373 3d22 6963 6f6e    <i class="icon
-00000c00: 6966 7922 2064 6174 612d 6963 6f6e 3d22  ify" data-icon="
-00000c10: 6d64 693a 6172 726f 772d 7269 6768 742d  mdi:arrow-right-
-00000c20: 746f 702d 626f 6c64 223e 3c2f 693e 0a20  top-bold"></i>. 
-00000c30: 2020 2020 2020 2020 2020 2020 203c 2f61               </a
-00000c40: 3e0a 2020 2020 2020 2020 2020 2020 7b25  >.            {%
-00000c50: 2065 6e64 6966 2025 7d0a 2020 2020 2020   endif %}.      
-00000c60: 2020 2020 2020 3c61 2063 6c61 7373 3d22        <a class="
-00000c70: 6274 6e20 6274 6e2d 7b7b 2061 2e6c 6576  btn btn-{{ a.lev
-00000c80: 656c 207c 206c 6f77 6572 207d 7d0a 2020  el | lower }}.  
-00000c90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000ca0: 2020 2020 736f 6461 722d 6c69 7374 2d62      sodar-list-b
-00000cb0: 746e 2073 6f64 6172 2d61 7070 2d61 6c65  tn sodar-app-ale
-00000cc0: 7274 2d62 746e 2d64 6973 6d69 7373 2073  rt-btn-dismiss s
-00000cd0: 6f64 6172 2d61 7070 2d61 6c65 7274 2d62  odar-app-alert-b
-00000ce0: 746e 2d64 6973 6d69 7373 2d73 696e 676c  tn-dismiss-singl
-00000cf0: 6522 0a20 2020 2020 2020 2020 2020 2020  e".             
-00000d00: 2020 726f 6c65 3d22 6275 7474 6f6e 220a    role="button".
-00000d10: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-00000d20: 6974 6c65 3d22 4469 736d 6973 7322 0a20  itle="Dismiss". 
-00000d30: 2020 2020 2020 2020 2020 2020 2020 6461                da
-00000d40: 7461 2d74 6f67 676c 653d 2274 6f6f 6c74  ta-toggle="toolt
-00000d50: 6970 2220 6461 7461 2d70 6c61 6365 6d65  ip" data-placeme
-00000d60: 6e74 3d22 746f 7022 0a20 2020 2020 2020  nt="top".       
-00000d70: 2020 2020 2020 2020 6461 7461 2d75 7569          data-uui
-00000d80: 643d 227b 7b20 612e 736f 6461 725f 7575  d="{{ a.sodar_uu
-00000d90: 6964 207d 7d22 0a20 2020 2020 2020 2020  id }}".         
-00000da0: 2020 2020 2020 6461 7461 2d64 6973 6d69        data-dismi
-00000db0: 7373 2d75 726c 3d22 7b25 2075 726c 2027  ss-url="{% url '
-00000dc0: 6170 7061 6c65 7274 733a 616a 6178 5f64  appalerts:ajax_d
-00000dd0: 6973 6d69 7373 2720 6170 7061 6c65 7274  ismiss' appalert
-00000de0: 3d61 2e73 6f64 6172 5f75 7569 6420 257d  =a.sodar_uuid %}
-00000df0: 223e 0a20 2020 2020 2020 2020 2020 2020  ">.             
-00000e00: 203c 6920 636c 6173 733d 2269 636f 6e69   <i class="iconi
-00000e10: 6679 2220 6461 7461 2d69 636f 6e3d 226d  fy" data-icon="m
-00000e20: 6469 3a63 6c6f 7365 2d74 6869 636b 223e  di:close-thick">
-00000e30: 3c2f 693e 0a20 2020 2020 2020 2020 2020  </i>.           
-00000e40: 203c 2f61 3e0a 2020 2020 2020 2020 2020   </a>.          
-00000e50: 3c2f 7370 616e 3e0a 2020 2020 2020 2020  </span>.        
-00000e60: 3c2f 6469 763e 0a20 2020 2020 203c 2f64  </div>.      </d
-00000e70: 6976 3e0a 2020 2020 3c2f 6469 763e 0a20  iv>.    </div>. 
-00000e80: 207b 2520 656e 6466 6f72 2025 7d0a 0a20   {% endfor %}.. 
-00000e90: 203c 6469 7620 636c 6173 733d 2261 6c65   <div class="ale
-00000ea0: 7274 2061 6c65 7274 2d69 6e66 6f22 0a20  rt alert-info". 
-00000eb0: 2020 2020 2020 6964 3d22 736f 6461 722d        id="sodar-
-00000ec0: 6170 702d 616c 6572 742d 656d 7074 7922  app-alert-empty"
-00000ed0: 0a20 2020 2020 2020 7374 796c 653d 227b  .       style="{
-00000ee0: 2520 6966 206f 626a 6563 745f 6c69 7374  % if object_list
-00000ef0: 2e63 6f75 6e74 203e 2030 2025 7d64 6973  .count > 0 %}dis
-00000f00: 706c 6179 3a20 6e6f 6e65 3b7b 2520 656e  play: none;{% en
-00000f10: 6469 6620 257d 223e 0a20 2020 2054 6865  dif %}">.    The
-00000f20: 7265 2061 7265 2063 7572 7265 6e74 6c79  re are currently
-00000f30: 206e 6f20 616c 6572 7473 2066 6f72 2079   no alerts for y
-00000f40: 6f75 2e0a 2020 3c2f 6469 763e 0a3c 2f64  ou..  </div>.</d
-00000f50: 6976 3e0a 0a7b 2520 656e 6462 6c6f 636b  iv>..{% endblock
-00000f60: 2070 726f 6a65 6374 726f 6c65 7320 257d   projectroles %}
-00000f70: 0a0a 7b25 2062 6c6f 636b 206a 6176 6173  ..{% block javas
-00000f80: 6372 6970 7420 257d 0a20 207b 7b20 626c  cript %}.  {{ bl
-00000f90: 6f63 6b2e 7375 7065 7220 7d7d 0a20 203c  ock.super }}.  <
-00000fa0: 212d 2d20 4170 7061 6c65 7274 7320 6c69  !-- Appalerts li
-00000fb0: 7374 204a 6176 6173 6372 6970 7420 2d2d  st Javascript --
-00000fc0: 3e0a 2020 3c73 6372 6970 7420 7479 7065  >.  <script type
-00000fd0: 3d22 7465 7874 2f6a 6176 6173 6372 6970  ="text/javascrip
-00000fe0: 7422 2073 7263 3d22 7b25 2073 7461 7469  t" src="{% stati
-00000ff0: 6320 2761 7070 616c 6572 7473 2f6a 732f  c 'appalerts/js/
-00001000: 6170 7061 6c65 7274 735f 6c69 7374 2e6a  appalerts_list.j
-00001010: 7327 2025 7d22 3e3c 2f73 6372 6970 743e  s' %}"></script>
-00001020: 0a7b 2520 656e 6462 6c6f 636b 206a 6176  .{% endblock jav
-00001030: 6173 6372 6970 7420 257d 0a              ascript %}.
+00000000: 7b23 2050 726f 6a65 6374 2061 7070 2063  {# Project app c
+00000010: 6f6e 7465 6e74 2068 6561 6465 7220 237d  ontent header #}
+00000020: 0a0a 7b25 206c 6f61 6420 7275 6c65 7320  ..{% load rules 
+00000030: 257d 0a7b 2520 6c6f 6164 2070 726f 6a65  %}.{% load proje
+00000040: 6374 726f 6c65 735f 7461 6773 2025 7d0a  ctroles_tags %}.
+00000050: 7b25 206c 6f61 6420 7072 6f6a 6563 7472  {% load projectr
+00000060: 6f6c 6573 5f63 6f6d 6d6f 6e5f 7461 6773  oles_common_tags
+00000070: 2025 7d0a 0a7b 2520 6765 745f 6170 705f   %}..{% get_app_
+00000080: 7365 7474 696e 6720 2775 7365 7270 726f  setting 'userpro
+00000090: 6669 6c65 2720 2765 6e61 626c 655f 7072  file' 'enable_pr
+000000a0: 6f6a 6563 745f 7575 6964 5f63 6f70 7927  oject_uuid_copy'
+000000b0: 2075 7365 723d 7265 7175 6573 742e 7573   user=request.us
+000000c0: 6572 2061 7320 656e 6162 6c65 5f75 7569  er as enable_uui
+000000d0: 645f 636f 7079 2025 7d0a 7b25 2067 6574  d_copy %}.{% get
+000000e0: 5f64 6a61 6e67 6f5f 7365 7474 696e 6720  _django_setting 
+000000f0: 2750 524f 4a45 4354 524f 4c45 535f 4b49  'PROJECTROLES_KI
+00000100: 4f53 4b5f 4d4f 4445 2720 6173 206b 696f  OSK_MODE' as kio
+00000110: 736b 5f6d 6f64 6520 257d 0a0a 3c64 6976  sk_mode %}..<div
+00000120: 2063 6c61 7373 3d22 726f 7720 736f 6461   class="row soda
+00000130: 722d 7072 2d63 6f6e 7465 6e74 2d74 6974  r-pr-content-tit
+00000140: 6c65 223e 0a20 207b 2320 5072 6f6a 6563  le">.  {# Projec
+00000150: 7420 6d65 6e75 2064 726f 7064 6f77 6e2c  t menu dropdown,
+00000160: 206f 6e6c 7920 7669 7369 626c 6520 6966   only visible if
+00000170: 2062 726f 7773 6572 2077 6964 7468 203c   browser width <
+00000180: 2058 2061 6e64 2073 6964 6562 6172 2069   X and sidebar i
+00000190: 7320 6869 6464 656e 2023 7d0a 2020 7b25  s hidden #}.  {%
+000001a0: 2069 6620 6e6f 7420 6b69 6f73 6b5f 6d6f   if not kiosk_mo
+000001b0: 6465 2025 7d0a 2020 2020 7b25 2069 6e63  de %}.    {% inc
+000001c0: 6c75 6465 2027 7072 6f6a 6563 7472 6f6c  lude 'projectrol
+000001d0: 6573 2f5f 7072 6f6a 6563 745f 6d65 6e75  es/_project_menu
+000001e0: 5f62 746e 2e68 746d 6c27 2025 7d0a 2020  _btn.html' %}.  
+000001f0: 7b25 2065 6e64 6966 2025 7d0a 0a20 203c  {% endif %}..  <
+00000200: 6832 2063 6c61 7373 3d22 736f 6461 722d  h2 class="sodar-
+00000210: 7072 2d63 6f6e 7465 6e74 2d74 6974 6c65  pr-content-title
+00000220: 206d 722d 3222 3e7b 7b20 7072 6f6a 6563   mr-2">{{ projec
+00000230: 742e 7469 746c 6520 7d7d 3c2f 6832 3e0a  t.title }}</h2>.
+00000240: 0a20 207b 2320 5072 6f6a 6563 7420 7374  .  {# Project st
+00000250: 6172 7269 6e67 2f75 6e73 7461 7272 696e  arring/unstarrin
+00000260: 6720 237d 0a20 207b 2520 6966 2072 6571  g #}.  {% if req
+00000270: 7565 7374 2e75 7365 722e 6973 5f61 7574  uest.user.is_aut
+00000280: 6865 6e74 6963 6174 6564 2025 7d0a 2020  henticated %}.  
+00000290: 2020 3c61 2072 6f6c 653d 226c 696e 6b22    <a role="link"
+000002a0: 0a20 2020 2020 2020 636c 6173 733d 2262  .       class="b
+000002b0: 746e 2062 746e 2d6c 696e 6b20 6d6c 2d30  tn btn-link ml-0
+000002c0: 206d 722d 3220 736f 6461 722d 7072 2d62   mr-2 sodar-pr-b
+000002d0: 746e 2d74 6974 6c65 2073 6f64 6172 2d70  tn-title sodar-p
+000002e0: 722d 6274 6e2d 7374 6172 220a 2020 2020  r-btn-star".    
+000002f0: 2020 2069 643d 2273 6f64 6172 2d70 722d     id="sodar-pr-
+00000300: 6c69 6e6b 2d70 726f 6a65 6374 2d73 7461  link-project-sta
+00000310: 7222 0a20 2020 2020 2020 7374 6172 2d75  r".       star-u
+00000320: 726c 3d22 7b25 2075 726c 2027 7072 6f6a  rl="{% url 'proj
+00000330: 6563 7472 6f6c 6573 3a61 6a61 785f 7374  ectroles:ajax_st
+00000340: 6172 2720 7072 6f6a 6563 743d 7072 6f6a  ar' project=proj
+00000350: 6563 742e 736f 6461 725f 7575 6964 2025  ect.sodar_uuid %
+00000360: 7d22 0a20 2020 2020 2020 7469 746c 653d  }".       title=
+00000370: 227b 2520 6966 2070 726f 6a65 6374 5f73  "{% if project_s
+00000380: 7461 7272 6564 2025 7d55 6e73 7461 727b  tarred %}Unstar{
+00000390: 2520 656c 7365 2025 7d53 7461 727b 2520  % else %}Star{% 
+000003a0: 656e 6469 6620 257d 220a 2020 2020 2020  endif %}".      
+000003b0: 2064 6174 612d 746f 6767 6c65 3d22 746f   data-toggle="to
+000003c0: 6f6c 7469 7022 2064 6174 612d 706c 6163  oltip" data-plac
+000003d0: 656d 656e 743d 2274 6f70 223e 0a20 2020  ement="top">.   
+000003e0: 2020 207b 2520 6966 2070 726f 6a65 6374     {% if project
+000003f0: 5f73 7461 7272 6564 2025 7d0a 2020 2020  _starred %}.    
+00000400: 2020 2020 3c69 2063 6c61 7373 3d22 6963      <i class="ic
+00000410: 6f6e 6966 7920 7465 7874 2d77 6172 6e69  onify text-warni
+00000420: 6e67 2220 6461 7461 2d69 636f 6e3d 226d  ng" data-icon="m
+00000430: 6469 3a73 7461 7222 2064 6174 612d 6865  di:star" data-he
+00000440: 6967 6874 3d22 3330 223e 3c2f 693e 0a20  ight="30"></i>. 
+00000450: 2020 2020 207b 2520 656c 7365 2025 7d0a       {% else %}.
+00000460: 2020 2020 2020 2020 3c69 2063 6c61 7373          <i class
+00000470: 3d22 6963 6f6e 6966 7920 7465 7874 2d6d  ="iconify text-m
+00000480: 7574 6564 2220 6461 7461 2d69 636f 6e3d  uted" data-icon=
+00000490: 226d 6469 3a73 7461 722d 6f75 746c 696e  "mdi:star-outlin
+000004a0: 6522 2064 6174 612d 6865 6967 6874 3d22  e" data-height="
+000004b0: 3330 223e 3c2f 693e 0a20 2020 2020 207b  30"></i>.      {
+000004c0: 2520 656e 6469 6620 257d 0a20 2020 203c  % endif %}.    <
+000004d0: 2f61 3e0a 2020 7b25 2065 6e64 6966 2025  /a>.  {% endif %
+000004e0: 7d0a 0a20 207b 2320 5072 6f6a 6563 7420  }..  {# Project 
+000004f0: 636f 7079 2075 7569 6420 237d 0a20 207b  copy uuid #}.  {
+00000500: 2520 6966 2065 6e61 626c 655f 7575 6964  % if enable_uuid
+00000510: 5f63 6f70 7920 257d 0a20 2020 203c 6120  _copy %}.    <a 
+00000520: 726f 6c65 3d22 7375 626d 6974 2220 636c  role="submit" cl
+00000530: 6173 733d 2262 746e 2062 746e 2d6c 696e  ass="btn btn-lin
+00000540: 6b20 6d72 2d32 2073 6f64 6172 2d70 722d  k mr-2 sodar-pr-
+00000550: 6274 6e2d 7469 746c 6520 736f 6461 722d  btn-title sodar-
+00000560: 7072 2d62 746e 2d63 6f70 792d 7575 6964  pr-btn-copy-uuid
+00000570: 2073 6f64 6172 2d63 6f70 792d 6274 6e22   sodar-copy-btn"
+00000580: 0a20 2020 2020 2020 6964 3d22 736f 6461  .       id="soda
+00000590: 722d 7072 2d62 746e 2d63 6f70 792d 7575  r-pr-btn-copy-uu
+000005a0: 6964 220a 2020 2020 2020 2064 6174 612d  id".       data-
+000005b0: 636c 6970 626f 6172 642d 7465 7874 3d22  clipboard-text="
+000005c0: 7b7b 2070 726f 6a65 6374 2e73 6f64 6172  {{ project.sodar
+000005d0: 5f75 7569 6420 7d7d 220a 2020 2020 2020  _uuid }}".      
+000005e0: 2074 6974 6c65 3d22 436f 7079 2055 5549   title="Copy UUI
+000005f0: 4420 746f 2063 6c69 7062 6f61 7264 2220  D to clipboard" 
+00000600: 6461 7461 2d74 6f67 676c 653d 2274 6f6f  data-toggle="too
+00000610: 6c74 6970 2220 6461 7461 2d70 6c61 6365  ltip" data-place
+00000620: 6d65 6e74 3d22 746f 7022 3e0a 2020 2020  ment="top">.    
+00000630: 2020 3c69 2063 6c61 7373 3d22 6963 6f6e    <i class="icon
+00000640: 6966 7920 7465 7874 2d6d 7574 6564 220a  ify text-muted".
+00000650: 2020 2020 2020 2020 2064 6174 612d 6963           data-ic
+00000660: 6f6e 3d22 6d64 693a 636c 6970 626f 6172  on="mdi:clipboar
+00000670: 642d 7465 7874 2d6d 756c 7469 706c 652d  d-text-multiple-
+00000680: 6f75 746c 696e 6522 2064 6174 612d 6865  outline" data-he
+00000690: 6967 6874 3d22 3330 223e 0a20 2020 2020  ight="30">.     
+000006a0: 203c 2f69 3e0a 2020 2020 3c2f 613e 0a20   </i>.    </a>. 
+000006b0: 207b 2520 656e 6469 6620 257d 0a0a 2020   {% endif %}..  
+000006c0: 7b23 2053 6563 6f6e 6461 7279 2074 6974  {# Secondary tit
+000006d0: 6c65 2023 7d0a 2020 3c64 6976 2063 6c61  le #}.  <div cla
+000006e0: 7373 3d22 736f 6461 722d 7072 2d63 6f6e  ss="sodar-pr-con
+000006f0: 7465 6e74 2d74 6974 6c65 2d73 6563 6f6e  tent-title-secon
+00000700: 6461 7279 2074 6578 742d 6d75 7465 6422  dary text-muted"
+00000710: 3e0a 2020 2020 7b25 2069 6620 7072 6f6a  >.    {% if proj
+00000720: 6563 742e 6465 7363 7269 7074 696f 6e20  ect.description 
+00000730: 257d 0a20 2020 2020 207b 7b20 7072 6f6a  %}.      {{ proj
+00000740: 6563 742e 6465 7363 7269 7074 696f 6e20  ect.description 
+00000750: 7d7d 0a20 2020 207b 2520 656e 6469 6620  }}.    {% endif 
+00000760: 257d 0a20 203c 2f64 6976 3e0a 0a20 207b  %}.  </div>..  {
+00000770: 2320 4865 6164 6572 2069 636f 6e73 2023  # Header icons #
+00000780: 7d0a 2020 3c64 6976 2063 6c61 7373 3d22  }.  <div class="
+00000790: 6d6c 2d61 7574 6f22 3e0a 2020 2020 7b23  ml-auto">.    {#
+000007a0: 2052 656d 6f74 6520 7374 6174 7573 2023   Remote status #
+000007b0: 7d0a 2020 2020 7b25 2069 6620 7072 6f6a  }.    {% if proj
+000007c0: 6563 742e 6973 5f72 656d 6f74 6520 616e  ect.is_remote an
+000007d0: 6420 7265 7175 6573 742e 7573 6572 2e69  d request.user.i
+000007e0: 735f 7375 7065 7275 7365 7220 257d 0a20  s_superuser %}. 
+000007f0: 2020 2020 203c 7370 616e 2063 6c61 7373       <span class
+00000800: 3d22 736f 6461 722d 7072 2d68 6561 6465  ="sodar-pr-heade
+00000810: 722d 6963 6f6e 220a 2020 2020 2020 2020  r-icon".        
+00000820: 2020 2020 7469 746c 653d 227b 2520 6966      title="{% if
+00000830: 2070 726f 6a65 6374 2e69 735f 7265 766f   project.is_revo
+00000840: 6b65 6420 257d 5245 564f 4b45 4420 7265  ked %}REVOKED re
+00000850: 6d6f 7465 7b25 2065 6c73 6520 257d 5265  mote{% else %}Re
+00000860: 6d6f 7465 7b25 2065 6e64 6966 2025 7d0a  mote{% endif %}.
+00000870: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000880: 2020 207b 2520 6765 745f 6469 7370 6c61     {% get_displa
+00000890: 795f 6e61 6d65 2027 5052 4f4a 4543 5427  y_name 'PROJECT'
+000008a0: 2025 7d20 6672 6f6d 207b 7b20 7072 6f6a   %} from {{ proj
+000008b0: 6563 742e 6765 745f 736f 7572 6365 5f73  ect.get_source_s
+000008c0: 6974 652e 6e61 6d65 207d 7d22 0a20 2020  ite.name }}".   
+000008d0: 2020 2020 2020 2020 2069 643d 2273 6f64           id="sod
+000008e0: 6172 2d70 722d 6865 6164 6572 2d69 636f  ar-pr-header-ico
+000008f0: 6e2d 7265 6d6f 7465 220a 2020 2020 2020  n-remote".      
+00000900: 2020 2020 2020 6461 7461 2d74 6f67 676c        data-toggl
+00000910: 653d 2274 6f6f 6c74 6970 2220 6461 7461  e="tooltip" data
+00000920: 2d70 6c61 6365 6d65 6e74 3d22 6c65 6674  -placement="left
+00000930: 223e 0a20 2020 2020 2020 203c 6920 636c  ">.        <i cl
+00000940: 6173 733d 2269 636f 6e69 6679 207b 2520  ass="iconify {% 
+00000950: 6966 2070 726f 6a65 6374 2e69 735f 7265  if project.is_re
+00000960: 766f 6b65 6420 257d 7465 7874 2d64 616e  voked %}text-dan
+00000970: 6765 727b 2520 656c 7365 2025 7d74 6578  ger{% else %}tex
+00000980: 742d 696e 666f 7b25 2065 6e64 6966 2025  t-info{% endif %
+00000990: 7d22 0a20 2020 2020 2020 2020 2020 6461  }".           da
+000009a0: 7461 2d69 636f 6e3d 226d 6469 3a63 6c6f  ta-icon="mdi:clo
+000009b0: 7564 2220 6461 7461 2d68 6569 6768 743d  ud" data-height=
+000009c0: 2233 3022 3e0a 2020 2020 2020 2020 3c2f  "30">.        </
+000009d0: 693e 0a20 2020 2020 203c 2f73 7061 6e3e  i>.      </span>
+000009e0: 0a20 2020 207b 2520 656e 6469 6620 257d  .    {% endif %}
+000009f0: 0a20 2020 207b 2320 5075 626c 6963 2061  .    {# Public a
+00000a00: 6363 6573 7320 7374 6174 7573 2023 7d0a  ccess status #}.
+00000a10: 2020 2020 7b25 2069 6620 7072 6f6a 6563      {% if projec
+00000a20: 742e 7479 7065 203d 3d20 2750 524f 4a45  t.type == 'PROJE
+00000a30: 4354 2720 616e 6420 7072 6f6a 6563 742e  CT' and project.
+00000a40: 7075 626c 6963 5f67 7565 7374 5f61 6363  public_guest_acc
+00000a50: 6573 7320 257d 0a20 2020 2020 203c 7370  ess %}.      <sp
+00000a60: 616e 2063 6c61 7373 3d22 6d6c 2d32 2073  an class="ml-2 s
+00000a70: 6f64 6172 2d70 722d 6865 6164 6572 2d69  odar-pr-header-i
+00000a80: 636f 6e22 2074 6974 6c65 3d22 5075 626c  con" title="Publ
+00000a90: 6963 2067 7565 7374 2061 6363 6573 7322  ic guest access"
+00000aa0: 0a20 2020 2020 2020 2020 2020 2069 643d  .            id=
+00000ab0: 2273 6f64 6172 2d70 722d 6865 6164 6572  "sodar-pr-header
+00000ac0: 2d69 636f 6e2d 6172 6368 6976 652d 7075  -icon-archive-pu
+00000ad0: 626c 6963 220a 2020 2020 2020 2020 2020  blic".          
+00000ae0: 2020 6461 7461 2d74 6f67 676c 653d 2274    data-toggle="t
+00000af0: 6f6f 6c74 6970 2220 6461 7461 2d70 6c61  ooltip" data-pla
+00000b00: 6365 6d65 6e74 3d22 6c65 6674 223e 0a20  cement="left">. 
+00000b10: 2020 2020 2020 203c 6920 636c 6173 733d         <i class=
+00000b20: 2269 636f 6e69 6679 2074 6578 742d 696e  "iconify text-in
+00000b30: 666f 2220 6461 7461 2d69 636f 6e3d 226d  fo" data-icon="m
+00000b40: 6469 3a65 6172 7468 2220 6461 7461 2d68  di:earth" data-h
+00000b50: 6569 6768 743d 2233 3022 3e3c 2f69 3e0a  eight="30"></i>.
+00000b60: 2020 2020 2020 3c2f 7370 616e 3e0a 2020        </span>.  
+00000b70: 2020 7b25 2065 6e64 6966 2025 7d0a 2020    {% endif %}.  
+00000b80: 2020 7b23 2041 7263 6869 7665 2073 7461    {# Archive sta
+00000b90: 7475 7320 237d 0a20 2020 207b 2520 6966  tus #}.    {% if
+00000ba0: 2070 726f 6a65 6374 2e74 7970 6520 3d3d   project.type ==
+00000bb0: 2027 5052 4f4a 4543 5427 2061 6e64 2070   'PROJECT' and p
+00000bc0: 726f 6a65 6374 2e61 7263 6869 7665 2025  roject.archive %
+00000bd0: 7d0a 2020 2020 2020 3c73 7061 6e20 636c  }.      <span cl
+00000be0: 6173 733d 226d 6c2d 3220 736f 6461 722d  ass="ml-2 sodar-
+00000bf0: 7072 2d68 6561 6465 722d 6963 6f6e 2220  pr-header-icon" 
+00000c00: 7469 746c 653d 2241 7263 6869 7665 6422  title="Archived"
+00000c10: 0a20 2020 2020 2020 2020 2020 2069 643d  .            id=
+00000c20: 2273 6f64 6172 2d70 722d 6865 6164 6572  "sodar-pr-header
+00000c30: 2d69 636f 6e2d 6172 6368 6976 6522 0a20  -icon-archive". 
+00000c40: 2020 2020 2020 2020 2020 2064 6174 612d             data-
+00000c50: 746f 6767 6c65 3d22 746f 6f6c 7469 7022  toggle="tooltip"
+00000c60: 2064 6174 612d 706c 6163 656d 656e 743d   data-placement=
+00000c70: 226c 6566 7422 3e0a 2020 2020 2020 2020  "left">.        
+00000c80: 3c69 2063 6c61 7373 3d22 6963 6f6e 6966  <i class="iconif
+00000c90: 7920 7465 7874 2d69 6e66 6f22 2064 6174  y text-info" dat
+00000ca0: 612d 6963 6f6e 3d22 6d64 693a 6172 6368  a-icon="mdi:arch
+00000cb0: 6976 6522 2064 6174 612d 6865 6967 6874  ive" data-height
+00000cc0: 3d22 3330 223e 3c2f 693e 0a20 2020 2020  ="30"></i>.     
+00000cd0: 203c 2f73 7061 6e3e 0a20 2020 207b 2520   </span>.    {% 
+00000ce0: 656e 6469 6620 257d 0a20 203c 2f64 6976  endif %}.  </div
+00000cf0: 3e0a 3c2f 6469 763e 0a0a 7b25 2067 6574  >.</div>..{% get
+00000d00: 5f64 6973 706c 6179 5f6e 616d 6520 7072  _display_name pr
+00000d10: 6f6a 6563 742e 7479 7065 2061 7320 7072  oject.type as pr
+00000d20: 6f6a 6563 745f 6469 7370 6c61 7920 257d  oject_display %}
+00000d30: 0a0a 7b25 2069 6620 7072 6f6a 6563 742e  ..{% if project.
+00000d40: 7479 7065 203d 3d20 2750 524f 4a45 4354  type == 'PROJECT
+00000d50: 2720 616e 6420 7072 6f6a 6563 742e 6172  ' and project.ar
+00000d60: 6368 6976 6520 257d 0a20 203c 6469 7620  chive %}.  <div 
+00000d70: 636c 6173 733d 2261 6c65 7274 2061 6c65  class="alert ale
+00000d80: 7274 2d69 6e66 6f20 6d74 2d33 206d 622d  rt-info mt-3 mb-
+00000d90: 3022 2069 643d 2273 6f64 6172 2d70 722d  0" id="sodar-pr-
+00000da0: 616c 6572 742d 6172 6368 6976 6522 3e0a  alert-archive">.
+00000db0: 2020 2020 3c69 2063 6c61 7373 3d22 6963      <i class="ic
+00000dc0: 6f6e 6966 7922 2064 6174 612d 6963 6f6e  onify" data-icon
+00000dd0: 3d22 6d64 693a 6172 6368 6976 6522 3e3c  ="mdi:archive"><
+00000de0: 2f69 3e20 5468 6973 207b 7b20 7072 6f6a  /i> This {{ proj
+00000df0: 6563 745f 6469 7370 6c61 7920 7d7d 0a20  ect_display }}. 
+00000e00: 2020 2068 6173 2062 6565 6e20 6172 6368     has been arch
+00000e10: 6976 6564 2e20 4163 6365 7373 2074 6f20  ived. Access to 
+00000e20: 6461 7461 2069 6e20 7b7b 2070 726f 6a65  data in {{ proje
+00000e30: 6374 5f64 6973 706c 6179 207d 7d20 6170  ct_display }} ap
+00000e40: 7073 2068 6173 2062 6565 6e20 7365 740a  ps has been set.
+00000e50: 2020 2020 746f 2072 6561 642d 6f6e 6c79      to read-only
+00000e60: 2066 6f72 2061 6c6c 2075 7365 7273 2e0a   for all users..
+00000e70: 2020 3c2f 6469 763e 0a7b 2520 656e 6469    </div>.{% endi
+00000e80: 6620 257d 0a7b 2520 6966 2070 726f 6a65  f %}.{% if proje
+00000e90: 6374 2e69 735f 7265 766f 6b65 6420 257d  ct.is_revoked %}
+00000ea0: 0a20 203c 6469 7620 636c 6173 733d 2261  .  <div class="a
+00000eb0: 6c65 7274 2061 6c65 7274 2d64 616e 6765  lert alert-dange
+00000ec0: 7220 6d74 2d33 206d 622d 3022 2069 643d  r mt-3 mb-0" id=
+00000ed0: 2273 6f64 6172 2d70 722d 616c 6572 742d  "sodar-pr-alert-
+00000ee0: 7265 6d6f 7465 2d72 6576 6f6b 6564 223e  remote-revoked">
+00000ef0: 0a20 2020 203c 6920 636c 6173 733d 2269  .    <i class="i
+00000f00: 636f 6e69 6679 2220 6461 7461 2d69 636f  conify" data-ico
+00000f10: 6e3d 226d 6469 3a63 6c6f 7564 223e 3c2f  n="mdi:cloud"></
+00000f20: 693e 2054 6865 2073 6f75 7263 6520 7369  i> The source si
+00000f30: 7465 2068 6173 2072 6576 6f6b 6564 0a20  te has revoked. 
+00000f40: 2020 2061 6363 6573 7320 746f 2074 6869     access to thi
+00000f50: 7320 7265 6d6f 7465 6c79 2073 796e 6368  s remotely synch
+00000f60: 726f 6e69 7a65 6420 7b7b 2070 726f 6a65  ronized {{ proje
+00000f70: 6374 5f64 6973 706c 6179 207d 7d2e 204f  ct_display }}. O
+00000f80: 6e6c 7920 610a 2020 2020 7375 7065 7275  nly a.    superu
+00000f90: 7365 722c 2061 6e20 6f77 6e65 7220 6f72  ser, an owner or
+00000fa0: 2061 2064 656c 6567 6174 6520 6361 6e20   a delegate can 
+00000fb0: 6375 7272 656e 746c 7920 6163 6365 7373  currently access
+00000fc0: 2074 6865 0a20 2020 207b 7b20 7072 6f6a   the.    {{ proj
+00000fd0: 6563 745f 6469 7370 6c61 7920 7d7d 2e0a  ect_display }}..
+00000fe0: 2020 3c2f 6469 763e 0a7b 2520 656e 6469    </div>.{% endi
+00000ff0: 6620 257d 0a                             f %}.
```

### Comparing `django-sodar-core-0.12.0/appalerts/tests/test_api.py` & `django-sodar-core-0.13.0/appalerts/tests/test_api.py`

 * *Files 22% similar despite different names*

```diff
@@ -26,14 +26,17 @@
 
 class TestAppAlertAPI(AppAlertMixin, ProjectMixin, TestCase):
     """Base class for appalerts backend API testing"""
 
     def setUp(self):
         # Create user
         self.user = self.make_user('user')
+        # Create superuser
+        self.superuser = self.make_user('superuser')
+        self.superuser.is_superuser = True
         self.project = self.make_project(
             title='TestProject', type=PROJECT_TYPE_PROJECT, parent=None
         )
         self.project_url = reverse(
             'projectroles:detail',
             kwargs={'project': str(self.project.sodar_uuid)},
         )
@@ -68,14 +71,28 @@
             'url': '/project/' + str(self.project.sodar_uuid),
             'project': self.project.pk,
             'sodar_uuid': alert.sodar_uuid,
         }
         model_dict = model_to_dict(alert)
         self.assertEqual(model_dict, expected)
 
+    def test_add_alerts(self):
+        """Test add_alerts()"""
+        self.assertEqual(AppAlert.objects.count(), 0)
+        self.app_alerts.add_alerts(
+            app_name='timeline',
+            alert_name=ALERT_NAME,
+            users=[self.user, self.superuser],
+            message=ALERT_MSG,
+            level=ALERT_LEVEL,
+            url=self.project_url,
+            project=self.project,
+        )
+        self.assertEqual(AppAlert.objects.count(), 2)
+
     def test_add_alert_projectroles(self):
         """Test alert addition for projectroles"""
         self.assertEqual(AppAlert.objects.count(), 0)
         alert = self.app_alerts.add_alert(
             app_name='projectroles',
             alert_name=ALERT_NAME,
             user=self.user,
```

### Comparing `django-sodar-core-0.12.0/appalerts/tests/test_models.py` & `django-sodar-core-0.13.0/appalerts/tests/test_models.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/appalerts/tests/test_permissions.py` & `django-sodar-core-0.13.0/appalerts/tests/test_permissions.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/appalerts/tests/test_ui.py` & `django-sodar-core-0.13.0/appalerts/tests/test_ui.py`

 * *Files 20% similar despite different names*

```diff
@@ -34,15 +34,21 @@
         )
         self.alert2 = self.make_app_alert(
             user=self.regular_user, url=reverse('home')
         )
 
 
 class TestListView(TestAlertUIBase):
-    """Tests for the admin alert list view"""
+    """Tests for app alert list view"""
+
+    def _find_alert_element(self, alert):
+        """Return element for AppAlert object"""
+        return self.selenium.find_element(
+            By.XPATH, '//div[@data-alert-uuid="{}"]'.format(alert.sodar_uuid)
+        )
 
     def test_render(self):
         """Test existence of alert items in list"""
         expected = [
             (self.superuser, 0),
             (self.regular_user, 2),
             (self.no_alert_user, 0),
@@ -52,14 +58,53 @@
             expected,
             url,
             'alert alert-info sodar-app-alert-item',
             'class',
             exact=True,
         )
 
+    def test_render_dismissed(self):
+        """Test displaying dismissed alerts"""
+        self.alert.active = False
+        self.alert.save()
+        self.alert2.active = False
+        self.alert2.save()
+        url = reverse('appalerts:list_dismissed')
+        self.login_and_redirect(self.regular_user, url)
+        btn = self.selenium.find_element(
+            By.ID, 'sodar-app-alert-btn-not-dismissed'
+        )
+        self.assertEqual(btn.text, 'Active Alerts')
+        self.assertIsNotNone(self._find_alert_element(self.alert))
+        self.assertIsNotNone(self._find_alert_element(self.alert2))
+
+    def test_render_dismissed_project(self):
+        """Test displaying dismissed alerts with project"""
+        self.make_assignment(
+            self.project, self.regular_user, self.role_contributor
+        )
+        self.alert.project = self.project
+        self.alert.active = False
+        self.alert.save()
+        url = reverse('appalerts:list_dismissed')
+        self.login_and_redirect(self.regular_user, url)
+        alert_cat = self._find_alert_element(self.alert)
+        self.assertIn('alert-info', alert_cat.get_attribute('class'))
+
+    def test_render_dismissed_project_no_role(self):
+        """Test displaying dismissed alerts with project and no access"""
+        # No role assignment created
+        self.alert.project = self.project
+        self.alert.active = False
+        self.alert.save()
+        url = reverse('appalerts:list_dismissed')
+        self.login_and_redirect(self.regular_user, url)
+        alert_cat = self._find_alert_element(self.alert)
+        self.assertIn('alert-secondary', alert_cat.get_attribute('class'))
+
     def test_alert_dismiss(self):
         """Test dismissing alert"""
         self.assertEqual(AppAlert.objects.filter(active=True).count(), 2)
 
         url = reverse('appalerts:list')
         self.login_and_redirect(self.regular_user, url)
         self.assertEqual(
@@ -90,28 +135,42 @@
         self.assertFalse(
             self.selenium.find_element(
                 By.ID, 'sodar-app-alert-empty'
             ).is_displayed()
         )
 
     def test_alert_dismiss_all(self):
-        """Test dismissing all alerts for the user"""
+        """Test dismissing all alerts for user"""
         self.assertEqual(AppAlert.objects.filter(active=True).count(), 2)
 
         url = reverse('appalerts:list')
         self.login_and_redirect(self.regular_user, url)
         self.assertEqual(
             self.selenium.find_element(By.ID, 'sodar-app-alert-count').text, '2'
         )
         self.assertEqual(
             self.selenium.find_element(By.ID, 'sodar-app-alert-legend').text,
             'alerts',
         )
 
         self.selenium.find_element(
+            By.ID, 'sodar-app-alert-btn-dropdown-operations'
+        ).click()
+        WebDriverWait(self.selenium, self.wait_time).until(
+            ec.element_to_be_clickable(
+                (By.ID, 'sodar-app-alert-btn-dismiss-all')
+            )
+        )
+        self.assertEqual(
+            self.selenium.find_element(
+                By.ID, 'sodar-app-alert-btn-dismissed'
+            ).text,
+            'View Dismissed',
+        )
+        self.selenium.find_element(
             By.ID, 'sodar-app-alert-btn-dismiss-all'
         ).click()
         WebDriverWait(self.selenium, self.wait_time).until(
             ec.invisibility_of_element_located(
                 (By.CLASS_NAME, 'sodar-app-alert-item')
             )
         )
```

### Comparing `django-sodar-core-0.12.0/appalerts/tests/test_views.py` & `django-sodar-core-0.13.0/appalerts/tests/test_views.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/appalerts/urls.py` & `django-sodar-core-0.13.0/appalerts/urls.py`

 * *Files 20% similar despite different names*

```diff
@@ -1,33 +1,40 @@
-from django.conf.urls import url
+from django.urls import path
 
 from appalerts import views, views_ajax
 
 app_name = 'appalerts'
 
 urlpatterns = [
-    url(
-        regex=r'^list$',
+    path(
+        route='list',
         view=views.AppAlertListView.as_view(),
+        kwargs={'status': 'active'},
         name='list',
     ),
-    url(
-        regex=r'^redirect/(?P<appalert>[0-9a-f-]+)$',
+    path(
+        route='list/dismissed',
+        view=views.AppAlertListView.as_view(),
+        kwargs={'status': 'dismissed'},
+        name='list_dismissed',
+    ),
+    path(
+        route='redirect/<uuid:appalert>',
         view=views.AppAlertLinkRedirectView.as_view(),
         name='redirect',
     ),
-    url(
-        regex=r'^ajax/status$',
+    path(
+        route='ajax/status',
         view=views_ajax.AppAlertStatusAjaxView.as_view(),
         name='ajax_status',
     ),
-    url(
-        regex=r'^ajax/dismiss/(?P<appalert>[0-9a-f-]+)$',
+    path(
+        route='ajax/dismiss/<uuid:appalert>',
         view=views_ajax.AppAlertDismissAjaxView.as_view(),
         name='ajax_dismiss',
     ),
-    url(
-        regex=r'^ajax/dismiss/all$',
+    path(
+        route='ajax/dismiss/all',
         view=views_ajax.AppAlertDismissAjaxView.as_view(),
         name='ajax_dismiss_all',
     ),
 ]
```

### Comparing `django-sodar-core-0.12.0/appalerts/views.py` & `django-sodar-core-0.13.0/appalerts/views.py`

 * *Files 24% similar despite different names*

```diff
@@ -1,13 +1,14 @@
 """UI views for the appalerts app"""
 
 from django.contrib import messages
 from django.shortcuts import redirect
 from django.urls import reverse
 from django.views.generic import ListView, View
+from django.conf import settings
 
 # Projectroles dependency
 from projectroles.views import (
     LoginRequiredMixin,
     LoggedInPermissionMixin,
 )
 
@@ -17,18 +18,36 @@
 class AppAlertListView(LoginRequiredMixin, LoggedInPermissionMixin, ListView):
     """App alert list view"""
 
     permission_required = 'appalerts.view_alerts'
     template_name = 'appalerts/alert_list.html'
 
     def get_queryset(self):
+        status = self.kwargs.get('status', 'active')
+        if status == 'dismissed':
+            return AppAlert.objects.filter(
+                user=self.request.user, active=False
+            ).order_by('-pk')
         return AppAlert.objects.filter(
             user=self.request.user, active=True
         ).order_by('-pk')
 
+    def get_paginate_by(self, queryset):
+        status = self.kwargs.get('status', 'active')
+        if status == 'dismissed':
+            return getattr(settings, 'DEFAULT_PAGINATION', 15)
+        return None
+
+    def get_context_data(self, **kwargs):
+        context = super().get_context_data(**kwargs)
+        context['dismissed'] = (
+            True if self.kwargs.get('status') == 'dismissed' else False
+        )
+        return context
+
 
 class AppAlertLinkRedirectView(
     LoginRequiredMixin, LoggedInPermissionMixin, View
 ):
     """View for redirecting to alert link and dismissing alert"""
 
     permission_required = 'appalerts.view_alerts'
@@ -37,20 +56,18 @@
         messages.error(self.request, msg)
         return redirect(reverse('appalerts:list'))
 
     def get(self, request, **kwargs):
         alert = AppAlert.objects.filter(
             sodar_uuid=kwargs.get('appalert')
         ).first()
-
         # Handle errors
         if not alert:
             return self._handle_error('Alert not found.')
         if request.user != alert.user:
             return self._handle_error('Alert assigned to different user.')
         if not alert.url:
             return self._handle_error('No URL found for alert.')
-
         # All OK = dismiss and redirect
         alert.active = False
         alert.save()
         return redirect(alert.url)
```

### Comparing `django-sodar-core-0.12.0/appalerts/views_ajax.py` & `django-sodar-core-0.13.0/appalerts/views_ajax.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/bgjobs/migrations/0001_initial.py` & `django-sodar-core-0.13.0/bgjobs/migrations/0001_initial.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/bgjobs/migrations/0002_backgroundjoblogentry.py` & `django-sodar-core-0.13.0/bgjobs/migrations/0002_backgroundjoblogentry.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/bgjobs/migrations/0003_backgroundjob_date_created.py` & `django-sodar-core-0.13.0/bgjobs/migrations/0003_backgroundjob_date_created.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/bgjobs/migrations/0004_backgroundjob_user.py` & `django-sodar-core-0.13.0/bgjobs/migrations/0004_backgroundjob_user.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/bgjobs/migrations/0006_auto_20200526_1657.py` & `django-sodar-core-0.13.0/bgjobs/migrations/0006_auto_20200526_1657.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/bgjobs/models.py` & `django-sodar-core-0.13.0/bgjobs/models.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/bgjobs/plugins.py` & `django-sodar-core-0.13.0/bgjobs/plugins.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/bgjobs/rules.py` & `django-sodar-core-0.13.0/bgjobs/rules.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/bgjobs/templates/bgjobs/_backgroundjob_item.html` & `django-sodar-core-0.13.0/bgjobs/templates/bgjobs/_backgroundjob_item.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/bgjobs/templates/bgjobs/_backgroundjob_list.html` & `django-sodar-core-0.13.0/bgjobs/templates/bgjobs/_backgroundjob_list.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/bgjobs/templates/bgjobs/_details_card.html` & `django-sodar-core-0.13.0/bgjobs/templates/bgjobs/_details_card.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/bgjobs/templates/bgjobs/_list_buttons.html` & `django-sodar-core-0.13.0/bgjobs/templates/bgjobs/_list_buttons.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/bgjobs/templates/bgjobs/backgroundjob_confirm_clear.html` & `django-sodar-core-0.13.0/bgjobs/templates/bgjobs/backgroundjob_confirm_clear.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/bgjobs/templates/bgjobs/project_backgroundjobs.html` & `django-sodar-core-0.13.0/bgjobs/templates/bgjobs/project_backgroundjobs.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/bgjobs/templates/bgjobs/site_backgroundjobs.html` & `django-sodar-core-0.13.0/bgjobs/templates/bgjobs/site_backgroundjobs.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/bgjobs/templatetags/bgjobs_tags.py` & `django-sodar-core-0.13.0/bgjobs/templatetags/bgjobs_tags.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/bgjobs/urls.py` & `django-sodar-core-0.13.0/bgjobs/urls.py`

 * *Files 17% similar despite different names*

```diff
@@ -1,38 +1,38 @@
 """
 URL configuration for the bgjobs app.
 
 Note that the job detail view is implemented
 """
 
-from django.conf.urls import url
+from django.urls import path
+
 from bgjobs import views
 
 app_name = 'bgjobs'
 
-
 urlpatterns = [
     # List jobs that the user has access to
-    url(
-        regex=r'^(?P<project>[0-9a-f-]+)/list$',
+    path(
+        route='list/<uuid:project>',
         view=views.ProjectBackgroundJobView.as_view(),
         name='list',
     ),
     # Clear jobs in project owned by the current user
-    url(
-        regex=r'^(?P<project>[0-9a-f-]+)/clear/own$',
+    path(
+        route='clear/own/<uuid:project>',
         view=views.BackgroundJobClearOwnView.as_view(),
         name='clear_own',
     ),
     # Clear jobs in project regardless of the user
-    url(
-        regex=r'^(?P<project>[0-9a-f-]+)/clear/all$',
+    path(
+        route='clear/all/<uuid:project>',
         view=views.BackgroundJobClearAllView.as_view(),
         name='clear_all',
     ),
     # List global background jobs
-    url(
-        regex=r'^list$',
+    path(
+        route='list',
         view=views.GlobalBackgroundJobView.as_view(),
         name='site_list',
     ),
 ]
```

### Comparing `django-sodar-core-0.12.0/bgjobs/views.py` & `django-sodar-core-0.13.0/bgjobs/views.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/django_sodar_core.egg-info/PKG-INFO` & `django-sodar-core-0.13.0/django_sodar_core.egg-info/PKG-INFO`

 * *Files 2% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: django-sodar-core
-Version: 0.12.0
+Version: 0.13.0
 Summary: SODAR Core framework and project management apps
 Home-page: https://github.com/bihealth/sodar-core
 Author: Berlin Institute of Health, Core Unit Bioinformatics
 Author-email: cubi@bih-charite.de
 Classifier: Framework :: Django
 Classifier: Framework :: Django :: 3.2
 Classifier: Intended Audience :: Developers
@@ -136,15 +136,15 @@
 The ``django-sodar-core`` package can be installed into your Django project
 from PyPI as follows. Note that it is strongly recommended to freeze the
 dependency to a specific version, as this package is under active development
 and breaking changes are possible.
 
 .. code-block:: console
 
-    pip install django-sodar-core==0.12.0
+    pip install django-sodar-core==0.13.0
 
 For installing a development version you can point your dependency to a specific
 commit ID in GitHub. Note that these versions may not be stable.
 
 .. code-block:: console
 
     pip install -e git+https://github.com/bihealth/sodar-core.git@xxxxxxxxxxxxx#egg=django-sodar-core
```

### Comparing `django-sodar-core-0.12.0/django_sodar_core.egg-info/SOURCES.txt` & `django-sodar-core-0.13.0/django_sodar_core.egg-info/SOURCES.txt`

 * *Files 2% similar despite different names*

```diff
@@ -145,18 +145,19 @@
 projectroles/constants.py
 projectroles/context_processors.py
 projectroles/email.py
 projectroles/forms.py
 projectroles/middleware.py
 projectroles/models.py
 projectroles/plugins.py
-projectroles/project_tags.py
 projectroles/remote_projects.py
 projectroles/rules.py
 projectroles/serializers.py
+projectroles/signals.py
+projectroles/tasks.py
 projectroles/urls.py
 projectroles/utils.py
 projectroles/views.py
 projectroles/views_ajax.py
 projectroles/views_api.py
 projectroles/management/__init__.py
 projectroles/management/logging.py
@@ -187,21 +188,27 @@
 projectroles/migrations/0017_project_full_title.py
 projectroles/migrations/0018_update_jsonfield.py
 projectroles/migrations/0019_project_public_guest_access.py
 projectroles/migrations/0020_project_has_public_children.py
 projectroles/migrations/0021_remove_project_submit_status.py
 projectroles/migrations/0022_role_rank.py
 projectroles/migrations/0023_project_archive.py
+projectroles/migrations/0024_project_star_app_setting.py
+projectroles/migrations/0025_delete_projectusertag.py
+projectroles/migrations/0026_delete_category_settings.py
+projectroles/migrations/0027_role_project_type.py
+projectroles/migrations/0028_populate_finder_role.py
 projectroles/migrations/__init__.py
 projectroles/static/projectroles/css/pagedown.css
 projectroles/static/projectroles/css/projectroles.css
 projectroles/static/projectroles/css/shepherd-theme-sodar.css
 projectroles/static/projectroles/images/wmd-buttons.png
 projectroles/static/projectroles/js/autocomplete_redirect.js
 projectroles/static/projectroles/js/iconify.min.js
+projectroles/static/projectroles/js/project_form.js
 projectroles/static/projectroles/js/project_list.js
 projectroles/static/projectroles/js/project_star.js
 projectroles/static/projectroles/js/projectroles.js
 projectroles/static/projectroles/js/search.js
 projectroles/templates/projectroles/_appalerts_include.html
 projectroles/templates/projectroles/_footer.html
 projectroles/templates/projectroles/_messages.html
@@ -249,24 +256,26 @@
 projectroles/templates/projectroles/search_results.html
 projectroles/templates/projectroles/user_form.html
 projectroles/templates/projectroles/error/403_csrf.html
 projectroles/templates/projectroles/error/404.html
 projectroles/templates/projectroles/error/500.html
 projectroles/templatetags/__init__.py
 projectroles/templatetags/projectroles_common_tags.py
+projectroles/templatetags/projectroles_role_tags.py
 projectroles/templatetags/projectroles_tags.py
 projectroles/tests/__init__.py
 projectroles/tests/test_app_settings.py
 projectroles/tests/test_commands.py
 projectroles/tests/test_email.py
 projectroles/tests/test_models.py
 projectroles/tests/test_permissions.py
 projectroles/tests/test_permissions_ajax.py
 projectroles/tests/test_permissions_api.py
 projectroles/tests/test_remote_projects_api.py
+projectroles/tests/test_tasks.py
 projectroles/tests/test_templatetags.py
 projectroles/tests/test_ui.py
 projectroles/tests/test_views.py
 projectroles/tests/test_views_ajax.py
 projectroles/tests/test_views_api.py
 requirements/base.txt
 siteinfo/__init__.py
```

### Comparing `django-sodar-core-0.12.0/filesfolders/forms.py` & `django-sodar-core-0.13.0/filesfolders/forms.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/filesfolders/migrations/0001_initial.py` & `django-sodar-core-0.13.0/filesfolders/migrations/0001_initial.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/filesfolders/migrations/0002_auto_20180411_1758.py` & `django-sodar-core-0.13.0/filesfolders/migrations/0002_auto_20180411_1758.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/filesfolders/migrations/0003_rename_uuid.py` & `django-sodar-core-0.13.0/filesfolders/migrations/0003_rename_uuid.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/filesfolders/migrations/0004_update_uuid.py` & `django-sodar-core-0.13.0/filesfolders/migrations/0004_update_uuid.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/filesfolders/models.py` & `django-sodar-core-0.13.0/filesfolders/models.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/filesfolders/plugins.py` & `django-sodar-core-0.13.0/filesfolders/plugins.py`

 * *Files 2% similar despite different names*

```diff
@@ -21,29 +21,29 @@
 
     # Properties required by django-plugins ------------------------------
 
     #: Name (slug-safe, used in URLs)
     name = 'filesfolders'
 
     #: Title (used in templates)
-    title = 'Small Files'
+    title = 'Files'
 
     #: App URLs (will be included in settings by djangoplugins)
     urls = urlpatterns
 
     # Properties defined in ProjectAppPluginPoint -----------------------
 
     #: App settings definition
     app_settings = {
         'allow_public_links': {
             'scope': APP_SETTING_SCOPE_PROJECT,
             'type': 'BOOLEAN',
             'default': False,
             'label': 'Allow public links',
-            'description': 'Allow generation of public links for small files',
+            'description': 'Allow generation of public links for files',
             'user_modifiable': True,
         }
     }
 
     #: Iconify icon
     icon = 'mdi:file'
 
@@ -67,32 +67,32 @@
     #: Search results template
     search_template = 'filesfolders/_search_results.html'
 
     #: App card template for the project details page
     details_template = 'filesfolders/_details_card.html'
 
     #: App card title for the project details page
-    details_title = 'Small Files Overview'
+    details_title = 'Files Overview'
 
     #: Position in plugin ordering
     plugin_ordering = 30
 
     project_list_columns = {
         'files': {
             'title': 'Files',
             'width': 75,
-            'description': 'Small files stored for the project',
+            'description': 'files stored for the project',
             'active': SHOW_LIST_COLUMNS,
             'ordering': 35,
             'align': 'right',
         },
         'links': {
             'title': 'Links',
             'width': 75,
-            'description': 'Hyperlinks defined in the small files app',
+            'description': 'Hyperlinks defined in the files app',
             'active': SHOW_LIST_COLUMNS,
             'ordering': 25,
             'align': 'right',
         },
     }
 
     #: Names of plugin specific Django settings to display in siteinfo
@@ -170,15 +170,15 @@
                 x
                 for x in items
                 if user.has_perm('filesfolders.view_data', x.project)
             ]
 
         return {
             'all': {
-                'title': 'Small Files, Folders and Links',
+                'title': 'Files, Folders and Links',
                 'search_types': ['file', 'folder', 'link'],
                 'items': items,
             }
         }
 
     def get_statistics(self):
         return {
```

### Comparing `django-sodar-core-0.12.0/filesfolders/rules.py` & `django-sodar-core-0.13.0/filesfolders/rules.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/filesfolders/serializers.py` & `django-sodar-core-0.13.0/filesfolders/serializers.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/filesfolders/static/filesfolders/js/filesfolders.js` & `django-sodar-core-0.13.0/filesfolders/static/filesfolders/js/filesfolders.js`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/filesfolders/templates/filesfolders/_details_card.html` & `django-sodar-core-0.13.0/filesfolders/templates/filesfolders/_details_card.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/filesfolders/templates/filesfolders/_file_buttons.html` & `django-sodar-core-0.13.0/filesfolders/templates/filesfolders/_file_buttons.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/filesfolders/templates/filesfolders/_file_item.html` & `django-sodar-core-0.13.0/filesfolders/templates/filesfolders/_file_item.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/filesfolders/templates/filesfolders/_flag_select.html` & `django-sodar-core-0.13.0/filesfolders/templates/filesfolders/_flag_select.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/filesfolders/templates/filesfolders/_folder_buttons.html` & `django-sodar-core-0.13.0/filesfolders/templates/filesfolders/_folder_buttons.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/filesfolders/templates/filesfolders/_hyperlink_buttons.html` & `django-sodar-core-0.13.0/filesfolders/templates/filesfolders/_hyperlink_buttons.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/filesfolders/templates/filesfolders/_list_buttons.html` & `django-sodar-core-0.13.0/filesfolders/templates/filesfolders/_list_buttons.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/filesfolders/templates/filesfolders/_search_item.html` & `django-sodar-core-0.13.0/filesfolders/templates/filesfolders/_search_item.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/filesfolders/templates/filesfolders/_search_results.html` & `django-sodar-core-0.13.0/filesfolders/templates/filesfolders/_search_results.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/filesfolders/templates/filesfolders/batch_edit_confirm.html` & `django-sodar-core-0.13.0/filesfolders/templates/filesfolders/batch_edit_confirm.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/filesfolders/templates/filesfolders/file_confirm_delete.html` & `django-sodar-core-0.13.0/filesfolders/templates/filesfolders/file_confirm_delete.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/filesfolders/templates/filesfolders/file_form.html` & `django-sodar-core-0.13.0/filesfolders/templates/filesfolders/file_form.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/filesfolders/templates/filesfolders/folder_confirm_delete.html` & `django-sodar-core-0.13.0/filesfolders/templates/filesfolders/folder_confirm_delete.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/filesfolders/templates/filesfolders/folder_form.html` & `django-sodar-core-0.13.0/filesfolders/templates/filesfolders/folder_form.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/filesfolders/templates/filesfolders/hyperlink_confirm_delete.html` & `django-sodar-core-0.13.0/filesfolders/templates/filesfolders/hyperlink_confirm_delete.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/filesfolders/templates/filesfolders/hyperlink_form.html` & `django-sodar-core-0.13.0/filesfolders/templates/filesfolders/hyperlink_form.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/filesfolders/templates/filesfolders/project_files.html` & `django-sodar-core-0.13.0/filesfolders/templates/filesfolders/project_files.html`

 * *Files 0% similar despite different names*

```diff
@@ -5,15 +5,15 @@
 
 {# Projectroles dependency #}
 {% load projectroles_common_tags %}
 
 {% load filesfolders_tags %}
 
 {% block title %}
-  Small Files for {{ project.title }}
+  Files for {{ project.title }}
   {% if folder %}
     / {{ folder.name }}
   {% endif %}
 {% endblock title %}
 
 {% block css %}
   {{ block.super }}
@@ -79,15 +79,15 @@
 {% has_perm 'filesfolders.update_data_all' request.user project as can_update_all %}
 {% has_perm 'filesfolders.share_public_link' request.user project as can_share_link %}
 
 {% allow_public_links project as allow_public_links %}
 
 {% if can_view_data %}
   <div class="row sodar-subtitle-container bg-white sticky-top">
-    <h3><i class="iconify" data-icon="mdi:file"></i> Small Files</h3>
+    <h3><i class="iconify" data-icon="mdi:file"></i> Files</h3>
     {% if can_add_data %}
       {% include 'filesfolders/_list_buttons.html' with project=project folder=folder up=False %}
     {% endif %}
   </div>
 
   <div class="container-fluid sodar-page-container">
     {% if folder %}
```

#### html2text {}

```diff
@@ -1,21 +1,21 @@
 {% extends 'projectroles/project_base.html' %} {% load rules %} {% load static
 %} {# Projectroles dependency #} {% load projectroles_common_tags %} {% load
-filesfolders_tags %} {% block title %} Small Files for {{ project.title }} {%
-if folder %} / {{ folder.name }} {% endif %} {% endblock title %} {% block css
-%} {{ block.super }}
+filesfolders_tags %} {% block title %} Files for {{ project.title }} {% if
+folder %} / {{ folder.name }} {% endif %} {% endblock title %} {% block css %}
+{{ block.super }}
  {% endblock css %} {% block projectroles_extend %} {# Projectroles dependency
 #} {% has_perm 'filesfolders.view_data' request.user project as can_view_data
 %} {% has_perm 'filesfolders.add_data' request.user project as can_add_data %}
 {% has_perm 'filesfolders.update_data_own' request.user project as
 can_update_own %} {% has_perm 'filesfolders.update_data_all' request.user
 project as can_update_all %} {% has_perm 'filesfolders.share_public_link'
 request.user project as can_share_link %} {% allow_public_links project as
 allow_public_links %} {% if can_view_data %}
- Small Files
+ Files
 {% if can_add_data %} {% include 'filesfolders/_list_buttons.html' with
 project=project folder=folder up=False %} {% endif %}
 {% if folder %}
 {% else %}
 {% endif %} {% csrf_token %}
    1. {% if not folder %}
    2.  root
```

### Comparing `django-sodar-core-0.12.0/filesfolders/templates/filesfolders/public_link.html` & `django-sodar-core-0.13.0/filesfolders/templates/filesfolders/public_link.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/filesfolders/templatetags/filesfolders_tags.py` & `django-sodar-core-0.13.0/filesfolders/templatetags/filesfolders_tags.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/filesfolders/tests/data/unpack_test.zip` & `django-sodar-core-0.13.0/filesfolders/tests/data/unpack_test.zip`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/filesfolders/tests/test_models.py` & `django-sodar-core-0.13.0/filesfolders/tests/test_models.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/filesfolders/tests/test_permissions.py` & `django-sodar-core-0.13.0/filesfolders/tests/test_permissions.py`

 * *Files 16% similar despite different names*

```diff
@@ -37,20 +37,24 @@
     def test_list(self):
         """Test file list"""
         url = reverse(
             'filesfolders:list', kwargs={'project': self.project.sodar_uuid}
         )
         good_users = [
             self.superuser,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
             self.user_owner,
             self.user_delegate,
             self.user_contributor,
             self.user_guest,
         ]
-        bad_users = [self.user_no_roles, self.anonymous]
+        bad_users = [self.user_finder_cat, self.user_no_roles, self.anonymous]
         self.assert_response(url, good_users, 200)
         self.assert_response(url, bad_users, 302)
         # Test public project
         self.project.set_public()
         self.assert_response(url, self.user_no_roles, 200)
         self.assert_response(url, self.anonymous, 302)
 
@@ -67,20 +71,24 @@
         """Test file list for archived project"""
         self.project.set_archive()
         url = reverse(
             'filesfolders:list', kwargs={'project': self.project.sodar_uuid}
         )
         good_users = [
             self.superuser,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
             self.user_owner,
             self.user_delegate,
             self.user_contributor,
             self.user_guest,
         ]
-        bad_users = [self.user_no_roles, self.anonymous]
+        bad_users = [self.user_finder_cat, self.user_no_roles, self.anonymous]
         self.assert_response(url, good_users, 200)
         self.assert_response(url, bad_users, 302)
         # Test public project
         self.project.set_public()
         self.assert_response(url, self.user_no_roles, 200)
         self.assert_response(url, self.anonymous, 302)
 
@@ -102,19 +110,28 @@
         """Test folder creation"""
         url = reverse(
             'filesfolders:folder_create',
             kwargs={'project': self.project.sodar_uuid},
         )
         good_users = [
             self.superuser,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
             self.user_owner,
             self.user_delegate,
             self.user_contributor,
         ]
-        bad_users = [self.user_guest, self.user_no_roles, self.anonymous]
+        bad_users = [
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_guest,
+            self.user_no_roles,
+            self.anonymous,
+        ]
         self.assert_response(url, good_users, 200)
         self.assert_response(url, bad_users, 302)
         # Test public project
         self.project.set_public()
         self.assert_response(url, bad_users, 302)
 
     @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
@@ -134,14 +151,19 @@
             'filesfolders:folder_create',
             kwargs={'project': self.project.sodar_uuid},
         )
         good_users = [
             self.superuser,
         ]
         bad_users = [
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
             self.user_owner,
             self.user_delegate,
             self.user_contributor,
             self.user_guest,
             self.user_no_roles,
             self.anonymous,
         ]
@@ -154,36 +176,50 @@
     def test_folder_create_category(self):
         """Test folder creation under category"""
         url = reverse(
             'filesfolders:folder_create',
             kwargs={'project': self.category.sodar_uuid},
         )
         bad_users = [
-            self.anonymous,
             self.superuser,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
             self.user_owner,
             self.user_delegate,
             self.user_contributor,
             self.user_guest,
             self.user_no_roles,
+            self.anonymous,
         ]
         self.assert_response(url, bad_users, 302)
 
     def test_folder_update(self):
         """Test folder updating"""
         url = reverse(
             'filesfolders:folder_update',
             kwargs={'item': self.folder.sodar_uuid},
         )
-        good_users = [self.superuser, self.user_owner, self.user_delegate]
+        good_users = [
+            self.superuser,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_owner,
+            self.user_delegate,
+        ]
         bad_users = [
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
             self.user_contributor,  # NOTE: not the owner of the folder
-            self.anonymous,
             self.user_guest,
             self.user_no_roles,
+            self.anonymous,
         ]
         self.assert_response(url, good_users, 200)
         self.assert_response(url, bad_users, 302)
         # Test public project
         self.project.set_public()
         self.assert_response(url, bad_users, 302)
 
@@ -202,39 +238,53 @@
         self.project.set_archive()
         url = reverse(
             'filesfolders:folder_update',
             kwargs={'item': self.folder.sodar_uuid},
         )
         good_users = [self.superuser]
         bad_users = [
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
             self.user_owner,
             self.user_delegate,
             self.user_contributor,
-            self.anonymous,
             self.user_guest,
             self.user_no_roles,
+            self.anonymous,
         ]
         self.assert_response(url, good_users, 200)
         self.assert_response(url, bad_users, 302)
         # Test public project
         self.project.set_public()
         self.assert_response(url, bad_users, 302)
 
     def test_folder_delete(self):
         """Test folder deletion"""
         url = reverse(
             'filesfolders:folder_delete',
             kwargs={'item': self.folder.sodar_uuid},
         )
-        good_users = [self.superuser, self.user_owner, self.user_delegate]
+        good_users = [
+            self.superuser,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_owner,
+            self.user_delegate,
+        ]
         bad_users = [
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
             self.user_contributor,  # NOTE: not the owner of the folder
-            self.anonymous,
             self.user_guest,
             self.user_no_roles,
+            self.anonymous,
         ]
         self.assert_response(url, good_users, 200)
         self.assert_response(url, bad_users, 302)
         # Test public project
         self.project.set_public()
         self.assert_response(url, bad_users, 302)
 
@@ -253,20 +303,25 @@
         self.project.set_archive()
         url = reverse(
             'filesfolders:folder_delete',
             kwargs={'item': self.folder.sodar_uuid},
         )
         good_users = [self.superuser]
         bad_users = [
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
             self.user_owner,
             self.user_delegate,
             self.user_contributor,
-            self.anonymous,
             self.user_guest,
             self.user_no_roles,
+            self.anonymous,
         ]
         self.assert_response(url, good_users, 200)
         self.assert_response(url, bad_users, 302)
         # Test public project
         self.project.set_public()
         self.assert_response(url, bad_users, 302)
 
@@ -297,19 +352,28 @@
         """Test file creation"""
         url = reverse(
             'filesfolders:file_create',
             kwargs={'project': self.project.sodar_uuid},
         )
         good_users = [
             self.superuser,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
             self.user_owner,
             self.user_delegate,
             self.user_contributor,
         ]
-        bad_users = [self.anonymous, self.user_guest, self.user_no_roles]
+        bad_users = [
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_guest,
+            self.user_no_roles,
+            self.anonymous,
+        ]
         self.assert_response(url, good_users, 200)
         self.assert_response(url, bad_users, 302)
         # Test public project
         self.project.set_public()
         self.assert_response(url, bad_users, 302)
 
     @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
@@ -327,56 +391,74 @@
         self.project.set_archive()
         url = reverse(
             'filesfolders:file_create',
             kwargs={'project': self.project.sodar_uuid},
         )
         good_users = [self.superuser]
         bad_users = [
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
             self.user_owner,
             self.user_delegate,
             self.user_contributor,
             self.user_guest,
-            self.anonymous,
-            self.user_guest,
             self.user_no_roles,
+            self.anonymous,
         ]
         self.assert_response(url, good_users, 200)
         self.assert_response(url, bad_users, 302)
         # Test public project
         self.project.set_public()
         self.assert_response(url, bad_users, 302)
 
     def test_file_create_category(self):
         """Test file creation under category"""
         url = reverse(
             'filesfolders:file_create',
             kwargs={'project': self.category.sodar_uuid},
         )
         bad_users = [
-            self.anonymous,
             self.superuser,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
             self.user_owner,
             self.user_delegate,
             self.user_contributor,
             self.user_guest,
             self.user_no_roles,
+            self.anonymous,
         ]
         self.assert_response(url, bad_users, 302)
 
     def test_file_update(self):
         """Test file updating"""
         url = reverse(
             'filesfolders:file_update', kwargs={'item': self.file.sodar_uuid}
         )
-        good_users = [self.superuser, self.user_owner, self.user_delegate]
+        good_users = [
+            self.superuser,
+            self.user_owner_cat,
+            self.user_owner,
+            self.user_delegate_cat,
+            self.user_delegate,
+        ]
         bad_users = [
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
             self.user_contributor,  # NOTE: not the owner of the file
-            self.anonymous,
             self.user_guest,
             self.user_no_roles,
+            self.anonymous,
         ]
         self.assert_response(url, good_users, 200)
         self.assert_response(url, bad_users, 302)
         # Test public project
         self.project.set_public()
         self.assert_response(url, bad_users, 302)
 
@@ -393,38 +475,52 @@
         """Test file updating for archived project"""
         self.project.set_archive()
         url = reverse(
             'filesfolders:file_update', kwargs={'item': self.file.sodar_uuid}
         )
         good_users = [self.superuser]
         bad_users = [
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
             self.user_owner,
             self.user_delegate,
             self.user_contributor,  # NOTE: not the owner of the file
-            self.anonymous,
             self.user_guest,
             self.user_no_roles,
+            self.anonymous,
         ]
         self.assert_response(url, good_users, 200)
         self.assert_response(url, bad_users, 302)
         # Test public project
         self.project.set_public()
         self.assert_response(url, bad_users, 302)
 
     def test_file_delete(self):
         """Test file deletion"""
         url = reverse(
             'filesfolders:file_delete', kwargs={'item': self.file.sodar_uuid}
         )
-        good_users = [self.superuser, self.user_owner, self.user_delegate]
+        good_users = [
+            self.superuser,
+            self.user_owner_cat,
+            self.user_owner,
+            self.user_delegate_cat,
+            self.user_delegate,
+        ]
         bad_users = [
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
             self.user_contributor,  # NOTE: not the owner of the file
-            self.anonymous,
             self.user_guest,
             self.user_no_roles,
+            self.anonymous,
         ]
         self.assert_response(url, good_users, 200)
         self.assert_response(url, bad_users, 302)
         # Test public project
         self.project.set_public()
         self.assert_response(url, bad_users, 302)
 
@@ -441,20 +537,25 @@
         """Test file deletion for archived project"""
         self.project.set_archive()
         url = reverse(
             'filesfolders:file_delete', kwargs={'item': self.file.sodar_uuid}
         )
         good_users = [self.superuser]
         bad_users = [
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
             self.user_owner,
             self.user_delegate,
             self.user_contributor,
-            self.anonymous,
             self.user_guest,
             self.user_no_roles,
+            self.anonymous,
         ]
         self.assert_response(url, good_users, 200)
         self.assert_response(url, bad_users, 302)
         # Test public project
         self.project.set_public()
         self.assert_response(url, bad_users, 302)
 
@@ -462,19 +563,28 @@
         """Test generation of a public URL to a file"""
         url = reverse(
             'filesfolders:file_public_link',
             kwargs={'file': self.file.sodar_uuid},
         )
         good_users = [
             self.superuser,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
             self.user_owner,
             self.user_delegate,
             self.user_contributor,
         ]
-        bad_users = [self.anonymous, self.user_guest, self.user_no_roles]
+        bad_users = [
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_guest,
+            self.user_no_roles,
+            self.anonymous,
+        ]
         self.assert_response(url, good_users, 200)
         self.assert_response(url, bad_users, 302)
         # Test public project
         self.project.set_public()
         self.assert_response(url, bad_users, 302)
 
     @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
@@ -492,39 +602,52 @@
         self.project.set_archive()
         url = reverse(
             'filesfolders:file_public_link',
             kwargs={'file': self.file.sodar_uuid},
         )
         good_users = [
             self.superuser,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
             self.user_owner,
             self.user_delegate,
             self.user_contributor,
         ]
-        bad_users = [self.anonymous, self.user_guest, self.user_no_roles]
+        bad_users = [
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_guest,
+            self.user_no_roles,
+            self.anonymous,
+        ]
         self.assert_response(url, good_users, 200)
         self.assert_response(url, bad_users, 302)
         # Test public project
         self.project.set_public()
         self.assert_response(url, bad_users, 302)
 
     def test_file_serve(self):
         """Test file serving for authenticated users"""
         url = reverse(
             'filesfolders:file_serve',
             kwargs={'file': self.file.sodar_uuid, 'file_name': self.file.name},
         )
         good_users = [
             self.superuser,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
             self.user_owner,
             self.user_delegate,
             self.user_contributor,
             self.user_guest,
         ]
-        bad_users = [self.anonymous, self.user_no_roles]
+        bad_users = [self.user_finder_cat, self.user_no_roles, self.anonymous]
         self.assert_response(url, good_users, 200)
         self.assert_response(url, bad_users, 302)
         # Test public project
         self.project.set_public()
         self.assert_response(url, self.user_no_roles, 200)
         self.assert_response(url, self.anonymous, 302)
 
@@ -533,20 +656,24 @@
         self.project.set_archive()
         url = reverse(
             'filesfolders:file_serve',
             kwargs={'file': self.file.sodar_uuid, 'file_name': self.file.name},
         )
         good_users = [
             self.superuser,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
             self.user_owner,
             self.user_delegate,
             self.user_contributor,
             self.user_guest,
         ]
-        bad_users = [self.anonymous, self.user_no_roles]
+        bad_users = [self.user_finder_cat, self.user_no_roles, self.anonymous]
         self.assert_response(url, good_users, 200)
         self.assert_response(url, bad_users, 302)
         # Test public project
         self.project.set_public()
         self.assert_response(url, self.user_no_roles, 200)
         self.assert_response(url, self.anonymous, 302)
 
@@ -554,34 +681,44 @@
         """Test public file serving"""
         url = reverse(
             'filesfolders:file_serve_public',
             kwargs={'secret': SECRET, 'file_name': self.file.name},
         )
         good_users = [
             self.superuser,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
             self.user_owner,
             self.user_delegate,
             self.user_contributor,
             self.user_guest,
-            self.anonymous,
             self.user_no_roles,
+            self.anonymous,
         ]
         self.assert_response(url, good_users, 200)
 
     def test_file_serve_public_disabled(self):
         """Test public file serving if not allowed in project, should fail"""
         app_settings.set(
             APP_NAME, 'allow_public_links', False, project=self.project
         )
         url = reverse(
             'filesfolders:file_serve_public',
             kwargs={'secret': SECRET, 'file_name': self.file.name},
         )
         bad_users = [
             self.superuser,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
             self.user_owner,
             self.user_delegate,
             self.user_contributor,
             self.user_guest,
             self.user_no_roles,
         ]
         for user in bad_users:
@@ -612,19 +749,28 @@
         """Test hyperlink creation"""
         url = reverse(
             'filesfolders:hyperlink_create',
             kwargs={'project': self.project.sodar_uuid},
         )
         good_users = [
             self.superuser,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
             self.user_owner,
             self.user_delegate,
             self.user_contributor,
         ]
-        bad_users = [self.anonymous, self.user_guest, self.user_no_roles]
+        bad_users = [
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_guest,
+            self.user_no_roles,
+            self.anonymous,
+        ]
         self.assert_response(url, good_users, 200)
         self.assert_response(url, bad_users, 302)
         # Test public project
         self.project.set_public()
         self.assert_response(url, bad_users, 302)
 
     @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
@@ -642,14 +788,19 @@
         self.project.set_archive()
         url = reverse(
             'filesfolders:hyperlink_create',
             kwargs={'project': self.project.sodar_uuid},
         )
         good_users = [self.superuser]
         bad_users = [
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
             self.user_owner,
             self.user_delegate,
             self.user_contributor,
             self.user_guest,
             self.user_no_roles,
             self.anonymous,
         ]
@@ -662,36 +813,50 @@
     def test_hyperlink_create_category(self):
         """Test hyperlink creation under category"""
         url = reverse(
             'filesfolders:hyperlink_create',
             kwargs={'project': self.category.sodar_uuid},
         )
         bad_users = [
-            self.anonymous,
             self.superuser,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
             self.user_owner,
             self.user_delegate,
             self.user_contributor,
             self.user_guest,
             self.user_no_roles,
+            self.anonymous,
         ]
         self.assert_response(url, bad_users, 302)
 
     def test_hyperlink_update(self):
         """Test hyperlink updating"""
         url = reverse(
             'filesfolders:hyperlink_update',
             kwargs={'item': self.hyperlink.sodar_uuid},
         )
-        good_users = [self.superuser, self.user_owner, self.user_delegate]
+        good_users = [
+            self.superuser,
+            self.user_owner_cat,
+            self.user_owner,
+            self.user_delegate_cat,
+            self.user_delegate,
+        ]
         bad_users = [
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
             self.user_contributor,  # NOTE: not the owner of the link
-            self.anonymous,
             self.user_guest,
             self.user_no_roles,
+            self.anonymous,
         ]
         self.assert_response(url, good_users, 200)
         self.assert_response(url, bad_users, 302)
         # Test public project
         self.project.set_public()
         self.assert_response(url, bad_users, 302)
 
@@ -700,20 +865,25 @@
         self.project.set_archive()
         url = reverse(
             'filesfolders:hyperlink_update',
             kwargs={'item': self.hyperlink.sodar_uuid},
         )
         good_users = [self.superuser]
         bad_users = [
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
             self.user_owner,
             self.user_delegate,
             self.user_contributor,
-            self.anonymous,
             self.user_guest,
             self.user_no_roles,
+            self.anonymous,
         ]
         self.assert_response(url, good_users, 200)
         self.assert_response(url, bad_users, 302)
         # Test public project
         self.project.set_public()
         self.assert_response(url, bad_users, 302)
 
@@ -729,20 +899,29 @@
 
     def test_hyperlink_delete(self):
         """Test hyperlink deletion"""
         url = reverse(
             'filesfolders:hyperlink_delete',
             kwargs={'item': self.hyperlink.sodar_uuid},
         )
-        good_users = [self.superuser, self.user_owner, self.user_delegate]
+        good_users = [
+            self.superuser,
+            self.user_owner_cat,
+            self.user_owner,
+            self.user_delegate_cat,
+            self.user_delegate,
+        ]
         bad_users = [
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
             self.user_contributor,  # NOTE: not the owner of the link
-            self.anonymous,
             self.user_guest,
             self.user_no_roles,
+            self.anonymous,
         ]
         self.assert_response(url, good_users, 200)
         self.assert_response(url, bad_users, 302)
         # Test public project
         self.project.set_public()
         self.assert_response(url, bad_users, 302)
 
@@ -761,20 +940,25 @@
         self.project.set_archive()
         url = reverse(
             'filesfolders:hyperlink_delete',
             kwargs={'item': self.hyperlink.sodar_uuid},
         )
         good_users = [self.superuser]
         bad_users = [
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
             self.user_owner,
             self.user_delegate,
             self.user_contributor,
-            self.anonymous,
             self.user_guest,
             self.user_no_roles,
+            self.anonymous,
         ]
         self.assert_response(url, good_users, 200)
         self.assert_response(url, bad_users, 302)
         # Test public project
         self.project.set_public()
         self.assert_response(url, bad_users, 302)
 
@@ -797,20 +981,24 @@
         url = reverse(
             'filesfolders:batch_edit',
             kwargs={'project': self.project.sodar_uuid},
         )
         # NOTE: Contributor is OK as checks for object perms happen after POST
         good_users = [
             self.superuser,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
             self.user_owner,
             self.user_delegate,
             self.user_contributor,
         ]
         bad_users = [
-            # self.anonymous,
+            self.user_guest_cat,
+            self.user_finder_cat,
             self.user_guest,
             self.user_no_roles,
         ]
         post_data = {
             'batch-action': 'delete',
             'user-confirmed': '0',
             'batch_item_Folder_{}'.format(self.folder.sodar_uuid): '1',
@@ -835,14 +1023,19 @@
         self.project.set_archive()
         url = reverse(
             'filesfolders:batch_edit',
             kwargs={'project': self.project.sodar_uuid},
         )
         good_users = [self.superuser]
         bad_users = [
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
             self.user_owner,
             self.user_delegate,
             self.user_contributor,
             self.user_guest,
             self.user_no_roles,
         ]
         post_data = {
```

### Comparing `django-sodar-core-0.12.0/filesfolders/tests/test_permissions_api.py` & `django-sodar-core-0.13.0/projectroles/tests/test_permissions_api.py`

 * *Files 26% similar despite different names*

```diff
@@ -1,1859 +1,1451 @@
-"""REST API view permission tests for the filesfolders app"""
+"""REST API view permission tests for the projectroles app"""
 
-import os
 import uuid
 
 from django.test import override_settings
 from django.urls import reverse
 
-# Projectroles dependency
-from projectroles.tests.test_permissions_api import (
-    TestCoreProjectAPIPermissionBase,
+from projectroles.models import (
+    Project,
+    RoleAssignment,
+    ProjectInvite,
+    AppSetting,
+    SODAR_CONSTANTS,
 )
-from projectroles.utils import build_secret
+from projectroles.tests.test_permissions import TestProjectPermissionBase
+from projectroles.tests.test_views_api import SODARAPIViewTestMixin
+from projectroles.views_api import CORE_API_MEDIA_TYPE, CORE_API_DEFAULT_VERSION
+
+from rest_framework.test import APITestCase
+
+
+NEW_PROJECT_TITLE = 'New Project'
+
+
+# Base Classes and Mixins ------------------------------------------------------
+
+
+class SODARAPIPermissionTestMixin(SODARAPIViewTestMixin):
+    """Mixin for permission testing with knox auth"""
+
+    def assert_response_api(
+        self,
+        url,
+        users,
+        status_code,
+        method='GET',
+        format='json',
+        data=None,
+        media_type=None,
+        version=None,
+        knox=False,
+        cleanup_method=None,
+        cleanup_kwargs=None,
+        req_kwargs=None,
+    ):
+        """
+        Assert a response status code for url with API headers and optional
+        Knox token authentication. Creates a Knox token for each user where
+        needed.
+
+        :param url: Target URL for the request
+        :param users: Users to test (single user, list or tuple)
+        :param status_code: Status code
+        :param method: Method for request (default="GET")
+        :param format: Request format (string, default="json")
+        :param data: Optional data for request (dict)
+        :param media_type: String (default = cls.media_type)
+        :param version: String (default = cls.api_version)
+        :param knox: Use Knox token auth instead of Django login (boolean)
+        :param cleanup_method: Callable method to clean up data after a
+               successful request
+        :param cleanup_kwargs: Optional cleanup method kwargs (dict or None)
+        :param req_kwargs: Optional request kwargs override (dict or None)
+        """
+        if cleanup_method and not callable(cleanup_method):
+            raise ValueError('cleanup_method is not callable')
+
+        def _send_request():
+            req_method = getattr(self.client, method.lower(), None)
+            if not req_method:
+                raise ValueError('Invalid method "{}"'.format(method))
+            if req_kwargs:  # Override request kwargs if set
+                r_kwargs.update(req_kwargs)
+            return req_method(url, **r_kwargs)
+
+        if not isinstance(users, (list, tuple)):
+            users = [users]
+
+        for user in users:
+            r_kwargs = {'format': format}
+            if data:
+                r_kwargs['data'] = data
+            if knox and not user:  # Anonymous
+                raise ValueError(
+                    'Unable to test Knox token auth with anonymous user'
+                )
+            r_kwargs.update(self.get_accept_header(media_type, version))
+
+            if knox:
+                r_kwargs.update(self.get_token_header(self.get_token(user)))
+                response = _send_request()
+            elif user:
+                with self.login(user):
+                    response = _send_request()
+            else:  # Anonymous, no knox
+                response = _send_request()
+
+            msg = 'user={}; content="{}"'.format(user, response.content)
+            self.assertEqual(response.status_code, status_code, msg=msg)
+
+            if cleanup_method:
+                if cleanup_kwargs is None:
+                    cleanup_kwargs = {}
+                cleanup_method(**cleanup_kwargs)
 
-from filesfolders.models import File, Folder, HyperLink
-from filesfolders.tests.test_models import (
-    FileMixin,
-    FolderMixin,
-    HyperLinkMixin,
-)
 
+class TestProjectAPIPermissionBase(
+    SODARAPIPermissionTestMixin, APITestCase, TestProjectPermissionBase
+):
+    """Base class for testing project permissions in SODAR API views"""
 
-# Local constants
-SECRET = '7dqq83clo2iyhg29hifbor56og6911r5'
-TEST_DATA_PATH = os.path.dirname(__file__) + '/data/'
-ZIP_PATH_NO_FILES = TEST_DATA_PATH + 'no_files.zip'
-
-
-class TestFolderAPIPermissions(FolderMixin, TestCoreProjectAPIPermissionBase):
-    """Tests for Folder API view permissions"""
-
-    @classmethod
-    def _cleanup_folder_create(cls):
-        Folder.objects.order_by('-pk').first().delete()
-
-    def _cleanup_folder_destroy(self, obj_uuid):
-        folder = self.make_folder(
-            name='folder',
-            project=self.project,
-            folder=None,
-            owner=self.owner_as.user,
-            description='',
-        )
-        folder.sodar_uuid = obj_uuid
-        folder.save()
-
-    def setUp(self):
-        super().setUp()
-        self.folder = self.make_folder(
-            name='folder',
-            project=self.project,
-            folder=None,
-            owner=self.owner_as.user,  # Project owner is the owner of folder
-            description='',
-        )
 
-    def test_folder_list(self):
-        """Test permissions for folder listing"""
-        url = reverse(
-            'filesfolders:api_folder_list_create',
-            kwargs={'project': self.project.sodar_uuid},
-        )
+class TestCoreProjectAPIPermissionBase(
+    SODARAPIPermissionTestMixin, APITestCase, TestProjectPermissionBase
+):
+    """
+    Base class for testing project permissions in internal SODAR Core API views
+    """
+
+    media_type = CORE_API_MEDIA_TYPE
+    api_version = CORE_API_DEFAULT_VERSION
+
+
+# Tests ------------------------------------------------------------------------
+
+
+class TestAPIPermissions(TestCoreProjectAPIPermissionBase):
+    """Tests for projectroles API view permissions"""
+
+    def test_project_list(self):
+        """Test ProjectListAPIView permissions"""
+        url = reverse('projectroles:api_project_list')
         good_users = [
             self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
+            self.user_no_roles,
         ]
-        bad_users = [self.user_no_roles]
         self.assert_response_api(url, good_users, 200)
-        self.assert_response_api(url, bad_users, 403)
         self.assert_response_api(url, self.anonymous, 401)
         self.assert_response_api(url, good_users, 200, knox=True)
-        # Test public project
-        self.project.set_public()
-        self.assert_response_api(url, self.user_no_roles, 200)
 
-    @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
-    def test_folder_list_anon(self):
-        """Test permissions for folder listing with anonymous access"""
+    def test_project_retrieve(self):
+        """Test ProjectRetrieveAPIView permissions"""
         url = reverse(
-            'filesfolders:api_folder_list_create',
-            kwargs={'project': self.project.sodar_uuid},
-        )
-        self.project.set_public()
-        self.assert_response_api(url, self.anonymous, 200)
-
-    def test_folder_list_archive(self):
-        """Test permissions for folder listing with archived project"""
-        self.project.set_archive()
-        url = reverse(
-            'filesfolders:api_folder_list_create',
+            'projectroles:api_project_retrieve',
             kwargs={'project': self.project.sodar_uuid},
         )
         good_users = [
             self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
         ]
-        bad_users = [self.user_no_roles]
+        bad_users = [self.user_finder_cat, self.user_no_roles]
         self.assert_response_api(url, good_users, 200)
         self.assert_response_api(url, bad_users, 403)
         self.assert_response_api(url, self.anonymous, 401)
         self.assert_response_api(url, good_users, 200, knox=True)
+        self.assert_response_api(url, bad_users, 403, knox=True)
         # Test public project
         self.project.set_public()
         self.assert_response_api(url, self.user_no_roles, 200)
 
-    def test_folder_create(self):
-        """Test permissions for folder creation"""
+    @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
+    def test_project_retrieve_anon(self):
+        """Test ProjectRetrieveAPIView permissions with anonymous access"""
         url = reverse(
-            'filesfolders:api_folder_list_create',
+            'projectroles:api_project_retrieve',
             kwargs={'project': self.project.sodar_uuid},
         )
-        request_data = {
-            'name': 'New Folder',
-            'flag': 'IMPORTANT',
-            'description': 'Folder\'s description',
+        self.project.set_public()
+        self.assert_response_api(url, self.anonymous, 200)
+
+    def test_project_create_root(self):
+        """Test ProjectCreateAPIView permissions with no parent"""
+        url = reverse('projectroles:api_project_create')
+        post_data = {
+            'title': NEW_PROJECT_TITLE,
+            'type': SODAR_CONSTANTS['PROJECT_TYPE_CATEGORY'],
+            'parent': '',
+            'description': 'description',
+            'readme': 'readme',
+            'owner': str(self.user_owner.sodar_uuid),
         }
-        good_users = [
-            self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
+        good_users = [self.superuser]
+        bad_users = [
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
+            self.user_no_roles,
         ]
-        bad_users = [self.guest_as.user, self.user_no_roles]
+
+        def _cleanup():
+            p = Project.objects.filter(title=NEW_PROJECT_TITLE).first()
+            if p:
+                p.delete()
+
         self.assert_response_api(
             url,
             good_users,
             201,
             method='POST',
-            data=request_data,
-            cleanup_method=self._cleanup_folder_create,
+            data=post_data,
+            cleanup_method=_cleanup,
         )
         self.assert_response_api(
-            url, bad_users, 403, method='POST', data=request_data
+            url, bad_users, 403, method='POST', data=post_data
         )
         self.assert_response_api(
-            url, self.anonymous, 401, method='POST', data=request_data
+            url, self.anonymous, 401, method='POST', data=post_data
         )
+        # Test with Knox
         self.assert_response_api(
             url,
             good_users,
             201,
             method='POST',
-            data=request_data,
-            cleanup_method=self._cleanup_folder_create,
+            data=post_data,
             knox=True,
+            cleanup_method=_cleanup,
+        )
+        self.assert_response_api(
+            url, bad_users, 403, method='POST', data=post_data, knox=True
         )
         # Test public project
         self.project.set_public()
         self.assert_response_api(
-            url, self.user_no_roles, 403, method='POST', data=request_data
+            url, self.user_no_roles, 403, method='POST', data=post_data
         )
 
     @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
-    def test_folder_create_anon(self):
-        """Test permissions for folder creation with anonymous access"""
-        url = reverse(
-            'filesfolders:api_folder_list_create',
-            kwargs={'project': self.project.sodar_uuid},
-        )
-        request_data = {
-            'name': 'New Folder',
-            'flag': 'IMPORTANT',
-            'description': 'Folder\'s description',
+    def test_project_create_root_anon(self):
+        """Test ProjectCreateAPIView permission with no parent and anon access"""
+        url = reverse('projectroles:api_project_create')
+        post_data = {
+            'title': NEW_PROJECT_TITLE,
+            'type': SODAR_CONSTANTS['PROJECT_TYPE_CATEGORY'],
+            'parent': '',
+            'description': 'description',
+            'readme': 'readme',
+            'owner': str(self.user_owner.sodar_uuid),
         }
         self.project.set_public()
         self.assert_response_api(
-            url, self.anonymous, 401, method='POST', data=request_data
+            url, self.anonymous, 401, method='POST', data=post_data
         )
 
-    def test_folder_create_archive(self):
-        """Test permissions for folder creation with archived project"""
-        self.project.set_archive()
-        url = reverse(
-            'filesfolders:api_folder_list_create',
-            kwargs={'project': self.project.sodar_uuid},
-        )
-        request_data = {
-            'name': 'New Folder',
-            'flag': 'IMPORTANT',
-            'description': 'Folder\'s description',
+    def test_project_create(self):
+        """Test ProjectCreateAPIView permissions"""
+        url = reverse('projectroles:api_project_create')
+        post_data = {
+            'title': NEW_PROJECT_TITLE,
+            'type': SODAR_CONSTANTS['PROJECT_TYPE_PROJECT'],
+            'parent': str(self.category.sodar_uuid),
+            'description': 'description',
+            'readme': 'readme',
+            'owner': str(self.user_owner.sodar_uuid),
         }
-        good_users = [self.superuser]
+
+        def _cleanup():
+            p = Project.objects.filter(title=NEW_PROJECT_TITLE).first()
+            if p:
+                p.delete()
+
+        good_users = [
+            self.superuser,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+        ]
         bad_users = [
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
             self.user_no_roles,
         ]
         self.assert_response_api(
             url,
             good_users,
             201,
             method='POST',
-            data=request_data,
-            cleanup_method=self._cleanup_folder_create,
+            data=post_data,
+            cleanup_method=_cleanup,
         )
         self.assert_response_api(
-            url, bad_users, 403, method='POST', data=request_data
+            url, bad_users, 403, method='POST', data=post_data
         )
         self.assert_response_api(
-            url, self.anonymous, 401, method='POST', data=request_data
+            url, self.anonymous, 401, method='POST', data=post_data
         )
+        # Test with Knox
         self.assert_response_api(
             url,
             good_users,
             201,
             method='POST',
-            data=request_data,
-            cleanup_method=self._cleanup_folder_create,
+            data=post_data,
             knox=True,
+            cleanup_method=_cleanup,
         )
-        # Test public project
-        self.project.set_public()
         self.assert_response_api(
-            url, self.user_no_roles, 403, method='POST', data=request_data
-        )
-
-    def test_folder_retrieve(self):
-        """Test permissions for folder retrieval"""
-        url = reverse(
-            'filesfolders:api_folder_retrieve_update_destroy',
-            kwargs={'folder': self.folder.sodar_uuid},
+            url, bad_users, 403, method='POST', data=post_data, knox=True
         )
-        good_users = [
-            self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-        ]
-        bad_users = [self.user_no_roles]
-        self.assert_response_api(url, good_users, 200, method='GET')
-        self.assert_response_api(url, bad_users, 403)
-        self.assert_response_api(url, self.anonymous, 401)
-        self.assert_response_api(url, good_users, 200, knox=True)
         # Test public project
         self.project.set_public()
-        self.assert_response_api(url, self.user_no_roles, 200)
+        self.assert_response_api(
+            url, self.user_no_roles, 403, method='POST', data=post_data
+        )
 
     @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
-    def test_folder_retrieve_anon(self):
-        """Test permissions for folder retrieval with anonymous access"""
-        url = reverse(
-            'filesfolders:api_folder_retrieve_update_destroy',
-            kwargs={'folder': self.folder.sodar_uuid},
-        )
+    def test_project_create_anon(self):
+        """Test ProjectCreateAPIView permissions with anonymous access"""
+        url = reverse('projectroles:api_project_create')
+        post_data = {
+            'title': NEW_PROJECT_TITLE,
+            'type': SODAR_CONSTANTS['PROJECT_TYPE_PROJECT'],
+            'parent': str(self.category.sodar_uuid),
+            'description': 'description',
+            'readme': 'readme',
+            'owner': str(self.user_owner.sodar_uuid),
+        }
         self.project.set_public()
-        self.assert_response_api(url, self.anonymous, 200)
-
-    def test_folder_retrieve_archive(self):
-        """Test permissions for folder retrieval with archived project"""
-        self.project.set_archive()
-        url = reverse(
-            'filesfolders:api_folder_retrieve_update_destroy',
-            kwargs={'folder': self.folder.sodar_uuid},
+        self.assert_response_api(
+            url, self.anonymous, 401, method='POST', data=post_data
         )
-        good_users = [
-            self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-        ]
-        bad_users = [self.user_no_roles]
-        self.assert_response_api(url, good_users, 200, method='GET')
-        self.assert_response_api(url, bad_users, 403)
-        self.assert_response_api(url, self.anonymous, 401)
-        # Test public project
-        self.project.set_public()
-        self.assert_response_api(url, self.user_no_roles, 200)
 
-    def test_folder_update_put(self):
-        """Test permissions for folder updating with PUT"""
+    def test_project_update(self):
+        """Test ProjectUpdateAPIView permissions"""
         url = reverse(
-            'filesfolders:api_folder_retrieve_update_destroy',
-            kwargs={'folder': self.folder.sodar_uuid},
+            'projectroles:api_project_update',
+            kwargs={'project': self.project.sodar_uuid},
         )
-        request_data = {
-            'name': 'UPDATED Folder',
-            'flag': 'FLAG',
-            'description': 'UPDATED Description',
+        put_data = {
+            'title': NEW_PROJECT_TITLE,
+            'type': SODAR_CONSTANTS['PROJECT_TYPE_PROJECT'],
+            'parent': str(self.category.sodar_uuid),
+            'description': 'description',
+            'readme': 'readme',
+            'owner': str(self.user_owner.sodar_uuid),
         }
         good_users = [
             self.superuser,
-            self.owner_as.user,  # Owner of folder
-            self.delegate_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_owner,
+            self.user_delegate,
         ]
         bad_users = [
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_contributor,
+            self.user_guest,
             self.user_no_roles,
         ]
         self.assert_response_api(
-            url, good_users, 200, method='PUT', data=request_data
+            url, good_users, 200, method='PUT', data=put_data
         )
         self.assert_response_api(
-            url, bad_users, 403, method='PUT', data=request_data
+            url, bad_users, 403, method='PUT', data=put_data
         )
         self.assert_response_api(
-            url, self.anonymous, 401, method='PUT', data=request_data
+            url, self.anonymous, 401, method='PUT', data=put_data
         )
+        # Test with Knox
         self.assert_response_api(
-            url, good_users, 200, method='PUT', data=request_data, knox=True
+            url, good_users, 200, method='PUT', data=put_data, knox=True
+        )
+        self.assert_response_api(
+            url, bad_users, 403, method='PUT', data=put_data, knox=True
         )
         # Test public project
         self.project.set_public()
         self.assert_response_api(
-            url, self.user_no_roles, 403, method='PUT', data=request_data
+            url, self.user_no_roles, 403, method='PUT', data=put_data
         )
 
     @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
-    def test_folder_update_put_anon(self):
-        """Test permissions for folder updating with anonymous access"""
+    def test_project_update_anon(self):
+        """Test ProjectUpdateAPIView permissions with anonymous access"""
         url = reverse(
-            'filesfolders:api_folder_retrieve_update_destroy',
-            kwargs={'folder': self.folder.sodar_uuid},
+            'projectroles:api_project_update',
+            kwargs={'project': self.project.sodar_uuid},
         )
-        request_data = {
-            'name': 'UPDATED Folder',
-            'flag': 'FLAG',
-            'description': 'UPDATED Description',
+        put_data = {
+            'title': NEW_PROJECT_TITLE,
+            'type': SODAR_CONSTANTS['PROJECT_TYPE_PROJECT'],
+            'parent': str(self.category.sodar_uuid),
+            'description': 'description',
+            'readme': 'readme',
+            'owner': str(self.user_owner.sodar_uuid),
         }
         self.project.set_public()
         self.assert_response_api(
-            url, self.anonymous, 401, method='PUT', data=request_data
+            url, self.anonymous, 401, method='PUT', data=put_data
         )
 
-    def test_folder_update_put_archive(self):
-        """Test permissions for folder updating with PUT and archived project"""
-        self.project.set_archive()
+    def test_role_create(self):
+        """Test RoleAssignmentCreateAPIView permissions"""
+        # Create user for assignments
+        assign_user = self.make_user('assign_user')
         url = reverse(
-            'filesfolders:api_folder_retrieve_update_destroy',
-            kwargs={'folder': self.folder.sodar_uuid},
+            'projectroles:api_role_create',
+            kwargs={'project': self.project.sodar_uuid},
         )
-        request_data = {
-            'name': 'UPDATED Folder',
-            'flag': 'FLAG',
-            'description': 'UPDATED Description',
+        post_data = {
+            'role': SODAR_CONSTANTS['PROJECT_ROLE_CONTRIBUTOR'],
+            'user': str(assign_user.sodar_uuid),
         }
-        good_users = [self.superuser]
-        bad_users = [
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
+        good_users = [
+            self.superuser,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_owner,
+            self.user_delegate,
+        ]
+        bad_users = [
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_contributor,
+            self.user_guest,
             self.user_no_roles,
         ]
+
+        def _cleanup():
+            role_as = RoleAssignment.objects.filter(
+                project=self.project,
+                role__name=SODAR_CONSTANTS['PROJECT_ROLE_CONTRIBUTOR'],
+                user=assign_user,
+            ).first()
+            if role_as:
+                role_as.delete()
+
         self.assert_response_api(
-            url, good_users, 200, method='PUT', data=request_data
+            url,
+            good_users,
+            201,
+            method='POST',
+            data=post_data,
+            cleanup_method=_cleanup,
         )
         self.assert_response_api(
-            url, bad_users, 403, method='PUT', data=request_data
+            url, bad_users, 403, method='POST', data=post_data
         )
         self.assert_response_api(
-            url, self.anonymous, 401, method='PUT', data=request_data
+            url, self.anonymous, 401, method='POST', data=post_data
+        )
+        # Test with Knox
+        self.assert_response_api(
+            url,
+            good_users,
+            201,
+            method='POST',
+            data=post_data,
+            knox=True,
+            cleanup_method=_cleanup,
+        )
+        self.assert_response_api(
+            url, bad_users, 403, method='POST', data=post_data, knox=True
         )
         # Test public project
         self.project.set_public()
         self.assert_response_api(
-            url, self.user_no_roles, 403, method='PUT', data=request_data
+            url, self.user_no_roles, 403, method='POST', data=post_data
         )
 
-    def test_folder_update_patch(self):
-        """Test permissions for folder updating with PATCH"""
+    @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
+    def test_role_create_anon(self):
+        """Test RoleAssignmentCreateAPIView permissions with anonymous access"""
+        assign_user = self.make_user('assign_user')
         url = reverse(
-            'filesfolders:api_folder_retrieve_update_destroy',
-            kwargs={'folder': self.folder.sodar_uuid},
+            'projectroles:api_role_create',
+            kwargs={'project': self.project.sodar_uuid},
+        )
+        post_data = {
+            'role': SODAR_CONSTANTS['PROJECT_ROLE_CONTRIBUTOR'],
+            'user': str(assign_user.sodar_uuid),
+        }
+        self.project.set_public()
+        self.assert_response_api(
+            url, self.anonymous, 401, method='POST', data=post_data
+        )
+
+    def test_role_update(self):
+        """Test RoleAssignmentUpdateAPIView permissions"""
+        # Create user and assignment
+        assign_user = self.make_user('assign_user')
+        update_as = self.make_assignment(
+            self.project, assign_user, self.role_contributor
         )
-        request_data = {'name': 'UPDATED Folder'}
+        url = reverse(
+            'projectroles:api_role_update',
+            kwargs={'roleassignment': update_as.sodar_uuid},
+        )
+        put_data = {
+            'role': self.role_guest.name,
+            'user': str(assign_user.sodar_uuid),
+        }
         good_users = [
             self.superuser,
-            self.owner_as.user,  # Owner of folder
-            self.delegate_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_owner,
+            self.user_delegate,
         ]
         bad_users = [
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_contributor,
+            self.user_guest,
             self.user_no_roles,
         ]
         self.assert_response_api(
-            url, good_users, 200, method='PATCH', data=request_data
+            url, good_users, 200, method='PUT', data=put_data
         )
         self.assert_response_api(
-            url, bad_users, 403, method='PATCH', data=request_data
+            url, bad_users, 403, method='PUT', data=put_data
         )
         self.assert_response_api(
-            url, self.anonymous, 401, method='PATCH', data=request_data
+            url, self.anonymous, 401, method='PUT', data=put_data
         )
+        # Test with Knox
         self.assert_response_api(
-            url, good_users, 200, method='PATCH', data=request_data, knox=True
+            url, good_users, 200, method='PUT', data=put_data, knox=True
+        )
+        self.assert_response_api(
+            url, bad_users, 403, method='PUT', data=put_data, knox=True
         )
         # Test public project
         self.project.set_public()
         self.assert_response_api(
-            url, self.user_no_roles, 403, method='PATCH', data=request_data
+            url, self.user_no_roles, 403, method='PUT', data=put_data
         )
 
     @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
-    def test_folder_update_patch_anon(self):
-        """Test permissions for folder updating with anonymous access"""
-        url = reverse(
-            'filesfolders:api_folder_retrieve_update_destroy',
-            kwargs={'folder': self.folder.sodar_uuid},
+    def test_role_update_anon(self):
+        """Test RoleAssignmentUpdateAPIView permissions with anonymous access"""
+        # Create user and assignment
+        assign_user = self.make_user('assign_user')
+        update_as = self.make_assignment(
+            self.project, assign_user, self.role_contributor
         )
-        request_data = {'name': 'UPDATED Folder'}
-        self.project.set_public()
-        self.assert_response_api(
-            url, self.anonymous, 401, method='PATCH', data=request_data
-        )
-
-    def test_folder_update_patch_archive(self):
-        """Test permissions for folder updating with PATCH and archived project"""
-        self.project.set_archive()
         url = reverse(
-            'filesfolders:api_folder_retrieve_update_destroy',
-            kwargs={'folder': self.folder.sodar_uuid},
-        )
-        request_data = {'name': 'UPDATED Folder'}
-        good_users = [self.superuser]
-        bad_users = [
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-            self.user_no_roles,
-        ]
-        self.assert_response_api(
-            url, good_users, 200, method='PATCH', data=request_data
-        )
-        self.assert_response_api(
-            url, bad_users, 403, method='PATCH', data=request_data
-        )
-        self.assert_response_api(
-            url, self.anonymous, 401, method='PATCH', data=request_data
-        )
-        # Test public project
+            'projectroles:api_role_update',
+            kwargs={'roleassignment': update_as.sodar_uuid},
+        )
+        put_data = {
+            'role': self.role_guest.name,
+            'user': str(assign_user.sodar_uuid),
+        }
         self.project.set_public()
         self.assert_response_api(
-            url, self.user_no_roles, 403, method='PATCH', data=request_data
+            url, self.anonymous, 401, method='PUT', data=put_data
         )
 
-    def test_folder_destroy(self):
-        """Test permissions for folder destroying with DELETE"""
-        obj_uuid = uuid.uuid4()
-        c_kwargs = {'obj_uuid': obj_uuid}
+    def test_role_delete(self):
+        """Test RoleAssignmentDestroyAPIView permissions"""
+        # Create user and assignment
+        assign_user = self.make_user('assign_user')
+        role_uuid = uuid.uuid4()  # Ensure fixed uuid
+
+        def _cleanup():
+            update_as = self.make_assignment(
+                self.project, assign_user, self.role_contributor
+            )
+            update_as.sodar_uuid = role_uuid
+            update_as.save()
+
         url = reverse(
-            'filesfolders:api_folder_retrieve_update_destroy',
-            kwargs={'folder': obj_uuid},
+            'projectroles:api_role_destroy',
+            kwargs={'roleassignment': role_uuid},
         )
         good_users = [
             self.superuser,
-            self.owner_as.user,  # Owner of folder
-            self.delegate_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_owner,
+            self.user_delegate,
         ]
         bad_users = [
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_contributor,
+            self.user_guest,
             self.user_no_roles,
         ]
-        self._cleanup_folder_destroy(**c_kwargs)
+        _cleanup()
         self.assert_response_api(
-            url,
-            good_users,
-            204,
-            method='DELETE',
-            cleanup_method=self._cleanup_folder_destroy,
-            cleanup_kwargs=c_kwargs,
+            url, good_users, 204, method='DELETE', cleanup_method=_cleanup
         )
         self.assert_response_api(url, bad_users, 403, method='DELETE')
         self.assert_response_api(url, self.anonymous, 401, method='DELETE')
+        # Test with Knox
         self.assert_response_api(
             url,
             good_users,
             204,
             method='DELETE',
-            cleanup_method=self._cleanup_folder_destroy,
-            cleanup_kwargs=c_kwargs,
+            cleanup_method=_cleanup,
             knox=True,
         )
+        self.assert_response_api(
+            url, bad_users, 403, method='DELETE', knox=True
+        )
         # Test public project
         self.project.set_public()
         self.assert_response_api(url, self.user_no_roles, 403, method='DELETE')
 
     @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
-    def test_folder_destroy_anon(self):
-        """Test permissions for folder destroying with anonymous access"""
-        folder = self.make_folder(
-            name='folder',
-            project=self.project,
-            folder=None,
-            owner=self.owner_as.user,
-            description='',
+    def test_role_delete_anon(self):
+        """Test RoleAssignmentDestroyAPIView permissions with anon access"""
+        # Create user and assignment
+        assign_user = self.make_user('assign_user')
+        role_uuid = uuid.uuid4()  # Ensure fixed uuid
+        update_as = self.make_assignment(
+            self.project, assign_user, self.role_contributor
         )
+        update_as.sodar_uuid = role_uuid
+        update_as.save()
         url = reverse(
-            'filesfolders:api_folder_retrieve_update_destroy',
-            kwargs={'folder': folder.sodar_uuid},
+            'projectroles:api_role_destroy',
+            kwargs={'roleassignment': role_uuid},
         )
         self.project.set_public()
         self.assert_response_api(url, self.anonymous, 401, method='DELETE')
 
-    def test_folder_destroy_archive(self):
-        """Test permissions for folder destroying with DELETE and archived project"""
-        self.project.set_archive()
-        obj_uuid = uuid.uuid4()
-        c_kwargs = {'obj_uuid': obj_uuid}
+    def test_owner_transfer(self):
+        """Test RoleAssignmentOwnerTransferAPIView permissions"""
+        # Create user for assignments
+        self.new_owner = self.make_user('new_owner')
+        self.new_owner_as = self.make_assignment(
+            self.project, self.new_owner, self.role_contributor
+        )
         url = reverse(
-            'filesfolders:api_folder_retrieve_update_destroy',
-            kwargs={'folder': obj_uuid},
+            'projectroles:api_role_owner_transfer',
+            kwargs={'project': self.project.sodar_uuid},
         )
-        good_users = [self.superuser]
+        post_data = {
+            'new_owner': self.new_owner.username,
+            'old_owner_role': SODAR_CONSTANTS['PROJECT_ROLE_CONTRIBUTOR'],
+        }
+
+        def _cleanup():
+            self.new_owner_as.refresh_from_db()
+            self.new_owner_as.role = self.role_contributor
+            self.new_owner_as.save()
+
+            self.owner_as.refresh_from_db()
+            self.owner_as.role = self.role_owner
+            self.owner_as.save()
+
+        good_users = [
+            self.superuser,
+            self.user_owner_cat,
+            self.user_owner,
+        ]
         bad_users = [
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
             self.user_no_roles,
         ]
-        self._cleanup_folder_destroy(**c_kwargs)
         self.assert_response_api(
             url,
             good_users,
-            204,
-            method='DELETE',
-            cleanup_method=self._cleanup_folder_destroy,
-            cleanup_kwargs=c_kwargs,
+            200,
+            method='POST',
+            data=post_data,
+            cleanup_method=_cleanup,
+        )
+        self.assert_response_api(
+            url, bad_users, 403, method='POST', data=post_data
+        )
+        self.assert_response_api(
+            url, self.anonymous, 401, method='POST', data=post_data
+        )
+        # Test with Knox
+        self.assert_response_api(
+            url,
+            good_users,
+            200,
+            method='POST',
+            data=post_data,
+            knox=True,
+            cleanup_method=_cleanup,
+        )
+        self.assert_response_api(
+            url, bad_users, 403, method='POST', data=post_data, knox=True
         )
-        self.assert_response_api(url, bad_users, 403, method='DELETE')
-        self.assert_response_api(url, self.anonymous, 401, method='DELETE')
         # Test public project
         self.project.set_public()
-        self.assert_response_api(url, self.user_no_roles, 403, method='DELETE')
-
-
-class TestFileAPIPermissions(FileMixin, TestCoreProjectAPIPermissionBase):
-    """Tests for File API view permissions"""
+        self.assert_response_api(
+            url, self.user_no_roles, 403, method='POST', data=post_data
+        )
 
-    def _cleanup_file_create(self):
-        file = File.objects.filter(name=self.new_file_name).first()
-        if file:
-            file.delete()
-        self.request_data['file'].seek(0)
-
-    def _cleanup_file_update(self):
-        self.request_data['file'].seek(0)
-
-    def _cleanup_file_destroy(self, obj_uuid):
-        file = self.make_file(
-            name='file2.txt',
-            file_name='file2.txt',
-            file_content=self.file_content,
-            project=self.project,
-            folder=None,
-            owner=self.owner_as.user,
-            description='',
-            public_url=True,
-            secret=build_secret(),
-        )
-        file.sodar_uuid = obj_uuid
-        file.save()
-
-    def setUp(self):
-        super().setUp()
-        self.file_content = bytes('content'.encode('utf-8'))
-        self.file = self.make_file(
-            name='file.txt',
-            file_name='file.txt',
-            file_content=self.file_content,
-            project=self.project,
-            folder=None,
-            owner=self.owner_as.user,
-            description='',
-            public_url=True,
-            secret=SECRET,
-        )
-        self.new_file_name = 'New File'
-        self.request_data = {
-            'name': self.new_file_name,
-            'flag': 'IMPORTANT',
-            'description': 'File\'s description',
-            'secret': 'foo',
-            'public_url': True,
-            'file': open(ZIP_PATH_NO_FILES, 'rb'),
-        }
-
-    def tearDown(self):
-        self.request_data['file'].close()
-        super().tearDown()
+    @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
+    def test_owner_transfer_anon(self):
+        """Test RoleAssignmentOwnerTransferAPIView with anon access"""
+        # Create user for assignments
+        self.new_owner = self.make_user('new_owner')
+        self.new_owner_as = self.make_assignment(
+            self.project, self.new_owner, self.role_contributor
+        )
+        url = reverse(
+            'projectroles:api_role_owner_transfer',
+            kwargs={'project': self.project.sodar_uuid},
+        )
+        post_data = {
+            'new_owner': self.new_owner.username,
+            'old_owner_role': SODAR_CONSTANTS['PROJECT_ROLE_CONTRIBUTOR'],
+        }
+        self.project.set_public()
+        self.assert_response_api(
+            url, self.anonymous, 401, method='POST', data=post_data
+        )
 
-    def test_file_list(self):
-        """Test permissions for file listing"""
+    def test_invite_list(self):
+        """Test ProjectInviteListAPIView permissions"""
         url = reverse(
-            'filesfolders:api_file_list_create',
+            'projectroles:api_invite_list',
             kwargs={'project': self.project.sodar_uuid},
         )
         good_users = [
             self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_owner,
+            self.user_delegate,
+        ]
+        bad_users = [
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_contributor,
+            self.user_guest,
+            self.user_no_roles,
         ]
-        bad_users = [self.user_no_roles]
         self.assert_response_api(url, good_users, 200)
         self.assert_response_api(url, bad_users, 403)
         self.assert_response_api(url, self.anonymous, 401)
         self.assert_response_api(url, good_users, 200, knox=True)
         # Test public project
         self.project.set_public()
-        self.assert_response_api(url, self.user_no_roles, 200)
+        self.assert_response_api(url, self.user_no_roles, 403)
 
     @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
-    def test_file_list_anon(self):
-        """Test permissions for file listing with anonymous access"""
+    def test_invite_list_anon(self):
+        """Test ProjectInviteListAPIView permissions with anonymous access"""
         url = reverse(
-            'filesfolders:api_file_list_create',
+            'projectroles:api_invite_list',
             kwargs={'project': self.project.sodar_uuid},
         )
         self.project.set_public()
-        self.assert_response_api(url, self.anonymous, 200)
-
-    def test_file_list_archive(self):
-        """Test permissions for file listing with archived project"""
-        self.project.set_archive()
-        url = reverse(
-            'filesfolders:api_file_list_create',
-            kwargs={'project': self.project.sodar_uuid},
-        )
-        good_users = [
-            self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-        ]
-        bad_users = [self.user_no_roles]
-        self.assert_response_api(url, good_users, 200)
-        self.assert_response_api(url, bad_users, 403)
         self.assert_response_api(url, self.anonymous, 401)
-        self.assert_response_api(url, good_users, 200, knox=True)
-        # Test public project
-        self.project.set_public()
-        self.assert_response_api(url, self.user_no_roles, 200)
 
-    def test_file_create(self):
-        """Test permissions for file creation"""
+    def test_invite_create(self):
+        """Test ProjectInviteCreateAPIView permissions"""
+        email = 'new@example.com'
         url = reverse(
-            'filesfolders:api_file_list_create',
+            'projectroles:api_invite_create',
             kwargs={'project': self.project.sodar_uuid},
         )
-        # NOTE: Must call cleanup for ALL requests to seek the file
+        post_data = {
+            'email': email,
+            'role': SODAR_CONSTANTS['PROJECT_ROLE_CONTRIBUTOR'],
+        }
         good_users = [
             self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_owner,
+            self.user_delegate,
+        ]
+        bad_users = [
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_contributor,
+            self.user_guest,
+            self.user_no_roles,
         ]
-        bad_users = [self.guest_as.user, self.user_no_roles]
+
+        def _cleanup():
+            invite = ProjectInvite.objects.filter(
+                email=email,
+            ).first()
+            if invite:
+                invite.delete()
+
         self.assert_response_api(
             url,
             good_users,
             201,
             method='POST',
-            format='multipart',
-            data=self.request_data,
-            cleanup_method=self._cleanup_file_create,
+            data=post_data,
+            cleanup_method=_cleanup,
         )
         self.assert_response_api(
-            url,
-            bad_users,
-            403,
-            method='POST',
-            format='multipart',
-            data=self.request_data,
-            cleanup_method=self._cleanup_file_create,
+            url, bad_users, 403, method='POST', data=post_data
         )
         self.assert_response_api(
-            url,
-            self.anonymous,
-            401,
-            method='POST',
-            format='multipart',
-            data=self.request_data,
-            cleanup_method=self._cleanup_file_create,
+            url, self.anonymous, 401, method='POST', data=post_data
         )
+        # Test with Knox
         self.assert_response_api(
             url,
             good_users,
             201,
             method='POST',
-            format='multipart',
-            data=self.request_data,
-            cleanup_method=self._cleanup_file_create,
+            data=post_data,
             knox=True,
+            cleanup_method=_cleanup,
+        )
+        self.assert_response_api(
+            url, bad_users, 403, method='POST', data=post_data, knox=True
         )
         # Test public project
         self.project.set_public()
         self.assert_response_api(
-            url,
-            self.user_no_roles,
-            403,
-            method='POST',
-            format='multipart',
-            data=self.request_data,
+            url, self.user_no_roles, 403, method='POST', data=post_data
         )
-        self.request_data['file'].close()
 
     @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
-    def test_file_create_anon(self):
-        """Test permissions for file creation with anonymous access"""
+    def test_invite_create_anon(self):
+        """Test ProjectInviteCreateAPIView permissions with anonymous access"""
+        email = 'new@example.com'
         url = reverse(
-            'filesfolders:api_file_list_create',
+            'projectroles:api_invite_create',
             kwargs={'project': self.project.sodar_uuid},
         )
+        post_data = {
+            'email': email,
+            'role': SODAR_CONSTANTS['PROJECT_ROLE_CONTRIBUTOR'],
+        }
         self.project.set_public()
         self.assert_response_api(
-            url,
-            self.anonymous,
-            401,
-            method='POST',
-            format='multipart',
-            data=self.request_data,
+            url, self.anonymous, 401, method='POST', data=post_data
         )
-        self.request_data['file'].close()
 
-    def test_file_create_archive(self):
-        """Test permissions for file creation with archived project"""
-        self.project.set_archive()
+    def test_invite_revoke(self):
+        """Test ProjectInviteRevokeAPIView permissions"""
+        self.invite = self.make_invite(
+            email='new@example.com',
+            project=self.project,
+            role=self.role_contributor,
+            issuer=self.user_owner,
+        )
         url = reverse(
-            'filesfolders:api_file_list_create',
-            kwargs={'project': self.project.sodar_uuid},
+            'projectroles:api_invite_revoke',
+            kwargs={'projectinvite': self.invite.sodar_uuid},
         )
-        good_users = [self.superuser]
+        good_users = [
+            self.superuser,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_owner,
+            self.user_delegate,
+        ]
         bad_users = [
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_contributor,
+            self.user_guest,
             self.user_no_roles,
         ]
+
+        def _cleanup():
+            self.invite.active = True
+            self.invite.save()
+
         self.assert_response_api(
             url,
             good_users,
-            201,
+            200,
             method='POST',
-            format='multipart',
-            data=self.request_data,
-            cleanup_method=self._cleanup_file_create,
+            cleanup_method=_cleanup,
         )
         self.assert_response_api(
             url,
             bad_users,
             403,
             method='POST',
-            format='multipart',
-            data=self.request_data,
-            cleanup_method=self._cleanup_file_create,
         )
         self.assert_response_api(
             url,
             self.anonymous,
             401,
             method='POST',
-            format='multipart',
-            data=self.request_data,
-            cleanup_method=self._cleanup_file_create,
         )
+        # Test with Knox
         self.assert_response_api(
             url,
             good_users,
-            201,
+            200,
             method='POST',
-            format='multipart',
-            data=self.request_data,
-            cleanup_method=self._cleanup_file_create,
             knox=True,
+            cleanup_method=_cleanup,
         )
+        self.assert_response_api(url, bad_users, 403, method='POST', knox=True)
         # Test public project
         self.project.set_public()
-        self.assert_response_api(
-            url,
-            self.user_no_roles,
-            403,
-            method='POST',
-            format='multipart',
-            data=self.request_data,
-        )
-        self.request_data['file'].close()
-
-    def test_file_retrieve(self):
-        """Test permissions for file retrieval"""
-        url = reverse(
-            'filesfolders:api_file_retrieve_update_destroy',
-            kwargs={'file': self.file.sodar_uuid},
-        )
-        good_users = [
-            self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-        ]
-        bad_users = [self.user_no_roles]
-        self.assert_response_api(url, good_users, 200)
-        self.assert_response_api(url, bad_users, 403)
-        self.assert_response_api(url, self.anonymous, 401)
-        self.assert_response_api(url, good_users, 200, knox=True)
-        # Test public project
-        self.project.set_public()
-        self.assert_response_api(url, self.user_no_roles, 200)
+        self.assert_response_api(url, self.user_no_roles, 403, method='POST')
 
     @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
-    def test_file_retrieve_anon(self):
-        """Test permissions for file retrieval with anonymous access"""
-        url = reverse(
-            'filesfolders:api_file_retrieve_update_destroy',
-            kwargs={'file': self.file.sodar_uuid},
+    def test_invite_revoke_anon(self):
+        """Test ProjectInviteRevokeAPIView permissions with anonymous access"""
+        self.invite = self.make_invite(
+            email='new@example.com',
+            project=self.project,
+            role=self.role_contributor,
+            issuer=self.user_owner,
         )
-        self.project.set_public()
-        self.assert_response_api(url, self.anonymous, 200)
-
-    def test_file_retrieve_archive(self):
-        """Test permissions for file retrieval with archived project"""
-        self.project.set_archive()
         url = reverse(
-            'filesfolders:api_file_retrieve_update_destroy',
-            kwargs={'file': self.file.sodar_uuid},
+            'projectroles:api_invite_revoke',
+            kwargs={'projectinvite': self.invite.sodar_uuid},
         )
-        good_users = [
-            self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-        ]
-        bad_users = [self.user_no_roles]
-        self.assert_response_api(url, good_users, 200)
-        self.assert_response_api(url, bad_users, 403)
-        self.assert_response_api(url, self.anonymous, 401)
-        self.assert_response_api(url, good_users, 200, knox=True)
-        # Test public project
         self.project.set_public()
-        self.assert_response_api(url, self.user_no_roles, 200)
+        self.assert_response_api(url, self.anonymous, 401, method='POST')
 
-    def test_file_update_put(self):
-        """Test permissions for file updating with PUT"""
-        url = reverse(
-            'filesfolders:api_file_retrieve_update_destroy',
-            kwargs={'file': self.file.sodar_uuid},
+    def test_invite_resend(self):
+        """Test ProjectInviteResendAPIView permissions with anonymous access"""
+        self.invite = self.make_invite(
+            email='new@example.com',
+            project=self.project,
+            role=self.role_contributor,
+            issuer=self.user_owner,
         )
-        self.request_data.update(
-            {
-                'name': 'UPDATED Folder',
-                'flag': 'FLAG',
-                'description': 'UPDATED Description',
-            }
+        url = reverse(
+            'projectroles:api_invite_resend',
+            kwargs={'projectinvite': self.invite.sodar_uuid},
         )
         good_users = [
             self.superuser,
-            self.owner_as.user,  # Owner of file
-            self.delegate_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_owner,
+            self.user_delegate,
         ]
         bad_users = [
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_contributor,
+            self.user_guest,
             self.user_no_roles,
         ]
         self.assert_response_api(
             url,
             good_users,
             200,
-            method='PUT',
-            format='multipart',
-            data=self.request_data,
-            cleanup_method=self._cleanup_file_update,
+            method='POST',
         )
         self.assert_response_api(
             url,
             bad_users,
             403,
-            method='PUT',
-            format='multipart',
-            data=self.request_data,
-            cleanup_method=self._cleanup_file_update,
+            method='POST',
         )
         self.assert_response_api(
             url,
             self.anonymous,
             401,
-            method='PUT',
-            format='multipart',
-            data=self.request_data,
-            cleanup_method=self._cleanup_file_update,
+            method='POST',
         )
+        # Test with Knox
         self.assert_response_api(
             url,
             good_users,
             200,
-            method='PUT',
-            format='multipart',
-            data=self.request_data,
-            cleanup_method=self._cleanup_file_update,
+            method='POST',
             knox=True,
         )
+        self.assert_response_api(url, bad_users, 403, method='POST', knox=True)
         # Test public project
         self.project.set_public()
-        self.assert_response_api(
-            url,
-            self.user_no_roles,
-            403,
-            method='PUT',
-            format='multipart',
-            data=self.request_data,
-        )
+        self.assert_response_api(url, self.user_no_roles, 403, method='POST')
 
     @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
-    def test_file_update_put_anon(self):
-        """Test permissions for file updating with anonymous access"""
-        url = reverse(
-            'filesfolders:api_file_retrieve_update_destroy',
-            kwargs={'file': self.file.sodar_uuid},
-        )
-        self.request_data.update(
-            {
-                'name': 'UPDATED Folder',
-                'flag': 'FLAG',
-                'description': 'UPDATED Description',
-            }
-        )
-        self.project.set_public()
-        self.assert_response_api(
-            url,
-            self.anonymous,
-            401,
-            method='PUT',
-            format='multipart',
-            data=self.request_data,
-        )
-
-    def test_file_update_put_archive(self):
-        """Test permissions for file updating with PUT and archived project"""
-        self.project.set_archive()
-        url = reverse(
-            'filesfolders:api_file_retrieve_update_destroy',
-            kwargs={'file': self.file.sodar_uuid},
-        )
-        self.request_data.update(
-            {
-                'name': 'UPDATED Folder',
-                'flag': 'FLAG',
-                'description': 'UPDATED Description',
-            }
-        )
-        good_users = [self.superuser]
-        bad_users = [
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-            self.user_no_roles,
-        ]
-        self.assert_response_api(
-            url,
-            good_users,
-            200,
-            method='PUT',
-            format='multipart',
-            data=self.request_data,
-            cleanup_method=self._cleanup_file_update,
-        )
-        self.assert_response_api(
-            url,
-            bad_users,
-            403,
-            method='PUT',
-            format='multipart',
-            data=self.request_data,
-            cleanup_method=self._cleanup_file_update,
+    def test_invite_resend_anon(self):
+        """Test permissions for ProjectInviteResendAPIView with anonymous access"""
+        self.invite = self.make_invite(
+            email='new@example.com',
+            project=self.project,
+            role=self.role_contributor,
+            issuer=self.user_owner,
         )
-        self.assert_response_api(
-            url,
-            self.anonymous,
-            401,
-            method='PUT',
-            format='multipart',
-            data=self.request_data,
-            cleanup_method=self._cleanup_file_update,
+        url = reverse(
+            'projectroles:api_invite_resend',
+            kwargs={'projectinvite': self.invite.sodar_uuid},
         )
-        # Test public project
         self.project.set_public()
-        self.assert_response_api(
-            url,
-            self.user_no_roles,
-            403,
-            method='PUT',
-            format='multipart',
-            data=self.request_data,
-        )
+        self.assert_response_api(url, self.anonymous, 401, method='POST')
 
-    def test_file_update_patch(self):
-        """Test permissions for file updating with PATCH"""
+    def test_project_setting_retrieve(self):
+        """Test ProjectSettingRetrieveAPIView permissions"""
         url = reverse(
-            'filesfolders:api_file_retrieve_update_destroy',
-            kwargs={'file': self.file.sodar_uuid},
+            'projectroles:api_project_setting_retrieve',
+            kwargs={'project': self.project.sodar_uuid},
         )
-        self.request_data.update({'name': 'UPDATED Folder'})
+        get_data = {
+            'app_name': 'example_project_app',
+            'setting_name': 'project_str_setting',
+        }
         good_users = [
             self.superuser,
-            self.owner_as.user,  # Owner of file
-            self.delegate_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_owner,
+            self.user_delegate,
         ]
         bad_users = [
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_contributor,
+            self.user_guest,
             self.user_no_roles,
         ]
+
+        def _cleanup():
+            AppSetting.objects.all().delete()
+
         self.assert_response_api(
             url,
             good_users,
             200,
-            method='PATCH',
-            format='multipart',
-            data=self.request_data,
-            cleanup_method=self._cleanup_file_update,
-        )
-        self.assert_response_api(
-            url,
-            bad_users,
-            403,
-            method='PATCH',
-            format='multipart',
-            data=self.request_data,
-            cleanup_method=self._cleanup_file_update,
-        )
-        self.assert_response_api(
-            url,
-            self.anonymous,
-            401,
-            method='PATCH',
-            format='multipart',
-            data=self.request_data,
-            cleanup_method=self._cleanup_file_update,
+            data=get_data,
+            cleanup_method=_cleanup,
         )
+        self.assert_response_api(url, bad_users, 403, data=get_data)
+        self.assert_response_api(url, self.anonymous, 401, data=get_data)
+        # Test with Knox
         self.assert_response_api(
             url,
             good_users,
             200,
-            method='PATCH',
-            format='multipart',
-            data=self.request_data,
-            cleanup_method=self._cleanup_file_update,
+            data=get_data,
             knox=True,
+            cleanup_method=_cleanup,
         )
+        self.assert_response_api(url, bad_users, 403, data=get_data, knox=True)
         # Test public project
         self.project.set_public()
-        self.assert_response_api(
-            url,
-            self.user_no_roles,
-            403,
-            method='PATCH',
-            format='multipart',
-            data=self.request_data,
-        )
-
-    @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
-    def test_file_update_patch_anon(self):
-        """Test permissions for file updating with anonymous access"""
-        url = reverse(
-            'filesfolders:api_file_retrieve_update_destroy',
-            kwargs={'file': self.file.sodar_uuid},
-        )
-        self.request_data.update({'name': 'UPDATED Folder'})
-        self.project.set_public()
-        self.assert_response_api(
-            url,
-            self.anonymous,
-            401,
-            method='PATCH',
-            format='multipart',
-            data=self.request_data,
-        )
+        self.assert_response_api(url, self.user_no_roles, 403, data=get_data)
 
-    def test_file_update_patch_archive(self):
-        """Test permissions for file updating with PATCH and archived project"""
-        self.project.set_archive()
+    def test_project_setting_retrieve_user(self):
+        """Test ProjectSettingRetrieveAPIView permissions with PROJECT_USER setting"""
         url = reverse(
-            'filesfolders:api_file_retrieve_update_destroy',
-            kwargs={'file': self.file.sodar_uuid},
-        )
-        self.request_data.update({'name': 'UPDATED Folder'})
-        good_users = [self.superuser]
-        bad_users = [
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-            self.user_no_roles,
-        ]
-        self.assert_response_api(
-            url,
-            good_users,
-            200,
-            method='PATCH',
-            format='multipart',
-            data=self.request_data,
-            cleanup_method=self._cleanup_file_update,
-        )
-        self.assert_response_api(
-            url,
-            bad_users,
-            403,
-            method='PATCH',
-            format='multipart',
-            data=self.request_data,
-            cleanup_method=self._cleanup_file_update,
-        )
-        self.assert_response_api(
-            url,
-            self.anonymous,
-            401,
-            method='PATCH',
-            format='multipart',
-            data=self.request_data,
-            cleanup_method=self._cleanup_file_update,
-        )
-        # Test public project
-        self.project.set_public()
-        self.assert_response_api(
-            url,
-            self.user_no_roles,
-            403,
-            method='PATCH',
-            format='multipart',
-            data=self.request_data,
-        )
-
-    def test_file_destroy(self):
-        """Test permissions for file destroying with DELETE"""
-        obj_uuid = uuid.uuid4()
-        c_kwargs = {'obj_uuid': obj_uuid}
-        url = reverse(
-            'filesfolders:api_file_retrieve_update_destroy',
-            kwargs={'file': obj_uuid},
+            'projectroles:api_project_setting_retrieve',
+            kwargs={'project': self.project.sodar_uuid},
         )
+        get_data = {
+            'app_name': 'example_project_app',
+            'setting_name': 'project_user_str_setting',
+            'user': str(self.user_owner.sodar_uuid),
+        }
         good_users = [
             self.superuser,
-            self.owner_as.user,  # Owner of file
-            self.delegate_as.user,
+            self.user_owner,
         ]
         bad_users = [
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
             self.user_no_roles,
         ]
-        self._cleanup_file_destroy(**c_kwargs)
+
+        def _cleanup():
+            AppSetting.objects.all().delete()
+
         self.assert_response_api(
             url,
             good_users,
-            204,
-            method='DELETE',
-            cleanup_method=self._cleanup_file_destroy,
-            cleanup_kwargs=c_kwargs,
+            200,
+            data=get_data,
+            cleanup_method=_cleanup,
         )
-        self.assert_response_api(url, bad_users, 403, method='DELETE')
-        self.assert_response_api(url, self.anonymous, 401, method='DELETE')
+        self.assert_response_api(url, bad_users, 403, data=get_data)
+        self.assert_response_api(url, self.anonymous, 401, data=get_data)
+        # Test with Knox
         self.assert_response_api(
             url,
             good_users,
-            204,
-            method='DELETE',
-            cleanup_method=self._cleanup_file_destroy,
-            cleanup_kwargs=c_kwargs,
+            200,
+            data=get_data,
             knox=True,
+            cleanup_method=_cleanup,
         )
+        self.assert_response_api(url, bad_users, 403, data=get_data, knox=True)
         # Test public project
         self.project.set_public()
-        self.assert_response_api(
-            url,
-            self.user_no_roles,
-            403,
-            method='DELETE',
-        )
+        self.assert_response_api(url, self.user_no_roles, 403, data=get_data)
 
     @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
-    def test_file_destroy_anon(self):
-        """Test permissions for file destroying with anonymous access"""
-        file = self.make_file(
-            name='file2.txt',
-            file_name='file2.txt',
-            file_content=self.file_content,
-            project=self.project,
-            folder=None,
-            owner=self.owner_as.user,
-            description='',
-            public_url=True,
-            secret=build_secret(),
-        )
+    def test_project_setting_retrieve_anon(self):
+        """Test ProjectSettingRetrieveAPIView permissions with anonymous access"""
         url = reverse(
-            'filesfolders:api_file_retrieve_update_destroy',
-            kwargs={'file': file.sodar_uuid},
-        )
-        self.project.set_public()
-        self.assert_response_api(
-            url,
-            self.anonymous,
-            401,
-            method='DELETE',
-        )
-
-    def test_file_destroy_archive(self):
-        """Test permissions for file destroying with DELETE and archived project"""
-        self.project.set_archive()
-        obj_uuid = uuid.uuid4()
-        c_kwargs = {'obj_uuid': obj_uuid}
-        url = reverse(
-            'filesfolders:api_file_retrieve_update_destroy',
-            kwargs={'file': obj_uuid},
-        )
-        good_users = [self.superuser]
-        bad_users = [
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-            self.user_no_roles,
-        ]
-        self._cleanup_file_destroy(**c_kwargs)
-        self.assert_response_api(
-            url,
-            good_users,
-            204,
-            method='DELETE',
-            cleanup_method=self._cleanup_file_destroy,
-            cleanup_kwargs=c_kwargs,
+            'projectroles:api_project_setting_retrieve',
+            kwargs={'project': self.project.sodar_uuid},
         )
-        self.assert_response_api(url, bad_users, 403, method='DELETE')
-        self.assert_response_api(url, self.anonymous, 401, method='DELETE')
-        # Test public project
+        get_data = {
+            'app_name': 'example_project_app',
+            'setting_name': 'project_str_setting',
+        }
         self.project.set_public()
         self.assert_response_api(
             url,
-            self.user_no_roles,
+            [self.user_no_roles, self.anonymous],
             403,
-            method='DELETE',
-        )
-
-    def test_file_serve(self):
-        """Test permissions for file serving"""
-        url = reverse(
-            'filesfolders:api_file_serve', kwargs={'file': self.file.sodar_uuid}
-        )
-        good_users = [
-            self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-        ]
-        bad_users = [self.user_no_roles]
-        self.assert_response_api(url, good_users, 200, method='GET')
-        self.assert_response_api(url, bad_users, 403)
-        self.assert_response_api(url, self.anonymous, 401)
-        self.assert_response_api(url, good_users, 200, knox=True)
-        # Test public project
-        self.project.set_public()
-        self.assert_response_api(url, self.user_no_roles, 200)
-
-    @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
-    def test_file_serve_anon(self):
-        """Test permissions for file serving with anonymous access"""
-        url = reverse(
-            'filesfolders:api_file_serve', kwargs={'file': self.file.sodar_uuid}
-        )
-        self.project.set_public()
-        self.assert_response_api(url, self.anonymous, 200)
-
-    def test_file_serve_archive(self):
-        """Test permissions for file serving with archived project"""
-        self.project.set_archive()
-        url = reverse(
-            'filesfolders:api_file_serve', kwargs={'file': self.file.sodar_uuid}
+            data=get_data,
         )
-        good_users = [
-            self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-        ]
-        bad_users = [self.user_no_roles]
-        self.assert_response_api(url, good_users, 200, method='GET')
-        self.assert_response_api(url, bad_users, 403)
-        self.assert_response_api(url, self.anonymous, 401)
-        self.assert_response_api(url, good_users, 200, knox=True)
-        # Test public project
-        self.project.set_public()
-        self.assert_response_api(url, self.user_no_roles, 200)
 
-
-class TestHyperLinkAPIPermissions(
-    HyperLinkMixin, TestCoreProjectAPIPermissionBase
-):
-    """Tests for HyperLink API view permissions"""
-
-    @classmethod
-    def _cleanup_link_create(cls):
-        HyperLink.objects.order_by('-pk').first().delete()
-
-    def _cleanup_link_destroy(self, obj_uuid):
-        link = self.make_hyperlink(
-            name='New Link',
-            url='http://www.duckduckgo.com/',
-            project=self.project,
-            folder=None,
-            owner=self.owner_as.user,
-            description='',
-        )
-        link.sodar_uuid = obj_uuid
-        link.save()
-
-    def setUp(self):
-        super().setUp()
-        self.hyperlink = self.make_hyperlink(
-            name='Link',
-            url='http://www.google.com/',
-            project=self.project,
-            folder=None,
-            owner=self.owner_as.user,
-            description='',
-        )
-
-    def test_hyperlink_list(self):
-        """Test permissions for hyperlink listing"""
+    def test_project_setting_set(self):
+        """Test ProjectSettingSetAPIView permissions"""
         url = reverse(
-            'filesfolders:api_hyperlink_list_create',
+            'projectroles:api_project_setting_set',
             kwargs={'project': self.project.sodar_uuid},
         )
+        post_data = {
+            'app_name': 'example_project_app',
+            'setting_name': 'project_str_setting',
+            'value': 'value',
+        }
         good_users = [
             self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_owner,
+            self.user_delegate,
         ]
-        bad_users = [self.user_no_roles]
-        self.assert_response_api(url, good_users, 200)
-        self.assert_response_api(url, bad_users, 403)
-        self.assert_response_api(url, self.anonymous, 401)
-        self.assert_response_api(url, good_users, 200, knox=True)
-        # Test public project
-        self.project.set_public()
-        self.assert_response_api(url, self.user_no_roles, 200)
-
-    @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
-    def test_hyperlink_list_anon(self):
-        """Test permissions for hyperlink listing with anonymous access"""
-        url = reverse(
-            'filesfolders:api_hyperlink_list_create',
-            kwargs={'project': self.project.sodar_uuid},
-        )
-        self.project.set_public()
-        self.assert_response_api(url, self.anonymous, 200)
-
-    def test_hyperlink_list_archive(self):
-        """Test permissions for hyperlink listing with archived project"""
-        self.project.set_archive()
-        url = reverse(
-            'filesfolders:api_hyperlink_list_create',
-            kwargs={'project': self.project.sodar_uuid},
-        )
-        good_users = [
-            self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
+        bad_users = [
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_contributor,
+            self.user_guest,
+            self.user_no_roles,
         ]
-        bad_users = [self.user_no_roles]
-        self.assert_response_api(url, good_users, 200)
-        self.assert_response_api(url, bad_users, 403)
-        self.assert_response_api(url, self.anonymous, 401)
-        self.assert_response_api(url, good_users, 200, knox=True)
-        # Test public project
-        self.project.set_public()
-        self.assert_response_api(url, self.user_no_roles, 200)
 
-    def test_hyperlink_create(self):
-        """Test permissions for hyperlink creation"""
-        url = reverse(
-            'filesfolders:api_hyperlink_list_create',
-            kwargs={'project': self.project.sodar_uuid},
-        )
-        request_data = {
-            'name': 'New HyperLink',
-            'flag': 'IMPORTANT',
-            'description': 'HyperLink\'s description',
-            'url': 'http://www.cubi.bihealth.org',
-        }
+        def _cleanup():
+            AppSetting.objects.all().delete()
 
-        good_users = [
-            self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-        ]
-        bad_users = [self.guest_as.user, self.user_no_roles]
         self.assert_response_api(
             url,
             good_users,
-            201,
+            200,
             method='POST',
-            data=request_data,
-            cleanup_method=self._cleanup_link_create,
+            data=post_data,
+            cleanup_method=_cleanup,
         )
         self.assert_response_api(
-            url, bad_users, 403, method='POST', data=request_data
+            url, bad_users, 403, method='POST', data=post_data
         )
         self.assert_response_api(
-            url, self.anonymous, 401, method='POST', data=request_data
+            url, self.anonymous, 401, method='POST', data=post_data
         )
+        # Test with Knox
         self.assert_response_api(
             url,
             good_users,
-            201,
+            200,
             method='POST',
-            data=request_data,
-            cleanup_method=self._cleanup_link_create,
+            data=post_data,
             knox=True,
+            cleanup_method=_cleanup,
         )
-        # Test public project
-        self.project.set_public()
         self.assert_response_api(
-            url, self.user_no_roles, 403, method='POST', data=request_data
-        )
-
-    @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
-    def test_hyperlink_create_anon(self):
-        """Test permissions for hyperlink creation with anonymous access"""
-        url = reverse(
-            'filesfolders:api_hyperlink_list_create',
-            kwargs={'project': self.project.sodar_uuid},
+            url, bad_users, 403, method='POST', data=post_data, knox=True
         )
-        request_data = {
-            'name': 'New HyperLink',
-            'flag': 'IMPORTANT',
-            'description': 'HyperLink\'s description',
-            'url': 'http://www.cubi.bihealth.org',
-        }
+        # Test public project
         self.project.set_public()
         self.assert_response_api(
-            url, self.anonymous, 401, method='POST', data=request_data
+            url, self.user_no_roles, 403, method='POST', data=post_data
         )
 
-    def test_hyperlink_create_archive(self):
-        """Test permissions for hyperlink creation with archived project"""
-        self.project.set_archive()
+    def test_project_setting_set_user(self):
+        """Test ProjectSettingSetAPIView permissions with PROJECT_USER scope"""
         url = reverse(
-            'filesfolders:api_hyperlink_list_create',
+            'projectroles:api_project_setting_set',
             kwargs={'project': self.project.sodar_uuid},
         )
-        request_data = {
-            'name': 'New HyperLink',
-            'flag': 'IMPORTANT',
-            'description': 'HyperLink\'s description',
-            'url': 'http://www.cubi.bihealth.org',
+        post_data = {
+            'app_name': 'example_project_app',
+            'setting_name': 'project_user_str_setting',
+            'value': 'value',
+            'user': str(self.user_owner.sodar_uuid),
         }
-
-        good_users = [self.superuser]
+        good_users = [self.superuser, self.user_owner]
         bad_users = [
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
             self.user_no_roles,
         ]
+
+        def _cleanup():
+            AppSetting.objects.all().delete()
+
         self.assert_response_api(
             url,
             good_users,
-            201,
+            200,
             method='POST',
-            data=request_data,
-            cleanup_method=self._cleanup_link_create,
+            data=post_data,
+            cleanup_method=_cleanup,
         )
         self.assert_response_api(
-            url, bad_users, 403, method='POST', data=request_data
+            url, bad_users, 403, method='POST', data=post_data
         )
         self.assert_response_api(
-            url, self.anonymous, 401, method='POST', data=request_data
+            url, self.anonymous, 401, method='POST', data=post_data
         )
+        # Test with Knox
         self.assert_response_api(
             url,
             good_users,
-            201,
+            200,
             method='POST',
-            data=request_data,
-            cleanup_method=self._cleanup_link_create,
+            data=post_data,
             knox=True,
-        )
-        # Test public project
-        self.project.set_public()
-        self.assert_response_api(
-            url, self.user_no_roles, 403, method='POST', data=request_data
-        )
-
-    def test_hyperlink_retrieve(self):
-        """Test permissions for hyperlink retrieval"""
-        url = reverse(
-            'filesfolders:api_hyperlink_retrieve_update_destroy',
-            kwargs={'hyperlink': self.hyperlink.sodar_uuid},
-        )
-        good_users = [
-            self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-        ]
-        bad_users = [self.user_no_roles]
-        self.assert_response_api(url, good_users, 200, method='GET')
-        self.assert_response_api(url, bad_users, 403)
-        self.assert_response_api(url, self.anonymous, 401)
-        self.assert_response_api(url, good_users, 200, knox=True)
-        # Test public project
-        self.project.set_public()
-        self.assert_response_api(url, self.user_no_roles, 200)
-
-    @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
-    def test_hyperlink_retrieve_anon(self):
-        """Test permissions for hyperlink retrieval with anonymous access"""
-        url = reverse(
-            'filesfolders:api_hyperlink_retrieve_update_destroy',
-            kwargs={'hyperlink': self.hyperlink.sodar_uuid},
-        )
-        self.project.set_public()
-        self.assert_response_api(url, self.anonymous, 200)
-
-    def test_hyperlink_retrieve_archive(self):
-        """Test permissions for hyperlink retrieval with archived project"""
-        self.project.set_archive()
-        url = reverse(
-            'filesfolders:api_hyperlink_retrieve_update_destroy',
-            kwargs={'hyperlink': self.hyperlink.sodar_uuid},
-        )
-        good_users = [
-            self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-        ]
-        bad_users = [self.user_no_roles]
-        self.assert_response_api(url, good_users, 200, method='GET')
-        self.assert_response_api(url, bad_users, 403)
-        self.assert_response_api(url, self.anonymous, 401)
-        self.assert_response_api(url, good_users, 200, knox=True)
-        # Test public project
-        self.project.set_public()
-        self.assert_response_api(url, self.user_no_roles, 200)
-
-    def test_hyperlink_update_put(self):
-        """Test permissions for hyperlink updating with PUT"""
-        url = reverse(
-            'filesfolders:api_hyperlink_retrieve_update_destroy',
-            kwargs={'hyperlink': self.hyperlink.sodar_uuid},
-        )
-        request_data = {
-            'name': 'UPDATED HyperLink',
-            'flag': 'FLAG',
-            'description': 'UPDATED Description',
-            'url': 'http://www.bihealth.org',
-        }
-        good_users = [
-            self.superuser,
-            self.owner_as.user,  # Owner of link
-            self.delegate_as.user,
-        ]
-        bad_users = [
-            self.contributor_as.user,
-            self.guest_as.user,
-            self.user_no_roles,
-        ]
-        self.assert_response_api(
-            url, good_users, 200, method='PUT', data=request_data
+            cleanup_method=_cleanup,
         )
         self.assert_response_api(
-            url, bad_users, 403, method='PUT', data=request_data
-        )
-        self.assert_response_api(
-            url, self.anonymous, 401, method='PUT', data=request_data
-        )
-        self.assert_response_api(
-            url, good_users, 200, method='PUT', data=request_data, knox=True
+            url, bad_users, 403, method='POST', data=post_data, knox=True
         )
         # Test public project
         self.project.set_public()
         self.assert_response_api(
-            url, self.user_no_roles, 403, method='PUT', data=request_data
+            url, self.user_no_roles, 403, method='POST', data=post_data
         )
 
     @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
-    def test_hyperlink_update_put_anon(self):
-        """Test permissions for hyperlink updating with anonymous access"""
+    def test_project_setting_set_anon(self):
+        """Test ProjectSettingSetAPIView permissions with anonymous access"""
         url = reverse(
-            'filesfolders:api_hyperlink_retrieve_update_destroy',
-            kwargs={'hyperlink': self.hyperlink.sodar_uuid},
+            'projectroles:api_project_setting_set',
+            kwargs={'project': self.project.sodar_uuid},
         )
-        request_data = {
-            'name': 'UPDATED HyperLink',
-            'flag': 'FLAG',
-            'description': 'UPDATED Description',
-            'url': 'http://www.bihealth.org',
+        post_data = {
+            'app_name': 'example_project_app',
+            'setting_name': 'project_str_setting',
+            'value': 'value',
         }
         self.project.set_public()
         self.assert_response_api(
-            url, self.anonymous, 401, method='PUT', data=request_data
+            url,
+            [self.user_no_roles, self.anonymous],
+            403,
+            method='POST',
+            data=post_data,
         )
 
-    def test_hyperlink_update_put_archive(self):
-        """Test permissions for hyperlink updating with PUT and archived project"""
-        self.project.set_archive()
-        url = reverse(
-            'filesfolders:api_hyperlink_retrieve_update_destroy',
-            kwargs={'hyperlink': self.hyperlink.sodar_uuid},
-        )
-        request_data = {
-            'name': 'UPDATED HyperLink',
-            'flag': 'FLAG',
-            'description': 'UPDATED Description',
-            'url': 'http://www.bihealth.org',
+    def test_user_setting_retrieve(self):
+        """Test UserSettingRetrieveAPIView permissions"""
+        url = reverse('projectroles:api_user_setting_retrieve')
+        get_data = {
+            'app_name': 'example_project_app',
+            'setting_name': 'user_str_setting',
         }
-        good_users = [self.superuser]
-        bad_users = [
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-            self.user_no_roles,
-        ]
-        self.assert_response_api(
-            url, good_users, 200, method='PUT', data=request_data
-        )
-        self.assert_response_api(
-            url, bad_users, 403, method='PUT', data=request_data
-        )
-        self.assert_response_api(
-            url, self.anonymous, 401, method='PUT', data=request_data
-        )
-        self.assert_response_api(
-            url, good_users, 200, method='PUT', data=request_data, knox=True
-        )
-        # Test public project
-        self.project.set_public()
-        self.assert_response_api(
-            url, self.user_no_roles, 403, method='PUT', data=request_data
-        )
-
-    def test_hyperlink_update_patch(self):
-        """Test permissions for hyperlink updating with PATCH"""
-        url = reverse(
-            'filesfolders:api_hyperlink_retrieve_update_destroy',
-            kwargs={'hyperlink': self.hyperlink.sodar_uuid},
-        )
-        request_data = {'name': 'UPDATED Hyperlink'}
         good_users = [
-            self.superuser,
-            self.owner_as.user,  # Owner of link
-            self.delegate_as.user,
-        ]
-        bad_users = [
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
             self.user_no_roles,
         ]
-        self.assert_response_api(
-            url, good_users, 200, method='PATCH', data=request_data
-        )
-        self.assert_response_api(
-            url, bad_users, 403, method='PATCH', data=request_data
-        )
-        self.assert_response_api(
-            url, self.anonymous, 401, method='PATCH', data=request_data
-        )
-        self.assert_response_api(
-            url, good_users, 200, method='PATCH', data=request_data, knox=True
-        )
-        # Test public project
-        self.project.set_public()
-        self.assert_response_api(
-            url, self.user_no_roles, 403, method='PATCH', data=request_data
-        )
 
-    @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
-    def test_hyperlink_update_patch_anon(self):
-        """Test permissions for hyperlink updating with anonymous access"""
-        url = reverse(
-            'filesfolders:api_hyperlink_retrieve_update_destroy',
-            kwargs={'hyperlink': self.hyperlink.sodar_uuid},
-        )
-        request_data = {'name': 'UPDATED Hyperlink'}
-        self.project.set_public()
-        self.assert_response_api(
-            url, self.anonymous, 401, method='PATCH', data=request_data
-        )
-
-    def test_hyperlink_update_patch_archive(self):
-        """Test permissions for hyperlink updating with PATCH and archived project"""
-        self.project.set_archive()
-        url = reverse(
-            'filesfolders:api_hyperlink_retrieve_update_destroy',
-            kwargs={'hyperlink': self.hyperlink.sodar_uuid},
-        )
-        request_data = {'name': 'UPDATED Hyperlink'}
-        good_users = [self.superuser]
-        bad_users = [
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-            self.user_no_roles,
-        ]
-        self.assert_response_api(
-            url, good_users, 200, method='PATCH', data=request_data
-        )
-        self.assert_response_api(
-            url, bad_users, 403, method='PATCH', data=request_data
-        )
-        self.assert_response_api(
-            url, self.anonymous, 401, method='PATCH', data=request_data
-        )
-        self.assert_response_api(
-            url, good_users, 200, method='PATCH', data=request_data, knox=True
-        )
-        # Test public project
-        self.project.set_public()
-        self.assert_response_api(
-            url, self.user_no_roles, 403, method='PATCH', data=request_data
-        )
+        def _cleanup():
+            AppSetting.objects.all().delete()
 
-    def test_hyperlink_destroy(self):
-        """Test permissions for hyperlink destroying with DELETE"""
-        obj_uuid = uuid.uuid4()
-        c_kwargs = {'obj_uuid': obj_uuid}
-        url = reverse(
-            'filesfolders:api_hyperlink_retrieve_update_destroy',
-            kwargs={'hyperlink': obj_uuid},
-        )
-        good_users = [
-            self.superuser,
-            self.owner_as.user,  # Owner of link
-            self.delegate_as.user,
-        ]
-        bad_users = [
-            self.contributor_as.user,
-            self.guest_as.user,
-            self.user_no_roles,
-        ]
-        self._cleanup_link_destroy(**c_kwargs)
         self.assert_response_api(
             url,
             good_users,
-            204,
-            method='DELETE',
-            cleanup_method=self._cleanup_link_destroy,
-            cleanup_kwargs=c_kwargs,
+            200,
+            data=get_data,
+            cleanup_method=_cleanup,
         )
-        self.assert_response_api(url, bad_users, 403, method='DELETE')
-        self.assert_response_api(url, self.anonymous, 401, method='DELETE')
+        self.assert_response_api(url, self.anonymous, 403, data=get_data)
+        # Test with Knox
         self.assert_response_api(
             url,
             good_users,
-            204,
-            method='DELETE',
-            cleanup_method=self._cleanup_link_destroy,
-            cleanup_kwargs=c_kwargs,
+            200,
+            data=get_data,
             knox=True,
-        )
-        # Test public project
-        self.project.set_public()
-        self.assert_response_api(
-            url,
-            self.user_no_roles,
-            403,
-            method='DELETE',
+            cleanup_method=_cleanup,
         )
 
     @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
-    def test_hyperlink_destroy_anon(self):
-        """Test permissions for hyperlink destroying with anonymous access"""
-        link = self.make_hyperlink(
-            name='New Link',
-            url='http://www.duckduckgo.com/',
-            project=self.project,
-            folder=None,
-            owner=self.owner_as.user,
-            description='',
-        )
-        url = reverse(
-            'filesfolders:api_hyperlink_retrieve_update_destroy',
-            kwargs={'hyperlink': link.sodar_uuid},
-        )
-        self.project.set_public()
+    def test_user_setting_retrieve_anon(self):
+        """Test UserSettingRetrieveAPIView permissions with anonymous access"""
+        url = reverse('projectroles:api_user_setting_retrieve')
+        get_data = {
+            'app_name': 'example_project_app',
+            'setting_name': 'user_str_setting',
+        }
         self.assert_response_api(
             url,
-            self.anonymous,
-            401,
-            method='DELETE',
+            [self.anonymous],
+            403,
+            data=get_data,
         )
 
-    def test_hyperlink_destroy_archive(self):
-        """Test permissions for hyperlink destroying with DELETE and archived project"""
-        self.project.set_archive()
-        obj_uuid = uuid.uuid4()
-        c_kwargs = {'obj_uuid': obj_uuid}
-        url = reverse(
-            'filesfolders:api_hyperlink_retrieve_update_destroy',
-            kwargs={'hyperlink': obj_uuid},
-        )
-        good_users = [self.superuser]
-        bad_users = [
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
+    def test_user_setting_set(self):
+        """Test UserSettingSetAPIView permissions"""
+        url = reverse('projectroles:api_user_setting_set')
+        post_data = {
+            'app_name': 'example_project_app',
+            'setting_name': 'user_str_setting',
+            'value': 'value',
+        }
+        good_users = [
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
             self.user_no_roles,
         ]
-        self._cleanup_link_destroy(**c_kwargs)
+
+        def _cleanup():
+            AppSetting.objects.all().delete()
+
         self.assert_response_api(
             url,
             good_users,
-            204,
-            method='DELETE',
-            cleanup_method=self._cleanup_link_destroy,
-            cleanup_kwargs=c_kwargs,
+            200,
+            method='POST',
+            data=post_data,
+            cleanup_method=_cleanup,
         )
-        self.assert_response_api(url, bad_users, 403, method='DELETE')
-        self.assert_response_api(url, self.anonymous, 401, method='DELETE')
+        self.assert_response_api(
+            url, self.anonymous, 403, method='POST', data=post_data
+        )
+        # Test with Knox
         self.assert_response_api(
             url,
             good_users,
-            204,
-            method='DELETE',
-            cleanup_method=self._cleanup_link_destroy,
-            cleanup_kwargs=c_kwargs,
+            200,
+            method='POST',
+            data=post_data,
             knox=True,
+            cleanup_method=_cleanup,
         )
-        # Test public project
+
+    @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
+    def test_user_setting_set_anon(self):
+        """Test UserSettingSetAPIView permissions with anonymous access"""
+        url = reverse('projectroles:api_user_setting_set')
+        post_data = {
+            'app_name': 'example_project_app',
+            'setting_name': 'user_str_setting',
+            'value': 'value',
+        }
         self.project.set_public()
         self.assert_response_api(
             url,
-            self.user_no_roles,
+            [self.anonymous],
             403,
-            method='DELETE',
+            method='POST',
+            data=post_data,
         )
+
+    def test_user_list(self):
+        """Test permissions for UserListAPIView"""
+        url = reverse('projectroles:api_user_list')
+        good_users = [
+            self.superuser,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
+            self.user_no_roles,
+        ]
+        self.assert_response_api(url, good_users, 200)
+        self.assert_response_api(url, self.anonymous, 401)
+        self.assert_response_api(url, good_users, 200, knox=True)
+
+    def test_user_current(self):
+        """Test permissions for CurrentUserRetrieveAPIView"""
+        url = reverse('projectroles:api_user_current')
+        good_users = [
+            self.superuser,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
+            self.user_no_roles,
+        ]
+        self.assert_response_api(url, good_users, 200)
+        self.assert_response_api(url, self.anonymous, 401)
+        self.assert_response_api(url, good_users, 200, knox=True)
```

### Comparing `django-sodar-core-0.12.0/filesfolders/tests/test_plugins.py` & `django-sodar-core-0.13.0/filesfolders/tests/test_plugins.py`

 * *Files 3% similar despite different names*

```diff
@@ -2,17 +2,21 @@
 
 import uuid
 
 from django.urls import reverse
 from test_plus.test import TestCase
 
 # Projectroles dependency
-from projectroles.models import Role, SODAR_CONSTANTS
+from projectroles.models import SODAR_CONSTANTS
 from projectroles.plugins import ProjectAppPluginPoint
-from projectroles.tests.test_models import ProjectMixin, RoleAssignmentMixin
+from projectroles.tests.test_models import (
+    ProjectMixin,
+    RoleMixin,
+    RoleAssignmentMixin,
+)
 
 from filesfolders.urls import urlpatterns
 from filesfolders.tests.test_models import (
     FolderMixin,
     FileMixin,
     HyperLinkMixin,
 )
@@ -25,21 +29,22 @@
 PROJECT_ROLE_GUEST = SODAR_CONSTANTS['PROJECT_ROLE_GUEST']
 PROJECT_TYPE_CATEGORY = SODAR_CONSTANTS['PROJECT_TYPE_CATEGORY']
 PROJECT_TYPE_PROJECT = SODAR_CONSTANTS['PROJECT_TYPE_PROJECT']
 
 # Local constants
 SECRET = '7dqq83clo2iyhg29hifbor56og6911r5'
 PLUGIN_NAME = 'filesfolders'
-PLUGIN_TITLE = 'Small Files'
+PLUGIN_TITLE = 'Files'
 PLUGIN_URL_ID = 'filesfolders:list'
 SETTING_KEY = 'allow_public_links'
 
 
 class TestPlugins(
     ProjectMixin,
+    RoleMixin,
     FolderMixin,
     FileMixin,
     HyperLinkMixin,
     RoleAssignmentMixin,
     TestCase,
 ):
     """Test filesfolders plugin"""
@@ -47,15 +52,15 @@
     def setUp(self):
         # Init superuser
         self.user = self.make_user('superuser')
         self.user.is_staff = True
         self.user.is_superuser = True
         self.user.save()
         # Init roles
-        self.role_owner = Role.objects.get_or_create(name=PROJECT_ROLE_OWNER)[0]
+        self.init_roles()
         # Init project and owner role
         self.project = self.make_project(
             'TestProject', PROJECT_TYPE_PROJECT, None
         )
         self.owner_as = self.make_assignment(
             self.project, self.user, self.role_owner
         )
```

### Comparing `django-sodar-core-0.12.0/filesfolders/tests/test_ui.py` & `django-sodar-core-0.13.0/filesfolders/tests/test_ui.py`

 * *Files 21% similar despite different names*

```diff
@@ -114,35 +114,42 @@
             owner=self.user_owner,
             description='',
             public_url=False,
             secret='xxxxxxxxx',
         )
         expected_true = [
             self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
         ]
         url = reverse(
             'filesfolders:list', kwargs={'project': self.project.sodar_uuid}
         )
         self.assert_element_exists(
             expected_true, url, 'sodar-ff-readme-card', True
         )
 
     def test_buttons_list(self):
         """Test file/folder list-wide button visibility"""
         expected_true = [
             self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
         ]
-        expected_false = [self.guest_as.user]
+        expected_false = [self.user_guest_cat, self.user_guest]
         url = reverse(
             'filesfolders:list', kwargs={'project': self.project.sodar_uuid}
         )
         self.assert_element_exists(
             expected_true, url, 'sodar-ff-buttons-list', True
         )
         self.assert_element_exists(
@@ -150,18 +157,22 @@
         )
 
     def test_buttons_list_archive(self):
         """Test file/folder list-wide button visibility for archived project"""
         self.project.set_archive()
         expected_true = [self.superuser]
         expected_false = [
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
         ]
         url = reverse(
             'filesfolders:list', kwargs={'project': self.project.sodar_uuid}
         )
         self.assert_element_exists(
             expected_true, url, 'sodar-ff-buttons-list', True
         )
@@ -169,134 +180,170 @@
             expected_false, url, 'sodar-ff-buttons-list', False
         )
 
     def test_buttons_file(self):
         """Test file action buttons visibility"""
         expected = [
             (self.superuser, 2),
-            (self.owner_as.user, 2),
-            (self.delegate_as.user, 2),
-            (self.contributor_as.user, 1),
-            (self.guest_as.user, 0),
+            (self.user_owner_cat, 2),
+            (self.user_delegate_cat, 2),
+            (self.user_contributor_cat, 0),  # Does not own files
+            (self.user_guest_cat, 0),
+            (self.user_owner, 2),
+            (self.user_delegate, 2),
+            (self.user_contributor, 1),
+            (self.user_guest, 0),
         ]
         url = reverse(
             'filesfolders:list', kwargs={'project': self.project.sodar_uuid}
         )
         self.assert_element_count(expected, url, 'sodar-ff-file-buttons')
 
     def test_buttons_file_archive(self):
         """Test file action buttons visibility for archived project"""
         self.project.set_archive()
         expected = [
             (self.superuser, 2),
-            (self.owner_as.user, 0),
-            (self.delegate_as.user, 0),
-            (self.contributor_as.user, 0),
-            (self.guest_as.user, 0),
+            (self.user_owner_cat, 0),
+            (self.user_delegate_cat, 0),
+            (self.user_contributor_cat, 0),
+            (self.user_guest_cat, 0),
+            (self.user_owner, 0),
+            (self.user_delegate, 0),
+            (self.user_contributor, 0),
+            (self.user_guest, 0),
         ]
         url = reverse(
             'filesfolders:list', kwargs={'project': self.project.sodar_uuid}
         )
         self.assert_element_count(expected, url, 'sodar-ff-file-buttons')
 
     def test_buttons_folder(self):
         """Test folder action buttons visibility"""
         expected = [
             (self.superuser, 2),
-            (self.owner_as.user, 2),
-            (self.delegate_as.user, 2),
-            (self.contributor_as.user, 1),
-            (self.guest_as.user, 0),
+            (self.user_owner_cat, 2),
+            (self.user_delegate_cat, 2),
+            (self.user_contributor_cat, 0),  # Does not own folders
+            (self.user_guest_cat, 0),
+            (self.user_owner, 2),
+            (self.user_delegate, 2),
+            (self.user_contributor, 1),
+            (self.user_guest, 0),
         ]
         url = reverse(
             'filesfolders:list', kwargs={'project': self.project.sodar_uuid}
         )
         self.assert_element_count(expected, url, 'sodar-ff-folder-buttons')
 
     def test_buttons_folder_archive(self):
         """Test folder action buttons visibility for archived project"""
         self.project.set_archive()
         expected = [
             (self.superuser, 2),
-            (self.owner_as.user, 0),
-            (self.delegate_as.user, 0),
-            (self.contributor_as.user, 0),
-            (self.guest_as.user, 0),
+            (self.user_owner_cat, 0),
+            (self.user_delegate_cat, 0),
+            (self.user_contributor_cat, 0),
+            (self.user_guest_cat, 0),
+            (self.user_owner, 0),
+            (self.user_delegate, 0),
+            (self.user_contributor, 0),
+            (self.user_guest, 0),
         ]
         url = reverse(
             'filesfolders:list', kwargs={'project': self.project.sodar_uuid}
         )
         self.assert_element_count(expected, url, 'sodar-ff-folder-buttons')
 
     def test_buttons_hyperlink(self):
         """Test hyperlink action buttons visibility"""
         expected = [
             (self.superuser, 2),
-            (self.owner_as.user, 2),
-            (self.delegate_as.user, 2),
-            (self.contributor_as.user, 1),
-            (self.guest_as.user, 0),
+            (self.user_owner_cat, 2),
+            (self.user_delegate_cat, 2),
+            (self.user_contributor_cat, 0),  # Does not own hyperlinks
+            (self.user_guest_cat, 0),
+            (self.user_owner, 2),
+            (self.user_delegate, 2),
+            (self.user_contributor, 1),
+            (self.user_guest, 0),
         ]
         url = reverse(
             'filesfolders:list', kwargs={'project': self.project.sodar_uuid}
         )
         self.assert_element_count(expected, url, 'sodar-ff-hyperlink-buttons')
 
     def test_buttons_hyperlink_archive(self):
         """Test hyperlink action buttons visibility for archived project"""
         self.project.set_archive()
         expected = [
             (self.superuser, 2),
-            (self.owner_as.user, 0),
-            (self.delegate_as.user, 0),
-            (self.contributor_as.user, 0),
-            (self.guest_as.user, 0),
+            (self.user_owner_cat, 0),
+            (self.user_delegate_cat, 0),
+            (self.user_contributor_cat, 0),
+            (self.user_guest_cat, 0),
+            (self.user_owner, 0),
+            (self.user_delegate, 0),
+            (self.user_contributor, 0),
+            (self.user_guest, 0),
         ]
         url = reverse(
             'filesfolders:list', kwargs={'project': self.project.sodar_uuid}
         )
         self.assert_element_count(expected, url, 'sodar-ff-hyperlink-buttons')
 
     def test_file_checkboxes(self):
         """Test batch file editing checkbox visibility"""
         expected = [
             (self.superuser, 6),
-            (self.owner_as.user, 6),
-            (self.delegate_as.user, 6),
-            (self.contributor_as.user, 3),
-            (self.guest_as.user, 0),
+            (self.user_owner_cat, 6),
+            (self.user_delegate_cat, 6),
+            (self.user_contributor_cat, 0),
+            (self.user_guest_cat, 0),
+            (self.user_owner, 6),
+            (self.user_delegate, 6),
+            (self.user_contributor, 3),
+            (self.user_guest, 0),
         ]
         url = reverse(
             'filesfolders:list', kwargs={'project': self.project.sodar_uuid}
         )
         self.assert_element_count(expected, url, 'sodar-ff-checkbox')
 
     def test_file_checkboxes_archive(self):
         """Test batch file editing checkbox visibility for archived project"""
         self.project.set_archive()
         expected = [
             (self.superuser, 6),
-            (self.owner_as.user, 0),
-            (self.delegate_as.user, 0),
-            (self.contributor_as.user, 0),
-            (self.guest_as.user, 0),
+            (self.user_owner_cat, 0),
+            (self.user_delegate_cat, 0),
+            (self.user_contributor_cat, 0),
+            (self.user_guest_cat, 0),
+            (self.user_owner, 0),
+            (self.user_delegate, 0),
+            (self.user_contributor, 0),
+            (self.user_guest, 0),
         ]
         url = reverse(
             'filesfolders:list', kwargs={'project': self.project.sodar_uuid}
         )
         self.assert_element_count(expected, url, 'sodar-ff-checkbox')
 
     def test_public_link(self):
         """Test public link visibility"""
         expected = [
             (self.superuser, 1),
-            (self.owner_as.user, 1),
-            (self.delegate_as.user, 1),
-            (self.contributor_as.user, 1),
-            (self.guest_as.user, 0),
+            (self.user_owner_cat, 1),
+            (self.user_delegate_cat, 1),
+            (self.user_contributor_cat, 1),
+            (self.user_guest_cat, 0),
+            (self.user_owner, 1),
+            (self.user_delegate, 1),
+            (self.user_contributor, 1),
+            (self.user_guest, 0),
         ]
         url = reverse(
             'filesfolders:list', kwargs={'project': self.project.sodar_uuid}
         )
         self.assert_element_count(expected, url, 'sodar-ff-link-public')
 
     def test_public_link_disable(self):
@@ -306,33 +353,41 @@
             app_plugin__name=APP_NAME,
             name='allow_public_links',
         )
         setting.value = 0
         setting.save()
         expected = [
             (self.superuser, 0),
-            (self.owner_as.user, 0),
-            (self.delegate_as.user, 0),
-            (self.contributor_as.user, 0),
-            (self.guest_as.user, 0),
+            (self.user_owner_cat, 0),
+            (self.user_delegate_cat, 0),
+            (self.user_contributor_cat, 0),
+            (self.user_guest_cat, 0),
+            (self.user_owner, 0),
+            (self.user_delegate, 0),
+            (self.user_contributor, 0),
+            (self.user_guest, 0),
         ]
         url = reverse(
             'filesfolders:list', kwargs={'project': self.project.sodar_uuid}
         )
         self.assert_element_count(expected, url, 'sodar-ff-link-public')
 
     def test_public_link_archive(self):
         """Test public link visibility for archived project"""
         self.project.set_archive()
         expected = [
             (self.superuser, 1),
-            (self.owner_as.user, 1),
-            (self.delegate_as.user, 1),
-            (self.contributor_as.user, 1),
-            (self.guest_as.user, 0),
+            (self.user_owner_cat, 1),
+            (self.user_delegate_cat, 1),
+            (self.user_contributor_cat, 1),
+            (self.user_guest_cat, 0),
+            (self.user_owner, 1),
+            (self.user_delegate, 1),
+            (self.user_contributor, 1),
+            (self.user_guest, 0),
         ]
         url = reverse(
             'filesfolders:list', kwargs={'project': self.project.sodar_uuid}
         )
         self.assert_element_count(expected, url, 'sodar-ff-link-public')
 
     def test_item_flags(self):
@@ -342,18 +397,22 @@
         self.file_owner.save()
         self.folder_contributor.flag = 'FLAG'
         self.folder_contributor.save()
         self.hyperlink_contrib.flag = 'REVOKED'
         self.hyperlink_contrib.save()
         expected = [
             (self.superuser, 3),
-            (self.owner_as.user, 3),
-            (self.delegate_as.user, 3),
-            (self.contributor_as.user, 3),
-            (self.guest_as.user, 3),
+            (self.user_owner_cat, 3),
+            (self.user_delegate_cat, 3),
+            (self.user_contributor_cat, 3),
+            (self.user_guest_cat, 3),
+            (self.user_owner, 3),
+            (self.user_delegate, 3),
+            (self.user_contributor, 3),
+            (self.user_guest, 3),
         ]
         url = reverse(
             'filesfolders:list', kwargs={'project': self.project.sodar_uuid}
         )
         self.assert_element_count(expected, url, 'sodar-ff-flag-icon', 'class')
 
 
@@ -424,86 +483,106 @@
             description='description',
         )
 
     def test_search_results(self):
         """Test search items visibility according to user permissions"""
         expected = [
             (self.superuser, 6),
-            (self.owner_as.user, 6),
-            (self.delegate_as.user, 6),
-            (self.contributor_as.user, 6),
-            (self.guest_as.user, 6),
+            (self.user_owner_cat, 6),
+            (self.user_delegate_cat, 6),
+            (self.user_contributor_cat, 6),
+            (self.user_guest_cat, 6),
+            (self.user_owner, 6),
+            (self.user_delegate, 6),
+            (self.user_contributor, 6),
+            (self.user_guest, 6),
             (self.user_no_roles, 0),
         ]
         url = (
             reverse('projectroles:search')
             + '?'
             + urlencode({'s': 'description'})
         )
         self.assert_element_count(expected, url, 'sodar-ff-search-item')
 
     def test_search_type_file(self):
         """Test search items visibility with 'file' type"""
         expected = [
             (self.superuser, 2),
-            (self.owner_as.user, 2),
-            (self.delegate_as.user, 2),
-            (self.contributor_as.user, 2),
-            (self.guest_as.user, 2),
+            (self.user_owner_cat, 2),
+            (self.user_delegate_cat, 2),
+            (self.user_contributor_cat, 2),
+            (self.user_guest_cat, 2),
+            (self.user_owner, 2),
+            (self.user_delegate, 2),
+            (self.user_contributor, 2),
+            (self.user_guest, 2),
             (self.user_no_roles, 0),
         ]
         url = (
             reverse('projectroles:search')
             + '?'
             + urlencode({'s': 'file type:file'})
         )
         self.assert_element_count(expected, url, 'sodar-ff-search-item')
 
     def test_search_type_folder(self):
         """Test search items visibility with 'folder' type"""
         expected = [
             (self.superuser, 2),
-            (self.owner_as.user, 2),
-            (self.delegate_as.user, 2),
-            (self.contributor_as.user, 2),
-            (self.guest_as.user, 2),
+            (self.user_owner_cat, 2),
+            (self.user_delegate_cat, 2),
+            (self.user_contributor_cat, 2),
+            (self.user_guest_cat, 2),
+            (self.user_owner, 2),
+            (self.user_delegate, 2),
+            (self.user_contributor, 2),
+            (self.user_guest, 2),
             (self.user_no_roles, 0),
         ]
         url = (
             reverse('projectroles:search')
             + '?'
             + urlencode({'s': 'folder type:folder'})
         )
         self.assert_element_count(expected, url, 'sodar-ff-search-item')
 
     def test_search_type_link(self):
         """Test search items visibility with 'link' as type"""
         expected = [
             (self.superuser, 2),
-            (self.owner_as.user, 2),
-            (self.delegate_as.user, 2),
-            (self.contributor_as.user, 2),
-            (self.guest_as.user, 2),
+            (self.user_owner_cat, 2),
+            (self.user_delegate_cat, 2),
+            (self.user_contributor_cat, 2),
+            (self.user_guest_cat, 2),
+            (self.user_owner, 2),
+            (self.user_delegate, 2),
+            (self.user_contributor, 2),
+            (self.user_guest, 2),
             (self.user_no_roles, 0),
         ]
         url = (
             reverse('projectroles:search')
             + '?'
             + urlencode({'s': 'link type:link'})
         )
         self.assert_element_count(expected, url, 'sodar-ff-search-item')
 
     def test_search_type_nonexisting(self):
         """Test search items visibility with a nonexisting type"""
         expected = [
             (self.superuser, 0),
-            (self.owner_as.user, 0),
-            (self.delegate_as.user, 0),
-            (self.contributor_as.user, 0),
-            (self.guest_as.user, 0),
+            (self.user_owner_cat, 0),
+            (self.user_delegate_cat, 0),
+            (self.user_contributor_cat, 0),
+            (self.user_guest_cat, 0),
+            (self.user_owner, 0),
+            (self.user_delegate, 0),
+            (self.user_contributor, 0),
+            (self.user_guest, 0),
             (self.user_no_roles, 0),
         ]
         url = (
             reverse('projectroles:search')
             + '?'
             + urlencode({'s': 'test type:Jaix1au'})
         )
@@ -513,18 +592,22 @@
 class TestHomeView(TestUIBase):
     """Tests for appearance of filesfolders specific data in the home view"""
 
     def test_project_list(self):
         """Test custom filesfolders project list column visibility"""
         users = [
             self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
             self.user_no_roles,
         ]
         url = reverse('home')
         self.assert_element_exists(
             users, url, 'sodar-pr-project-list-header-filesfolders-files', True
         )
         self.assert_element_exists(
```

### Comparing `django-sodar-core-0.12.0/filesfolders/tests/test_views.py` & `django-sodar-core-0.13.0/filesfolders/tests/test_views.py`

 * *Files 2% similar despite different names*

```diff
@@ -5,16 +5,20 @@
 from django.core.files.uploadedfile import SimpleUploadedFile
 from django.test import RequestFactory
 from django.urls import reverse
 
 from test_plus.test import TestCase
 
 # Projectroles dependency
-from projectroles.models import Role, SODAR_CONSTANTS
-from projectroles.tests.test_models import ProjectMixin, RoleAssignmentMixin
+from projectroles.models import SODAR_CONSTANTS
+from projectroles.tests.test_models import (
+    ProjectMixin,
+    RoleMixin,
+    RoleAssignmentMixin,
+)
 from projectroles.app_settings import AppSettingAPI
 
 from filesfolders.models import File, Folder, HyperLink
 from filesfolders.tests.test_models import (
     FolderMixin,
     FileMixin,
     HyperLinkMixin,
@@ -39,27 +43,25 @@
 TEST_DATA_PATH = os.path.dirname(__file__) + '/data/'
 ZIP_PATH = TEST_DATA_PATH + 'unpack_test.zip'
 ZIP_PATH_NO_FILES = TEST_DATA_PATH + 'no_files.zip'
 INVALID_UUID = '11111111-1111-1111-1111-111111111111'
 
 
 class TestViewsBaseMixin(
-    ProjectMixin, RoleAssignmentMixin, FileMixin, FolderMixin, HyperLinkMixin
+    ProjectMixin,
+    RoleMixin,
+    RoleAssignmentMixin,
+    FileMixin,
+    FolderMixin,
+    HyperLinkMixin,
 ):
     def setUp(self):
         self.req_factory = RequestFactory()
         # Init roles
-        self.role_owner = Role.objects.get_or_create(name=PROJECT_ROLE_OWNER)[0]
-        self.role_delegate = Role.objects.get_or_create(
-            name=PROJECT_ROLE_DELEGATE
-        )[0]
-        self.role_contributor = Role.objects.get_or_create(
-            name=PROJECT_ROLE_CONTRIBUTOR
-        )[0]
-        self.role_guest = Role.objects.get_or_create(name=PROJECT_ROLE_GUEST)[0]
+        self.init_roles()
         # Init superuser
         self.user = self.make_user('superuser')
         self.user.is_staff = True
         self.user.is_superuser = True
         self.user.save()
 
         # Init project and owner role
```

### Comparing `django-sodar-core-0.12.0/filesfolders/tests/test_views_api.py` & `django-sodar-core-0.13.0/filesfolders/tests/test_views_api.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/filesfolders/utils.py` & `django-sodar-core-0.13.0/filesfolders/utils.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/filesfolders/views.py` & `django-sodar-core-0.13.0/filesfolders/views.py`

 * *Files 0% similar despite different names*

```diff
@@ -955,15 +955,14 @@
                     'name': item.name,
                 }
                 if cls.objects.filter(**get_kwargs):
                     self.failed.append(item)
 
             # Deletion checks
             elif self.batch_action == 'delete':
-
                 # Can't delete a non-empty folder
                 if isinstance(item, Folder) and not item.is_empty():
                     self.failed.append(item)
 
             ##############
             # Modify item
             ##############
```

### Comparing `django-sodar-core-0.12.0/filesfolders/views_api.py` & `django-sodar-core-0.13.0/filesfolders/views_api.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/app_settings.py` & `django-sodar-core-0.13.0/projectroles/app_settings.py`

 * *Files 22% similar despite different names*

```diff
@@ -14,45 +14,59 @@
 
 # SODAR constants
 APP_SETTING_SCOPE_PROJECT = SODAR_CONSTANTS['APP_SETTING_SCOPE_PROJECT']
 APP_SETTING_SCOPE_USER = SODAR_CONSTANTS['APP_SETTING_SCOPE_USER']
 APP_SETTING_SCOPE_PROJECT_USER = SODAR_CONSTANTS[
     'APP_SETTING_SCOPE_PROJECT_USER'
 ]
+APP_SETTING_SCOPE_SITE = SODAR_CONSTANTS['APP_SETTING_SCOPE_SITE']
+PROJECT_TYPE_PROJECT = SODAR_CONSTANTS['PROJECT_TYPE_PROJECT']
+PROJECT_TYPE_CATEGORY = SODAR_CONSTANTS['PROJECT_TYPE_CATEGORY']
 
 # Local constants
 APP_SETTING_LOCAL_DEFAULT = True
-VALID_SCOPES = [
+APP_SETTING_SCOPES = [
     APP_SETTING_SCOPE_PROJECT,
     APP_SETTING_SCOPE_USER,
     APP_SETTING_SCOPE_PROJECT_USER,
+    APP_SETTING_SCOPE_SITE,
 ]
-# Deprecation message for renamed methods, see issue #539
-DEPRECATION_MSG = (
-    '{}() is deprecated and will be removed in SODAR Core v0.13: Use '
-    '{}() instead'
-)
+APP_SETTING_DEFAULT_VALUES = {
+    'STRING': '',
+    'INTEGER': 0,
+    'BOOLEAN': False,
+    'JSON': {},
+}
+APP_SETTING_SCOPE_ARGS = {
+    APP_SETTING_SCOPE_PROJECT: {'project': True, 'user': False},
+    APP_SETTING_SCOPE_USER: {'project': False, 'user': True},
+    APP_SETTING_SCOPE_PROJECT_USER: {'project': True, 'user': True},
+    APP_SETTING_SCOPE_SITE: {'project': False, 'user': False},
+}
+DELETE_SCOPE_ERR_MSG = 'Argument "{arg}" must be set for {scope} scope setting'
 
 # Define App Settings for projectroles app
 PROJECTROLES_APP_SETTINGS = {
     #: App settings definition
     #:
     #: Example ::
     #:
     #:     'example_setting': {
-    #:         'scope': 'PROJECT',  # PROJECT/USER
-    #:         'type': 'STRING',  # STRING/INTEGER/BOOLEAN
+    #:         'scope': 'PROJECT',  # PROJECT/USER/PROJECT-USER/SITE
+    #:         'type': 'STRING',  # STRING/INTEGER/BOOLEAN/JSON
     #:         'default': 'example',
     #:         'label': 'Project setting',  # Optional, defaults to name/key
     #:         'placeholder': 'Enter example setting here',  # Optional
     #:         'description': 'Example project setting',  # Optional
     #:         'options': ['example', 'example2'],  # Optional, only for
     #:                    settings of type STRING or INTEGER
     #:         'user_modifiable': True,  # Optional, show/hide in forms
     #:         'local': False,  # Allow editing in target site forms if True
+    #:         'project_types': [PROJECT_TYPE_PROJECT],  # Optional, list may
+    #:          contain PROJECT_TYPE_CATEGORY and/or PROJECT_TYPE_PROJECT
     #:     }
     'ip_restrict': {
         'scope': APP_SETTING_SCOPE_PROJECT,
         'type': 'BOOLEAN',
         'default': False,
         'label': 'IP restrict',
         'description': 'Restrict project access by an allowed IP list',
@@ -74,58 +88,55 @@
         'default': '',
         'placeholder': 'email1@example.com;email2@example.com',
         'label': 'Additional email',
         'description': 'Also send user emails to these addresses. Separate '
         'multiple emails with semicolon.',
         'user_modifiable': True,
         'local': False,
+        'project_types': [PROJECT_TYPE_PROJECT],
+    },
+    'project_star': {
+        'scope': APP_SETTING_SCOPE_PROJECT_USER,
+        'type': 'BOOLEAN',
+        'default': False,
+        'local': False,
+        'project_types': [PROJECT_TYPE_PROJECT, PROJECT_TYPE_CATEGORY],
     },
 }
 
 
 class AppSettingAPI:
     @classmethod
     def _check_project_and_user(cls, scope, project, user):
         """
-        Ensure one of the project and user parameters is set.
+        Ensure project and user parameters are set according to scope.
 
-        :param scope: Scope of Setting (USER, PROJECT, PROJECT_USER)
+        :param scope: Scope of Setting (USER, PROJECT, PROJECT_USER, SITE)
         :param project: Project object
         :param user: User object
         :raise: ValueError if none or both objects exist
         """
-        if scope == APP_SETTING_SCOPE_PROJECT:
-            if not project:
-                raise ValueError('Project unset for setting with project scope')
-            if user:
-                raise ValueError('User set for setting with project scope')
-        elif scope == APP_SETTING_SCOPE_USER:
-            if project:
-                raise ValueError('Project set for setting with user scope')
-            if not user:
-                raise ValueError('User unset for setting with user scope')
-        elif scope == APP_SETTING_SCOPE_PROJECT_USER:
-            if not project:
-                raise ValueError(
-                    'Project unset for setting with project_user scope'
-                )
-            if not user:
-                raise ValueError(
-                    'User unset for setting with project_user scope'
-                )
+        if not APP_SETTING_SCOPE_ARGS[scope] == {
+            'project': project is not None,
+            'user': user is not None,
+        }:
+            raise ValueError(
+                'Project and/or user are set incorrect for setting '
+                'with {} scope'.format(scope)
+            )
 
     @classmethod
     def _check_scope(cls, scope):
         """
         Ensure the validity of a scope definition.
 
         :param scope: String
         :raise: ValueError if scope is not recognized
         """
-        if scope not in VALID_SCOPES:
+        if scope not in APP_SETTING_SCOPES:
             raise ValueError('Invalid scope "{}"'.format(scope))
 
     @classmethod
     def _check_type(cls, setting_type):
         """
         Ensure the validity of app setting type.
 
@@ -147,23 +158,43 @@
         if setting_type not in ['INTEGER', 'STRING'] and setting_options:
             raise ValueError(
                 'Options are only allowed for settings of type INTEGER and '
                 'STRING'
             )
 
     @classmethod
-    def _check_value_in_options(cls, setting_value, setting_options):
+    def _check_value_in_options(
+        cls, setting_value, setting_options, project=None, user=None
+    ):
         """
         Ensure setting_value is present in setting_options.
 
         :param setting_value: String
         :param setting_options: List of options (String or Integers)
+        :param project: Project object
+        :param user: User object
         :raise: ValueError if type is not recognized
         """
-        if setting_options and setting_value not in setting_options:
+        if callable(setting_options):
+            valid_options = [
+                val[0] if isinstance(val, tuple) else val
+                for val in setting_options(project, user)
+            ]
+            if setting_value not in valid_options:
+                raise ValueError(
+                    'Choice "{}" not found in options ({})'.format(
+                        setting_value,
+                        ', '.join(map(str, valid_options)),
+                    )
+                )
+        elif (
+            setting_options
+            and not callable(setting_options)
+            and setting_value not in setting_options
+        ):
             raise ValueError(
                 'Choice "{}" not found in options ({})'.format(
                     setting_value, ', '.join(map(str, setting_options))
                 )
             )
 
     @classmethod
@@ -235,35 +266,81 @@
             return setting_obj.value_json == cls._get_json_value(input_value)
         elif setting_obj.type == 'BOOLEAN':
             # TODO: Also do conversion on input value here if necessary
             return bool(int(setting_obj.value)) == input_value
         return setting_obj.value == str(input_value)
 
     @classmethod
-    def get_default(cls, app_name, setting_name, post_safe=False):
+    def _log_set_debug(
+        cls, action, app_name, setting_name, value, project, user
+    ):
+        """
+        Helper method for logging setting changes in set() method.
+
+        :param action: Action string (string)
+        :param app_name: Plugin app name (string)
+        :param setting_name: Setting name (string)
+        :param value: Setting value (string)
+        :param project: Project object
+        :param user: User object
+        """
+        extra_data = []
+        if project:
+            extra_data.append('project={}'.format(project.sodar_uuid))
+        if user:
+            extra_data.append('user={}'.format(user.username))
+        logger.debug(
+            '{} app setting: {}.{} = "{}"{}'.format(
+                action,
+                app_name,
+                setting_name,
+                value,
+                ' ({})'.format('; '.join(extra_data)) if extra_data else '',
+            )
+        )
+
+    @classmethod
+    def get_default(
+        cls, app_name, setting_name, project=None, user=None, post_safe=False
+    ):
         """
         Get default setting value from an app plugin.
 
         :param app_name: App name (string, must equal "name" in app plugin)
         :param setting_name: Setting name (string)
+        :param project: Project object (optional)
+        :param user: User object (optional)
         :param post_safe: Whether a POST safe value should be returned (bool)
         :return: Setting value (string, integer or boolean)
         :raise: ValueError if app plugin is not found
         :raise: KeyError if nothing is found with setting_name
         """
         if app_name == 'projectroles':
             app_settings = cls.get_projectroles_defs()
         else:
             app_plugin = get_app_plugin(app_name)
             if not app_plugin:
                 raise ValueError('App plugin not found: "{}"'.format(app_name))
             app_settings = app_plugin.app_settings
 
         if setting_name in app_settings:
-            if app_settings[setting_name]['type'] == 'JSON':
+            if callable(app_settings[setting_name].get('default')):
+                try:
+                    callable_setting = app_settings[setting_name]['default']
+                    return callable_setting(project, user)
+                except Exception:
+                    logger.error(
+                        'Error in callable setting "{}" for app "{}"'.format(
+                            setting_name, app_name
+                        )
+                    )
+                    return APP_SETTING_DEFAULT_VALUES[
+                        app_settings[setting_name]['type']
+                    ]
+            elif app_settings[setting_name]['type'] == 'JSON':
                 json_default = app_settings[setting_name].get('default')
                 if not json_default:
                     if isinstance(json_default, dict):
                         return {}
                     elif isinstance(json_default, list):
                         return []
                     return {}
@@ -274,39 +351,19 @@
         raise KeyError(
             'Setting "{}" not found in app plugin "{}"'.format(
                 setting_name, app_name
             )
         )
 
     @classmethod
-    def get_default_setting(cls, *args, **kwargs):
-        """
-        Get default setting value from an app plugin.
-
-        DEPRECATED: Use get_default() instead. Will be removed in SODAR Core
-        v0.13.
-
-        :param app_name: App name (string, must equal "name" in app plugin)
-        :param setting_name: Setting name (string)
-        :param post_safe: Whether a POST safe value should be returned (bool)
-        :return: Setting value (string, integer or boolean)
-        :raise: ValueError if app plugin is not found
-        :raise: KeyError if nothing is found with setting_name
-        """
-        logger.warning(
-            DEPRECATION_MSG.format('get_default_setting', 'get_default')
-        )
-        return cls.get_default(*args, **kwargs)
-
-    @classmethod
     def get(
         cls, app_name, setting_name, project=None, user=None, post_safe=False
     ):
         """
-        Return app setting value for a project or an user. If not set, return
+        Return app setting value for a project or a user. If not set, return
         default.
 
         :param app_name: App name (string, must equal "name" in app plugin)
         :param setting_name: Setting name (string)
         :param project: Project object (optional)
         :param user: User object (optional)
         :param post_safe: Whether a POST safe value should be returned (bool)
@@ -315,42 +372,35 @@
         """
         if not user or user.is_authenticated:
             try:
                 val = AppSetting.objects.get_setting_value(
                     app_name, setting_name, project=project, user=user
                 )
             except AppSetting.DoesNotExist:
-                val = cls.get_default(app_name, setting_name, post_safe)
+                val = cls.get_default(
+                    app_name,
+                    setting_name,
+                    project=project,
+                    user=user,
+                    post_safe=post_safe,
+                )
         else:  # Anonymous user
-            val = cls.get_default(app_name, setting_name, post_safe)
+            val = cls.get_default(
+                app_name,
+                setting_name,
+                project=project,
+                user=user,
+                post_safe=post_safe,
+            )
         # Handle post_safe for dict values (JSON)
         if post_safe and isinstance(val, (dict, list)):
             return json.dumps(val)
         return val
 
     @classmethod
-    def get_app_setting(cls, *args, **kwargs):
-        """
-        Return app setting value for a project or an user. If not set, return
-        default.
-
-        DEPRECATED: Use get() instead. Will be removed in SODAR Core v0.13.
-
-        :param app_name: App name (string, must equal "name" in app plugin)
-        :param setting_name: Setting name (string)
-        :param project: Project object (optional)
-        :param user: User object (optional)
-        :param post_safe: Whether a POST safe value should be returned (bool)
-        :return: String or None
-        :raise: KeyError if nothing is found with setting_name
-        """
-        logger.warning(DEPRECATION_MSG.format('get_app_setting', 'get'))
-        return cls.get(*args, **kwargs)
-
-    @classmethod
     def get_all(cls, project=None, user=None, post_safe=False):
         """
         Return all setting values. If the value is not found, return
         the default.
 
         :param project: Project object (optional)
         :param user: User object (optional)
@@ -379,75 +429,55 @@
             ret['settings.{}.{}'.format('projectroles', s_key)] = cls.get(
                 'projectroles', s_key, post_safe
             )
 
         return ret
 
     @classmethod
-    def get_all_settings(cls, *args, **kwargs):
-        """
-        Return all setting values. If the value is not found, return
-        the default.
-
-        DEPRECATED: Use get_all() instead. Will be removed in SODAR Core v0.13.
-
-        :param project: Project object (optional)
-        :param user: User object (optional)
-        :param post_safe: Whether POST safe values should be returned (bool)
-        :return: Dict
-        :raise: ValueError if neither project nor user are set
-        """
-        logger.warning(DEPRECATION_MSG.format('get_all_settings', 'get_all'))
-        return cls.get_all(*args, **kwargs)
-
-    @classmethod
-    def get_defaults(cls, scope, post_safe=False):
+    def get_defaults(cls, scope, project=None, user=None, post_safe=False):
         """
         Get all default settings for a scope.
 
         :param scope: Setting scope (PROJECT, USER or PROJECT_USER)
+        :param project: Project object (optional)
+        :param user: User object (optional)
         :param post_safe: Whether POST safe values should be returned (bool)
         :return: Dict
         """
         cls._check_scope(scope)
         ret = {}
         app_plugins = get_active_plugins()
 
         for plugin in app_plugins:
             p_settings = cls.get_definitions(scope, plugin=plugin)
             for s_key in p_settings:
                 ret[
                     'settings.{}.{}'.format(plugin.name, s_key)
-                ] = cls.get_default(plugin.name, s_key, post_safe)
+                ] = cls.get_default(
+                    plugin.name,
+                    s_key,
+                    project=project,
+                    user=user,
+                    post_safe=post_safe,
+                )
 
         p_settings = cls.get_definitions(scope, app_name='projectroles')
         for s_key in p_settings:
             ret[
                 'settings.{}.{}'.format('projectroles', s_key)
-            ] = cls.get_default('projectroles', s_key, post_safe)
+            ] = cls.get_default(
+                'projectroles',
+                s_key,
+                project=project,
+                user=user,
+                post_safe=post_safe,
+            )
         return ret
 
     @classmethod
-    def get_all_defaults(cls, *args, **kwargs):
-        """
-        Get all default settings for a scope.
-
-        DEPRECATED: Use get_defaults() instead. Will be removed in SODAR Core
-        v0.13.
-
-        :param scope: Setting scope (PROJECT, USER or PROJECT_USER)
-        :param post_safe: Whether POST safe values should be returned (bool)
-        :return: Dict
-        """
-        logger.warning(
-            DEPRECATION_MSG.format('get_all_defaults', 'get_defaults')
-        )
-        return cls.get_defaults(*args, **kwargs)
-
-    @classmethod
     def set(
         cls,
         app_name,
         setting_name,
         value,
         project=None,
         user=None,
@@ -466,57 +496,64 @@
         :return: True if changed, False if not changed
         :raise: ValueError if validating and value is not accepted for setting
                 type
         :raise: ValueError if neither project nor user are set
         :raise: KeyError if setting name is not found in plugin specification
         """
 
-        def _log_debug(action, app_name, setting_name, value, project, user):
-            extra_data = []
-            if project:
-                extra_data.append('project={}'.format(project.sodar_uuid))
-            if user:
-                extra_data.append('user={}'.format(user.username))
-            logger.debug(
-                '{} app setting: {}.{} = "{}"{}'.format(
-                    action,
-                    app_name,
-                    setting_name,
-                    value,
-                    ' ({})'.format('; '.join(extra_data)) if extra_data else '',
+        setting_def = cls.get_definition(name=setting_name, app_name=app_name)
+        cls._check_scope(setting_def.get('scope', None))
+        cls._check_project_and_user(
+            setting_def.get('scope', None), project, user
+        )
+
+        # Check project type
+        if (
+            project
+            and not setting_def.get('project_types', None)
+            and not project.type == PROJECT_TYPE_PROJECT
+            or project
+            and setting_def.get('project_types', None)
+            and project.type not in setting_def['project_types']
+        ):
+            raise ValueError(
+                'Project type {} not allowed for setting {}'.format(
+                    project.type, setting_name
                 )
             )
 
-        if not project and not user:
-            raise ValueError('Project and user are both unset')
-
         try:
             q_kwargs = {
                 'name': setting_name,
                 'project': project,
                 'user': user,
             }
             if not app_name == 'projectroles':
                 q_kwargs['app_plugin__name'] = app_name
             setting = AppSetting.objects.get(**q_kwargs)
             if cls._compare_value(setting, value):
                 return False
 
             if validate:
-                setting_def = cls.get_definition(
-                    name=setting_name, app_name=app_name
+                cls.validate(
+                    setting.type,
+                    value,
+                    setting_def.get('options'),
+                    project=project,
+                    user=user,
                 )
-                cls.validate(setting.type, value, setting_def.get('options'))
 
             if setting.type == 'JSON':
                 setting.value_json = cls._get_json_value(value)
             else:
                 setting.value = value
             setting.save()
-            _log_debug('Set', app_name, setting_name, value, project, user)
+            cls._log_set_debug(
+                'Set', app_name, setting_name, value, project, user
+            )
             return True
 
         except AppSetting.DoesNotExist:
             if app_name == 'projectroles':
                 app_settings = cls.get_projectroles_defs()
                 app_plugin_model = None
             else:
@@ -525,30 +562,30 @@
                 app_plugin_model = app_plugin.get_model()
             if setting_name not in app_settings:
                 raise KeyError(
                     'Setting "{}" not found in app plugin "{}"'.format(
                         setting_name, app_name
                     )
                 )
-            s_def = app_settings[setting_name]
-            s_type = s_def['type']
+            s_type = setting_def['type']
             s_mod = (
-                bool(s_def['user_modifiable'])
-                if 'user_modifiable' in s_def
+                bool(setting_def['user_modifiable'])
+                if 'user_modifiable' in setting_def
                 else True
             )
 
-            cls._check_scope(s_def['scope'])
-            cls._check_project_and_user(s_def['scope'], project, user)
             if validate:
                 v = cls._get_json_value(value) if s_type == 'JSON' else value
-                setting_def = cls.get_definition(
-                    name=setting_name, app_name=app_name
+                cls.validate(
+                    s_type,
+                    v,
+                    setting_def.get('options'),
+                    project=project,
+                    user=user,
                 )
-                cls.validate(s_type, v, setting_def.get('options'))
 
             s_vals = {
                 'app_plugin': app_plugin_model,
                 'project': project,
                 'user': user,
                 'name': setting_name,
                 'type': s_type,
@@ -556,63 +593,47 @@
             }
             if s_type == 'JSON':
                 s_vals['value_json'] = cls._get_json_value(value)
             else:
                 s_vals['value'] = value
 
             AppSetting.objects.create(**s_vals)
-            _log_debug('Create', app_name, setting_name, value, project, user)
+            cls._log_set_debug(
+                'Create', app_name, setting_name, value, project, user
+            )
             return True
 
     @classmethod
-    def set_app_setting(cls, *args, **kwargs):
-        """
-        Set value of an existing project or user settings. Creates the object if
-        not found.
-
-        DEPRECATED: Use set() instead. Will be removed in SODAR Core v0.13.
-
-        :param app_name: App name (string, must equal "name" in app plugin)
-        :param setting_name: Setting name (string)
-        :param value: Value to be set
-        :param project: Project object (optional)
-        :param user: User object (optional)
-        :param validate: Validate value (bool, default=True)
-        :return: True if changed, False if not changed
-        :raise: ValueError if validating and value is not accepted for setting
-                type
-        :raise: ValueError if neither project nor user are set
-        :raise: KeyError if setting name is not found in plugin specification
-        """
-        logger.warning(DEPRECATION_MSG.format('set_app_setting', 'set'))
-        return cls.set(*args, **kwargs)
-
-    @classmethod
     def delete(cls, app_name, setting_name, project=None, user=None):
         """
-        Delete app setting.
+        Delete one or more app setting objects. In case of a PROJECT_USER
+        setting, can be used to delete all settings related to project.
 
         :param app_name: App name (string, must equal "name" in app plugin)
         :param setting_name: Setting name (string)
         :param project: Project object to delete setting from (optional)
         :param user: User object to delete setting from (optional)
+        :raise: ValueError with invalid project/user args
         """
         setting_def = cls.get_definition(setting_name, app_name=app_name)
-        scope = setting_def.get('scope')
-        if scope == 'USER' and project:
-            raise ValueError('App setting scope is USER but project is set.')
-        elif scope == 'PROJECT' and user:
-            raise ValueError('App setting scope is PROJECT but user is set.')
-
+        if setting_def['scope'] != APP_SETTING_SCOPE_PROJECT_USER:
+            cls._check_project_and_user(
+                setting_def.get('scope', None), project, user
+            )
+        elif not project:
+            raise ValueError(
+                'Project must be set for {} scope settings'.format(
+                    APP_SETTING_SCOPE_PROJECT_USER
+                )
+            )
         q_kwargs = {'name': setting_name}
         if user:
             q_kwargs['user'] = user
         if project:
             q_kwargs['project'] = project
-
         logger.debug(
             'Delete app setting: {}.{} ({})'.format(
                 app_name, setting_name, '; '.join(q_kwargs)
             )
         )
         app_settings = AppSetting.objects.filter(**q_kwargs)
         s_count = app_settings.count()
@@ -620,41 +641,70 @@
         logger.debug(
             'Deleted {} app setting{}'.format(
                 s_count, 's' if s_count != 1 else ''
             )
         )
 
     @classmethod
-    def delete_setting(cls, *args, **kwargs):
+    def delete_by_scope(
+        cls,
+        scope,
+        project=None,
+        user=None,
+    ):
         """
-        Delete app setting.
-
-        DEPRECATED: Use delete() instead. Will be removed in SODAR Core v0.13.
+        Delete all app settings within a given scope for a project and/or user.
 
-        :param app_name: App name (string, must equal "name" in app plugin)
-        :param setting_name: Setting name (string)
-        :param project: Project object to delete setting from (optional)
-        :param user: User object to delete setting from (optional)
+        :param scope: Setting scope (string)
+        :param project: Project object to delete setting from
+        :param user: User object to delete setting from
+        :raise: ValueError if scope, project or user are incorrect
         """
-        logger.warning(DEPRECATION_MSG.format('delete_setting', 'delete'))
-        return cls.delete(*args, **kwargs)
+        if not scope:
+            raise ValueError('Scope must be set')
+        cls._check_scope(scope)
+        cls._check_project_and_user(scope, project, user)
+        for app_name, app_settings in cls.get_all_defs().items():
+            for setting_name, setting_def in app_settings.items():
+                if setting_def['scope'] == scope:
+                    cls.delete(
+                        app_name,
+                        setting_name,
+                        project=project,
+                        user=user,
+                    )
 
     @classmethod
-    def validate(cls, setting_type, setting_value, setting_options):
+    def validate(
+        cls,
+        setting_type,
+        setting_value,
+        setting_options,
+        project=None,
+        user=None,
+    ):
         """
         Validate setting value according to its type.
 
         :param setting_type: Setting type
         :param setting_value: Setting value
         :param setting_options: Setting options (can be None)
+        :param project: Project object (optional)
+        :param user: User object (optional)
         :raise: ValueError if setting_type or setting_value is invalid
         """
         cls._check_type(setting_type)
         cls._check_type_options(setting_type, setting_options)
-        cls._check_value_in_options(setting_value, setting_options)
+        cls._check_value_in_options(
+            setting_value, setting_options, project=project, user=user
+        )
+
+        # Check callable
+        if callable(setting_value):
+            setting_value(project, user)
 
         if setting_type == 'BOOLEAN':
             if not isinstance(setting_value, bool):
                 raise ValueError(
                     'Please enter a valid boolean value ({})'.format(
                         setting_value
                     )
@@ -675,39 +725,24 @@
             except TypeError:
                 raise ValueError(
                     'Please enter valid JSON ({})'.format(setting_value)
                 )
         return True
 
     @classmethod
-    def validate_setting(cls, *args, **kwargs):
-        """
-        Validate setting value according to its type.
-
-        DEPRECATED: Use validate() instead. Will be removed in SODAR Core v0.13.
-
-        :param setting_type: Setting type
-        :param setting_value: Setting value
-        :param setting_options: Setting options (can be None)
-        :raise: ValueError if setting_type or setting_value is invalid
-        """
-        logger.warning(DEPRECATION_MSG.format('validate_setting', 'validate'))
-        return cls.validate(*args, **kwargs)
-
-    @classmethod
     def get_definition(cls, name, plugin=None, app_name=None):
         """
         Return definition for a single app setting, either based on an app name
         or the plugin object.
 
         :param name: Setting name
         :param plugin: Plugin object extending ProjectAppPluginPoint or None
         :param app_name: Name of the app plugin (string or None)
         :return: Dict
-        :raise: ValueError if neither app_name or plugin are set or if setting
+        :raise: ValueError if neither app_name nor plugin are set or if setting
                 is not found in plugin
         """
         defs = cls._get_defs(plugin, app_name)
         if name not in defs:
             raise ValueError(
                 'App setting not found in app "{}" with name "{}"'.format(
                     app_name or plugin.name, name
@@ -715,33 +750,14 @@
             )
         ret = defs[name]
         cls._check_type(ret['type'])
         cls._check_type_options(ret['type'], ret.get('options'))
         return ret
 
     @classmethod
-    def get_setting_def(cls, *args, **kwargs):
-        """
-        Return definition for a single app setting, either based on an app name
-        or the plugin object.
-
-        DEPRECATED: Use get_definition() instead. Will be removed in SODAR Core
-        v0.13.
-
-        :param name: Setting name
-        :param plugin: Plugin object extending ProjectAppPluginPoint or None
-        :param app_name: Name of the app plugin (string or None)
-        :return: Dict
-        :raise: ValueError if neither app_name or plugin are set or if setting
-                is not found in plugin
-        """
-        logger.warning(DEPRECATION_MSG.format('get_setting_def', 'get_def'))
-        return cls.get_definition(*args, **kwargs)
-
-    @classmethod
     def get_definitions(
         cls,
         scope,
         plugin=None,
         app_name=None,
         user_modifiable=False,
     ):
@@ -750,15 +766,15 @@
 
         :param scope: PROJECT, USER or PROJECT_USER
         :param plugin: Plugin object extending ProjectAppPluginPoint or None
         :param app_name: Name of the app plugin (string or None)
         :param user_modifiable: Only return modifiable settings if True
                                 (boolean)
         :return: Dict
-        :raise: ValueError if scope is invalid or if if neither app_name or
+        :raise: ValueError if scope is invalid or if neither app_name nor
                 plugin are set
         """
         cls._check_scope(scope)
         defs = cls._get_defs(plugin, app_name)
         ret = {
             k: v
             for k, v in defs.items()
@@ -777,34 +793,14 @@
         # Ensure type validity
         for k, v in ret.items():
             cls._check_type(v['type'])
             cls._check_type_options(v['type'], v.get('options'))
         return ret
 
     @classmethod
-    def get_setting_defs(cls, *args, **kwargs):
-        """
-        Return app setting definitions of a specific scope from a plugin.
-
-        DEPRECATED: Use get_definitions() instead. Will be removed in SODAR Core
-        v0.13.
-
-        :param scope: PROJECT, USER or PROJECT_USER
-        :param plugin: Plugin object extending ProjectAppPluginPoint or None
-        :param app_name: Name of the app plugin (string or None)
-        :param user_modifiable: Only return modifiable settings if True
-                                (boolean)
-        :return: Dict
-        :raise: ValueError if scope is invalid or if if neither app_name or
-                plugin are set
-        """
-        logger.warning(DEPRECATION_MSG.format('get_setting_defs', 'get_defs'))
-        return cls.get_definitions(*args, **kwargs)
-
-    @classmethod
     def get_projectroles_defs(cls):
         """
         Return projectroles settings definitions. If it exists, get value from
         settings.PROJECTROLES_APP_SETTINGS_TEST for testing modifications.
 
         :return: Dict
         """
@@ -836,7 +832,60 @@
             []
             + get_active_plugins('project_app')
             + get_active_plugins('site_app')
         )
         for p in plugins:
             ret[p.name] = p.app_settings
         return ret
+
+
+def get_example_setting_default(project=None, user=None):
+    """
+    Example method for callable default value retrieval for app settings.
+
+    :param project: Project object
+    :param user: User object
+    :return: String with project and user info or 'No project'
+    """
+    response = 'N/A'
+    if project and user:
+        response = '{}:{}'.format(project.title, user.username)
+    elif project:
+        response = str(project.sodar_uuid)
+    elif user:
+        response = str(user.sodar_uuid)
+    return response
+
+
+def get_example_setting_options(project=None, user=None):
+    """
+    Example method for callable option list retrieval for app settings.
+
+    :param project: Project object
+    :param user: User object
+    :return: List of tuples for ChoiceField
+    """
+    response = [
+        ('N/A', 'No project or user for callable'),
+        'Example string option',
+    ]
+    if project and user:
+        response.append(
+            (
+                str(project.sodar_uuid),
+                'Project UUID {} by {}'.format(
+                    project.sodar_uuid, user.username
+                ),
+            )
+        )
+    elif project:
+        response.append(
+            (
+                str(project.sodar_uuid),
+                'Project UUID: {}'.format(project.sodar_uuid),
+            )
+        )
+    elif user:
+        response.append(
+            (str(user.sodar_uuid), 'User UUID: {}'.format(user.sodar_uuid))
+        )
+    return response
```

### Comparing `django-sodar-core-0.12.0/projectroles/auth_backends.py` & `django-sodar-core-0.13.0/projectroles/auth_backends.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/constants.py` & `django-sodar-core-0.13.0/projectroles/constants.py`

 * *Files 12% similar despite different names*

```diff
@@ -4,21 +4,23 @@
 # Global SODAR constants
 SODAR_CONSTANTS = {
     # Project roles
     'PROJECT_ROLE_OWNER': 'project owner',
     'PROJECT_ROLE_DELEGATE': 'project delegate',
     'PROJECT_ROLE_CONTRIBUTOR': 'project contributor',
     'PROJECT_ROLE_GUEST': 'project guest',
+    'PROJECT_ROLE_FINDER': 'project finder',
     # Project types
     'PROJECT_TYPE_CATEGORY': 'CATEGORY',
     'PROJECT_TYPE_PROJECT': 'PROJECT',
     # App Settings
     'APP_SETTING_SCOPE_PROJECT': 'PROJECT',
     'APP_SETTING_SCOPE_USER': 'USER',
     'APP_SETTING_SCOPE_PROJECT_USER': 'PROJECT_USER',
+    'APP_SETTING_SCOPE_SITE': 'SITE',
     # RemoteSite mode
     'SITE_MODE_SOURCE': 'SOURCE',
     'SITE_MODE_TARGET': 'TARGET',
     'SITE_MODE_PEER': 'PEER',
     # RemoteProject access types
     'REMOTE_LEVEL_NONE': 'NONE',
     'REMOTE_LEVEL_REVOKED': 'REVOKED',
```

### Comparing `django-sodar-core-0.12.0/projectroles/email.py` & `django-sodar-core-0.13.0/projectroles/email.py`

 * *Files 0% similar despite different names*

```diff
@@ -667,15 +667,15 @@
 
     :param project: Project object
     :param action: String ("archive" or "unarchive")
     :param request: HTTP request
     :return: Amount of sent email (int)
     """
     user = request.user
-    project_users = [a.user for a in project.get_all_roles() if a.user != user]
+    project_users = [a.user for a in project.get_roles() if a.user != user]
     project_users = list(set(project_users))  # Remove possible dupes (see #710)
     if not project_users:
         return 0
     mail_count = 0
 
     if action == 'archive':
         subject = SUBJECT_PROJECT_ARCHIVE
```

### Comparing `django-sodar-core-0.12.0/projectroles/forms.py` & `django-sodar-core-0.13.0/projectroles/forms.py`

 * *Files 14% similar despite different names*

```diff
@@ -5,27 +5,31 @@
 
 from django import forms
 from django.conf import settings
 from django.contrib import auth
 from django.core.exceptions import ValidationError
 from django.urls import reverse
 from django.utils import timezone
+from django.utils.html import format_html
 
-from pagedown.widgets import PagedownWidget
 from dal import autocomplete, forward as dal_forward
+from pagedown.widgets import PagedownWidget
+
 
 from projectroles.models import (
     Project,
     Role,
     RoleAssignment,
     ProjectInvite,
     RemoteSite,
     SODAR_CONSTANTS,
+    ROLE_RANKING,
     APP_SETTING_VAL_MAXLENGTH,
     CAT_DELIMITER,
+    CAT_DELIMITER_ERROR_MSG,
 )
 
 from projectroles.plugins import get_active_plugins
 from projectroles.utils import (
     get_display_name,
     get_user_display_name,
     build_secret,
@@ -83,14 +87,30 @@
             log_err = error
         log_msg = 'Field "{}": {}'.format(field, log_err)
         if hasattr(self, 'current_user') and self.current_user:
             log_msg += ' (user={})'.format(self.current_user.username)
         self.logger.error(log_msg)
         super().add_error(field, error)  # Call the error method in Django forms
 
+    def get_app_setting_label(self, plugin, label):
+        """Return label for app setting key"""
+        if plugin:
+            return format_html(
+                '{} <i class="iconify text-info" title="{}" data-icon="{}">'
+                '</i>',
+                label,
+                plugin.title,
+                plugin.icon,
+            )
+        return format_html(
+            '{} <i class="iconify text-info" title="projectroles" '
+            'data-icon="mdi-cube"></i>',
+            label,
+        )
+
 
 class SODARForm(SODARFormMixin, forms.Form):
     """Override of Django base form with SODAR Core specific helpers."""
 
 
 class SODARModelForm(SODARFormMixin, forms.ModelForm):
     """Override of Django model form with SODAR Core specific helpers."""
@@ -164,15 +184,14 @@
                     for u in exclude
                 ],
                 'exclude',
             )
         )
     if widget_class:
         return widget_class(**wg)
-
     return SODARUserAutocompleteWidget(**wg)
 
 
 class SODARUserChoiceField(forms.ModelChoiceField):
     """User choice field to be used with SODAR User objects and autocomplete"""
 
     def __init__(
@@ -254,18 +273,17 @@
             )
         ):
             ret.append((None, EMPTY_CHOICE_LABEL))
 
         categories = Project.objects.filter(type=PROJECT_TYPE_CATEGORY).exclude(
             pk=instance.pk
         )
-
         if not user.is_superuser:
             categories = categories.filter(
-                roles__in=RoleAssignment.objects.filter(
+                local_roles__in=RoleAssignment.objects.filter(
                     user=user,
                     role__name__in=[
                         PROJECT_ROLE_OWNER,
                         PROJECT_ROLE_DELEGATE,
                         PROJECT_ROLE_CONTRIBUTOR,
                     ],
                 )
@@ -308,16 +326,28 @@
         ):
             categories.append(instance.parent)
 
         ret += [(c.sodar_uuid, c.full_title) for c in categories]
         return sorted(ret, key=lambda x: x[1])
 
     def _set_app_setting_widget(self, app_name, s_field, s_key, s_val):
-        """Internal helper for setting app setting widget and value"""
+        """
+        Internal helper for setting app setting widget and value.
+
+        :param app_name: App name
+        :param s_field: Form field name
+        :param s_key: Setting key
+        :param s_val: Setting value
+        """
         s_widget_attrs = s_val.get('widget_attrs') or {}
+
+        # Set project type
+        s_project_types = s_val.get('project_types') or [PROJECT_TYPE_PROJECT]
+        s_widget_attrs['data-project-types'] = ','.join(s_project_types).lower()
+
         if 'placeholder' in s_val:
             s_widget_attrs['placeholder'] = s_val.get('placeholder')
         setting_kwargs = {
             'required': False,
             'label': s_val.get('label') or '{}.{}'.format(app_name, s_key),
             'help_text': s_val['description'],
         }
@@ -334,28 +364,53 @@
                 json_data = self.app_settings.get(
                     app_name=app_name,
                     setting_name=s_key,
                     project=self.instance,
                 )
             else:
                 json_data = self.app_settings.get_default(
-                    app_name=app_name, setting_name=s_key
+                    app_name=app_name,
+                    setting_name=s_key,
+                    project=None,
                 )
             self.initial[s_field] = json.dumps(json_data)
         else:
             if s_val.get('options'):
-                self.fields[s_field] = forms.ChoiceField(
-                    choices=[
-                        (int(option), int(option))
-                        if s_val['type'] == 'INTEGER'
-                        else (option, option)
-                        for option in s_val.get('options')
-                    ],
-                    **setting_kwargs
-                )
+                if callable(s_val['options']) and self.instance.pk:
+                    values = s_val['options'](project=self.instance)
+                    self.fields[s_field] = forms.ChoiceField(
+                        choices=[
+                            (str(value[0]), str(value[1]))
+                            if isinstance(value, tuple)
+                            else (str(value), str(value))
+                            for value in values
+                        ],
+                        **setting_kwargs
+                    )
+                elif callable(s_val['options']) and not self.instance.pk:
+                    values = s_val['options'](project=None)
+                    self.fields[s_field] = forms.ChoiceField(
+                        choices=[
+                            (str(value[0]), str(value[1]))
+                            if isinstance(value, tuple)
+                            else (str(value), str(value))
+                            for value in values
+                        ],
+                        **setting_kwargs
+                    )
+                else:
+                    self.fields[s_field] = forms.ChoiceField(
+                        choices=[
+                            (int(option), int(option))
+                            if s_val['type'] == 'INTEGER'
+                            else (option, option)
+                            for option in s_val['options']
+                        ],
+                        **setting_kwargs
+                    )
             elif s_val['type'] == 'STRING':
                 self.fields[s_field] = forms.CharField(
                     max_length=APP_SETTING_VAL_MAXLENGTH,
                     widget=forms.TextInput(attrs=s_widget_attrs),
                     **setting_kwargs
                 )
             elif s_val['type'] == 'INTEGER':
@@ -375,33 +430,44 @@
                 self.initial[s_field] = self.app_settings.get(
                     app_name=app_name,
                     setting_name=s_key,
                     project=self.instance,
                 )
             else:
                 self.initial[s_field] = self.app_settings.get_default(
-                    app_name=app_name, setting_name=s_key
+                    app_name=app_name,
+                    setting_name=s_key,
+                    project=None,
                 )
 
-    def _set_app_setting_notes(self, s_field, s_val):
-        """Internal helper for setting app setting label notes"""
+    def _set_app_setting_notes(self, s_field, s_val, plugin):
+        """
+        Internal helper for setting app setting label notes.
+
+        :param s_field: Form field name
+        :param s_val: Setting value
+        :param plugin: Plugin object
+        """
         if s_val.get('user_modifiable') is False:
             self.fields[s_field].label += ' [HIDDEN]'
             self.fields[s_field].help_text += ' [HIDDEN FROM USERS]'
         if s_val.get('local', APP_SETTING_LOCAL_DEFAULT) is False:
             if self.instance.is_remote():
                 self.fields[s_field].label += ' [DISABLED]'
                 self.fields[
                     s_field
                 ].help_text += ' [Only editable on source site]'
                 self.fields[s_field].disabled = True
             else:
                 self.fields[
                     s_field
                 ].help_text += ' [Not editable on target sites]'
+        self.fields[s_field].label = self.get_app_setting_label(
+            plugin, self.fields[s_field].label
+        )
 
     def _init_app_settings(self):
         # Set up setting query kwargs
         self.p_kwargs = {}
         if not self.current_user.is_superuser:
             self.p_kwargs['user_modifiable'] = True
         self.app_settings = AppSettingAPI()
@@ -423,15 +489,84 @@
                     **self.p_kwargs
                 )
             for s_key, s_val in p_settings.items():
                 s_field = 'settings.{}.{}'.format(app_name, s_key)
                 # Set widget and value
                 self._set_app_setting_widget(app_name, s_field, s_key, s_val)
                 # Set label notes
-                self._set_app_setting_notes(s_field, s_val)
+                self._set_app_setting_notes(s_field, s_val, plugin)
+
+    @classmethod
+    def _validate_app_settings(
+        self,
+        cleaned_data,
+        app_plugins,
+        app_settings,
+        p_kwargs,
+        instance,
+        instance_owner_as,
+    ):
+        """Validate and clean app_settings form fields"""
+        errors = []
+
+        for plugin in app_plugins + [None]:
+            if plugin:
+                name = plugin.name
+                p_settings = app_settings.get_definitions(
+                    APP_SETTING_SCOPE_PROJECT, app_name=name, **p_kwargs
+                )
+            else:
+                name = 'projectroles'
+                p_settings = app_settings.get_definitions(
+                    APP_SETTING_SCOPE_PROJECT, app_name=name, **p_kwargs
+                )
+
+            plugin_app_settings = {}
+            for s_key, s_val in p_settings.items():
+                s_field = 'settings.{}.{}'.format(name, s_key)
+                plugin_app_settings[s_key] = cleaned_data.get(s_field)
+
+                if s_val['type'] == 'JSON':
+                    if not plugin_app_settings[s_key]:
+                        cleaned_data[s_field] = '{}'
+                    try:
+                        cleaned_data[s_field] = json.loads(
+                            cleaned_data.get(s_field)
+                        )
+                    except json.JSONDecodeError as err:
+                        errors.append((s_field, 'Invalid JSON\n' + str(err)))
+                elif s_val['type'] == 'INTEGER':
+                    # When the field is a select/dropdown the information of
+                    # the datatype gets lost. We need to convert that here,
+                    # otherwise subsequent checks will fail.
+                    cleaned_data[s_field] = int(cleaned_data[s_field])
+
+                if not app_settings.validate(
+                    setting_type=s_val['type'],
+                    setting_value=cleaned_data.get(s_field),
+                    setting_options=s_val.get('options'),
+                    project=instance,
+                ):
+                    errors.append((s_field, 'Invalid value'))
+
+            # Custom validation for app settings
+            try:
+                app_settings_errors = plugin.validate_app_settings(
+                    plugin_app_settings,
+                    project=instance,
+                    user=instance_owner_as,
+                )
+                if app_settings_errors:
+                    for field, error in app_settings_errors.items():
+                        if error:
+                            errors.append((field, error))
+            except AttributeError:
+                # Plugin does not have a validate_form_app_settings method
+                pass
+        return cleaned_data, errors
 
     def __init__(self, project=None, current_user=None, *args, **kwargs):
         """Override for form initialization"""
         super().__init__(*args, **kwargs)
         disable_categories = getattr(
             settings, 'PROJECTROLES_DISABLE_CATEGORIES', False
         )
@@ -454,18 +589,14 @@
         self.fields['type'].choices = PROJECT_TYPE_CHOICES
         self.fields['parent'].help_text = 'Parent {} if nested'.format(
             get_display_name(PROJECT_TYPE_CATEGORY)
         )
         self.fields['description'].help_text = 'Short description'
         self.fields['readme'].help_text = 'README (optional, supports markdown)'
 
-        ####################
-        # Form modifications
-        ####################
-
         # Modify ModelChoiceFields to use sodar_uuid
         self.fields['parent'].to_field_name = 'sodar_uuid'
         # Set readme widget with preview
         self.fields['readme'].widget = SODARPagedownWidget(
             attrs={'show_preview': True}
         )
 
@@ -507,15 +638,15 @@
             # Set owner
             if self.current_user.is_superuser and parent_project:
                 self.initial['owner'] = parent_project.get_owner().user
             else:
                 self.initial['owner'] = self.current_user
             self.fields[
                 'owner'
-            ].label_from_instance = lambda x: x.get_form_label()
+            ].label_from_instance = lambda x: x.get_form_label(email=True)
             # Hide owner select widget for regular users
             if not self.current_user.is_superuser:
                 self.fields['owner'].widget = forms.HiddenInput()
 
             # Creating a subproject
             if parent_project:
                 # Parent must be current parent
@@ -539,352 +670,352 @@
             self.fields['type'].widget = forms.HiddenInput()
             self.fields['parent'].widget = forms.HiddenInput()
             self.fields['description'].widget = forms.HiddenInput()
             self.fields['readme'].widget = forms.HiddenInput()
 
     def clean(self):
         """Function for custom form validation and cleanup"""
-        instance_owner_as = self.instance.get_owner() if self.instance else None
+        self.instance_owner_as = (
+            self.instance.get_owner() if self.instance else None
+        )
         disable_categories = getattr(
             settings, 'PROJECTROLES_DISABLE_CATEGORIES', False
         )
         parent = self.cleaned_data.get('parent')
+        title = self.cleaned_data.get('title')
+        p_type = self.cleaned_data.get('type')
+        owner = self.cleaned_data.get('owner')
 
         # Check for category/project being placed in root
         if not parent and (not self.instance or self.instance.parent):
             if (
-                self.cleaned_data.get('type') == PROJECT_TYPE_CATEGORY
+                p_type == PROJECT_TYPE_CATEGORY
                 and not self.current_user.is_superuser
             ):
                 self.add_error(
                     'parent',
-                    'You do not have permission to place a {} under root'.format(
-                        get_display_name(PROJECT_TYPE_CATEGORY)
-                    ),
+                    'You do not have permission to place a {} under '
+                    'root'.format(get_display_name(PROJECT_TYPE_CATEGORY)),
                 )
-            elif (
-                self.cleaned_data.get('type') == PROJECT_TYPE_PROJECT
-                and not disable_categories
-            ):
+            elif p_type == PROJECT_TYPE_PROJECT and not disable_categories:
                 self.add_error(
                     'parent', 'Projects can not be placed under root'
                 )
 
+        # Ensure prohibited substrings are not found in title
+        if (
+            CAT_DELIMITER in title
+            or title.startswith(CAT_DELIMITER.strip())
+            or title.endswith(CAT_DELIMITER.strip())
+        ):
+            self.add_error('title', CAT_DELIMITER_ERROR_MSG)
         # Ensure title does not match parent
-        if parent and parent.title == self.cleaned_data.get('title'):
+        if parent and parent.title == title:
             self.add_error(
                 'title',
                 '{} and parent titles can not be equal'.format(
-                    get_display_name(self.cleaned_data.get('type'), title=True)
+                    get_display_name(p_type, title=True)
                 ),
             )
-
         # Ensure title is unique within parent
         existing_project = Project.objects.filter(
-            parent=self.cleaned_data.get('parent'),
-            title=self.cleaned_data.get('title'),
+            parent=parent,
+            title=title,
         ).first()
-
         if existing_project and (
             not self.instance or existing_project.pk != self.instance.pk
         ):
             self.add_error('title', 'Title must be unique within parent')
 
         # Ensure owner has been set
-        if not self.cleaned_data.get('owner'):
+        if not owner:
             self.add_error(
                 'owner',
-                'Owner must be set for {}'.format(
-                    get_display_name(self.cleaned_data.get('type'))
-                ),
+                'Owner must be set for {}'.format(get_display_name(p_type)),
             )
-
         # Ensure owner is not changed on update (must use ownership transfer)
-        if (
-            instance_owner_as
-            and self.cleaned_data.get('owner') != instance_owner_as.user
-        ):
+        if self.instance_owner_as and owner != self.instance_owner_as.user:
             self.add_error(
                 'owner',
                 'Owner update is not allowed in this form, use Ownership '
                 'Transfer instead',
             )
 
-        # Verify settings fields
-        for plugin in self.app_plugins + [None]:
-            if plugin:
-                name = plugin.name
-                p_settings = self.app_settings.get_definitions(
-                    APP_SETTING_SCOPE_PROJECT, plugin=plugin, **self.p_kwargs
-                )
-            else:
-                name = 'projectroles'
-                p_settings = self.app_settings.get_definitions(
-                    APP_SETTING_SCOPE_PROJECT, app_name=name, **self.p_kwargs
-                )
-
-            for s_key, s_val in p_settings.items():
-                s_field = 'settings.{}.{}'.format(name, s_key)
-
-                if s_val['type'] == 'JSON':
-                    # for some reason, there is a distinct possibility, that the
-                    # initial value has been discarded and we get '' as value.
-                    # Seems to only happen in automated tests. Will catch that
-                    # here.
-                    if not self.cleaned_data.get(s_field):
-                        self.cleaned_data[s_field] = '{}'
-                    try:
-                        self.cleaned_data[s_field] = json.loads(
-                            self.cleaned_data.get(s_field)
-                        )
-                    except json.JSONDecodeError as err:
-                        # TODO: Shouldn't we use add_error() instead?
-                        raise forms.ValidationError(
-                            'Couldn\'t encode JSON\n' + str(err)
-                        )
-                elif s_val['type'] == 'INTEGER':
-                    # When the field is a select/dropdown the information of
-                    # the datatype gets lost. We need to convert that here,
-                    # otherwise subsequent checks will fail.
-                    self.cleaned_data[s_field] = int(self.cleaned_data[s_field])
-
-                if not self.app_settings.validate(
-                    setting_type=s_val['type'],
-                    setting_value=self.cleaned_data.get(s_field),
-                    setting_options=s_val.get('options'),
-                ):
-                    self.add_error(s_field, 'Invalid value')
+        # Ensure public_guest_access is not set on a category
+        if p_type == PROJECT_TYPE_CATEGORY and self.cleaned_data.get(
+            'public_guest_access'
+        ):
+            self.add_error(
+                'public_guest_access',
+                'Public guest access is not allowed for categories',
+            )
 
+        # Verify settings fields
+        cleaned_data, errors = self._validate_app_settings(
+            self.cleaned_data,
+            self.app_plugins,
+            self.app_settings,
+            self.p_kwargs,
+            self.instance,
+            self.instance_owner_as,
+        )
+        for key, value in cleaned_data.items():
+            self.cleaned_data[key] = value
+        for field, error in errors:
+            self.add_error(field, error)
         return self.cleaned_data
 
 
 # RoleAssignment form ----------------------------------------------------------
 
 
 class RoleAssignmentForm(SODARModelForm):
     """Form for editing Project role assignments"""
 
+    promote = forms.BooleanField(widget=forms.HiddenInput(), required=False)
+
     class Meta:
         model = RoleAssignment
-        fields = ['project', 'user', 'role']
+        fields = ['project', 'user', 'role', 'promote']
 
-    def __init__(self, project=None, current_user=None, *args, **kwargs):
+    def __init__(
+        self, project=None, current_user=None, promote_as=None, *args, **kwargs
+    ):
         """Override for form initialization"""
         super().__init__(*args, **kwargs)
         # Get current user for checking permissions for form items
         if current_user:
             self.current_user = current_user
         # Get the project for which role is being assigned
         self.project = None
-
         if self.instance.pk:
             self.project = self.instance.project
         else:
             self.project = Project.objects.filter(sodar_uuid=project).first()
-
-        ####################
-        # Form modifications
-        ####################
+        # Get promote assignment in case of promoting inherited user
+        # NOTE: This is already validated in get()
+        if promote_as:
+            promote_as = RoleAssignment.objects.filter(
+                sodar_uuid=promote_as
+            ).first()
 
         # Modify project field to use sodar_uuid
         self.fields['project'].to_field_name = 'sodar_uuid'
         # Set up user field
-        self.fields['user'] = SODARUserChoiceField(
-            scope='project_exclude',
-            project=self.project,
-            forward=['role'],
-            url=reverse('projectroles:ajax_autocomplete_user_redirect'),
-            widget_class=SODARUserRedirectWidget,
-        )
+        if promote_as:
+            self.initial['user'] = promote_as.user
+            self.fields['user'].widget = forms.HiddenInput()
+            self.initial['promote'] = True
+        else:
+            self.fields['user'] = SODARUserChoiceField(
+                scope='project_exclude',
+                project=self.project,
+                forward=['role'],
+                url=reverse('projectroles:ajax_autocomplete_user_redirect'),
+                widget_class=SODARUserRedirectWidget,
+            )
+            self.initial['promote'] = False
+
         # Limit role choices
-        self.fields['role'].choices = get_role_choices(
-            self.project, self.current_user
-        )
+        q_kwargs = {'project': self.project, 'current_user': self.current_user}
+        if promote_as:
+            q_kwargs['promote_as'] = promote_as
+        elif self.instance.pk:  # Restrict choices by overridden inactive role
+            active_as = self.project.get_role(self.instance.user)
+            if active_as and active_as.project != self.project:
+                inactive_as = RoleAssignment.objects.filter(
+                    project=self.project, user=self.instance.user
+                ).first()
+                if inactive_as and inactive_as.role.rank > active_as.role.rank:
+                    q_kwargs['promote_as'] = active_as
+        self.fields['role'].choices = get_role_choices(**q_kwargs)
 
         # Updating an existing assignment
         if self.instance.pk:
             # Set values
             self.initial['project'] = self.instance.project.sodar_uuid
             self.initial['user'] = self.instance.user.sodar_uuid
             # Hide project and user switching
             self.fields['project'].widget = forms.HiddenInput()
             self.fields['user'].widget = forms.HiddenInput()
             # Set initial role
             self.initial['role'] = self.instance.role
 
         # Creating a new assignment
-        elif self.project:
+        elif self.project:  # TODO: I think this could just be "else"
             # Limit project choice to self.project, hide widget
             self.initial['project'] = self.project.sodar_uuid
             self.fields['project'].widget = forms.HiddenInput()
-            self.fields['role'].initial = Role.objects.get(
-                name=PROJECT_ROLE_GUEST
-            ).pk
+            if promote_as:
+                self.fields['role'].initial = max(
+                    [c[0] for c in self.fields['role'].choices]
+                )
+            if not promote_as:
+                self.fields['role'].initial = Role.objects.get(
+                    name=PROJECT_ROLE_GUEST
+                ).pk
 
     def clean(self):
         """Function for custom form validation and cleanup"""
         role = self.cleaned_data.get('role')
-        existing_as = RoleAssignment.objects.get_assignment(
-            self.cleaned_data.get('user'), self.cleaned_data.get('project')
-        )
+        existing_as = RoleAssignment.objects.filter(
+            project=self.cleaned_data.get('project'),
+            user=self.cleaned_data.get('user'),
+        ).first()
 
         # Adding a new RoleAssignment
         if not self.instance.pk:
             # Make sure user doesn't already have role in project
             if existing_as:
                 self.add_error(
                     'user',
                     'User {} already assigned as {}'.format(
                         existing_as.role.name,
                         get_user_display_name(self.cleaned_data.get('user')),
                     ),
                 )
-
         # Updating a RoleAssignment
         else:
             # Ensure not setting existing role again
             if existing_as and existing_as.role == role:
                 self.add_error('role', 'Role already assigned to user')
 
         # Delegate checks
         if role.name == PROJECT_ROLE_DELEGATE:
             del_limit = getattr(settings, 'PROJECTROLES_DELEGATE_LIMIT', 1)
-
             # Ensure current user has permission to set delegate
             if not self.current_user.has_perm(
                 'projectroles.update_project_delegate', obj=self.project
             ):
                 self.add_error(
                     'role', 'Insufficient permissions for altering delegate'
                 )
-
             # Ensure delegate limit is not exceeded
             if (
                 del_limit != 0
-                and self.project.get_delegates(exclude_inherited=True).count()
+                and len(self.project.get_delegates(inherited=False))
                 >= del_limit
             ):
                 self.add_error(
                     'role',
                     'The limit ({}) of delegates for this {} has '
                     'already been reached.'.format(
                         del_limit, get_display_name(self.project.type)
                     ),
                 )
-
         return self.cleaned_data
 
 
 # Owner transfer form ----------------------------------------------------------
 
 
 class RoleAssignmentOwnerTransferForm(SODARForm):
     """Form for transferring owner role assignment between users"""
 
+    @classmethod
+    def _get_old_owner_choices(cls, project, old_owner_as):
+        q_kwargs = {'project_types__contains': [project.type]}
+        inh_role_as = project.get_role(old_owner_as.user, inherited_only=True)
+        if (
+            not inh_role_as
+            or inh_role_as.role.rank != ROLE_RANKING[PROJECT_ROLE_OWNER]
+        ):
+            q_kwargs['rank__gt'] = ROLE_RANKING[PROJECT_ROLE_OWNER]
+        if inh_role_as:
+            q_kwargs['rank__lte'] = inh_role_as.role.rank
+        return [
+            get_role_option(project, role)
+            for role in Role.objects.filter(**q_kwargs).order_by('rank')
+        ]
+
     def __init__(self, project, current_user, current_owner, *args, **kwargs):
         """Override for form initialization"""
         super().__init__(*args, **kwargs)
         # Get current user for checking permissions for form items
         self.current_user = current_user
         # Get the project for which role is being assigned
         self.project = project
         self.current_owner = current_owner
 
         self.fields['new_owner'] = SODARUserChoiceField(
             label='New owner',
             help_text='Select a member of the {} to become owner.'.format(
-                get_display_name(self.project.type)
+                get_display_name(project.type)
             ),
             scope='project',
-            project=self.project,
-            exclude=[self.current_owner],
+            project=project,
+            exclude=[current_owner],
         )
 
-        self.selectable_roles = get_role_choices(
-            self.project, self.current_user
+        old_owner_as = RoleAssignment.objects.get(
+            project=project, user=current_owner, role__name=PROJECT_ROLE_OWNER
+        )
+        self.selectable_roles = self._get_old_owner_choices(
+            project, old_owner_as
         )
         self.fields['old_owner_role'] = forms.ChoiceField(
-            label='New role for {}'.format(self.current_owner.username),
-            help_text='New role for the current owner. Select "Remove" in the '
-            'member list to remove the user\'s membership.',
+            label='New role for {}'.format(current_owner.username),
+            help_text='New role for the current owner. Select "Remove" in '
+            'the member list to remove the user\'s membership.',
             choices=self.selectable_roles,
-            initial=Role.objects.get(name=PROJECT_ROLE_CONTRIBUTOR).pk,
+            initial=self.selectable_roles[0][0],
+            disabled=True if len(self.selectable_roles) == 1 else False,
         )
+
         self.fields['project'] = forms.Field(
-            widget=forms.HiddenInput(), initial=self.project.sodar_uuid
+            widget=forms.HiddenInput(), initial=project.sodar_uuid
         )
 
     def clean_old_owner_role(self):
-        role = next(
-            (
-                choice
-                for choice in self.selectable_roles
-                if choice[0] == int(self.cleaned_data['old_owner_role'])
-            ),
-            None,
-        )
-
-        try:
-            role = Role.objects.get(name=role[1])
-        except Role.DoesNotExist:
-            raise forms.ValidationError('Selected role does not exist')
+        role = Role.objects.filter(
+            pk=self.cleaned_data.get('old_owner_role')
+        ).first()
+        if not role:
+            raise forms.ValidationError('Selected role not found')
 
         if role.name == PROJECT_ROLE_DELEGATE:
             del_limit = getattr(settings, 'PROJECTROLES_DELEGATE_LIMIT', 1)
-
             # Ensure current user has permission to set delegate
             if not self.current_user.has_perm(
                 'projectroles.update_project_delegate', obj=self.project
             ):
                 raise forms.ValidationError(
                     'Insufficient permissions for assigning a delegate role'
                 )
-
             # Ensure delegate limit is not exceeded
             new_owner_role = RoleAssignment.objects.filter(
                 project=self.project, user=self.cleaned_data.get('new_owner')
             ).first()
-
             if (
                 del_limit != 0
                 and new_owner_role
                 and new_owner_role.role.name != PROJECT_ROLE_DELEGATE
-                and self.project.get_delegates(exclude_inherited=True).count()
+                and len(self.project.get_delegates(inherited=False))
                 >= del_limit
             ):
                 raise forms.ValidationError(
                     'The limit of delegates ({}) for this {} has already been '
                     'reached.'.format(
                         del_limit, get_display_name(self.project.type)
                     )
                 )
-
         return role
 
     def clean_new_owner(self):
         user = self.cleaned_data['new_owner']
         if user == self.current_owner:
             raise forms.ValidationError(
                 'The new owner shouldn\'t be the current owner.'
             )
-
-        role_as = RoleAssignment.objects.get_assignment(user, self.project)
-        inh_owners = [
-            a.user for a in self.project.get_owners(inherited_only=True)
-        ]
-
-        if (role_as and role_as.project != self.project) or (
-            not role_as and user not in inh_owners
-        ):
+        role_as = self.project.get_role(user)
+        if not role_as:
             raise forms.ValidationError(
-                'The new owner has no roles in the {}.'.format(
-                    get_display_name(self.project.type)
-                )
+                'The new owner has no inherited or local roles in the '
+                '{}.'.format(get_display_name(self.project.type))
             )
-
         return user
 
 
 # ProjectInvite form -----------------------------------------------------------
 
 
 class ProjectInviteForm(SODARModelForm):
@@ -913,79 +1044,98 @@
             self.fields['email'].initial = mail
         # Get the project for which invite is being sent
         self.project = Project.objects.filter(sodar_uuid=project).first()
         # Limit Role choices according to user permissions
         self.fields['role'].choices = get_role_choices(
             self.project, self.current_user, allow_delegate=True
         )
-
         if role:
             self.fields['role'].initial = role
         else:
             self.fields['role'].initial = Role.objects.get(
                 name=PROJECT_ROLE_GUEST
             ).pk
-
         # Limit textarea height
         self.fields['message'].widget.attrs['rows'] = 4
 
     def clean(self):
+        user_email = self.cleaned_data.get('email')
         # Check if user email is already in users
-        existing_user = User.objects.filter(
-            email=self.cleaned_data.get('email')
-        ).first()
+        existing_user = User.objects.filter(email=user_email).first()
         if existing_user:
             self.add_error(
                 'email',
                 'User "{}" already exists in the system with this email. '
                 'Please use "Add Role" instead.'.format(existing_user.username),
             )
 
         # Check if user already has an invite in the project
         try:
             ProjectInvite.objects.get(
                 project=self.project,
-                email=self.cleaned_data.get('email'),
+                email=user_email,
                 active=True,
                 date_expire__gt=timezone.now(),
             )
             self.add_error(
                 'email',
                 'There is already an active invite for email {} in {}'.format(
-                    self.cleaned_data.get('email'), self.project.title
+                    user_email, self.project.title
                 ),
             )
         except ProjectInvite.DoesNotExist:
             pass
 
+        # Local users check
+        if user_email:
+            domain = user_email[user_email.find('@') + 1 :]
+            domain_list = [
+                getattr(settings, 'AUTH_LDAP_USERNAME_DOMAIN', ''),
+                getattr(settings, 'AUTH_LDAP2_USERNAME_DOMAIN', ''),
+            ]
+            if (
+                not settings.PROJECTROLES_ALLOW_LOCAL_USERS
+                and not settings.ENABLE_SAML
+                and domain
+                not in [
+                    x.lower() for x in getattr(settings, 'LDAP_ALT_DOMAINS', [])
+                ]
+                and domain.split('.')[0].lower()
+                not in [x.lower() for x in domain_list]
+            ):
+                self.add_error(
+                    'email',
+                    'Local users not allowed, email domain {} not recognized '
+                    'for LDAP users'.format(domain),
+                )
+
         # Delegate checks
         role = self.cleaned_data.get('role')
         if role.name == PROJECT_ROLE_DELEGATE:
             del_limit = getattr(settings, 'PROJECTROLES_DELEGATE_LIMIT', 1)
             # Ensure current user has permission to invite delegate
             if not self.current_user.has_perm(
                 'projectroles.update_project_delegate', obj=self.project
             ):
                 self.add_error(
                     'role', 'Insufficient permissions for inviting delegate.'
                 )
             # Ensure delegate limit is not exceeded
             if (
                 del_limit != 0
-                and self.project.get_delegates(exclude_inherited=True).count()
+                and len(self.project.get_delegates(inherited=False))
                 >= del_limit
             ):
                 self.add_error(
                     'role',
                     'The delegate limit of {} for this {} has '
                     'already been reached.'.format(
                         del_limit, get_display_name(self.project.type)
                     ),
                 )
-
         return self.cleaned_data
 
     def save(self, *args, **kwargs):
         """Override of form saving function"""
         obj = super().save(commit=False)
         obj.project = self.project
         obj.issuer = self.current_user
@@ -1028,17 +1178,14 @@
         self.fields['user_display'].initial = True
 
         # Creation
         if not self.instance.pk:
             # Generate secret token for target site
             if settings.PROJECTROLES_SITE_MODE == SITE_MODE_SOURCE:
                 self.fields['secret'].initial = build_secret()
-        # Updating
-        else:
-            pass
 
     def save(self, *args, **kwargs):
         """Override of form saving function"""
         obj = super().save(commit=False)
         if settings.PROJECTROLES_SITE_MODE == SITE_MODE_SOURCE:
             obj.mode = SITE_MODE_TARGET
         else:
@@ -1088,32 +1235,48 @@
             self.add_error('password', 'Passwords didn\'t match!')
         return cleaned_data
 
 
 # Helper functions -------------------------------------------------------------
 
 
+def get_role_option(project, role):
+    """
+    Return form option value for a Role object.
+
+    :param project: Project object
+    :param role: Role object
+    return: Role key and legend
+    """
+    return role.pk, '{} {}'.format(
+        get_display_name(project.type, title=True),
+        role.name.split(' ')[1].capitalize(),
+    )
+
+
 def get_role_choices(
-    project, current_user, allow_delegate=True, allow_owner=False
+    project, current_user, promote_as=None, allow_delegate=True
 ):
     """
     Return valid role choices according to permissions of current user.
 
     :param project: Project in which role will be assigned
     :param current_user: User for whom the form is displayed
-    :param allow_delegate: Whether delegate setting should be allowed (bool)
+    :param promote_as: Assignment for promoting inherited user, or inactive
+                       overridden assignment (RoleAssignment or None)
+    :param allow_delegate: Whether delegate should be allowed (bool)
+    :return: List
     """
-    # Owner cannot be changed in role assignment
-    role_excludes = []
-    if not allow_owner or not current_user.has_perm(
-        'projectroles.update_project_owner', obj=project
-    ):
-        role_excludes.append(PROJECT_ROLE_OWNER)
+    # Owner cannot be changed
+    role_excludes = [PROJECT_ROLE_OWNER]
     # Exclude delegate if not allowed or current user lacks perms
     if not allow_delegate or not current_user.has_perm(
         'projectroles.update_project_delegate', obj=project
     ):
         role_excludes.append(PROJECT_ROLE_DELEGATE)
+    qs = Role.objects.filter(project_types__contains=[project.type])
+    if promote_as:
+        qs = qs.filter(rank__lt=promote_as.role.rank)
     return [
-        (role.pk, role.name)
-        for role in Role.objects.exclude(name__in=role_excludes)
+        get_role_option(project, role)
+        for role in qs.exclude(name__in=role_excludes)
     ]
```

### Comparing `django-sodar-core-0.12.0/projectroles/management/commands/batchupdateroles.py` & `django-sodar-core-0.13.0/projectroles/management/commands/batchupdateroles.py`

 * *Files 5% similar despite different names*

```diff
@@ -1,30 +1,32 @@
-from email.utils import parseaddr
+"""Batchupdateroles management command for updating user roles in batch"""
+
 import sys
 
+from email.utils import parseaddr
+
 from django.conf import settings
 from django.contrib import auth
 from django.core.management.base import BaseCommand
 from django.http import HttpRequest
 from django.utils import timezone
 
 from projectroles.management.logging import ManagementCommandLogger
 from projectroles.models import (
     Project,
     Role,
-    RoleAssignment,
     ProjectInvite,
     SODAR_CONSTANTS,
 )
 from projectroles.views import RoleAssignmentModifyMixin, ProjectInviteMixin
 from projectroles.utils import get_expiry_date, build_secret
 
 
-User = auth.get_user_model()
 logger = ManagementCommandLogger(__name__)
+User = auth.get_user_model()
 
 
 # SODAR constants
 SITE_MODE_TARGET = SODAR_CONSTANTS['SITE_MODE_TARGET']
 
 
 # HACK for issue #612
@@ -63,30 +65,32 @@
         return request
 
     def _update_role(self, project, user, role):
         """Handle role update for an existing user"""
         logger.info(
             'Updating role of user {} to {}..'.format(user.username, role.name)
         )
-        if user in [a.user for a in project.get_owners(inherited_only=True)]:
-            logger.info('Skipping as user has inherited ownership')
+        role_as = project.get_role(user)
+        if role_as and role_as.role == self.owner_role:
+            logger.warning(
+                'Skipping as ownership transfer is not permitted here'
+            )
             return
-
-        role_as = RoleAssignment.objects.filter(
-            project=project, user=user
-        ).first()
-        if role_as and role_as.role == role:
+        elif role_as and role_as.role == role:
             logger.info('Skipping as role already exists for user')
             return
-        elif role_as and role_as.role == self.owner_role:
+        elif (
+            role_as
+            and role_as.project != project
+            and role_as.role.rank > role.rank
+        ):
             logger.warning(
-                'Skipping as ownership transfer is not permitted here'
+                'Skipping as demoting an inherited role is not permitted'
             )
             return
-
         self.modify_assignment(
             data={'user': user, 'role': role},
             request=self.request,
             project=project,
             instance=role_as,
         )
         self.update_count += 1
@@ -124,15 +128,14 @@
             raise Exception('Unknown role: "{}"'.format(role_name))
         elif role_name == SODAR_CONSTANTS['PROJECT_ROLE_OWNER']:
             raise Exception(
                 'Ownership transfer not permitted in this operation, '
                 'use appropriate UI or REST API endpoint'
             )
         role = self.roles[role_name]
-
         if not parseaddr(email)[1]:
             raise Exception('Invalid email: "{}"'.format(email))
 
         users = User.objects.filter(email=email)
         if users.count() > 1:
             logger.warning(
                 'Skipping due to multiple user accounts found for '
@@ -141,16 +144,15 @@
             return
         user = users.first()
         del_limit = getattr(settings, 'PROJECTROLES_DELEGATE_LIMIT', 1)
 
         if (
             role == self.del_role
             and del_limit != 0
-            and project.get_delegates(exclude_inherited=True).count()
-            >= del_limit
+            and len(project.get_delegates(inherited=False)) >= del_limit
         ):
             raise Exception(
                 'Delegate limit of {} has been reached'.format(del_limit)
             )
 
         elif role == self.del_role and not self.issuer.has_perm(
             'projectroles.update_project_delegate', project
@@ -163,15 +165,14 @@
         if user:
             try:
                 self._update_role(project, user, role)
             except Exception as ex:
                 raise Exception(
                     'Exception raised by _update_role(): ' '{}'.format(ex)
                 )
-
         # Invite user not yet in the system
         else:
             try:
                 self._invite_user(email, project, role)
             except Exception as ex:
                 raise Exception(
                     'Exception raised by _invite_user(): {}'.format(ex)
@@ -198,15 +199,14 @@
             help='User name of issuing user (optional)',
         )
 
     def handle(self, *args, **options):
         logger.info('Batch updating project roles and/or sending invites..')
         logger.debug('File = {}'.format(options['file']))
         logger.debug('Issuer = {}'.format(options['issuer']))
-
         if (
             settings.PROJECTROLES_SITE_MODE == 'TARGET'
             and not settings.PROJECTROLES_TARGET_CREATE
         ):
             logger.error(
                 'Operation not permitted on a target site without the ability '
                 'to create local projects, aborting..'
@@ -277,15 +277,14 @@
                 continue
 
             logger.info(
                 'Updating roles in {} {}..'.format(
                     project.type.lower(), project.get_log_title()
                 )
             )
-
             for ds in [
                 d.split(';') for d in file_data if d.split(';')[0] == p_uuid
             ]:
                 try:
                     self._handle_list_row(
                         project=project, role_name=ds[2].strip(), email=ds[1]
                     )
```

### Comparing `django-sodar-core-0.12.0/projectroles/management/commands/geticons.py` & `django-sodar-core-0.13.0/projectroles/management/commands/geticons.py`

 * *Files 3% similar despite different names*

```diff
@@ -1,8 +1,11 @@
+"""Geticons management command for retrieving icons for iconify"""
+
 import os
+
 import urllib.request
 
 from django.conf import settings
 from django.core.management.base import BaseCommand
 
 from projectroles.management.logging import ManagementCommandLogger
 
@@ -84,24 +87,22 @@
         self._download(JSON_URL, iconify_path, 'collections.json')
         # Download mdi.json
         self._download(
             COLL_URL.format(id='mdi'),
             coll_path,
             'mdi.json',
         )
-
         # Download extra collections if set
         if colls:
             logger.info(
                 'Downloading {} additional collection{}..'.format(
                     len(colls), 's' if len(colls) != 1 else ''
                 )
             )
             for c in colls:
                 self._download(
                     COLL_URL.format(id=c),
                     coll_path,
                     c + '.json',
                 )
-
         logger.info('Retrieval/update done')
         logger.info('Remember to run "collectstatic" after updating icons!')
```

### Comparing `django-sodar-core-0.12.0/projectroles/management/commands/syncgroups.py` & `django-sodar-core-0.13.0/projectroles/management/commands/syncgroups.py`

 * *Files 10% similar despite different names*

```diff
@@ -1,16 +1,18 @@
+"""Syncgroups management command for synchronizing user groups"""
+
 from django.contrib import auth
 from django.core.management.base import BaseCommand
 from django.db import transaction
 
 from projectroles.management.logging import ManagementCommandLogger
 
 
-User = auth.get_user_model()
 logger = ManagementCommandLogger(__name__)
+User = auth.get_user_model()
 
 
 class Command(BaseCommand):
     help = 'Synchronizes user groups based on user name'
 
     def add_arguments(self, parser):
         pass
```

### Comparing `django-sodar-core-0.12.0/projectroles/management/commands/syncmodifyapi.py` & `django-sodar-core-0.13.0/projectroles/management/commands/syncmodifyapi.py`

 * *Files 3% similar despite different names*

```diff
@@ -4,15 +4,14 @@
 """
 
 import sys
 
 from django.contrib.auth import get_user_model
 from django.core.management.base import BaseCommand
 
-# Projectroles dependency
 from projectroles.management.logging import ManagementCommandLogger
 from projectroles.models import Project, SODAR_CONSTANTS
 from projectroles.views import ProjectModifyPluginViewMixin
 
 
 logger = ManagementCommandLogger(__name__)
 User = get_user_model()
```

### Comparing `django-sodar-core-0.12.0/projectroles/management/commands/syncremote.py` & `django-sodar-core-0.13.0/projectroles/management/commands/syncremote.py`

 * *Files 4% similar despite different names*

```diff
@@ -1,21 +1,24 @@
+"""Syncremote management command for synchronizing remote projects"""
+
 import json
 import ssl
 import sys
 import urllib.request
 
 from django.conf import settings
 from django.core.management.base import BaseCommand
 from django.urls import reverse
 
 from projectroles.management.logging import ManagementCommandLogger
 from projectroles.models import RemoteSite, SODAR_CONSTANTS
 from projectroles.remote_projects import RemoteProjectAPI
 from projectroles.views_api import CORE_API_MEDIA_TYPE, CORE_API_DEFAULT_VERSION
 
+
 logger = ManagementCommandLogger(__name__)
 
 
 # SODAR constants
 SITE_MODE_TARGET = SODAR_CONSTANTS['SITE_MODE_TARGET']
 SITE_MODE_SOURCE = SODAR_CONSTANTS['SITE_MODE_SOURCE']
 
@@ -87,9 +90,8 @@
 
         remote_api = RemoteProjectAPI()
         try:
             remote_api.sync_remote_data(site, remote_data)
         except Exception as ex:
             logger.error('Remote sync cancelled with exception: {}'.format(ex))
             sys.exit(1)
-
         logger.info('Syncremote command OK')
```

### Comparing `django-sodar-core-0.12.0/projectroles/management/logging.py` & `django-sodar-core-0.13.0/projectroles/management/logging.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/middleware.py` & `django-sodar-core-0.13.0/projectroles/middleware.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/migrations/0001_initial.py` & `django-sodar-core-0.13.0/projectroles/migrations/0001_initial.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/migrations/0002_auto_20180411_1758.py` & `django-sodar-core-0.13.0/projectroles/migrations/0002_auto_20180411_1758.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/migrations/0003_populate_roles.py` & `django-sodar-core-0.13.0/projectroles/migrations/0003_populate_roles.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/migrations/0004_rename_uuid.py` & `django-sodar-core-0.13.0/projectroles/migrations/0004_rename_uuid.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/migrations/0005_update_uuid.py` & `django-sodar-core-0.13.0/projectroles/migrations/0005_update_uuid.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/migrations/0006_add_remote_projects.py` & `django-sodar-core-0.13.0/projectroles/migrations/0006_add_remote_projects.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/migrations/0007_fix_remoteproject_foreign_key.py` & `django-sodar-core-0.13.0/projectroles/migrations/0007_fix_remoteproject_foreign_key.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/migrations/0008_auto_20190426_0606.py` & `django-sodar-core-0.13.0/projectroles/migrations/0008_auto_20190426_0606.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/migrations/0009_rename_projectsetting.py` & `django-sodar-core-0.13.0/projectroles/migrations/0009_rename_projectsetting.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/migrations/0010_update_appsetting.py` & `django-sodar-core-0.13.0/projectroles/migrations/0010_update_appsetting.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/migrations/0011_remove_indexes.py` & `django-sodar-core-0.13.0/projectroles/migrations/0011_remove_indexes.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/migrations/0012_update_remotesite.py` & `django-sodar-core-0.13.0/projectroles/migrations/0012_update_remotesite.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/migrations/0014_update_appsetting_value_json.py` & `django-sodar-core-0.13.0/projectroles/migrations/0014_update_appsetting_value_json.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/migrations/0015_fix_appsetting_constraint.py` & `django-sodar-core-0.13.0/projectroles/migrations/0015_fix_appsetting_constraint.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/migrations/0016_app_plugin_field_none.py` & `django-sodar-core-0.13.0/projectroles/migrations/0016_app_plugin_field_none.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/migrations/0017_project_full_title.py` & `django-sodar-core-0.13.0/projectroles/migrations/0017_project_full_title.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/migrations/0019_project_public_guest_access.py` & `django-sodar-core-0.13.0/projectroles/migrations/0019_project_public_guest_access.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/migrations/0020_project_has_public_children.py` & `django-sodar-core-0.13.0/projectroles/migrations/0020_project_has_public_children.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/migrations/0022_role_rank.py` & `django-sodar-core-0.13.0/projectroles/migrations/0022_role_rank.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/models.py` & `django-sodar-core-0.13.0/projectroles/models.py`

 * *Files 15% similar despite different names*

```diff
@@ -3,15 +3,15 @@
 import logging
 import re
 import uuid
 
 from django.apps import apps
 from django.conf import settings
 from django.contrib.auth.models import AbstractUser, Group
-from django.contrib.auth.signals import user_logged_in
+from django.contrib.postgres.fields import ArrayField
 from django.core.exceptions import ValidationError
 from django.db import models
 from django.db.models import Q
 from django.urls import reverse
 from django.utils.translation import ugettext_lazy as _
 
 from djangoplugins.models import Plugin
@@ -22,28 +22,49 @@
 
 AUTH_USER_MODEL = getattr(settings, 'AUTH_USER_MODEL', 'auth.User')
 logger = logging.getLogger(__name__)
 
 
 # SODAR constants
 SODAR_CONSTANTS = get_sodar_constants()
+PROJECT_TYPE_PROJECT = SODAR_CONSTANTS['PROJECT_TYPE_PROJECT']
+PROJECT_TYPE_CATEGORY = SODAR_CONSTANTS['PROJECT_TYPE_CATEGORY']
+PROJECT_ROLE_OWNER = SODAR_CONSTANTS['PROJECT_ROLE_OWNER']
+PROJECT_ROLE_DELEGATE = SODAR_CONSTANTS['PROJECT_ROLE_DELEGATE']
+PROJECT_ROLE_CONTRIBUTOR = SODAR_CONSTANTS['PROJECT_ROLE_CONTRIBUTOR']
+PROJECT_ROLE_GUEST = SODAR_CONSTANTS['PROJECT_ROLE_GUEST']
+PROJECT_ROLE_FINDER = SODAR_CONSTANTS['PROJECT_ROLE_FINDER']
+APP_SETTING_SCOPE_SITE = SODAR_CONSTANTS['APP_SETTING_SCOPE_SITE']
 
 # Local constants
+ROLE_RANKING = {
+    PROJECT_ROLE_OWNER: 10,
+    PROJECT_ROLE_DELEGATE: 20,
+    PROJECT_ROLE_CONTRIBUTOR: 30,
+    PROJECT_ROLE_GUEST: 40,
+    PROJECT_ROLE_FINDER: 50,
+}
 PROJECT_TYPE_CHOICES = [('CATEGORY', 'Category'), ('PROJECT', 'Project')]
 APP_SETTING_TYPES = ['BOOLEAN', 'INTEGER', 'STRING', 'JSON']
 APP_SETTING_TYPE_CHOICES = [
     ('BOOLEAN', 'Boolean'),
     ('INTEGER', 'Integer'),
     ('STRING', 'String'),
     ('JSON', 'Json'),
 ]
 APP_SETTING_VAL_MAXLENGTH = 255
 PROJECT_SEARCH_TYPES = ['project']
 PROJECT_TAG_STARRED = 'STARRED'
 CAT_DELIMITER = ' / '
+CAT_DELIMITER_ERROR_MSG = 'String "{}" is not allowed in title'.format(
+    CAT_DELIMITER
+)
+ROLE_PROJECT_TYPE_ERROR_MSG = (
+    'Invalid project type "{project_type}" for ' 'role "{role_name}"'
+)
 
 
 # Project ----------------------------------------------------------------------
 
 
 class ProjectManager(models.Manager):
     """Manager for custom table-level Project queries"""
@@ -58,20 +79,18 @@
         :param keywords: Optional search keywords as key/value pairs (dict)
         :param project_type: Project type or None
         :return: QuerySet of Project objects
         """
         projects = super().get_queryset().order_by('title')
         if project_type:
             projects = projects.filter(type=project_type)
-
         term_query = Q()
         for t in search_terms:
             term_query.add(Q(full_title__icontains=t), Q.OR)
             term_query.add(Q(description__icontains=t), Q.OR)
-
         return projects.filter(term_query).order_by('full_title')
 
 
 class Project(models.Model):
     """
     A SODAR project. Can have one parent category in case of nested
     projects. The project must be of a specific type, of which "CATEGORY" and
@@ -170,19 +189,21 @@
         return 'Project({})'.format(', '.join(repr(v) for v in values))
 
     def save(self, *args, **kwargs):
         """Custom validation and field populating for Project"""
         self._validate_parent()
         self._validate_title()
         self._validate_parent_type()
+        self._validate_public_guest_access()
         self._validate_archive()
         # Update full title of self and children
         self.full_title = self._get_full_title()
-        for child in self.get_children():
-            child.save()
+        if self.type == PROJECT_TYPE_CATEGORY:
+            for child in self.children.all():
+                child.save()
         # Update public children
         # NOTE: Parents will be updated in ProjectModifyMixin.modify_project()
         self.has_public_children = self._has_public_children()
         super().save(*args, **kwargs)
 
     def _validate_parent(self):
         """
@@ -197,20 +218,36 @@
             self.parent
             and self.parent.type == SODAR_CONSTANTS['PROJECT_TYPE_PROJECT']
         ):
             raise ValidationError(
                 'Subprojects are only allowed within categories'
             )
 
+    def _validate_public_guest_access(self):
+        """Validate public guest access to ensure it is not set on categories"""
+        if (
+            self.public_guest_access
+            and self.type == SODAR_CONSTANTS['PROJECT_TYPE_CATEGORY']
+        ):
+            raise ValidationError(
+                'Public guest access is not allowed for categories'
+            )
+
     def _validate_title(self):
         """
         Validate title against parent title to ensure they don't equal parent.
         """
         if self.parent and self.title == self.parent.title:
             raise ValidationError('Project and parent titles can not be equal')
+        if (
+            CAT_DELIMITER in self.title
+            or self.title.startswith(CAT_DELIMITER.strip())
+            or self.title.endswith(CAT_DELIMITER.strip())
+        ):
+            raise ValidationError(CAT_DELIMITER_ERROR_MSG)
 
     def _validate_archive(self):
         """
         Validate archive status against project type to ensure archiving is only
         applied to projects.
         """
         if (
@@ -223,28 +260,31 @@
 
     def get_absolute_url(self):
         return reverse(
             'projectroles:detail', kwargs={'project': self.sodar_uuid}
         )
 
     # Internal helpers
+
     def _get_full_title(self):
         """Return full title of project with path."""
         parents = self.get_parents()
         ret = (
             CAT_DELIMITER.join([p.title for p in parents]) + CAT_DELIMITER
             if parents
             else ''
         )
         return ret + self.title
 
     def _has_public_children(self):
         """
         Return True if the project has any children with public guest access.
         """
+        if self.type != PROJECT_TYPE_CATEGORY:
+            return False
         for child in self.get_children():
             if child.public_guest_access:
                 return True
             ret = child._has_public_children()
             if ret:
                 return True
         return False
@@ -262,176 +302,310 @@
                 parent.save()
                 if not public_found and parent.has_public_children:
                     public_found = True
                 parent = parent.parent
 
     # Custom row-level functions
 
-    def get_children(self, flat=False):
+    def get_parents(self):
         """
-        Return child objects for the Project sorted by title.
+        Return a list of parent projects in inheritance order.
 
-        :param flat: Return all children recursively as a flat list (bool)
-        :return: Iterable of Project
+        :return: List of Project objects
         """
+        if not self.parent:
+            return []
+        ret = []
+        parent = self.parent
+        while parent:
+            ret.append(parent)
+            parent = parent.parent
+        return reversed(ret)
 
-        def _get(obj, ret=None):
-            if ret is None:
-                ret = []
-            ret += list(obj.get_children())
-            for child in obj.get_children():
-                ret = _get(child, ret)
-            return ret
+    def get_children(self, flat=False):
+        """
+        Return child objects for a Category, sorted by full title.
 
+        :param flat: Return all children recursively as a flat list (bool)
+        :return: QuerySet
+        """
+        if self.type != PROJECT_TYPE_CATEGORY:
+            return Project.objects.none()
         if flat:
-            return _get(self)
+            return Project.objects.filter(
+                full_title__startswith=self.full_title + CAT_DELIMITER
+            ).order_by('full_title')
         return self.children.all().order_by('title')
 
     def get_depth(self):
         """Return depth of project in the project tree structure (root=0)"""
-        ret = 0
-        p = self
-        while p.parent:
-            ret += 1
-            p = p.parent
-        return ret
+        return len(self.full_title.split(CAT_DELIMITER)) - 1
+
+    def get_role(self, user, inherited_only=False):
+        """
+        Return the currently active role for user, or None if not available.
+        Returns the highest ranked role including inherited roles. In case of
+        multiple roles of the same level in the hierarchy, the lowest one is
+        returned.
+
+        :param user: User object
+        :param inherited_only: Only return an inherited role if True
+                               (boolean, default=False)
+        :return: RoleAssignment object or None
+        """
+        if not user or user.is_anonymous:
+            return None
+        projects = [self] if not inherited_only else []
+        projects += list(self.get_parents())
+        return (
+            RoleAssignment.objects.filter(
+                project__in=projects,
+                user=user,
+                role__project_types__contains=[self.type],
+            )
+            .order_by('role__rank', '-project__full_title')
+            .first()
+        )
+
+    def get_roles(
+        self,
+        user=None,
+        inherited=True,
+        inherited_only=False,
+        min_rank=None,
+        max_rank=None,
+    ):
+        """
+        Return project role assignments.
+
+        :param user: Limit to user (User object or None)
+        :param inherited: Include inherited roles (bool)
+        :param inherited_only: Return only inherited roles (bool)
+        :param min_rank: Limit roles to minimum rank (integer or None)
+        :param max_rank: Limit roles to maximum rank (integer or None)
+        :return: List of RoleAssignment objects
+        :raise: ValueError If inheritance arguments conflict
+        """
+        if not inherited and inherited_only:
+            raise ValueError(
+                'Inherited set False and inherited_only set True, No results '
+                'can be returned'
+            )
+        projects = [] if inherited_only else [self]
+        # NOTE: We have to get inherited roles to exclude overridden ones
+        parents = list(self.get_parents())
+        projects += parents
+        q_kwargs = {
+            'project__in': projects,
+            'role__project_types__contains': [self.type],
+        }
+        if user and user.is_authenticated:
+            q_kwargs['user'] = user
+        roles = RoleAssignment.objects.filter(**q_kwargs).order_by(
+            '-project__full_title', 'role__name', 'user'
+        )
+        user_roles = {}
+        for a in roles:
+            u = a.user
+            rank_ok = (not min_rank or a.role.rank >= min_rank) and (
+                not max_rank or a.role.rank <= max_rank
+            )
+            # Local role (always returned first if it exists)
+            if a.project == self and not inherited_only and rank_ok:
+                user_roles[u] = a
+            # Inherited role of higher rank
+            elif (
+                inherited
+                and a.project in parents
+                and (
+                    u not in user_roles or a.role.rank < user_roles[u].role.rank
+                )
+                and rank_ok
+            ):
+                user_roles[u] = a
+            # Pop overridden role if in list
+            elif (
+                a.project in parents
+                and u in user_roles
+                and a.role.rank < user_roles[u].role.rank
+            ):
+                user_roles.pop(u, None)
+        return list(user_roles.values())
+
+    def get_roles_by_rank(
+        self, role_name, inherited=True, inherited_only=False
+    ):
+        """
+        Return RoleAssignments for specific role name. Will also include custom
+        roles of identical rank once role customization is implemented (see
+        issue #288).
+
+        :param role_name: Name of role (string)
+        :param inherited: Include inherited roles (bool)
+        :param inherited_only: Return only inherited roles (bool)
+        :return: List
+        """
+        if role_name not in ROLE_RANKING:
+            role = Role.objects.filter(name=role_name).first()
+            if not role:
+                raise ValueError('Unknown role "{}"'.format(role_name))
+            rank = role.rank
+        else:
+            rank = ROLE_RANKING[role_name]
+        return self.get_roles(
+            inherited=inherited,
+            inherited_only=inherited_only,
+            min_rank=rank,
+            max_rank=rank,
+        )
 
     def get_owner(self):
         """
-        Return RoleAssignment for owner (without inherited owners) or None if
-        not set.
+        Return RoleAssignment for local (non-inherited) owner or None if not
+        set.
+
+        :return: QuerySet
         """
-        return self.roles.filter(
-            role__name=SODAR_CONSTANTS['PROJECT_ROLE_OWNER']
-        ).first()
+        return self.local_roles.filter(role__name=PROJECT_ROLE_OWNER).first()
 
-    def get_owners(self, inherited_only=False):
+    def get_owners(self, inherited=True, inherited_only=False):
         """
         Return RoleAssignments for project owner as well as possible inherited
         owners from parent projects.
 
-        :param inherited_only: Only show inherited owners if True (bool)
+        :param inherited: Include inherited roles (bool)
+        :param inherited_only: Return only inherited roles (bool)
         :return: List
         """
-        owners = []
-        projects = list(self.get_parents())
-        if not inherited_only:
-            projects.append(self)
-        if projects:
-            db_owners = RoleAssignment.objects.filter(
-                role__name=SODAR_CONSTANTS['PROJECT_ROLE_OWNER'],
-                project__in=projects,
-            )
-            for parent_owner_as in db_owners:
-                if parent_owner_as.user not in [a.user for a in owners]:
-                    owners.append(parent_owner_as)
-        return owners
+        rank = ROLE_RANKING[PROJECT_ROLE_OWNER]
+        return self.get_roles(
+            inherited=inherited,
+            inherited_only=inherited_only,
+            min_rank=rank,
+            max_rank=rank,
+        )
+
+    def get_delegates(self, inherited=True, inherited_only=False):
+        """
+        Return RoleAssignments for delegates. Excludes delegates with an
+        inherited owner role.
+
+        :param inherited: Include inherited roles (bool)
+        :param inherited_only: Return only inherited roles (bool)
+        :return: List
+        """
+        rank = ROLE_RANKING[PROJECT_ROLE_DELEGATE]
+        return self.get_roles(
+            inherited=inherited,
+            inherited_only=inherited_only,
+            min_rank=rank,
+            max_rank=rank,
+        )
 
     def is_owner(self, user):
         """
         Return True if user is owner in this project or inherits ownership from
         a parent category.
+
+        :return: Boolean
         """
-        if user.is_authenticated and user in [
-            a.user for a in self.get_owners()
-        ]:
+        if not user.is_authenticated:
+            return False
+        role_as = self.get_role(user)
+        if role_as and role_as.role.rank == ROLE_RANKING[PROJECT_ROLE_OWNER]:
             return True
         return False
 
     def is_delegate(self, user):
         """
-        Return True if user is delegate in this project.
+        Return True if user is delegate in this project or inherits delegate
+        status from a parent category.
+
+        :return: Boolean
         """
-        if (
-            user
-            and user.is_authenticated
-            and user in [a.user for a in self.get_delegates()]
-        ):
+        if not user.is_authenticated:
+            return False
+        role_as = self.get_role(user)
+        if role_as and role_as.role.rank == ROLE_RANKING[PROJECT_ROLE_DELEGATE]:
             return True
         return False
 
     def is_owner_or_delegate(self, user):
         """
         Return True if user is either an owner or a delegate in this project.
-        Includes inherited owner relationships.
-        """
-        return (
-            user
-            and user.is_authenticated
-            and (self.is_owner(user) or self.is_delegate(user))
-        )
+        Includes inherited assignments.
 
-    def get_delegates(self, exclude_inherited=False):
-        """Return RoleAssignments for delegates"""
-        delegates = self.roles.filter(
-            role__name=SODAR_CONSTANTS['PROJECT_ROLE_DELEGATE']
-        )
-        if exclude_inherited:
-            return delegates.exclude(
-                user__in=[a.user for a in self.get_owners(inherited_only=True)]
-            )
-        return delegates
+        :return: Boolean
+        """
+        if not user.is_authenticated:
+            return False
+        role_as = self.get_role(user)
+        if role_as and role_as.role.rank in [
+            ROLE_RANKING[PROJECT_ROLE_OWNER],
+            ROLE_RANKING[PROJECT_ROLE_DELEGATE],
+        ]:
+            return True
+        return False
 
-    def get_members(self):
+    def get_members(self, inherited=True):
         """
         Return RoleAssignments for members of project excluding owner and
         delegates.
+
+        :param inherited: Include inherited roles (boolean)
+        :return: List of RoleAssignments
         """
-        return self.roles.filter(
-            ~Q(role__name=SODAR_CONSTANTS['PROJECT_ROLE_OWNER'])
-            & ~Q(role__name=SODAR_CONSTANTS['PROJECT_ROLE_DELEGATE'])
+        return self.get_roles(
+            inherited=inherited,
+            min_rank=Role.objects.get(name=PROJECT_ROLE_CONTRIBUTOR).rank,
         )
 
-    def get_all_roles(self, inherited=True):
+    def has_role(self, user):
         """
-        Return all RoleAssignments for the project, including inherited owner
-        rights from parent categories.
+        Return whether user has roles in Project. Returns True if user has local
+        role, inherits a role from a parent category, or if public guest access
+        is enabled for the project.
 
-        :param inherited: Include inherited owners (bool, default=True)
-        :return: List
+        :param user: User object
+        :return: Boolean
         """
-        owners = self.get_owners() if inherited else [self.get_owner()]
-        return owners + list(self.get_delegates()) + list(self.get_members())
+        if self.public_guest_access or self.get_role(user=user):
+            return True
+        return False
 
-    def has_role(self, user, include_children=False, check_owner=True):
+    def has_role_in_children(self, user):
         """
-        Return whether user has roles in Project. If include_children is
-        True, return True if user has roles in ANY child project. Returns
-        True if user inherits owner permissions from a parent category, or if
-        public access is allowed for the project.
+        Return True if user has a role in any of the children in the project.
+        Also returns true if public guest access is true for any child.
+
+        :param user: User object
+        :return: Boolean
         """
+        if self.type != PROJECT_TYPE_CATEGORY:
+            return False
+        # User with role in self has at least the same role in children
+        if self.has_role(user):
+            return True
+        children = self.get_children(flat=True)
         if (
-            self.public_guest_access
-            or self.roles.filter(user=user).count() > 0
-            or (check_owner and self.is_owner(user))
+            any([c.public_guest_access for c in children])
+            or RoleAssignment.objects.filter(
+                user=user, project__in=children
+            ).count()
+            > 0
         ):
             return True
-
-        if include_children:
-            for child in self.children.all():
-                # Inherited ownership check is redundant for children
-                if child.has_role(
-                    user, include_children=True, check_owner=False
-                ):
-                    return True
         return False
 
-    def get_parents(self):
-        """Return an array of parent projects in inheritance order"""
-        if not self.parent:
-            return []
-        ret = []
-        parent = self.parent
-        while parent:
-            ret.append(parent)
-            parent = parent.parent
-        return reversed(ret)
-
     def get_source_site(self):
-        """Return source site or None if this is a locally defined project"""
+        """
+        Return source site or None if this is a locally defined project.
+
+        :return: RemoteProject object or None
+        """
         if (
             settings.PROJECTROLES_SITE_MODE
             == SODAR_CONSTANTS['SITE_MODE_SOURCE']
         ):
             return None
         RemoteProject = apps.get_model('projectroles', 'RemoteProject')
         try:
@@ -441,27 +615,33 @@
             ).site
         except RemoteProject.DoesNotExist:
             pass
         return None
 
     def is_remote(self):
         """
-        Return True if current project has been retrieved from a remote
-        SODAR site.
+        Return True if current project has been retrieved from a remote SODAR
+        site.
+
+        :return: Boolean
         """
         if (
             settings.PROJECTROLES_SITE_MODE
             == SODAR_CONSTANTS['SITE_MODE_TARGET']
             and self.get_source_site()
         ):
             return True
         return False
 
     def is_revoked(self):
-        """Return True if remote access has been revoked for the project"""
+        """
+        Return True if remote access has been revoked for the project.
+
+        :return: Boolean
+        """
         if self.is_remote():
             remote_project = RemoteProject.objects.filter(
                 project=self, site=self.get_source_site()
             ).first()
             if (
                 remote_project
                 and remote_project.level
@@ -489,65 +669,69 @@
         """Return a log title for the project"""
         return '"{}" ({})'.format(self.title, self.sodar_uuid)
 
 
 # Role -------------------------------------------------------------------------
 
 
+def get_role_project_type_default():
+    """Return default value for Role.project_type"""
+    return [PROJECT_TYPE_CATEGORY, PROJECT_TYPE_PROJECT]
+
+
 class Role(models.Model):
     """Role definition, used to assign roles to projects in RoleAssignment"""
 
     #: Name of role
     name = models.CharField(
         max_length=64, unique=True, help_text='Name of role'
     )
 
     #: Role rank for determining role hierarchy
     rank = models.IntegerField(
         default=0,  # 0 = No rank
         help_text='Role rank for determining role hierarchy',
     )
 
+    #: Allowed project types for the role
+    project_types = ArrayField(
+        models.CharField(max_length=64, blank=False),
+        default=get_role_project_type_default,
+        help_text='Allowed project types for the role',
+    )
+
     #: Role description
     description = models.TextField(help_text='Role description')
 
     def __str__(self):
         return self.name
 
     def __repr__(self):
         return 'Role({})'.format(repr(self.name))
 
 
 # RoleAssignment ---------------------------------------------------------------
 
 
-class RoleAssignmentManager(models.Manager):
-    """Manager for custom table-level RoleAssignment queries"""
-
-    def get_assignment(self, user, project):
-        """Return assignment of user to project, or None if not found"""
-        if not user.is_authenticated:  # Anonymous users can't have roles
-            return None
-        try:
-            return super().get_queryset().get(user=user, project=project)
-        except RoleAssignment.DoesNotExist:
-            return None
-
-
 class RoleAssignment(models.Model):
     """
-    Assignment of an user to a role in a project. One role per user is
-    allowed for each project. Roles of project owner and project delegate
-    assignements might be limited (to PROJECTROLES_DELEGATE_LIMIT) per project.
+    Assignment of an user to a role in a project. One local assignment per user
+    is allowed for each project.
+
+    One local project owner assignment is allowed for a project. Local project
+    delegate assignements might be limited using PROJECTROLES_DELEGATE_LIMIT.
+
+    Inherited role assignments can be accessed via the Project model API, e.g.
+    Project.get_roles().
     """
 
     #: Project in which role is assigned
     project = models.ForeignKey(
         Project,
-        related_name='roles',
+        related_name='local_roles',
         help_text='Project in which role is assigned',
         on_delete=models.CASCADE,
     )
 
     #: User for whom role is assigned
     user = models.ForeignKey(
         AUTH_USER_MODEL,
@@ -565,17 +749,14 @@
     )
 
     #: RoleAssignment SODAR UUID
     sodar_uuid = models.UUIDField(
         default=uuid.uuid4, unique=True, help_text='RoleAssignment SODAR UUID'
     )
 
-    # Set manager for custom queries
-    objects = RoleAssignmentManager()
-
     class Meta:
         ordering = [
             'project__parent__title',
             'project__title',
             'role__name',
             'user__username',
         ]
@@ -585,71 +766,80 @@
 
     def __repr__(self):
         values = (self.project.title, self.user.username, self.role.name)
         return 'RoleAssignment({})'.format(', '.join(repr(v) for v in values))
 
     def save(self, *args, **kwargs):
         """Version of save() to include custom validation for RoleAssignment"""
+        self._validate_project_type()
         self._validate_user()
         self._validate_owner()
         self._validate_delegate()
         super().save(*args, **kwargs)
 
+    def _validate_project_type(self):
+        """Validate type of project to ensure it is in allowed types"""
+        if self.project.type not in self.role.project_types:
+            raise ValidationError(
+                ROLE_PROJECT_TYPE_ERROR_MSG.format(
+                    project_type=self.project.type, role_name=self.role.name
+                )
+            )
+
     def _validate_user(self):
         """
         Validate fields to ensure user has only one role set for the project.
         """
-        assignment = RoleAssignment.objects.get_assignment(
-            self.user, self.project
-        )
-
-        if assignment and (not self.pk or assignment.pk != self.pk):
+        role_as = RoleAssignment.objects.filter(
+            project=self.project, user=self.user
+        ).first()
+        if role_as and (not self.pk or role_as.pk != self.pk):
             raise ValidationError(
                 'Role {} already set for {} in {}'.format(
-                    assignment.role, assignment.user, assignment.project
+                    role_as.role, role_as.user, role_as.project
                 )
             )
 
     def _validate_owner(self):
         """
         Validate role to ensure no more than one project owner is assigned to a
         project.
         """
-        if self.role.name == SODAR_CONSTANTS['PROJECT_ROLE_OWNER']:
+        if self.role.name == PROJECT_ROLE_OWNER:
             owner = self.project.get_owner()
             if owner and (not self.pk or owner.pk != self.pk):
                 raise ValidationError(
                     'User {} already set as owner of {}'.format(
                         owner, self.project
                     )
                 )
 
     def _validate_delegate(self):
         """
-        Validate role to ensure no more than project delegate is assigned to a
-        project.
+        Validate role to ensure no more than the allowed amount of project
+        delegates are assigned to a project.
         """
-        # No validation if the project is a remote one
-        if not (self.project.is_remote()):
-            # Get project delegate limit
-            del_limit = getattr(settings, 'PROJECTROLES_DELEGATE_LIMIT', 1)
-            if (
-                self.role.name == SODAR_CONSTANTS['PROJECT_ROLE_DELEGATE']
-                and del_limit != 0
-                and self.project.get_delegates(exclude_inherited=True).count()
-                >= del_limit
-                and (
-                    not self.pk
-                    or (self.project.get_delegates().filter(pk=self.pk) is None)
-                )
-            ):
-                raise ValidationError(
-                    'The limit ({}) of delegates for this project has '
-                    'already been reached.'.format(del_limit)
-                )
+        if (
+            self.role.name != PROJECT_ROLE_DELEGATE
+            or self.project.is_remote()  # No validation for remote projects
+        ):
+            return
+        del_limit = getattr(settings, 'PROJECTROLES_DELEGATE_LIMIT', 1)
+        delegates = self.project.get_delegates(inherited=False)
+        if 0 < del_limit <= len(delegates) and (
+            not self.pk
+            or self.project.local_roles.filter(
+                role__name=PROJECT_ROLE_DELEGATE, pk=self.pk
+            )
+            is None
+        ):
+            raise ValidationError(
+                'The local delegate limit for this project ({}) has already '
+                'been reached.'.format(del_limit)
+            )
 
 
 # AppSetting -------------------------------------------------------------------
 
 
 class AppSettingManager(models.Manager):
     """Manager for custom table-level AppSetting queries"""
@@ -665,16 +855,14 @@
         :param app_name: App plugin name (string)
         :param setting_name: Name of setting (string)
         :param project: Project object or pk
         :param user: User object or pk
         :return: Value (string)
         :raise: AppSetting.DoesNotExist if setting is not found
         """
-        if (project is None) and (user is None):
-            raise ValueError('Project and user unset.')
         query_parameters = {
             'name': setting_name,
             'project': project,
             'user': user,
         }
         if not app_name == 'projectroles':
             query_parameters['app_plugin__name'] = app_name
@@ -765,16 +953,18 @@
 
     def __str__(self):
         plugin_name = (
             self.app_plugin.name if self.app_plugin else 'projectroles'
         )
         if self.project:
             label = self.project.title
-        else:
+        elif self.user:
             label = self.user.username
+        else:
+            label = 'SITE'
         return '{}: {} / {}'.format(label, plugin_name, self.name)
 
     def __repr__(self):
         values = (
             self.project.title if self.project else None,
             self.user.username if self.user else None,
             self.app_plugin.name if self.app_plugin else 'projectroles',
@@ -894,66 +1084,14 @@
         )
 
     def __repr__(self):
         values = (self.project.title, self.email, self.role.name, self.active)
         return 'ProjectInvite({})'.format(', '.join(repr(v) for v in values))
 
 
-# ProjectUserTag ---------------------------------------------------------------
-
-
-class ProjectUserTag(models.Model):
-    """Tag assigned by a user to a project"""
-
-    #: Project to which the tag is assigned
-    project = models.ForeignKey(
-        Project,
-        null=False,
-        related_name='tags',
-        help_text='Project in which the tag is assigned',
-        on_delete=models.CASCADE,
-    )
-
-    #: User for whom the tag is assigned
-    user = models.ForeignKey(
-        AUTH_USER_MODEL,
-        null=False,
-        related_name='project_tags',
-        help_text='User for whom the tag is assigned',
-        on_delete=models.CASCADE,
-    )
-
-    #: Name of tag to be assigned
-    name = models.CharField(
-        max_length=64,
-        unique=False,
-        null=False,
-        blank=False,
-        default=PROJECT_TAG_STARRED,
-        help_text='Name of tag to be assigned',
-    )
-
-    #: ProjectUserTag SODAR UUID
-    sodar_uuid = models.UUIDField(
-        default=uuid.uuid4, unique=True, help_text='ProjectUserTag SODAR UUID'
-    )
-
-    class Meta:
-        ordering = ['project__title', 'user__username', 'name']
-
-    def __str__(self):
-        return '{}: {}: {}'.format(
-            self.project.title, self.user.username, self.name
-        )
-
-    def __repr__(self):
-        values = (self.project.title, self.user.username, self.name)
-        return 'ProjectUserTag({})'.format(', '.join(repr(v) for v in values))
-
-
 # RemoteSite -------------------------------------------------------------------
 
 
 class RemoteSite(models.Model):
     """Remote SODAR site"""
 
     #: Site name
@@ -1149,69 +1287,72 @@
     def __str__(self):
         return self.username
 
     def save(self, *args, **kwargs):
         super().save(*args, **kwargs)
         self.set_group()
 
-    def get_form_label(self):
-        """Return options with name, username and email"""
-        return '{}{}{}'.format(
-            self.name if self.name else '',
-            ' ({})'.format(self.username) if self.username else '',
-            ' <{}>'.format(self.email) if self.email else '',
-        )
-
     def get_full_name(self):
         """Return full name or username if not set"""
         if hasattr(self, 'name') and self.name:
             return self.name
         elif self.first_name and self.last_name:
             return '{} {}'.format(self.first_name, self.last_name)
         return self.username
 
+    def get_form_label(self, email=False):
+        """
+        Return user label with full name, username and optional email.
+
+        :param email: Return email if True (boolean, default=False)
+        :return: String
+        """
+        ret = self.get_full_name()
+        if ret != self.username:
+            ret += ' ({})'.format(self.username)
+        if email and self.email:
+            ret += ' <{}>'.format(self.email)
+        return ret
+
     def set_group(self):
         """Set user group based on user name."""
         if self.username.find('@') != -1:
             group_name = self.username.split('@')[1].lower()
         else:
             group_name = SODAR_CONSTANTS['SYSTEM_USER_GROUP']
         group, created = Group.objects.get_or_create(name=group_name)
         if group not in self.groups.all():
             group.user_set.add(self)
             return group_name
 
     def is_local(self):
         return not bool(re.search('@[A-Za-z0-9._-]+$', self.username))
 
+    def update_full_name(self):
+        """
+        Update full name of user.
 
-# User signals -----------------------------------------------------------------
-
+        :return: String
+        """
+        # Save user name from first_name and last_name into name
+        if self.name in ['', None] and self.first_name != '':
+            self.name = self.first_name + (
+                ' ' + self.last_name if self.last_name != '' else ''
+            )
+        self.save()
+        return self.name
 
-def handle_ldap_login(sender, user, **kwargs):
-    """Signal for LDAP login handling"""
+    def update_ldap_username(self):
+        """
+        Update username for an LDAP user.
 
-    if hasattr(user, 'ldap_username'):
+        :return: String
+        """
         # Make domain in username uppercase
         if (
-            user.username.find('@') != -1
-            and user.username.split('@')[1].islower()
+            self.username.find('@') != -1
+            and self.username.split('@')[1].islower()
         ):
-            u_split = user.username.split('@')
-            user.username = u_split[0] + '@' + u_split[1].upper()
-            user.save()
-        # Save user name from first_name and last_name into name
-        if user.name in ['', None]:
-            if user.first_name != '':
-                user.name = user.first_name + (
-                    ' ' + user.last_name if user.last_name != '' else ''
-                )
-                user.save()
-
-
-def assign_user_group(sender, user, **kwargs):
-    """Signal for user group assignment"""
-    user.set_group()
-
-
-user_logged_in.connect(handle_ldap_login)
-user_logged_in.connect(assign_user_group)
+            u_split = self.username.split('@')
+            self.username = u_split[0] + '@' + u_split[1].upper()
+            self.save()
+        return self.username
```

### Comparing `django-sodar-core-0.12.0/projectroles/plugins.py` & `django-sodar-core-0.13.0/projectroles/plugins.py`

 * *Files 2% similar despite different names*

```diff
@@ -250,25 +250,27 @@
 
     #: App settings definition
     #:
     #: Example ::
     #:
     #:     app_settings = {
     #:         'example_setting': {
-    #:             'scope': 'PROJECT',  # PROJECT/USER
+    #:             'scope': 'PROJECT',  # PROJECT/USER/SITE
     #:             'type': 'STRING',  # STRING/INTEGER/BOOLEAN
     #:             'default': 'example',
     #:             'label': 'Project setting',  # Optional, defaults to name/key
     #:             'placeholder': 'Enter example setting here',  # Optional
     #:             'description': 'Example project setting',  # Optional
     #:             'options': ['example', 'example2'],  # Optional, only for
     #:             settings of type STRING or INTEGER
     #:             'user_modifiable': True,  # Optional, show/hide in forms
     #:             'local': False,  # Optional, show/hide in forms on target
     #:             site, sync value from source to target site if false
+    #:             'project_types': [PROJECT_TYPE_PROJECT],  # Optional, may
+    #:             contain PROJECT_TYPE_CATEGORY and/or PROJECT_TYPE_PROJECT
     #:         }
     #:     }
     # TODO: Define project specific settings in your app plugin, example above
     app_settings = {}
 
     # DEPRECATED, will be removed in the next SODAR Core release
     project_settings = {}
@@ -424,14 +426,25 @@
         :param project: Project object
         :param user: User object (current user)
         :return: String (may contain HTML), integer or None
         """
         # TODO: Implement this in your app plugin (optional)
         return None
 
+    def validate_form_app_settings(self, app_settings, project=None, user=None):
+        """
+        Validate app settings form data and return a dict of errors.
+        :param app_settings: Dict of app settings
+        :param project: Project object
+        :param user: User object
+        :return: dict in format of {'setting_name': 'Error string' or None}
+        """
+        # TODO: Implement this in your app plugin (optional)
+        return None
+
 
 class BackendPluginPoint(PluginPoint):
     """Projectroles plugin point for registering backend apps"""
 
     #: Iconify icon
     # TODO: Implement this in your backend plugin
     icon = 'mdi:help-rhombus-outline'
@@ -604,14 +617,24 @@
         return None
 
     def get_extra_data_link(self, _extra_data, _name):
         """Return a link for timeline label starting with 'extra-'"""
         # TODO: Implement this in your app plugin
         return None
 
+    def validate_form_app_settings(self, app_settings, user=None):
+        """
+        Validate app settings form data and return a dict of errors.
+        :param app_settings: Dict of app settings
+        :param user: User object
+        :return: dict in format of {'setting_name': 'Error string' or None}
+        """
+        # TODO: Implement this in your app plugin (optional)
+        return None
+
 
 # Plugin API -------------------------------------------------------------------
 
 
 def get_active_plugins(plugin_type='project_app', custom_order=False):
     """
     Return active plugins of a specific type.
```

### Comparing `django-sodar-core-0.12.0/projectroles/remote_projects.py` & `django-sodar-core-0.13.0/projectroles/remote_projects.py`

 * *Files 6% similar despite different names*

```diff
@@ -1,18 +1,23 @@
 """Remote project management utilities for the projectroles app"""
 
+import json
 import logging
+import ssl
+import urllib
+
 from copy import deepcopy
 
 from django.conf import settings
 from django.contrib import auth
 from django.contrib.auth.models import Group
 from django.core.exceptions import ObjectDoesNotExist
 from django.db import transaction
 from django.utils import timezone
+from django.urls.base import reverse
 
 from djangoplugins.models import Plugin
 
 from projectroles.app_settings import (
     AppSettingAPI,
     APP_SETTING_LOCAL_DEFAULT,
 )
@@ -86,15 +91,14 @@
         :param project_level: Access level for project (string)
         :return: Updated sync_data (dict)
         """
         if category.parent:
             sync_data = cls._add_parent_categories(
                 sync_data, category.parent, project_level
             )
-
         # Add if not added yet OR if a READ_ROLES project is encountered
         if (
             str(category.sodar_uuid) not in sync_data['projects'].keys()
             or sync_data['projects'][str(category.sodar_uuid)]['level']
             != REMOTE_LEVEL_READ_ROLES
             and sync_data[project_level] == REMOTE_LEVEL_READ_ROLES
         ):
@@ -103,29 +107,26 @@
                 'type': PROJECT_TYPE_CATEGORY,
                 'parent_uuid': str(category.parent.sodar_uuid)
                 if category.parent
                 else None,
                 'description': category.description,
                 'readme': category.readme.raw,
             }
-
             if project_level == REMOTE_LEVEL_READ_ROLES:
                 cat_data['roles'] = {}
                 cat_data['level'] = REMOTE_LEVEL_READ_ROLES
-                for role_as in category.roles.all():
+                for role_as in category.local_roles.all():
                     cat_data['roles'][str(role_as.sodar_uuid)] = {
                         'user': role_as.user.username,
                         'role': role_as.role.name,
                     }
                     sync_data = cls._add_user(sync_data, role_as.user)
             else:
                 cat_data['level'] = REMOTE_LEVEL_READ_INFO
-
             sync_data['projects'][str(category.sodar_uuid)] = cat_data
-
         return sync_data
 
     @classmethod
     def _add_peer_site(cls, sync_data, site):
         """
         Add peer site to source site sync data.
 
@@ -257,54 +258,91 @@
 
             project_data = {
                 'level': rp.level,
                 'title': project.title,
                 'type': PROJECT_TYPE_PROJECT,
                 'remote_sites': [str(site.sodar_uuid) for site in remote_sites],
             }
-
             # View available projects
             if rp.level == REMOTE_LEVEL_VIEW_AVAIL:
                 project_data['available'] = True if project else False
 
             # Add info
             elif project and rp.level in [
                 REMOTE_LEVEL_READ_INFO,
                 REMOTE_LEVEL_READ_ROLES,
                 REMOTE_LEVEL_REVOKED,
             ]:
                 project_data['description'] = project.description
                 project_data['readme'] = project.readme.raw
-                # Add categories
+                # Add parent categories and inherited roles
                 if project.parent:
                     sync_data = self._add_parent_categories(
                         sync_data, project.parent, rp.level
                     )
                     project_data['parent_uuid'] = str(project.parent.sodar_uuid)
 
             # If level is READ_ROLES or REVOKED, add roles
             if rp.level in [REMOTE_LEVEL_READ_ROLES, REMOTE_LEVEL_REVOKED]:
                 project_data['roles'] = {}
-                for role_as in project.roles.all():
+                for role_as in project.local_roles.all():
                     # If REVOKED, only sync owner and delegate
                     if (
                         rp.level == REMOTE_LEVEL_READ_ROLES
                         or role_as.role.name
                         in ['project owner', 'project delegate']
                     ):
                         project_data['roles'][str(role_as.sodar_uuid)] = {
                             'user': role_as.user.username,
                             'role': role_as.role.name,
                         }
                         sync_data = self._add_user(sync_data, role_as.user)
-
             sync_data['projects'][str(rp.project_uuid)] = project_data
-
         return sync_data
 
+    def get_remote_data(self, site):
+        """
+        Method for synchronisation tasks.
+
+        :param site: Remote Site object
+        :raise: Exception if some Errors occured
+        :return: remote data (dict)
+        """
+        from projectroles.views_api import (
+            CORE_API_MEDIA_TYPE,
+            CORE_API_DEFAULT_VERSION,
+        )
+
+        api_url = site.get_url() + reverse(
+            'projectroles:api_remote_get', kwargs={'secret': site.secret}
+        )
+
+        try:
+            api_req = urllib.request.Request(api_url)
+            api_req.add_header(
+                'accept',
+                '{}; version={}'.format(
+                    CORE_API_MEDIA_TYPE, CORE_API_DEFAULT_VERSION
+                ),
+            )
+            response = urllib.request.urlopen(api_req)
+            remote_data = json.loads(response.read().decode('utf-8'))
+        except Exception as ex:
+            ex_str = str(ex)
+            if (
+                isinstance(ex, urllib.error.URLError)
+                and isinstance(ex.reason, ssl.SSLError)
+                and ex.reason.reason == 'WRONG_VERSION_NUMBER'
+            ):
+                ex_str = 'Most likely server cannot handle HTTPS requests.'
+            if len(ex_str) >= 255:
+                ex_str = ex_str[:255]
+            raise Exception(ex_str)
+        return remote_data
+
     # Internal Target Site Functions -------------------------------------------
 
     @staticmethod
     def _update_obj(obj, obj_data, fields):
         """
         Update object for target site sync.
 
@@ -455,36 +493,33 @@
 
         :param project: Project object
         :param project_data: Project sync data (string)
         :param parent: Project object for parent category
         """
         updated_fields = []
         uuid = str(project.sodar_uuid)
-
         for k, v in project_data.items():
             if (
                 k not in ['parent', 'sodar_uuid', 'roles', 'readme']
                 and hasattr(project, k)
                 and str(getattr(project, k)) != str(v)
             ):
                 updated_fields.append(k)
-
         # README is a special case
         if project.readme.raw != project_data['readme']:
             updated_fields.append('readme')
 
         if updated_fields or project.parent != parent:
             project = self._update_obj(project, project_data, updated_fields)
             # Manually update parent
             if parent != project.parent:
                 project.parent = parent
                 project.save()
                 updated_fields.append('parent')
             self.remote_data['projects'][uuid]['status'] = 'updated'
-
             if self.tl_user:  # Timeline
                 tl_desc = (
                     'update project from remote site '
                     '"{{{}}}" ({})'.format('site', ', '.join(updated_fields))
                 )
                 # TODO: Add extra_data
                 tl_event = self.timeline.add_event(
@@ -494,22 +529,20 @@
                     event_name='remote_project_update',
                     description=tl_desc,
                     status_type='OK',
                 )
                 tl_event.add_object(
                     self.source_site, 'site', self.source_site.name
                 )
-
             logger.info(
                 'Updated {}: {}'.format(
                     project_data['type'].lower(),
                     ', '.join(sorted(updated_fields)),
                 )
             )
-
         else:
             logger.debug('Nothing to update in project details')
 
     def _create_project(self, uuid, project_data, parent):
         """
         Create a new project on target site.
 
@@ -548,15 +581,14 @@
                 user=self.tl_user,
                 event_name='remote_project_create',
                 description='create project from remote site {site}',
                 status_type='OK',
             )
             # TODO: Add extra_data
             tl_event.add_object(self.source_site, 'site', self.source_site.name)
-
         logger.info('Created {}'.format(project_data['type'].lower()))
 
     def _create_peer_site(self, uuid, site_data):
         """
         Create remote peer site on target site.
 
         :param uuid: Remote site UUID (string)
@@ -746,15 +778,14 @@
                         description=tl_desc,
                         status_type='OK',
                     )
                     tl_event.add_object(role_user, 'user', role_user.username)
                     tl_event.add_object(
                         self.source_site, 'site', self.source_site.name
                     )
-
                 logger.info(
                     'Created role {}: {} -> {}'.format(
                         r_uuid, role_user.username, role.name
                     )
                 )
 
     def _remove_deleted_roles(self, project, project_data):
@@ -800,15 +831,14 @@
                         description=tl_desc,
                         status_type='OK',
                     )
                     tl_event.add_object(del_user, 'user', del_user.username)
                     tl_event.add_object(
                         self.source_site, 'site', self.source_site.name
                     )
-
             logger.info(
                 'Deleted {} removed role{} for: {}'.format(
                     deleted_count,
                     's' if deleted_count != 1 else '',
                     ', '.join(deleted_users),
                 )
             )
@@ -881,28 +911,26 @@
                 site=self.source_site,
                 project_uuid=project.sodar_uuid,
                 project=project,
                 level=project_data['level'],
                 date_access=timezone.now(),
             )
             remote_action = 'created'
-
         logger.debug(
             '{} RemoteProject {}'.format(
                 remote_action.capitalize(), remote_project.sodar_uuid
             )
         )
 
         # Skip the rest if not updating roles
         if 'level' in project_data and project_data['level'] not in [
             REMOTE_LEVEL_READ_ROLES,
             REMOTE_LEVEL_REVOKED,
         ]:
             return
-
         # Create/update roles
         # NOTE: Only update AD/LDAP user roles and local owner roles
         if project_data['level'] == REMOTE_LEVEL_READ_ROLES:
             self._update_roles(project, project_data)
         # Remove deleted user roles (also for REVOKED projects)
         self._remove_deleted_roles(project, project_data)
 
@@ -1108,33 +1136,28 @@
                 raise ValueError(error_msg)
 
         # Set up timeline user
         if self.timeline:
             self.tl_user = request.user if request else self.default_owner
 
         logger.info('Synchronizing data from "{}"..'.format(site.name))
-
         # Return unchanged data if no projects with READ_ROLES are included
         if not {
             k: v
             for k, v in self.remote_data['projects'].items()
             if v['type'] == PROJECT_TYPE_PROJECT
             and v['level'] in [REMOTE_LEVEL_READ_ROLES, REMOTE_LEVEL_REVOKED]
         }.values():
             logger.info(
                 'No READ_ROLES or REVOKED access set, nothing to synchronize'
             )
             return self.remote_data
 
-        ##############
         # Peer Sites
-        ##############
-
         logger.info('Synchronizing Peer Sites...')
-
         if self.remote_data.get('peer_sites', None):
             for remote_site_uuid, site_data in self.remote_data[
                 'peer_sites'
             ].items():
                 # Create RemoteSite Objects if not yet there
                 remote_site = RemoteSite.objects.filter(
                     sodar_uuid=remote_site_uuid
@@ -1143,48 +1166,38 @@
                     self._update_peer_site(remote_site_uuid, site_data)
                 else:
                     self._create_peer_site(remote_site_uuid, site_data)
             logger.info('Peer Site Sync OK')
         else:
             logger.info('No new Peer Sites to sync')
 
-        ########
         # Users
-        ########
-
         logger.info('Synchronizing LDAP/AD users..')
         # NOTE: only sync LDAP/AD users
         for u_uuid, u_data in {
             k: v
             for k, v in self.remote_data['users'].items()
             if '@' in v['username']
         }.items():
             self._sync_user(u_uuid, u_data)
         logger.info('User sync OK')
 
-        ##########################
         # Categories and Projects
-        ##########################
-
-        # Update projects
         logger.info('Synchronizing projects..')
         for p_uuid, p_data in {
             k: v
             for k, v in self.remote_data['projects'].items()
             if v['type'] == PROJECT_TYPE_PROJECT
             and v['level'] in [REMOTE_LEVEL_READ_ROLES, REMOTE_LEVEL_REVOKED]
         }.items():
             self._sync_project(p_uuid, p_data)
             self._sync_peer_projects(p_uuid, p_data)
             self._remove_revoked_peers(p_uuid, p_data)
 
-        ###############
         # App Settings
-        ###############
-
         logger.info('Synchronizing app settings..')
         for a_uuid, a_data in self.remote_data['app_settings'].items():
             try:
                 self._sync_app_setting(a_uuid, a_data)
             except Exception as ex:
                 logger.error(
                     'Failed to set app setting "{}.setting.{}" ({}): {}'.format(
@@ -1194,10 +1207,9 @@
                         a_data['name'],
                         a_uuid,
                         ex,
                     )
                 )
                 if settings.DEBUG:
                     raise ex
-
         logger.info('Synchronization OK')
         return self.remote_data
```

### Comparing `django-sodar-core-0.12.0/projectroles/rules.py` & `django-sodar-core-0.13.0/projectroles/rules.py`

 * *Files 18% similar despite different names*

```diff
@@ -5,14 +5,15 @@
 from projectroles.models import RoleAssignment, SODAR_CONSTANTS
 
 # SODAR constants
 PROJECT_ROLE_OWNER = SODAR_CONSTANTS['PROJECT_ROLE_OWNER']
 PROJECT_ROLE_DELEGATE = SODAR_CONSTANTS['PROJECT_ROLE_DELEGATE']
 PROJECT_ROLE_CONTRIBUTOR = SODAR_CONSTANTS['PROJECT_ROLE_CONTRIBUTOR']
 PROJECT_ROLE_GUEST = SODAR_CONSTANTS['PROJECT_ROLE_GUEST']
+PROJECT_ROLE_FINDER = SODAR_CONSTANTS['PROJECT_ROLE_FINDER']
 PROJECT_TYPE_CATEGORY = SODAR_CONSTANTS['PROJECT_TYPE_CATEGORY']
 SITE_MODE_SOURCE = SODAR_CONSTANTS['SITE_MODE_SOURCE']
 SITE_MODE_TARGET = SODAR_CONSTANTS['SITE_MODE_TARGET']
 
 
 # Predicates -------------------------------------------------------------------
 
@@ -25,65 +26,75 @@
     """
     return obj.is_owner(user) if obj else False
 
 
 @rules.predicate
 def is_project_delegate(user, obj):
     """Whether or not the user has the role of project delegate"""
-    assignment = RoleAssignment.objects.get_assignment(user, obj)
-    if assignment:
-        return assignment.role.name == PROJECT_ROLE_DELEGATE
-    return False
+    return obj.is_delegate(user) if obj else False
 
 
 @rules.predicate
 def is_project_contributor(user, obj):
     """Whether or not the user has the role of project contributor"""
-    assignment = RoleAssignment.objects.get_assignment(user, obj)
-    if assignment:
-        return assignment.role.name == PROJECT_ROLE_CONTRIBUTOR
-    return False
+    if not obj or not user or not user.is_authenticated:
+        return False
+    role_as = obj.get_role(user=user)
+    return role_as and role_as.role.name == PROJECT_ROLE_CONTRIBUTOR
 
 
 @rules.predicate
 def is_project_guest(user, obj):
     """
     Whether or not the user has the role of project guest. Also returns true if
     project has public guest access.
     """
     if obj.public_guest_access:
         return True
-    assignment = RoleAssignment.objects.get_assignment(user, obj)
-    if assignment:
-        return assignment.role.name == PROJECT_ROLE_GUEST
-    return False
+    if not obj or not user or not user.is_authenticated:
+        return False
+    role_as = obj.get_role(user)
+    return role_as and role_as.role.name == PROJECT_ROLE_GUEST
 
 
 @rules.predicate
-def has_project_role(user, obj):
+def is_project_finder(user, obj):
     """
-    Whether or not the user has any role in the project. Also returns true if
-    project has public guest access.
+    Whether or not the user has the role of project finder.
+    """
+    if not obj or not user or not user.is_authenticated:
+        return False
+    role_as = obj.get_role(user)
+    return role_as and role_as.role.name == PROJECT_ROLE_GUEST
+
+
+@rules.predicate
+def can_view_project(user, obj):
+    """
+    Whether or not user can view the project.
     """
     if obj.public_guest_access:
         return True
     if user.is_authenticated and obj.has_role(user):
         return True
     return False
 
 
 @rules.predicate
 def has_category_child_role(user, obj):
     """
     Whether or not the user has any role in any child project under the
-    current one, if the current project is a category. Also returns true if
+    current one, if the current project is a category. Also returns True if
     user is anonymous and category includes children with public guest access.
     """
     return obj.type == PROJECT_TYPE_CATEGORY and (
-        (user.is_authenticated and obj.has_role(user, include_children=True))
+        (
+            user.is_authenticated
+            and (obj.has_role(user) or obj.has_role_in_children(user))
+        )
         or (
             user.is_anonymous
             and getattr(settings, 'PROJECTROLES_ALLOW_ANONYMOUS', False)
             and obj.has_public_children
         )
     )
 
@@ -153,15 +164,15 @@
 
 
 # Permissions ------------------------------------------------------------------
 
 
 # Allow viewing project/category details
 rules.add_perm(
-    'projectroles.view_project', has_project_role | has_category_child_role
+    'projectroles.view_project', can_view_project | has_category_child_role
 )
 
 # Allow project updating
 rules.add_perm(
     'projectroles.update_project',
     is_project_update_user,
 )
@@ -176,18 +187,15 @@
     'projectroles.update_project_settings',
     is_role_update_user & is_modifiable_project,
 )
 
 # Allow viewing project roles
 rules.add_perm(
     'projectroles.view_project_roles',
-    is_project_owner
-    | is_project_delegate
-    | is_project_contributor
-    | is_project_guest,
+    can_view_project,
 )
 
 # Allow updating project owner
 rules.add_perm(
     'projectroles.update_project_owner',
     is_project_owner & is_modifiable_project,
 )
```

### Comparing `django-sodar-core-0.12.0/projectroles/serializers.py` & `django-sodar-core-0.13.0/projectroles/serializers.py`

 * *Files 5% similar despite different names*

```diff
@@ -11,14 +11,18 @@
 from projectroles.models import (
     Project,
     Role,
     RoleAssignment,
     ProjectInvite,
     AppSetting,
     SODAR_CONSTANTS,
+    ROLE_RANKING,
+    CAT_DELIMITER,
+    CAT_DELIMITER_ERROR_MSG,
+    ROLE_PROJECT_TYPE_ERROR_MSG,
 )
 from projectroles.utils import build_secret, get_expiry_date
 from projectroles.views import (
     ProjectModifyMixin,
     RoleAssignmentModifyMixin,
     ProjectInviteMixin,
 )
@@ -30,20 +34,21 @@
 # SODAR constants
 PROJECT_TYPE_PROJECT = SODAR_CONSTANTS['PROJECT_TYPE_PROJECT']
 PROJECT_TYPE_CATEGORY = SODAR_CONSTANTS['PROJECT_TYPE_CATEGORY']
 PROJECT_ROLE_OWNER = SODAR_CONSTANTS['PROJECT_ROLE_OWNER']
 PROJECT_ROLE_DELEGATE = SODAR_CONSTANTS['PROJECT_ROLE_DELEGATE']
 PROJECT_ROLE_CONTRIBUTOR = SODAR_CONSTANTS['PROJECT_ROLE_CONTRIBUTOR']
 PROJECT_ROLE_GUEST = SODAR_CONSTANTS['PROJECT_ROLE_GUEST']
+PROJECT_ROLE_FINDER = SODAR_CONSTANTS['PROJECT_ROLE_FINDER']
 SYSTEM_USER_GROUP = SODAR_CONSTANTS['SYSTEM_USER_GROUP']
 
 # Local constants
 REMOTE_MODIFY_MSG = (
-    'Modification of remote projects is not allowed, modify on '
-    'the SOURCE site instead'
+    'Modification of remote projects is not allowed, modify on the SOURCE site '
+    'instead'
 )
 
 
 # Base Serializers -------------------------------------------------------------
 
 
 class SODARModelSerializer(serializers.ModelSerializer):
@@ -176,16 +181,15 @@
             raise exceptions.PermissionDenied(
                 'User lacks permission to assign delegates'
             )
         # Check delegate limit
         if (
             attrs['role'].name == PROJECT_ROLE_DELEGATE
             and del_limit != 0
-            and project.get_delegates(exclude_inherited=True).count()
-            >= del_limit
+            and len(project.get_delegates(inherited=False)) >= del_limit
         ):
             raise serializers.ValidationError(
                 'Project delegate limit of {} has been reached'.format(
                     del_limit
                 )
             )
         return attrs
@@ -208,40 +212,55 @@
     class Meta:
         model = RoleAssignment
         fields = ['project', 'role', 'user', 'sodar_uuid']
 
     def validate(self, attrs):
         attrs = super().validate(attrs)
         project = self.context['project']
+        # Add user to instance for PATCH requests
+        if self.instance and not attrs.get('user'):
+            attrs['user'] = self.instance.user
 
         # Do not allow updating user
         if (
             self.instance
             and 'user' in attrs
             and attrs['user'] != self.instance.user
         ):
             raise serializers.ValidationError(
                 'Updating the user is not allowed, create a new role '
                 'assignment instead'
             )
 
+        # Validate project type
+        if project.type not in attrs['role'].project_types:
+            raise serializers.ValidationError(
+                ROLE_PROJECT_TYPE_ERROR_MSG.format(
+                    project_type=project.type, role_name=attrs['role'].name
+                )
+            )
         # Check for existing role if creating
         if not self.instance:
             old_as = RoleAssignment.objects.filter(
                 project=project, user=attrs['user']
             ).first()
             if old_as:
                 raise serializers.ValidationError(
                     'User already has the role of "{}" in project '
                     '(UUID={})'.format(old_as.role.name, old_as.sodar_uuid)
                 )
-
-        # Add user to instance for PATCH requests
-        if self.instance and not attrs.get('user'):
-            attrs['user'] = self.instance.user
+        # Prevent demoting if inherited role exists
+        for old_role_as in RoleAssignment.objects.filter(
+            project__in=project.get_parents(), user=attrs['user']
+        ):
+            if attrs['role'].rank > old_role_as.role.rank:
+                raise serializers.ValidationError(
+                    'User inherits role "{}", demoting from inherited role is '
+                    'not allowed'.format(old_role_as.role.name)
+                )
         return attrs
 
     def save(self, **kwargs):
         """Override save() to handle saving with project modify API"""
         # NOTE: Role not updated in response data unless we set self.instance
         # TODO: Figure out a clean fix
         self.instance = self.post_save(
@@ -330,15 +349,17 @@
         slug_field='sodar_uuid',
         many=False,
         allow_null=True,
         queryset=Project.objects.filter(type=PROJECT_TYPE_CATEGORY),
     )
     readme = serializers.CharField(required=False, allow_blank=True)
     archive = serializers.BooleanField(read_only=True)
-    roles = RoleAssignmentNestedListSerializer(read_only=True, many=True)
+    roles = RoleAssignmentNestedListSerializer(
+        read_only=True, many=True, source='get_roles'
+    )
 
     class Meta:
         model = Project
         fields = [
             'title',
             'type',
             'parent',
@@ -347,52 +368,26 @@
             'public_guest_access',
             'archive',
             'owner',
             'roles',
             'sodar_uuid',
         ]
 
-    def validate(self, attrs):
-        site_mode = getattr(
-            settings,
-            'PROJECTROLES_SITE_MODE',
-            SODAR_CONSTANTS['SITE_MODE_SOURCE'],
-        )
-        target_create = getattr(settings, 'PROJECTROLES_TARGET_CREATE', True)
-        disable_categories = getattr(
-            settings, 'PROJECTROLES_DISABLE_CATEGORIES', False
-        )
-        current_user = self.context['request'].user
-
-        # Validation for remote sites and projects
-        if self.instance and self.instance.is_remote():
-            raise serializers.ValidationError(REMOTE_MODIFY_MSG)
-        elif (
-            not self.instance
-            and site_mode == SODAR_CONSTANTS['SITE_MODE_TARGET']
-            and not target_create
-        ):
-            raise serializers.ValidationError(
-                'Creation of local projects not allowed on this target site'
-            )
-
-        # Validate parent
-        parent = attrs.get('parent')
-
+    def _validate_parent(self, parent, attrs, current_user, disable_categories):
+        """Validate parent field"""
         # Attempting to move project under category without perms
         if (
             parent
             and not current_user.is_superuser
             and not current_user.has_perm('projectroles.create_project', parent)
             and (not self.instance or self.instance.parent != parent)
         ):
             raise exceptions.PermissionDenied(
                 'User lacks permission to place project under given category'
             )
-
         if parent and parent.type != PROJECT_TYPE_CATEGORY:
             raise serializers.ValidationError('Parent is not a category')
         elif (
             'parent' in attrs
             and not parent
             and self.instance
             and self.instance.parent
@@ -408,62 +403,69 @@
             and not parent
             and attrs.get('type') == PROJECT_TYPE_PROJECT
             and not disable_categories
         ):
             raise serializers.ValidationError(
                 'Project must be placed under a category'
             )
-
         # Ensure we are not moving a category under one of its children
         if (
             parent
             and self.instance
             and self.instance.type == PROJECT_TYPE_CATEGORY
             and parent in self.instance.get_children(flat=True)
         ):
             raise serializers.ValidationError(
                 'Moving a category under its own child is not allowed'
             )
 
-        # Validate type
-        if (
-            attrs.get('type')
-            and self.instance
-            and attrs['type'] != self.instance.type
+    def _validate_title(self, parent, attrs):
+        """Validate title field"""
+        title = attrs.get('title')
+        if title and (
+            CAT_DELIMITER in title
+            or title.startswith(CAT_DELIMITER.strip())
+            or title.endswith(CAT_DELIMITER.strip())
         ):
-            raise serializers.ValidationError(
-                'Changing the project type is not allowed'
-            )
-
-        # Validate title
-        if parent and attrs.get('title') == parent.title:
+            raise serializers.ValidationError(CAT_DELIMITER_ERROR_MSG)
+        if parent and title == parent.title:
             raise serializers.ValidationError('Title can\'t match with parent')
-
         if (
-            attrs.get('title')
+            title
             and not self.instance
             and Project.objects.filter(title=attrs['title'], parent=parent)
         ):
             raise serializers.ValidationError(
                 'Title must be unique within parent'
             )
 
-        # Validate type
-        if attrs.get('type') not in [
+    def _validate_type(self, attrs):
+        """Validate type field"""
+        project_type = attrs.get('type')
+        if project_type not in [
             PROJECT_TYPE_CATEGORY,
             PROJECT_TYPE_PROJECT,
             None,
         ]:  # None is ok for PATCH (will be updated in modify_project())
             raise serializers.ValidationError(
                 'Type is not {} or {}'.format(
                     PROJECT_TYPE_CATEGORY, PROJECT_TYPE_PROJECT
                 )
             )
+        if (
+            project_type
+            and self.instance
+            and attrs['type'] != self.instance.type
+        ):
+            raise serializers.ValidationError(
+                'Changing the project type is not allowed'
+            )
 
-        # Validate and set owner
+    def _validate_owner(self, attrs):
+        """Validate owner field"""
         if attrs.get('owner'):
             if (
                 self.partial
                 and attrs['owner'] != self.instance.get_owner().user.sodar_uuid
             ):
                 raise serializers.ValidationError(
                     'Modifying owner not allowed here, '
@@ -474,14 +476,54 @@
                 raise serializers.ValidationError('Owner not found')
             attrs['owner'] = owner
         elif not self.instance:
             raise serializers.ValidationError(
                 'The "owner" parameter must be supplied for project creation'
             )
 
+    def validate(self, attrs):
+        site_mode = getattr(
+            settings,
+            'PROJECTROLES_SITE_MODE',
+            SODAR_CONSTANTS['SITE_MODE_SOURCE'],
+        )
+        target_create = getattr(settings, 'PROJECTROLES_TARGET_CREATE', True)
+        disable_categories = getattr(
+            settings, 'PROJECTROLES_DISABLE_CATEGORIES', False
+        )
+        current_user = self.context['request'].user
+
+        # Validation for remote sites and projects
+        if self.instance and self.instance.is_remote():
+            raise serializers.ValidationError(REMOTE_MODIFY_MSG)
+        elif (
+            not self.instance
+            and site_mode == SODAR_CONSTANTS['SITE_MODE_TARGET']
+            and not target_create
+        ):
+            raise serializers.ValidationError(
+                'Creation of local projects not allowed on this target site'
+            )
+        # Validate parent
+        parent = attrs.get('parent')
+        self._validate_parent(parent, attrs, current_user, disable_categories)
+        # Validate title
+        self._validate_title(parent, attrs)
+        # Validate type
+        self._validate_type(attrs)
+        # Validate and set owner
+        self._validate_owner(attrs)
+        # Validate public_guest_access for categories
+        if attrs.get('type') == PROJECT_TYPE_CATEGORY and attrs.get(
+            'public_guest_access'
+        ):
+            raise serializers.ValidationError(
+                'Public guest access is not allowed for categories'
+            )
+
         # Set readme
         if 'readme' in attrs and 'raw' in attrs['readme']:
             attrs['readme'] = attrs['readme']['raw']
         return attrs
 
     def save(self, **kwargs):
         """Override save() to handle saving with project modify API"""
@@ -489,25 +531,54 @@
         return self.modify_project(
             data=self.validated_data,
             request=self.context['request'],
             instance=self.instance,
         )
 
     def to_representation(self, instance):
-        """Override to make sure fields are correctly returned"""
+        """
+        Override to make sure fields are correctly returned.
+        NOTE: Requires request in context object!
+        """
         ret = super().to_representation(instance)
+        # Set up project to get instance with UUID
         parent = ret.get('parent')
         project = Project.objects.get(
             title=ret['title'],
             **{'parent__sodar_uuid': parent} if parent else {},
         )
-        # TODO: Better way to ensure this?
+        # Return only title and UUID for projects with finder role
+        user = self.context['request'].user
+        if (
+            project.type == PROJECT_TYPE_PROJECT
+            and project.parent
+            and not project.has_role(user)
+        ):
+            parent_as = project.parent.get_role(user)
+            if (
+                parent_as
+                and parent_as.role.rank >= ROLE_RANKING[PROJECT_ROLE_FINDER]
+            ):
+                return {
+                    'title': project.title,
+                    'sodar_uuid': str(project.sodar_uuid),
+                }
+        # Else return full serialization
+        # Proper rendering of readme
         ret['readme'] = project.readme.raw or ''
+        # Force project UUID
         if not ret.get('sodar_uuid'):
             ret['sodar_uuid'] = str(project.sodar_uuid)
+        # Add "inherited" info to roles
+        if ret.get('roles'):
+            for k, v in ret['roles'].items():
+                role_as = RoleAssignment.objects.get(sodar_uuid=k)
+                ret['roles'][k]['inherited'] = (
+                    True if role_as.project != project else False
+                )
         return ret
 
 
 class AppSettingSerializer(SODARProjectModelSerializer):
     """
     Serializer for the AppSetting model. Should only be used for read and list
     views. The sodar_uuid is not provided, as interacting with database objects
```

### Comparing `django-sodar-core-0.12.0/projectroles/static/projectroles/css/pagedown.css` & `django-sodar-core-0.13.0/projectroles/static/projectroles/css/pagedown.css`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/static/projectroles/css/projectroles.css` & `django-sodar-core-0.13.0/projectroles/static/projectroles/css/projectroles.css`

 * *Files 1% similar despite different names*

```diff
@@ -71,14 +71,20 @@
   flex-direction: column;
   overflow-y: scroll;
   flex: auto;
 }
 
 .sodar-app-content {
   padding: 28px;
+  padding-top: 14px;
+  flex: auto;
+}
+
+.sodar-app-content-project {
+  padding: 28px;
   flex: auto;
 }
 
 
 /* Content containers ------------------------------------------------------- */
 
 
@@ -304,19 +310,14 @@
   box-shadow: 0 0 0 1px #dfdfdf inset, 0 3px 3px -3px #909090;
 }
 
 
 /* Project list table ------------------------------------------------------- */
 
 
-.sodar-pr-project-list-body-parent {
-  max-height: 300px;
-  overflow-y: auto;
-}
-
 table.sodar-pr-project-list-table {
   table-layout: fixed;
 }
 
 table.sodar-pr-project-list-table tbody tr {
   height: 53px !important;
 }
```

### Comparing `django-sodar-core-0.12.0/projectroles/static/projectroles/css/shepherd-theme-sodar.css` & `django-sodar-core-0.13.0/projectroles/static/projectroles/css/shepherd-theme-sodar.css`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/static/projectroles/images/wmd-buttons.png` & `django-sodar-core-0.13.0/projectroles/static/projectroles/images/wmd-buttons.png`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/static/projectroles/js/autocomplete_redirect.js` & `django-sodar-core-0.13.0/projectroles/static/projectroles/js/autocomplete_redirect.js`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/static/projectroles/js/iconify.min.js` & `django-sodar-core-0.13.0/projectroles/static/projectroles/js/iconify.min.js`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/static/projectroles/js/project_list.js` & `django-sodar-core-0.13.0/projectroles/static/projectroles/js/project_list.js`

 * *Files 6% similar despite different names*

#### js-beautify {}

```diff
@@ -75,21 +75,14 @@
             var value = values.shift();
             return getAjaxRequest(value[0], value[1]).done(function(data) {
                 $.each(data, function(uuid, colData) {
                     var item = $('.sodar-pr-project-list-item[data-uuid="' + uuid + '"]');
                     var roleCol = item.find('.sodar-pr-project-list-role');
                     roleCol.attr('class', colData['class'])
                         .text(colData['name']);
-                    if (colData['info']) {
-                        roleCol.append($('<i>')
-                            .attr('class', 'iconify text-info ml-1')
-                            .attr('data-icon', 'mdi:information')
-                            .attr('title', colData['info'])
-                        );
-                    }
                 });
             });
         });
         start += interval;
     }
 }
 
@@ -109,14 +102,16 @@
     var table = $('#sodar-pr-project-list-table');
     var listUrl = table.attr('data-list-url');
     var customColAlign = [];
     $('.sodar-pr-project-list-custom-header').each(function() {
         customColAlign.push($(this).attr('data-align'));
     });
     var colCount = customColAlign.length + 2;
+    var allUuids = [];
+    var projectUuids = [];
     var tableBody = $('#sodar-pr-project-list-table tbody');
     tableBody.append($('<tr>')
         .hide()
         .attr('id', 'sodar-pr-project-list-message')
         .append($('<td>')
             .attr('colspan', colCount)
             .attr('class', 'text-center text-muted font-italic')
@@ -160,30 +155,38 @@
                 .attr('data-full-title', p['full_title'])
                 .attr('data-starred', +p['starred'])
             );
             if (p['starred']) starredCount += 1;
             var row = tableBody.find('tr:last');
 
             // Title column
+            var p_elem = '<a>';
+            var p_href = '/project/' + p['uuid'];
+            var p_class = 'sodar-pr-project-link';
+            if (!p['access']) {
+                p_elem = '<span>';
+                p_href = '';
+                p_class = 'text-muted sodar-pr-project-link-disabled';
+            }
             row.append($('<td>')
                 .append($('<div>')
                     .attr('class', 'sodar-overflow-container')
                     .append($('<span>')
                         .attr('class', 'sodar-pr-project-indent')
                         .attr('style', 'padding-left: ' +
                             (p['depth'] - data['parent_depth']) * 25 + 'px;')
                     )
                     .append($('<i>')
                         .attr('class', 'iconify mr-1')
                         .attr('data-icon', 'mdi:' + icon))
                     .append($('<span>')
                         .attr('class', 'sodar-pr-project-title ' + titleClass)
-                        .append($('<a>')
-                            .attr('class', 'sodar-pr-project-link')
-                            .attr('href', '/project/' + p['uuid'])
+                        .append($(p_elem)
+                            .attr('class', p_class)
+                            .attr('href', p_href)
                             .text(p['title'])
                         )
                     )
                 )
             );
 
             // Add icons to title columns
@@ -216,61 +219,80 @@
                     .attr('data-icon', 'mdi:archive')
                     .attr('title', 'Archived')
                 );
             }
             // Starred icon
             if (p['starred']) {
                 titleSpan.append($('<i>')
-                    .attr('class', 'iconify text-warning ml-2 sodar-tag-starred')
+                    .attr('class', 'iconify text-warning ml-2 sodar-pr-project-starred')
                     .attr('data-icon', 'mdi:star')
                 );
             }
+            // Finder link
+            if (!p['access'] && p['finder_url']) {
+                titleSpan.append($('<a>')
+                    .attr('href', p['finder_url'])
+                    .attr('class', 'sodar-pr-project-findable')
+                    .attr('title', 'Findable project: Request access from ' +
+                        'category owner or delegate')
+                    .append($('<i>')
+                        .attr('class', 'iconify ml-2')
+                        .attr('data-icon', 'mdi:account-supervisor')
+
+                    )
+                );
+            }
 
             // Fill project custom columns with spinners
             for (var j = 1; j < colCount - 1; j++) {
-                if (p['type'] === 'PROJECT') {
+                if (p['type'] === 'PROJECT' && p['access']) {
                     row.append($('<td>')
                         .attr('class',
                             'sodar-pr-project-list-custom text-' +
                             customColAlign[j - 1])
                         .append($('<i>')
                             .attr('class', 'iconify spin text-muted')
                             .attr('data-icon', 'mdi:loading')
                         )
                     );
                 } else row.append($('<td>'));
             }
             // Add user role column
-            row.append($('<td>')
-                .attr('class', 'sodar-pr-project-list-role')
-                .append($('<i>')
-                    .attr('class', 'iconify spin text-muted')
-                    .attr('data-icon', 'mdi:loading')
-                )
-            );
+            if (p['type'] === 'PROJECT' && p['access']) {
+                row.append($('<td>')
+                    .attr('class', 'sodar-pr-project-list-role')
+                    .append($('<i>')
+                        .attr('class', 'iconify spin text-muted')
+                        .attr('data-icon', 'mdi:loading')
+                    )
+                );
+            } else {
+                row.append($('<td>')
+                    .attr('class', 'sodar-pr-project-list-role text-muted')
+                    .html('N/A')
+                );
+            }
+
+            // Add categories and projects with access for further queries
+            if (p['access']) {
+                allUuids.push(p['uuid']);
+                if (p['type'] === 'PROJECT') {
+                    projectUuids.push(p['uuid']);
+                }
+            }
         }
 
         // Enable starred button and filter
         if (starredCount > 0 && starredCount < projectCount) {
             $('#sodar-pr-project-list-link-star').prop('disabled', false);
         }
         if (projectCount > 1) {
             $('#sodar-pr-project-list-filter').prop('disabled', false);
         }
 
-        // Get UUIDs
-        var allUuids = [];
-        var projectUuids = [];
-        $('.sodar-pr-project-list-item').each(function() {
-            var uuid = $(this).attr('data-uuid');
-            allUuids.push(uuid);
-            if ($(this).hasClass('sodar-pr-project-list-item-project')) {
-                projectUuids.push($(this).attr('data-uuid'));
-            }
-        });
         if (projectUuids.length > 0) {
             // Update custom columns
             updateCustomColumns(projectUuids);
         }
         if (allUuids.length > 0) {
             // Update role column
             if (!data['user']['superuser']) {
```

### Comparing `django-sodar-core-0.12.0/projectroles/static/projectroles/js/project_star.js` & `django-sodar-core-0.13.0/projectroles/static/projectroles/js/project_star.js`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/static/projectroles/js/projectroles.js` & `django-sodar-core-0.13.0/projectroles/static/projectroles/js/projectroles.js`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/static/projectroles/js/search.js` & `django-sodar-core-0.13.0/projectroles/static/projectroles/js/search.js`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/templates/projectroles/_messages.html` & `django-sodar-core-0.13.0/projectroles/templates/projectroles/_messages.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/templates/projectroles/_modal.html` & `django-sodar-core-0.13.0/projectroles/templates/projectroles/_modal.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/templates/projectroles/_pagination.html` & `django-sodar-core-0.13.0/projectroles/templates/projectroles/_pagination.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/templates/projectroles/_project_invites_buttons.html` & `django-sodar-core-0.13.0/projectroles/templates/projectroles/_project_invites_buttons.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/templates/projectroles/_project_list.html` & `django-sodar-core-0.13.0/projectroles/templates/projectroles/_project_list.html`

 * *Files 6% similar despite different names*

```diff
@@ -35,15 +35,15 @@
                placeholder="Filter"
                disabled="disabled"
                aria-label="Filter {% get_display_name 'PROJECT' title=False plural=True %}"
                id="sodar-pr-project-list-filter">
       </div>
     </h4>
   </div>
-  <div class="card-body p-0 {% if parent %}sodar-pr-project-list-body-parent{% endif %}">
+  <div class="card-body p-0">
     <table class="table sodar-card-table sodar-pr-project-list-table"
            id="sodar-pr-project-list-table"
            data-list-url="{% url 'projectroles:ajax_project_list' %}{% if parent %}?parent={{ parent.sodar_uuid }}{% endif %}"
            data-custom-col-url="{% url 'projectroles:ajax_project_list_columns' %}"
            data-role-url="{% url 'projectroles:ajax_project_list_roles' %}"
            data-parent="{% if parent %}{{ parent.sodar_uuid }}{% endif %}">
       <thead id="sodar-pr-project-list-header">
```

### Comparing `django-sodar-core-0.12.0/projectroles/templates/projectroles/_project_menu_btn.html` & `django-sodar-core-0.13.0/projectroles/templates/projectroles/_project_menu_btn.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/templates/projectroles/_project_navi.html` & `django-sodar-core-0.13.0/projectroles/templates/projectroles/_project_navi.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/templates/projectroles/_project_roles_buttons.html` & `django-sodar-core-0.13.0/tokens/templates/tokens/token_create_success.html`

 * *Files 27% similar despite different names*

```diff
@@ -1,22 +1,39 @@
-{% load rules %}
-{% load projectroles_common_tags %}
+{% extends 'projectroles/base.html' %}
 
-<div class="btn-group sodar-list-btn-group sodar-pr-btn-grp-role" role="group" id="sodar-pr-btn-grp-role-{{ assignment_id }}">
-  <button class="btn btn-secondary dropdown-toggle sodar-list-dropdown"
-      type="button" data-toggle="dropdown"
-      aria-haspopup="true" aria-expanded="false">
-    <i class="iconify" data-icon="mdi:gear"></i>
-  </button>
-  <div class="dropdown-menu dropdown-menu-right">
-    <a class="dropdown-item"
-       href="{% url 'projectroles:role_update' roleassignment=assignment_id %}">
-      <i class="iconify" data-icon="mdi:lead-pencil"></i> Update Member
-    </a>
-    <a class="dropdown-item text-danger"
-       href="{% url 'projectroles:role_delete' roleassignment=assignment_id %}">
-      <i class="iconify" data-icon="mdi:account-remove"></i> Remove Member
-    </a>
-    {% get_history_dropdown obj=user project=project as history_item %}
-      {{ history_item|safe }}
+{% block title %}
+  API Token created for {{ project.title }}
+{% endblock title %}
+
+{% block projectroles %}
+<div class="container-fluid sodar-subtitle-container">
+  <h2>API Token Created</h2>
+</div>
+
+<div class="container-fluid sodar-page-container">
+  <div class="alert alert-warning">
+    The token has been created successfully. Note that you can only see it once.
+  </div>
+  <div class="input-group mb-3">
+    <input type="text"
+           class="form-control" value="{{ token }}" />
+    <span class="input-group-append">
+      <button class="btn btn-secondary sodar-copy-btn"
+              data-clipboard-text="{{ token }}" type="button"
+              title="Copy to Clipboard"
+              data-toggle="tooltip" data-placement="top">
+        <i class="iconify" data-icon="mdi:clipboard-multiple-outline"></i>
+        Copy to Clipboard
+      </button>
+    </span>
+  </div>
+  <div class="text-right mb-3">
+    <div class="btn-group" role="group">
+      <a role="button" class="btn btn-primary"
+         href="{% url 'tokens:list' %}">
+        <i class="iconify" data-icon="mdi:arrow-left-circle"></i> Back to List
+      </a>
+    </div>
   </div>
 </div>
+
+{% endblock projectroles %}
```

### Comparing `django-sodar-core-0.12.0/projectroles/templates/projectroles/_project_roles_buttons_owner.html` & `django-sodar-core-0.13.0/projectroles/templates/projectroles/_project_roles_buttons_owner.html`

 * *Files 22% similar despite different names*

```diff
@@ -1,19 +1,19 @@
 {% load rules %}
 {% load projectroles_common_tags %}
 
 <div class="btn-group sodar-list-btn-group sodar-pr-btn-grp-role" role="group"
-     id="sodar-pr-btn-grp-role-{{ assignment_id }}">
+     id="sodar-pr-btn-grp-role-{{ role_as_uuid }}">
   <button class="btn btn-secondary dropdown-toggle sodar-list-dropdown"
       type="button" data-toggle="dropdown"
       aria-haspopup="true" aria-expanded="false">
     <i class="iconify" data-icon="mdi:gear"></i>
   </button>
-  <div class="dropdown-menu dropdown-menu-right">
-    <a class="dropdown-item {% if not delegates and not members and not inherited_owners %}disabled{% endif %}"
+  <div class="dropdown-menu dropdown-menu-right sodar-pr-role-dropdown">
+    <a class="dropdown-item sodar-pr-role-link-transfer {% if not enable_owner_transfer %}disabled{% endif %}"
        href="{% url 'projectroles:role_owner_transfer' project=project.sodar_uuid %}">
       <i class="iconify" data-icon="mdi:account-switch"></i> Transfer Ownership
     </a>
     {% get_history_dropdown obj=user project=project as history_item %}
-      {{ history_item|safe }}
+    {{ history_item|safe }}
   </div>
 </div>
```

### Comparing `django-sodar-core-0.12.0/projectroles/templates/projectroles/_project_search_item.html` & `django-sodar-core-0.13.0/projectroles/templates/projectroles/_project_search_item.html`

 * *Files 22% similar despite different names*

```diff
@@ -1,26 +1,41 @@
 {% load rules %}
 {% load projectroles_tags %}
 {% load projectroles_common_tags %}
 
+{% has_perm 'projectroles.view_project' request.user p as can_view_project %}
+
 <tr class="sodar-pr-project-list-item" id="sodar-pr-project-search-item-{{ p.sodar_uuid }}">
   <td>
-    <div class="sodar-overflow-container">
-      <a href="{% url 'projectroles:detail' project=p.sodar_uuid %}">
+    <div class="sodar-overflow-container {% if not can_view_project %}text-muted{% endif %}">
+      {% if can_view_project %}
+        <a href="{% url 'projectroles:detail' project=p.sodar_uuid %}"
+           class="sodar-pr-project-search-link">
+      {% endif %}
         {% get_project_title_html p as project_title %}
         {% autoescape off %}
           {% highlight_search_term project_title search_terms %}
           {% get_remote_icon p request %}
         {% endautoescape %}
-      </a>
+        {% if not can_view_project and request.user.is_authenticated and p.parent %}
+          <a href="{% url 'projectroles:roles' project=p.parent.sodar_uuid %}"
+             class="sodar-pr-project-findable"
+             title="Findable project: Request access from category owner or delegate"
+             data-toggle="tooltip">
+            <i class="iconify ml-1" data-icon="mdi:account-supervisor"></i>
+          </a>
+        {% endif %}
+      {% if can_view_project %}
+        </a>
+      {% endif %}
     </div>
   </td>
   {% if p.description %}
     <td>
-      <div class="sodar-overflow-container">
+      <div class="sodar-overflow-container {% if not can_view_project %}text-muted{% endif %}">
         {% autoescape off %}
           {% highlight_search_term p.description search_terms %}
         {% endautoescape %}
       </div>
     </td>
   {% else %}
     <td class="text-muted">N/A</td>
```

#### html2text {}

```diff
@@ -1,11 +1,16 @@
 {% load rules %} {% load projectroles_tags %} {% load projectroles_common_tags
+%} {% has_perm 'projectroles.view_project' request.user p as can_view_project
 %}
-{%_get_project_title_html_p_as_project_title_%}_{%_autoescape_off_%}_{%
-highlight_search_term_project_title_search_terms_%}_{%_get_remote_icon_p
-request_%}_{%_endautoescape_%}
+{% if can_view_project %}
+{%_endif_%}_{%_get_project_title_html_p_as_project_title_%}_{%_autoescape_off
+%}_{%_highlight_search_term_project_title_search_terms_%}_{%_get_remote_icon_p
+request_%}_{%_endautoescape_%}_{%_if_not_can_view_project_and
+request.user.is_authenticated_and_p.parent_%}__{%_endif_%}_{%_if
+can_view_project_%}
+ {% endif %}
 {% if p.description %}
 {% autoescape off %} {% highlight_search_term p.description search_terms %} {%
 endautoescape %}
 {% else %}
 N/A
 {% endif %}
```

### Comparing `django-sodar-core-0.12.0/projectroles/templates/projectroles/_project_sidebar.html` & `django-sodar-core-0.13.0/projectroles/templates/projectroles/_project_sidebar.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/templates/projectroles/_remote_project_list_item.html` & `django-sodar-core-0.13.0/projectroles/templates/projectroles/_remote_project_list_item.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/templates/projectroles/_remote_site_buttons.html` & `django-sodar-core-0.13.0/projectroles/templates/projectroles/_remote_site_buttons.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/templates/projectroles/_remote_site_list_item.html` & `django-sodar-core-0.13.0/projectroles/templates/projectroles/_remote_site_list_item.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/templates/projectroles/_role_list_buttons.html` & `django-sodar-core-0.13.0/projectroles/templates/projectroles/_role_list_buttons.html`

 * *Files 7% similar despite different names*

```diff
@@ -1,50 +1,48 @@
 <div class="btn-group ml-auto" id="sodar-pr-btn-role-list">
   <button class="btn btn-primary dropdown-toggle" id="sodar-pr-btn-role-op" type="button"
           data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"
           {% if project.is_remote %}disabled="disabled"{% endif %}>
     Member Operations
   </button>
   <div class="dropdown-menu dropdown-menu-right">
-
     {# Add Role #}
-    {% if can_update_members %}
+    {% if role_perms.can_update_members %}
       <a class="dropdown-item"
          href="{% url 'projectroles:role_create' project=project.sodar_uuid %}"
          title="Add Member"
          id="sodar-pr-btn-role-list-create">
         <i class="iconify" data-icon="mdi:account-plus"></i> Add Member
       </a>
     {% endif %}
 
     {# Send Invite #}
-    {% if can_invite %}
+    {% if role_perms.can_invite %}
       <a class="dropdown-item"
          href="{% url 'projectroles:invite_create' project=project.sodar_uuid %}"
          title="Send Invite"
          id="sodar-pr-btn-role-list-invite">
         <i class="iconify" data-icon="mdi:send"></i> Send Invite
       </a>
     {% endif %}
 
     {# View Roles #}
-    {% if can_update_members and request.resolver_match.url_name != 'project_roles' %}
+    {% if role_perms.can_update_members and request.resolver_match.url_name != 'project_roles' %}
       <a class="dropdown-item"
          href="{% url 'projectroles:roles' project=project.sodar_uuid %}"
          title="View Members"
          id="sodar-pr-btn-role-list-roles">
         <i class="iconify" data-icon="mdi:account-multiple"></i> View Members
       </a>
     {% endif %}
 
     {# View Invites #}
-    {% if can_invite and request.resolver_match.url_name != 'role_invites' %}
+    {% if role_perms.can_invite and request.resolver_match.url_name != 'role_invites' %}
       <a class="dropdown-item"
          href="{% url 'projectroles:invites' project=project.sodar_uuid %}"
          title="View Invites"
          id="sodar-pr-btn-role-list-invites">
         <i class="iconify" data-icon="mdi:email"></i> View Invites
       </a>
     {% endif %}
-
   </div>
 </div>
```

### Comparing `django-sodar-core-0.12.0/projectroles/templates/projectroles/_search_header.html` & `django-sodar-core-0.13.0/projectroles/templates/projectroles/_search_header.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/templates/projectroles/_site_titlebar.html` & `django-sodar-core-0.13.0/projectroles/templates/projectroles/_site_titlebar.html`

 * *Files 6% similar despite different names*

```diff
@@ -7,14 +7,15 @@
 
 {# Local variables #}
 {% get_django_setting 'SITE_TITLE' as site_title %}
 {% get_django_setting 'SITE_SUBTITLE' as site_subtitle %}
 {% get_django_setting 'PROJECTROLES_ENABLE_SEARCH' as enable_search %}
 {% get_django_setting 'PROJECTROLES_KIOSK_MODE' as kiosk_mode %}
 {% get_django_setting 'PROJECTROLES_ALLOW_ANONYMOUS' as allow_anon %}
+{% get_django_setting 'PROJECTROLES_TEMPLATE_INCLUDE_PATH' as template_include_path %}
 {% static_file_exists 'images/logo_navbar.png' as logo_exists %}
 {% check_backend 'appalerts_backend' as appalerts_active %}
 
 <div class="m-b-1 sodar-titlebar-container">
   <nav class="navbar navbar-expand-lg navbar-dark bg-dark sodar-base-navbar"
        id="sodar-base-navbar">
 
@@ -94,17 +95,17 @@
                 </form>
               </div>
             </li>
           {% endif %}
         {% endif %}
 
         {# Optional template for additional links #}
-        {% template_exists 'include/_titlebar_nav.html' as add_links_exist %}
+        {% template_exists template_include_path|add:'/_titlebar_nav.html' as add_links_exist %}
         {% if add_links_exist %}
-          {% include 'include/_titlebar_nav.html' %}
+          {% include template_include_path|add:'/_titlebar_nav.html' %}
         {% endif %}
 
         {# Help link #}
         <li class="nav-item">
           <a class="nav-link {% get_help_highlight request.user %}"
              id="site-help-link">
             <i class="iconify" data-icon="mdi:information"></i> Help
```

#### html2text {}

```diff
@@ -1,27 +1,29 @@
 {# Site title bar for use with projectroles #} {% load static %} {% load
 projectroles_tags %} {% load projectroles_common_tags %} {% load rules %} {#
 Local variables #} {% get_django_setting 'SITE_TITLE' as site_title %} {%
 get_django_setting 'SITE_SUBTITLE' as site_subtitle %} {% get_django_setting
 'PROJECTROLES_ENABLE_SEARCH' as enable_search %} {% get_django_setting
 'PROJECTROLES_KIOSK_MODE' as kiosk_mode %} {% get_django_setting
-'PROJECTROLES_ALLOW_ANONYMOUS' as allow_anon %} {% static_file_exists 'images/
-logo_navbar.png' as logo_exists %} {% check_backend 'appalerts_backend' as
-appalerts_active %}
+'PROJECTROLES_ALLOW_ANONYMOUS' as allow_anon %} {% get_django_setting
+'PROJECTROLES_TEMPLATE_INCLUDE_PATH' as template_include_path %} {%
+static_file_exists 'images/logo_navbar.png' as logo_exists %} {% check_backend
+'appalerts_backend' as appalerts_active %}
  {# Site title #} {%_if_logo_exists_%}_[{%_static_'images/logo_navbar.png'_%}]_
 {%_endif_%}_{{_site_title_}}_{%_if_site_subtitle_%}{{_site_subtitle_}}{%_endif
 %} {# Navbar responsive collapse toggle #}    {# Navbar content #}
     * {# App alerts notification #} {% if request.user.is_authenticated and
       appalerts_active %} {% get_django_setting 'APPALERTS_STATUS_INTERVAL' 5
       as alert_interval %}
     *  {{_app_alerts_}}_alert{%_if_app_alerts_!=_1_%}s{%_endif_%}
     * {% endif %} {# Search #} {% if request.user.is_authenticated or
       allow_anon %} {% if enable_search %}
     * [{{ search_input }}  ]
        Search
     * {% endif %} {% endif %} {# Optional template for additional links #} {%
-      template_exists 'include/_titlebar_nav.html' as add_links_exist %} {% if
-      add_links_exist %} {% include 'include/_titlebar_nav.html' %} {% endif %}
-      {# Help link #}
+      template_exists template_include_path|add:'/_titlebar_nav.html' as
+      add_links_exist %} {% if add_links_exist %} {% include
+      template_include_path|add:'/_titlebar_nav.html' %} {% endif %} {# Help
+      link #}
     *  Help
     * {# User dropdown menu #} {% if not kiosk_mode %} {% include
       'projectroles/_site_titlebar_dropdown.html' %} {% endif %}
```

### Comparing `django-sodar-core-0.12.0/projectroles/templates/projectroles/_site_titlebar_dropdown.html` & `django-sodar-core-0.13.0/projectroles/templates/projectroles/_site_titlebar_dropdown.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/templates/projectroles/base.html` & `django-sodar-core-0.13.0/projectroles/templates/projectroles/base.html`

 * *Files 8% similar despite different names*

```diff
@@ -3,17 +3,14 @@
 {% load static %}
 {% load rules %}
 {% load projectroles_tags %}
 {% load projectroles_common_tags %}
 
 {% block css %}
   {{ block.super }}
-  {% get_sidebar_notch_size as sidebar_notch_size %}
-  {% get_sidebar_notch_pos as sidebar_notch_pos %}
-  {% get_sidebar_padding as sidebar_padding %}
   <style type="text/css">
     /* Notch visualizaton for sidebar */
     .sodar-pr-sidebar-nav-ul li.active a span.sodar-pr-sidebar-icon:after {
       content: "";
       position: absolute;
       right: 0;
       top: {{ sidebar_notch_pos }}px;
@@ -30,15 +27,15 @@
       padding-bottom: {{ sidebar_padding }}px !important;
     }
   </style>
 {% endblock %}
 
 {% block content %}
   {% get_django_setting 'PROJECTROLES_KIOSK_MODE' as kiosk_mode %}
-  {% get_sidebar_icon_size as sidebar_icon_size %}
+  {% get_django_setting 'PROJECTROLES_TEMPLATE_INCLUDE_PATH' as template_include_path %}
 
   {# Ensure passing CSRF token to Ajax API views #}
   {% csrf_token %}
 
   {# Sidebar #}
   {% if not kiosk_mode %}
     <div class="sodar-content-left" id="sodar-content-left">
@@ -78,25 +75,26 @@
         {% include 'projectroles/_project_navi.html' %}
       {% endif %}
 
       {# Django messages / site app messages #}
       {% include 'projectroles/_messages.html' %}
 
       {# Actual content #}
-      <div class="sodar-app-content" id="sodar-app-content">
+      <div class="sodar-app-content{% if project %}-project{% endif %}"
+           id="sodar-app-content">
         {% block projectroles %}
           Projectroles app content here
         {% endblock projectroles %}
       </div>
 
       {# Footer #}
-      {% template_exists 'include/_footer.html' as footer_exists %}
+      {% template_exists template_include_path|add:'/_footer.html' as footer_exists %}
       <footer class="sodar-footer">
         {% if footer_exists %}
-          {% include 'include/_footer.html' %}
+          {% include template_include_path|add:'/_footer.html' %}
         {% else %}
           {% include 'projectroles/_footer.html' %}
         {% endif %}
       </footer>
 
      </div> <!-- /sodar-app-container -->
```

### Comparing `django-sodar-core-0.12.0/projectroles/templates/projectroles/base_site.html` & `django-sodar-core-0.13.0/projectroles/templates/projectroles/base_site.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/templates/projectroles/home.html` & `django-sodar-core-0.13.0/projectroles/templates/projectroles/home.html`

 * *Files 0% similar despite different names*

```diff
@@ -22,15 +22,15 @@
 {% has_perm 'projectroles.create_project' request.user as can_create_project %}
 
 <div class="row sodar-pr-content-title">
   {% if can_create_project %}
     {# Project menu dropdown, only visible if browser width < X and sidebar is hidden #}
     {% include 'projectroles/_project_menu_btn.html' %}
   {% endif %}
-  <h2 class="sodar-pr-content-title">Home</h2>
+  <h2 class="sodar-pr-content-title pt-2">Home</h2>
 </div>
 
 <div class="container-fluid sodar-page-container">
   {% include 'projectroles/_project_list.html' with parent=None %}
 </div>
 
 {% endblock projectroles %}
```

### Comparing `django-sodar-core-0.12.0/projectroles/templates/projectroles/invite_revoke_confirm.html` & `django-sodar-core-0.13.0/projectroles/templates/projectroles/invite_revoke_confirm.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/templates/projectroles/login.html` & `django-sodar-core-0.13.0/projectroles/templates/projectroles/login.html`

 * *Files 6% similar despite different names*

```diff
@@ -1,14 +1,15 @@
 {% extends 'base.html' %}
 
 {% load static %}
 {% load projectroles_tags %}
 {% load projectroles_common_tags %}
 
 {% get_django_setting 'SITE_INSTANCE_TITLE' as site_title %}
+{% get_django_setting 'PROJECTROLES_TEMPLATE_INCLUDE_PATH' as template_include_path %}
 
 {% block title %}Login{% endblock title %}
 
 {% block content %}
 
 <div class="container-fluid">
 
@@ -56,17 +57,17 @@
       <a href="/sso/login" class="btn btn-md btn-info btn-block">
         <i class="iconify" data-icon="mdi:login-variant"></i> Single Sign-On
       </a>
     {% endif %}
   </div>
 
   {# Optional template for additional login page HTML #}
-  {% template_exists 'include/_login_extend.html' as login_extend %}
+  {% template_exists template_include_path|add:'/_login_extend.html' as login_extend %}
   {% if login_extend %}
-    {% include 'include/_login_extend.html' %}
+    {% include template_include_path|add:'/_login_extend.html' %}
   {% endif %}
 
 </div>
 
 {% endblock content %}
 
 {% block javascript %}
```

#### html2text {}

```diff
@@ -1,10 +1,12 @@
 {% extends 'base.html' %} {% load static %} {% load projectroles_tags %} {%
 load projectroles_common_tags %} {% get_django_setting 'SITE_INSTANCE_TITLE' as
-site_title %} {% block title %}Login{% endblock title %} {% block content %}
+site_title %} {% get_django_setting 'PROJECTROLES_TEMPLATE_INCLUDE_PATH' as
+template_include_path %} {% block title %}Login{% endblock title %} {% block
+content %}
 {# Django messages / site app messages #} {% include 'projectroles/
 _messages.html' %} {# Display error if login was unsuccessful. #} {% if
 request.POST %}
 Login failed. Please make sure the user name, domain and password are correct.
 {% endif %}
 ***** Login *****
 {% autoescape off %} {% get_login_info %} {% endautoescape %}
@@ -12,12 +14,13 @@
 [username            ] [********************]   Login
 {% get_django_setting 'ENABLE_SAML' as enable_saml %} {% if enable_saml %}
 ===============================================================================
 To log in with your SSO provider, please click below.
  Single_Sign-On
  {% endif %}
 {# Optional template for additional login page HTML #} {% template_exists
-'include/_login_extend.html' as login_extend %} {% if login_extend %} {%
-include 'include/_login_extend.html' %} {% endif %}
+template_include_path|add:'/_login_extend.html' as login_extend %} {% if
+login_extend %} {% include template_include_path|add:'/_login_extend.html' %}
+{% endif %}
 {% endblock content %} {% block javascript %} {{ block.super }}
 
  {% endblock javascript %}
```

### Comparing `django-sodar-core-0.12.0/projectroles/templates/projectroles/project_archive_confirm.html` & `django-sodar-core-0.13.0/projectroles/templates/projectroles/project_archive_confirm.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/templates/projectroles/project_base.html` & `django-sodar-core-0.13.0/projectroles/templates/projectroles/project_base.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/templates/projectroles/project_detail.html` & `django-sodar-core-0.13.0/projectroles/templates/projectroles/project_detail.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/templates/projectroles/project_form.html` & `django-sodar-core-0.13.0/projectroles/templates/projectroles/project_form.html`

 * *Files 10% similar despite different names*

```diff
@@ -34,15 +34,17 @@
   {% if object.pk %}
     {% include 'projectroles/_project_header.html' %}
   {% endif %}
 
   <div class="row sodar-subtitle-container">
     {% if object.pk %}
       {# NOTE: h3 is correct here, as we also have the project header #}
-      <h3>Update {% get_display_name object.type title=True %}</h3>
+      <h3 id="sodar-pr-project-form-title" data-project-type={{ object.type }}>
+        Update {% get_display_name object.type title=True %}
+      </h3>
       {% if object.type == 'PROJECT' %}
         <div class="ml-auto">
           <a role="button" class="btn btn-warning"
              href="{% url 'projectroles:archive' project=object.sodar_uuid %}"
              id="sodar-pr-btn-archive">
             {% if not object.archive %}
               <i class="iconify" data-icon="mdi:archive-arrow-up"></i> Archive
@@ -53,15 +55,17 @@
         </div>
       {% endif %}
     {% elif parent.pk %}
       <h2>Create {{ project_display }} or {{ category_display }} Under {{ parent.title }}</h2>
     {% elif disable_categories %}
       <h2>Create {{ project_display }}</h2>
     {% else %}
-      <h2>Create Top Level {{ category_display }}</h2>
+      <h2 id="sodar-pr-project-form-title" data-project-type="CATEGORY">
+        Create Top Level {{ category_display }}
+      </h2>
     {% endif %}
   </div>
 
   <div class="container-fluid sodar-page-container">
     <form method="post">
       {% csrf_token %}
       {{ form | crispy }}
@@ -86,8 +90,11 @@
 
 {% endblock projectroles %}
 
 {% block javascript %}
   {{ block.super }}
   <!-- Project starring -->
   <script type="text/javascript" src="{% static 'projectroles/js/project_star.js' %}"></script>
+
+  <!-- Settings field toggling -->
+  <script type="text/javascript" src="{% static 'projectroles/js/project_form.js' %}"></script>
 {% endblock javascript %}
```

#### html2text {}

```diff
@@ -11,23 +11,24 @@
 {{ form.media }} {% endblock head_extend %} {% block projectroles %} {%
 get_django_setting 'PROJECTROLES_DISABLE_CATEGORIES' as disable_categories %}
 {% get_display_name 'PROJECT' title=True as project_display %} {%
 get_display_name 'CATEGORY' title=True as category_display %} {% if object.pk
 %} {% include 'projectroles/_project_header.html' %} {% endif %}
 {% if object.pk %} {# NOTE: h3 is correct here, as we also have the project
 header #}
-**** Update {% get_display_name object.type title=True %} ****
+type }}> Update {% get_display_name object.type title=True %}
 {% if object.type == 'PROJECT' %}
 {%_if_not_object.archive_%}__Archive_{%_else_%}__Unarchive_{%_endif_%}
 {% endif %} {% elif parent.pk %}
 ***** Create {{ project_display }} or {{ category_display }} Under {
 { parent.title }} *****
 {% elif disable_categories %}
 ***** Create {{ project_display }} *****
 {% else %}
 ***** Create Top Level {{ category_display }} *****
 {% endif %}
 {% csrf_token %} {{ form | crispy }}
  Cancel
    {% if object.pk %} Update {% else %} Create {% endif %}
 {% endblock projectroles %} {% block javascript %} {{ block.super }}
+
  {% endblock javascript %}
```

### Comparing `django-sodar-core-0.12.0/projectroles/templates/projectroles/project_invites.html` & `django-sodar-core-0.13.0/projectroles/templates/projectroles/project_invites.html`

 * *Files 16% similar despite different names*

```diff
@@ -1,10 +1,11 @@
 {% extends 'projectroles/project_base.html' %}
 
 {% load rules %}
+{% load projectroles_role_tags %}
 {% load projectroles_common_tags %}
 
 {% block title %}Member Invites for {{ project.title }}{% endblock title %}
 
 {% block css %}
   {{ block.super }}
   <style type="text/css">
@@ -23,23 +24,20 @@
       }
     }
   </style>
 {% endblock css %}
 
 {% block projectroles_extend %}
 
-{% has_perm 'projectroles.update_project_members' request.user project as can_update_members %}
-{% has_perm 'projectroles.update_project_delegate' request.user project as can_update_delegate %}
-{% has_perm 'projectroles.invite_users' request.user project as can_invite %}
-{% has_perm 'projectroles.import_roles' request.user project as can_import %}
+{% get_role_perms project request.user as role_perms %}
 
 <div class="row sodar-subtitle-container bg-white sticky-top">
   <h3><i class="iconify" data-icon="mdi:email"></i> Member Invites</h3>
-  {% if can_invite %}
-    {% include 'projectroles/_role_list_buttons.html' with project=project can_update_members=can_update_members can_invite=can_invite %}
+  {% if role_perms.can_invite %}
+    {% include 'projectroles/_role_list_buttons.html' with project=project %}
   {% endif %}
 </div>
 
 <div class="container-fluid sodar-page-container">
   <div class="card" id="sodar-pr-invite-list">
     <div class="card-body p-0">
      <table class="table table-striped sodar-card-table" id="sodar-pr-role-invite-table">
@@ -54,26 +52,28 @@
        </thead>
        <tbody>
          {% if invites.count > 0 %}
            {% for invite in invites %}
              <tr>
                <td><a href="mailto:{{ invite.email }}">{{ invite.email }}</a></td>
                <td>{{ invite.role.name }}</td>
-                 <td><a href="{{ invite.issuer.email }}">{{ invite.issuer.username }}</a></td>
+               <td><a href="{{ invite.issuer.email }}">{{ invite.issuer.username }}</a></td>
                <td>{{ invite.date_expire|date:'Y-m-d H:i' }}</td>
                <td class="text-right">
-                 {% if can_invite %}
+                 {% if role_perms.can_invite %}
                    {% include 'projectroles/_project_invites_buttons.html' with project=project invite_uuid=invite.sodar_uuid %}
                  {% endif %}
                </td>
              </tr>
            {% endfor %}
          {% else %}
            <tr>
-             <td class="bg-faded font-italic text-center" colspan="5">No active invites.</td>
+             <td class="bg-faded font-italic text-center" colspan="5">
+               No active invites.
+             </td>
            </tr>
          {% endif %}
        </tbody>
      </table>
     </div>
   </div>
```

#### html2text {}

```diff
@@ -1,23 +1,19 @@
 {% extends 'projectroles/project_base.html' %} {% load rules %} {% load
-projectroles_common_tags %} {% block title %}Member Invites for {
-{ project.title }}{% endblock title %} {% block css %} {{ block.super }}
- {% endblock css %} {% block projectroles_extend %} {% has_perm
-'projectroles.update_project_members' request.user project as
-can_update_members %} {% has_perm 'projectroles.update_project_delegate'
-request.user project as can_update_delegate %} {% has_perm
-'projectroles.invite_users' request.user project as can_invite %} {% has_perm
-'projectroles.import_roles' request.user project as can_import %}
+projectroles_role_tags %} {% load projectroles_common_tags %} {% block title
+%}Member Invites for {{ project.title }}{% endblock title %} {% block css %} {
+{ block.super }}
+ {% endblock css %} {% block projectroles_extend %} {% get_role_perms project
+request.user as role_perms %}
  Member Invites
-{% if can_invite %} {% include 'projectroles/_role_list_buttons.html' with
-project=project can_update_members=can_update_members can_invite=can_invite %}
-{% endif %}
+{% if role_perms.can_invite %} {% include 'projectroles/
+_role_list_buttons.html' with project=project %} {% endif %}
 Email        Role             Issuer                 Expires
-                                                                              {% if can_invite %} {% include
-{            {                {                      {                        'projectroles/
+                                                                              {% if role_perms.can_invite %}
+{            {                {                      {                        {% include 'projectroles/
 {            {                {                      {                        _project_invites_buttons.html'
 invite.email invite.role.name invite.issuer.username invite.date_expire|date: with project=project
 }}           }}               }}                     'Y-m-d H:i' }}           invite_uuid=invite.sodar_uuid
                                                                               %} {% endif %}
 No active invites.
 {% endblock projectroles_extend %} {% block javascript %} {{ block.super }}
  {% endblock javascript %}
```

### Comparing `django-sodar-core-0.12.0/projectroles/templates/projectroles/projectinvite_form.html` & `django-sodar-core-0.13.0/projectroles/templates/projectroles/projectinvite_form.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/templates/projectroles/remote_projects.html` & `django-sodar-core-0.13.0/projectroles/templates/projectroles/remote_projects.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/templates/projectroles/remote_sites.html` & `django-sodar-core-0.13.0/projectroles/templates/projectroles/remote_sites.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/templates/projectroles/remoteproject_sync.html` & `django-sodar-core-0.13.0/projectroles/templates/projectroles/remoteproject_sync.html`

 * *Files 2% similar despite different names*

```diff
@@ -173,15 +173,14 @@
               </tr>
             </thead>
             <tbody>
               {% for p_uuid, p in update_data.projects.items %}
                 {% for r_uuid, r in p.roles.items %}
                   {% get_project_by_uuid p_uuid as p_obj %}
                   {% get_user_by_username r.user as user_obj %}
-                  {% is_inherited_owner project=p_obj user=user_obj as inh_user %}
                   {% if r.status %}
                     <tr>
                       <td>
                         {% if p_obj %}
                           {% get_project_link p_obj full_title=True as p_link %}
                           {{ p_link | safe }}
                         {% else %}
@@ -192,26 +191,16 @@
                         {% if user_obj %}
                           {% get_user_html user_obj as user_html %}
                           {{ user_html | safe }}
                         {% else %}
                           {{ r.user }}
                         {% endif %}
                       </td>
-                      <td
-                        {% if r.status == 'deleted' %}
-                          class="text-strikethrough"
-                        {% elif inh_user %}
-                          class="text-muted"
-                        {% endif %}
-                      >
+                      <td {% if r.status == 'deleted' %}class="text-strikethrough"{% endif %}>
                         {{ r.role }}
-                        {% if inh_user %}
-                          {% get_info_link content='Existing role for inherited owner' as i_link %}
-                          {{ i_link | safe }}
-                        {% endif %}
                       </td>
                       <td class="text-nowrap {% if r.status == 'error' %}text-danger{% else %}text-success{% endif %}">
                         {{ r.status | title }}
                         {% if r.status_msg %}
                           {% get_info_link content=r.status_msg as i_link %}
                           {{ i_link | safe }}
                         {% endif %}
```

### Comparing `django-sodar-core-0.12.0/projectroles/templates/projectroles/remoteproject_update.html` & `django-sodar-core-0.13.0/projectroles/templates/projectroles/remoteproject_update.html`

 * *Files 4% similar despite different names*

```diff
@@ -44,23 +44,21 @@
               <th></th>
               <th>New Access</th>
             </tr>
           </thead>
           <tbody>
             {% for a in modifying_access %}
               <tr>
-                <td class="text-nowrap">
-                 <div class="sodar-overflow-container">
+                <td>
                    <a href="{% url 'projectroles:detail' project=a.project.sodar_uuid %}" target="_blank">
                      {% get_project_title_html a.project %}
                    </a>
-                  </div>
                 </td>
                 <td class="text-nowrap text-danger">{% get_remote_access_legend a.old_level %}</td>
-                <td><i class="iconify text-secondary" data-icon="mdi:arrow-left-thick"></i></td>
+                <td><i class="iconify text-secondary" data-icon="mdi:arrow-right-thick"></i></td>
                 <td class="text-nowrap text-success">
                   {% get_remote_access_legend a.new_level %}
                   <input type="hidden"
                          id="sodar-pr-remote-project-confirm-{{ a.project.sodar_uuid }}"
                          name="remote_access_{{ a.project.sodar_uuid }}" value="{{ a.new_level }}" />
                 </td>
               </tr>
```

### Comparing `django-sodar-core-0.12.0/projectroles/templates/projectroles/remotesite_confirm_delete.html` & `django-sodar-core-0.13.0/projectroles/templates/projectroles/remotesite_confirm_delete.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/templates/projectroles/remotesite_form.html` & `django-sodar-core-0.13.0/projectroles/templates/projectroles/remotesite_form.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/templates/projectroles/roleassignment_confirm_delete.html` & `django-sodar-core-0.13.0/projectroles/templates/projectroles/roleassignment_owner_transfer.html`

 * *Files 21% similar despite different names*

```diff
@@ -1,34 +1,37 @@
 {% extends 'projectroles/project_base.html' %}
 
-{% load rules %}
+{% load crispy_forms_filters %}
 {% load projectroles_tags %}
+{% load static %}
 
 {% block title %}
-  Confirm Removal of Member {{ object.user.username }} from {{ object.project.title }}
+  Transfer ownership of {{ project.title }}
 {% endblock title %}
 
 {% block projectroles_extend %}
 
-<div class="container-fluid sodar-page-container">
-  <h3>Confirm Removal of Member {{ object.user.username }}</h3>
-
-  <div class="alert alert-warning" role="alert">
-    Do you really want to remove the role of "{{ object.role.name }}"
-    from user {{ object.user.username }} in {{ object.project.title }}?
-  </div>
+<div class="row sodar-subtitle-container bg-white sticky-top">
+  <h3>Transfer Project Ownership from User {{ current_owner.username }}</h3>
+</div>
 
+<div class="container-fluid sodar-page-container">
   <form method="post">
     {% csrf_token %}
-    <div class="btn-group pull-right">
-      <a role="button" class="btn btn-secondary"
-          href="{{ request.session.real_referer }}">
-        <i class="iconify" data-icon="mdi:arrow-left-circle"></i> Cancel
-      </a>
-      <button type="submit" class="btn btn-danger">
-        <i class="iconify" data-icon="mdi:account-remove"></i> Remove
-      </button>
+    {# Add form.media for DAL #}
+    {{ form.media }}
+    {{ form | crispy }}
+    <div class="row">
+      <div class="btn-group ml-auto">
+        <a role="button" class="btn btn-secondary"
+           href="{{ request.session.real_referer }}">
+          <i class="iconify" data-icon="mdi:arrow-left-circle"></i> Cancel
+        </a>
+        <button type="submit" class="btn btn-primary">
+          <i class="iconify" data-icon="mdi:account-switch"></i> Transfer
+        </button>
+      </div>
     </div>
   </form>
 </div>
 
 {% endblock projectroles_extend %}
```

### Comparing `django-sodar-core-0.12.0/projectroles/templates/projectroles/roleassignment_form.html` & `django-sodar-core-0.13.0/projectroles/templates/projectroles/roleassignment_form.html`

 * *Files 14% similar despite different names*

```diff
@@ -2,25 +2,30 @@
 
 {% load crispy_forms_filters %}
 {% load projectroles_tags %}
 {% load static %}
 
 {% block title %}
   {% if object.pk %}
-    Update Member {{ object.user.username }} in {{ object.project.title }}
+    Update Member {{ object.user.get_form_label }} in {{ object.project.title }}
+  {% elif promote_as %}
+    Promote Member {{ promote_as.user.get_form_label }}
   {% else %}
-    Add Member in {{ project.title }}
+    Add Member
   {% endif %}
+  in {{ project.title }}
 {% endblock title %}
 
 {% block projectroles_extend %}
 
 <div class="row sodar-subtitle-container bg-white sticky-top">
   {% if object.pk %}
-    <h3>Update Member {{ object.user.username }}</h3>
+    <h3>Update Member {{ object.user.get_form_label }}</h3>
+  {% elif promote_as %}
+    <h3>Promote Member {{ promote_as.user.get_form_label }}</h3>
   {% else %}
     <h3>Add Member</h3>
   {% endif %}
 </div>
 
 <div class="container-fluid sodar-page-container">
   <form method="post">
@@ -38,45 +43,47 @@
            id="sodar-pr-email-preview-link"
            data-toggle="modal" data-target="#sodar-modal">
           <i class="iconify" data-icon="mdi:eye"></i> Preview
         </a>
         <button type="submit" class="btn btn-primary">
           {% if object.pk %}
             <i class="iconify" data-icon="mdi:check-bold"></i> Update
+          {% elif promote_as %}
+            <i class="iconify" data-icon="mdi:account-arrow-up"></i> Promote
           {% else %}
             <i class="iconify" data-icon="mdi:account-plus"></i> Add
           {% endif %}
         </button>
       </div>
     </div>
   </form>
 </div>
 
 {% endblock projectroles_extend %}
 
 {% block javascript %}
   {{ block.super }}
   <script type="text/javascript">
-      $(document).ready(function() {
-          $('#sodar-pr-email-preview-link').click(function () {
-              $('.modal-title').text('Email Preview');
-
-              var body = '{{ preview_body }}';
-              var userName = $('#id_user').find('option:selected').text();
-              var userDisplayName = userName.substr(0, userName.indexOf('(') - 1);
-              var roleName = $('#id_role').find('option:selected').text();
-              body = body.replace('{role_name}', roleName);
-              body = body.replace('{user_name}', userDisplayName);
-
-              var htmlData = '<strong>Subject:</strong><pre>{{ preview_subject }}</pre>';
-              htmlData += '<strong>Body:</strong>';
-              htmlData += '<pre id="sodar-email-body">' + body;
-              htmlData += '</pre>';
-
-              $('.modal-body').html(htmlData);
-          });
-      });
+    $(document).ready(function() {
+        $('#sodar-pr-email-preview-link').click(function () {
+            $('.modal-title').text('Email Preview');
+            var body = '{{ preview_body }}';
+            var userName = $('#id_user').find('option:selected').text();
+            if (!userName) {
+                userName = "{{ promote_as.user.get_full_name }}";
+            } else {
+              userName = userName.substr(0, userName.indexOf('(') - 1);
+            }
+            var roleName = $('#id_role').find('option:selected').text();
+            body = body.replace('{role_name}', roleName);
+            body = body.replace('{user_name}', userName);
+            var htmlData = '<strong>Subject:</strong><pre>{{ preview_subject }}</pre>';
+            htmlData += '<strong>Body:</strong>';
+            htmlData += '<pre id="sodar-email-body">' + body;
+            htmlData += '</pre>';
+            $('.modal-body').html(htmlData);
+        });
+    });
   </script>
-
   <!-- DAL redirect event listener -->
   <script type="text/javascript" src="{% static 'projectroles/js/autocomplete_redirect.js' %}"></script>
 {% endblock javascript %}
```

### Comparing `django-sodar-core-0.12.0/projectroles/templates/projectroles/roleassignment_owner_transfer.html` & `django-sodar-core-0.13.0/userprofile/templates/userprofile/settings_form.html`

 * *Files 14% similar despite different names*

```diff
@@ -1,37 +1,45 @@
-{% extends 'projectroles/project_base.html' %}
+{% extends 'projectroles/base.html' %}
 
+{% load rules %}
 {% load crispy_forms_filters %}
 {% load projectroles_tags %}
-{% load static %}
+{% load projectroles_common_tags %}
 
 {% block title %}
-  Transfer ownership of {{ project.title }}
+  Update User Settings
 {% endblock title %}
 
-{% block projectroles_extend %}
-
-<div class="row sodar-subtitle-container bg-white sticky-top">
-  <h3>Transfer Project Ownership from User {{ current_owner.username }}</h3>
-</div>
-
-<div class="container-fluid sodar-page-container">
-  <form method="post">
-    {% csrf_token %}
-    {# Add form.media for DAL #}
-    {{ form.media }}
-    {{ form | crispy }}
-    <div class="row">
-      <div class="btn-group ml-auto">
-        <a role="button" class="btn btn-secondary"
-           href="{{ request.session.real_referer }}">
-          <i class="iconify" data-icon="mdi:arrow-left-circle"></i> Cancel
-        </a>
-        <button type="submit" class="btn btn-primary">
-          <i class="iconify" data-icon="mdi:account-switch"></i> Transfer
-        </button>
-      </div>
+{% block head_extend %}
+  {{ form.media }}
+{% endblock head_extend %}
+
+{% block projectroles %}
+  <div class="row sodar-pr-content-title">
+    <h2 class="sodar-pr-content-title">{{ request.user.get_full_name }}</h2>
+    <div class="sodar-pr-content-title-secondary text-muted">
+      User Profile
     </div>
-  </form>
-</div>
+  </div>
 
-{% endblock projectroles_extend %}
+  <div class="row sodar-subtitle-container">
+    <h3>Update Settings</h3>
+  </div>
+
+  <div class="container-fluid sodar-page-container">
+    <form method="post">
+      {% csrf_token %}
+      {{ form | crispy }}
+      <div class="row">
+        <div class="btn-group ml-auto" role="group">
+          <a role="button" class="btn btn-secondary"
+             href="{{ request.session.real_referer }}">
+            <i class="iconify" data-icon="mdi:arrow-left-circle"></i> Cancel
+          </a>
+          <button type="submit" class="btn btn-primary">
+            <i class="iconify" data-icon="mdi:check-bold"></i> Update
+          </button>
+        </div>
+      </div>
+    </form>
+  </div>
+{% endblock projectroles %}
```

### Comparing `django-sodar-core-0.12.0/projectroles/templates/projectroles/search_advanced.html` & `django-sodar-core-0.13.0/projectroles/templates/projectroles/search_advanced.html`

 * *Files 6% similar despite different names*

```diff
@@ -14,35 +14,36 @@
 <div class="row sodar-pr-content-title">
   <h2 class="sodar-pr-content-title">
     <i class="iconify" data-icon="mdi:layers-search"></i> Advanced Search
   </h2>
 </div>
 
 <div class="container-fluid sodar-page-container">
- <form method="get" action="{% url 'projectroles:search' %}">
-   <div class="form-group">
-     <label for="id_m" class="col-form-label">Search Terms</label>
-     <textarea name="m" cols="40" rows="8" class=" form-control" id="id_m"></textarea>
-     <small class="form-text text-muted">
-       Enter one or more search terms separated by line breaks.
-       Terms shorter than 3 characters will be ignored.
-     </small>
-   </div>
-   <div class="form-group">
-     <label for="id_k" class="col-form-label">Keywords</label>
-     <input type="text" name="k" class="form-control"
-            placeholder="key:value key2:value" id="id_k" />
-     <small class="form-text text-muted">
-       Enter keywords as key/value pairs separated by spaces (optional)
-     </small>
-   </div>
-   <div class="row">
+  <form method="POST">
+    {% csrf_token %}
+    <div class="form-group">
+      <label for="id_m" class="col-form-label">Search Terms</label>
+      <textarea name="m" cols="40" rows="8" class=" form-control" id="id_m"></textarea>
+      <small class="form-text text-muted">
+        Enter one or more search terms separated by line breaks.
+        Terms shorter than 3 characters will be ignored.
+      </small>
+    </div>
+    <div class="form-group">
+      <label for="id_k" class="col-form-label">Keywords</label>
+      <input type="text" name="k" class="form-control"
+             placeholder="key:value key2:value" id="id_k" />
+      <small class="form-text text-muted">
+        Enter keywords as key/value pairs separated by spaces (optional)
+      </small>
+    </div>
+    <div class="row">
       <div class="btn-group ml-auto" role="group">
         <button type="submit" class="btn btn-primary">
           <i class="iconify" data-icon="mdi:search"></i> Search
         </button>
       </div>
     </div>
- </form>
+  </form>
 </div>
 
 {% endblock projectroles %}
```

### Comparing `django-sodar-core-0.12.0/projectroles/templates/projectroles/search_results.html` & `django-sodar-core-0.13.0/projectroles/templates/projectroles/search_results.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/templates/projectroles/user_form.html` & `django-sodar-core-0.13.0/projectroles/templates/projectroles/user_form.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/templatetags/projectroles_common_tags.py` & `django-sodar-core-0.13.0/projectroles/templatetags/projectroles_common_tags.py`

 * *Files 2% similar despite different names*

```diff
@@ -121,21 +121,27 @@
 @register.simple_tag
 def get_display_name(key, title=False, count=1, plural=False):
     """Return display name from SODAR_CONSTANTS"""
     return _get_display_name(key, title, count, plural)
 
 
 @register.simple_tag
-def get_role_display_name(role_as, title=False):
-    """Return display name for role assignment"""
+def get_role_display_name(role_as, project, title=False):
+    """
+    Return display name for role assignment.
+
+    :param role_as: Role assignment
+    :param project: Project object for context (to support inheritance)
+    :param title: Return in title case if True (boolean)
+    """
     role_suffix = role_as.role.name.split(' ')[1]
     if title:
         role_suffix = role_suffix.title()
     return '{} {}'.format(
-        _get_display_name(role_as.project.type, title=title), role_suffix
+        _get_display_name(project.type, title=title), role_suffix
     )
 
 
 @register.simple_tag
 def get_project_title_html(project):
     """Return HTML version of the full project title including parents"""
     ret = ''
@@ -212,15 +218,15 @@
 def get_history_dropdown(obj, project=None):
     """Return link to object timeline events within project"""
     timeline = get_backend_api('timeline_backend')
     if not timeline:
         return ''
     url = timeline.get_object_url(obj, project)
     return (
-        '<a class="dropdown-item" href="{}">\n'
+        '<a class="dropdown-item sodar-pr-role-link-history" href="{}">\n'
         '<i class="iconify" data-icon="mdi:clock-time-eight-outline"></i> '
         'History</a>\n'.format(url)
     )
 
 
 @register.simple_tag
 def highlight_search_term(item, terms):
```

### Comparing `django-sodar-core-0.12.0/projectroles/templatetags/projectroles_tags.py` & `django-sodar-core-0.13.0/projectroles/templatetags/projectroles_tags.py`

 * *Files 6% similar despite different names*

```diff
@@ -1,44 +1,41 @@
 """Template tags for internal use within the projectroles app"""
 
-from math import ceil
-
 from django import template
 from django.conf import settings
 from django.urls import reverse
 from django.utils import timezone
 
+from projectroles.app_settings import AppSettingAPI
 from projectroles.models import (
     RoleAssignment,
     RemoteProject,
     SODAR_CONSTANTS,
-    PROJECT_TAG_STARRED,
 )
 from projectroles.plugins import get_active_plugins
-from projectroles.project_tags import get_tag_state
 
 
 register = template.Library()
+app_settings = AppSettingAPI()
 
 
 # SODAR constants
 PROJECT_TYPE_PROJECT = SODAR_CONSTANTS['PROJECT_TYPE_PROJECT']
 PROJECT_TYPE_CATEGORY = SODAR_CONSTANTS['PROJECT_TYPE_CATEGORY']
 PROJECT_ROLE_OWNER = SODAR_CONSTANTS['PROJECT_ROLE_OWNER']
+PROJECT_ROLE_DELEGATE = SODAR_CONSTANTS['PROJECT_ROLE_DELEGATE']
 REMOTE_LEVEL_NONE = SODAR_CONSTANTS['REMOTE_LEVEL_NONE']
 REMOTE_LEVEL_REVOKED = SODAR_CONSTANTS['REMOTE_LEVEL_REVOKED']
 
 # Local constants
 # Behaviour for certain levels has not been specified/implemented yet
 ACTIVE_LEVEL_TYPES = [
     SODAR_CONSTANTS['REMOTE_LEVEL_NONE'],
     SODAR_CONSTANTS['REMOTE_LEVEL_READ_ROLES'],
 ]
-SIDEBAR_ICON_MIN_SIZE = 18
-SIDEBAR_ICON_MAX_SIZE = 42
 
 
 # SODAR and site operations ----------------------------------------------------
 
 
 @register.simple_tag
 def sodar_constant(value):
@@ -60,22 +57,14 @@
     ret = []
     for p in plugins:
         ret += p.get_messages(user)
     return ret
 
 
 @register.simple_tag
-def has_star(project, user):
-    """Return True/False for project star tag state"""
-    return user.has_perm(
-        'projectroles.view_project', project
-    ) and get_tag_state(project, user, PROJECT_TAG_STARRED)
-
-
-@register.simple_tag
 def get_remote_project_obj(site, project):
     """Return RemoteProject object for RemoteSite and Project"""
     try:
         return RemoteProject.objects.get(
             site=site, project_uuid=project.sodar_uuid
         )
     except RemoteProject.DoesNotExist:
@@ -94,41 +83,32 @@
 
 
 @register.simple_tag
 def is_app_visible(plugin, project, user):
     """Check if app should be visible for user in a specific project"""
     can_view_app = user.has_perm(plugin.app_permission, project)
     app_hidden = False
-    if plugin.name in getattr(settings, 'PROJECTROLES_HIDE_APP_LINKS', []):
+    if plugin.name in getattr(settings, 'PROJECTROLES_HIDE_PROJECT_APPS', []):
+        app_hidden = True
+    # TODO: Remove this in SODAR Core v0.14 (see issue #1143)
+    elif plugin.name in getattr(settings, 'PROJECTROLES_HIDE_APP_LINKS', []):
         app_hidden = True
     if (
         can_view_app
         and not app_hidden
         and (project.type == PROJECT_TYPE_PROJECT or plugin.category_enable)
     ):
         return True
     return False
 
 
 # Template rendering -----------------------------------------------------------
 
 
 @register.simple_tag
-def is_inherited_owner(project, user):
-    """Return True if user is inherited owner"""
-    if (
-        project
-        and user
-        and user in [r.user for r in project.get_owners(inherited_only=True)]
-    ):
-        return True
-    return False
-
-
-@register.simple_tag
 def get_app_link_state(app_plugin, app_name, url_name):
     """
     Return "active" if plugin matches app_name and url_name is found in
     app_plugin.urls.
     """
     if app_name == app_plugin.name and url_name in [
         u.name for u in app_plugin.urls
@@ -194,15 +174,15 @@
         if (
             getattr(settings, 'ENABLE_LDAP_SECONDARY', False)
             and settings.AUTH_LDAP2_DOMAIN_PRINTABLE
         ):
             ret += ' or ' + settings.AUTH_LDAP2_DOMAIN_PRINTABLE
         ret += (
             ' account. Enter your user name as <code>username@{}'
-            '</code>'.format(settings.AUTH_LDAP_USERNAME_DOMAIN)
+            '</code>'.format(getattr(settings, 'AUTH_LDAP_USERNAME_DOMAIN', ''))
         )
         if (
             settings.ENABLE_LDAP_SECONDARY
             and settings.AUTH_LDAP2_USERNAME_DOMAIN
         ):
             ret += ' or <code>username@{}</code>'.format(
                 settings.AUTH_LDAP2_USERNAME_DOMAIN
@@ -278,44 +258,14 @@
 @register.simple_tag
 def get_sidebar_app_legend(title):
     """Return sidebar link legend HTML"""
     return '<br />'.join(title.split(' '))
 
 
 @register.simple_tag
-def get_sidebar_icon_size():
-    """Return sidebar icon size with a min/max limit"""
-    return sorted(
-        [
-            SIDEBAR_ICON_MIN_SIZE,
-            getattr(settings, 'PROJECTROLES_SIDEBAR_ICON_SIZE', 32),
-            SIDEBAR_ICON_MAX_SIZE,
-        ]
-    )[1]
-
-
-@register.simple_tag
-def get_sidebar_notch_pos():
-    """Return sidebar notch position"""
-    return ceil(get_sidebar_icon_size() / 3)
-
-
-@register.simple_tag
-def get_sidebar_notch_size():
-    """Return sidebar notch size"""
-    return min(ceil(get_sidebar_icon_size() / 2), 12)
-
-
-@register.simple_tag
-def get_sidebar_padding():
-    """Return sidebar padding"""
-    return ceil(get_sidebar_icon_size() / 4.5)
-
-
-@register.simple_tag
 def get_admin_warning():
     """Return Django admin warning HTML"""
     ret = (
         '<p class="text-danger">Editing database objects other than users '
         'directly in the Django admin view is <strong>not</strong> '
         'recommended!</p>'
     )
```

### Comparing `django-sodar-core-0.12.0/projectroles/tests/test_app_settings.py` & `django-sodar-core-0.13.0/projectroles/tests/test_app_settings.py`

 * *Files 9% similar despite different names*

```diff
@@ -1,14 +1,18 @@
 """Tests for the project settings API in the projectroles app"""
 
 from test_plus.test import TestCase
 
 from projectroles.models import Role, AppSetting, SODAR_CONSTANTS
 from projectroles.plugins import get_app_plugin
-from projectroles.app_settings import AppSettingAPI
+from projectroles.app_settings import (
+    AppSettingAPI,
+    get_example_setting_default,
+    get_example_setting_options,
+)
 from projectroles.tests.test_models import (
     ProjectMixin,
     RoleAssignmentMixin,
     AppSettingMixin,
 )
 
 
@@ -23,14 +27,15 @@
 PROJECT_TYPE_CATEGORY = SODAR_CONSTANTS['PROJECT_TYPE_CATEGORY']
 PROJECT_TYPE_PROJECT = SODAR_CONSTANTS['PROJECT_TYPE_PROJECT']
 APP_SETTING_SCOPE_PROJECT = SODAR_CONSTANTS['APP_SETTING_SCOPE_PROJECT']
 APP_SETTING_SCOPE_USER = SODAR_CONSTANTS['APP_SETTING_SCOPE_USER']
 APP_SETTING_SCOPE_PROJECT_USER = SODAR_CONSTANTS[
     'APP_SETTING_SCOPE_PROJECT_USER'
 ]
+APP_SETTING_SCOPE_SITE = SODAR_CONSTANTS['APP_SETTING_SCOPE_SITE']
 
 # Local constants
 EXISTING_SETTING = 'project_bool_setting'
 EXAMPLE_APP_NAME = 'example_project_app'
 
 
 class AppSettingInitMixin:
@@ -397,15 +402,15 @@
             project=self.project,
             name=EXISTING_SETTING,
         )
         self.assertIsInstance(setting, AppSetting)
 
     def test_set_undefined(self):
         """Test set() with an undefined setting (should fail)"""
-        with self.assertRaises(KeyError):
+        with self.assertRaises(ValueError):
             app_settings.set(
                 app_name=EXAMPLE_APP_NAME,
                 setting_name='new_setting',
                 value='new',
                 project=self.project,
             )
 
@@ -428,14 +433,25 @@
             setting_name='project_user_str_setting',
             project=self.project,
             user=new_user,
             value=True,
         )
         self.assertEqual(ret, True)
 
+    def test_set_invalid_project_types(self):
+        """Test set() with invalid project types scope"""
+        # Should fail because project_category_bool_setting has CATEGORY scope
+        with self.assertRaises(ValueError):
+            app_settings.set(
+                app_name=EXAMPLE_APP_NAME,
+                setting_name='project_category_bool_setting',
+                project=self.project,
+                value=True,
+            )
+
     def test_validator(self):
         """Test validate() with type BOOLEAN"""
         for setting in self.settings:
             self.assertEqual(
                 app_settings.validate(
                     setting['setting_type'],
                     setting['value'],
@@ -612,14 +628,39 @@
             'project_hidden_json_setting': {
                 'scope': APP_SETTING_SCOPE_PROJECT,
                 'type': 'JSON',
                 'label': 'Hidden JSON setting',
                 'description': 'Example hidden JSON project setting',
                 'user_modifiable': False,
             },
+            'project_callable_setting': {
+                'scope': APP_SETTING_SCOPE_PROJECT,
+                'type': 'STRING',
+                'label': 'Callable project setting',
+                'default': get_example_setting_default,
+                'description': 'Example callable project setting',
+            },
+            'project_callable_setting_options': {
+                'scope': APP_SETTING_SCOPE_PROJECT,
+                'type': 'STRING',
+                'label': 'Callable setting with options',
+                'default': get_example_setting_default,
+                'options': get_example_setting_options,
+                'description': 'Example callable project setting with options',
+                'user_modifiable': True,
+            },
+            'project_category_bool_setting': {
+                'scope': SODAR_CONSTANTS['APP_SETTING_SCOPE_PROJECT'],
+                'type': 'BOOLEAN',
+                'label': 'Category boolean setting',
+                'default': False,
+                'description': 'Example boolean project category setting',
+                'user_modifiable': True,
+                'project_types': [PROJECT_TYPE_CATEGORY],
+            },
         }
         defs = app_settings.get_definitions(
             APP_SETTING_SCOPE_PROJECT, app_name=EXAMPLE_APP_NAME
         )
         self.assertEqual(defs, expected)
 
     def test_get_defs_user(self):
@@ -687,14 +728,30 @@
             'user_hidden_setting': {
                 'scope': APP_SETTING_SCOPE_USER,
                 'type': 'STRING',
                 'default': '',
                 'description': 'Example hidden user setting',
                 'user_modifiable': False,
             },
+            'user_callable_setting': {
+                'scope': APP_SETTING_SCOPE_USER,
+                'type': 'STRING',
+                'label': 'Callable user setting',
+                'default': get_example_setting_default,
+                'description': 'Example callable user setting',
+            },
+            'user_callable_setting_options': {
+                'scope': APP_SETTING_SCOPE_USER,
+                'type': 'STRING',
+                'label': 'Callable setting with options',
+                'default': get_example_setting_default,
+                'options': get_example_setting_options,
+                'description': 'Example callable user setting with options',
+                'user_modifiable': True,
+            },
         }
         defs = app_settings.get_definitions(
             APP_SETTING_SCOPE_USER, app_name=EXAMPLE_APP_NAME
         )
         self.assertEqual(defs, expected)
 
     def test_get_defs_project_user(self):
@@ -705,47 +762,81 @@
                 'type': 'STRING',
                 'default': '',
                 'description': 'Example string project user setting',
             },
             'project_user_int_setting': {
                 'scope': SODAR_CONSTANTS['APP_SETTING_SCOPE_PROJECT_USER'],
                 'type': 'INTEGER',
-                'default': '',
+                'default': 0,
                 'description': 'Example int project user setting',
             },
             'project_user_bool_setting': {
                 'scope': SODAR_CONSTANTS['APP_SETTING_SCOPE_PROJECT_USER'],
                 'type': 'BOOLEAN',
-                'default': '',
+                'default': False,
                 'description': 'Example bool project user setting',
             },
             'project_user_json_setting': {
                 'scope': SODAR_CONSTANTS['APP_SETTING_SCOPE_PROJECT_USER'],
                 'type': 'JSON',
-                'default': '',
+                'default': {
+                    'Example': 'Value',
+                    'list': [1, 2, 3, 4, 5],
+                    'level_6': False,
+                },
                 'description': 'Example json project user setting',
             },
+            'project_user_callable_setting': {
+                'scope': SODAR_CONSTANTS['APP_SETTING_SCOPE_PROJECT_USER'],
+                'type': 'STRING',
+                'default': get_example_setting_default,
+                'description': 'Example callable project user setting',
+            },
+            'project_user_callable_setting_options': {
+                'scope': SODAR_CONSTANTS['APP_SETTING_SCOPE_PROJECT_USER'],
+                'type': 'STRING',
+                'default': get_example_setting_default,
+                'options': get_example_setting_options,
+                'description': 'Example callable project user setting with options',
+            },
         }
         defs = app_settings.get_definitions(
             APP_SETTING_SCOPE_PROJECT_USER, app_name=EXAMPLE_APP_NAME
         )
         self.assertEqual(defs, expected)
 
+    def test_get_defs_site(self):
+        """Test get_defs() with the SITE scope"""
+        expected = {
+            'site_bool_setting': {
+                'scope': SODAR_CONSTANTS['APP_SETTING_SCOPE_SITE'],
+                'label': 'Site boolean setting',
+                'type': 'BOOLEAN',
+                'default': False,
+                'description': 'Example boolean site setting',
+                'user_modifiable': True,
+            }
+        }
+        defs = app_settings.get_definitions(
+            APP_SETTING_SCOPE_SITE, app_name=EXAMPLE_APP_NAME
+        )
+        self.assertEqual(defs, expected)
+
     def test_get_defs_modifiable(self):
         """Test get_defs() with the user_modifiable arg"""
         defs = app_settings.get_definitions(
             APP_SETTING_SCOPE_PROJECT, app_name=EXAMPLE_APP_NAME
         )
-        self.assertEqual(len(defs), 9)
+        self.assertEqual(len(defs), 12)
         defs = app_settings.get_definitions(
             APP_SETTING_SCOPE_PROJECT,
             app_name=EXAMPLE_APP_NAME,
             user_modifiable=True,
         )
-        self.assertEqual(len(defs), 7)
+        self.assertEqual(len(defs), 10)
 
     def test_get_defs_invalid_scope(self):
         """Test get_defs() with an invalid scope"""
         with self.assertRaises(ValueError):
             app_settings.get_definitions(
                 'Ri4thai8aez5ooRa', app_name=EXAMPLE_APP_NAME
             )
@@ -770,20 +861,76 @@
         self.assertEqual(defaults[prefix + 'user_int_setting'], 0)
         self.assertEqual(defaults[prefix + 'user_bool_setting'], False)
         self.assertEqual(
             defaults[prefix + 'user_json_setting'],
             {'Example': 'Value', 'list': [1, 2, 3, 4, 5], 'level_6': False},
         )
 
-    def test_delete_scope_user_params_none(self):
-        """Test delete() with USER scope and no params"""
+    def test_get_defaults_project_user(self):
+        """Test get_defaults() with the PROJECT_USER scope"""
+        prefix = 'settings.{}.'.format(EXAMPLE_APP_NAME)
+        defaults = app_settings.get_defaults(APP_SETTING_SCOPE_PROJECT_USER)
+        self.assertEqual(defaults[prefix + 'project_user_str_setting'], '')
+        self.assertEqual(defaults[prefix + 'project_user_int_setting'], 0)
+        self.assertEqual(defaults[prefix + 'project_user_bool_setting'], False)
+        self.assertEqual(
+            defaults[prefix + 'project_user_json_setting'],
+            {'Example': 'Value', 'list': [1, 2, 3, 4, 5], 'level_6': False},
+        )
+
+    def test_get_defaults_site(self):
+        """Test get_defaults() with the SITE scope"""
+        prefix = 'settings.{}.'.format(EXAMPLE_APP_NAME)
+        defaults = app_settings.get_defaults(APP_SETTING_SCOPE_SITE)
+        self.assertEqual(defaults[prefix + 'site_bool_setting'], False)
+
+    def test_delete_scope_project_params_none(self):
+        """Test delete() with PROJECT scope and no params (should fail)"""
         self.assertEqual(AppSetting.objects.count(), 16)
-        app_settings.delete(EXAMPLE_APP_NAME, 'user_str_setting')
+        with self.assertRaises(ValueError):
+            app_settings.delete(
+                EXAMPLE_APP_NAME,
+                'project_str_setting',
+            )
+
+    def test_delete_scope_project_params_user(self):
+        """Test delete() with PROJECT scope and user param"""
+        with self.assertRaises(ValueError):
+            app_settings.delete(
+                EXAMPLE_APP_NAME,
+                'project_str_setting',
+                user=self.user,
+            )
+
+    def test_delete_scope_project_params_project(self):
+        """Test delete() with PROJECT scope and project param"""
+        self.assertEqual(AppSetting.objects.count(), 16)
+        app_settings.delete(
+            EXAMPLE_APP_NAME,
+            'project_str_setting',
+            project=self.project,
+        )
         self.assertEqual(AppSetting.objects.count(), 15)
 
+    def test_delete_scope_project_params_user_project(self):
+        """Test delete() with PROJECT scope and user/project params"""
+        with self.assertRaises(ValueError):
+            app_settings.delete(
+                EXAMPLE_APP_NAME,
+                'project_str_setting',
+                project=self.project,
+                user=self.user,
+            )
+
+    def test_delete_scope_user_params_none(self):
+        """Test delete() with USER scope and no params (should fail)"""
+        self.assertEqual(AppSetting.objects.count(), 16)
+        with self.assertRaises(ValueError):
+            app_settings.delete(EXAMPLE_APP_NAME, 'user_str_setting')
+
     def test_delete_scope_user_params_user(self):
         """Test delete() with USER scope and user param"""
         self.assertEqual(AppSetting.objects.count(), 16)
         app_settings.delete(
             EXAMPLE_APP_NAME, 'user_str_setting', user=self.user
         )
         self.assertEqual(AppSetting.objects.count(), 15)
@@ -802,82 +949,112 @@
                 EXAMPLE_APP_NAME,
                 'user_str_setting',
                 project=self.project,
                 user=self.user,
             )
 
     def test_delete_scope_project_user_params_none(self):
-        """Test delete() with PROJECT_USER scope and no params"""
+        """Test delete() with PROJECT_USER scope and no params (should fail)"""
+        self.assertEqual(AppSetting.objects.count(), 16)
+        with self.assertRaises(ValueError):
+            app_settings.delete(
+                EXAMPLE_APP_NAME,
+                'project_user_str_setting',
+                project=None,
+                user=None,
+            )
         self.assertEqual(AppSetting.objects.count(), 16)
-        app_settings.delete(EXAMPLE_APP_NAME, 'project_user_str_setting')
-        self.assertEqual(AppSetting.objects.count(), 15)
 
     def test_delete_scope_project_user_params_user(self):
-        """Test delete() with PROJECT_USER scope and user param"""
+        """Test delete() with PROJECT_USER scope and user param (should fail)"""
+        self.assertEqual(AppSetting.objects.count(), 16)
+        with self.assertRaises(ValueError):
+            app_settings.delete(
+                EXAMPLE_APP_NAME,
+                'project_user_str_setting',
+                project=None,
+                user=self.user,
+            )
         self.assertEqual(AppSetting.objects.count(), 16)
-        app_settings.delete(
-            EXAMPLE_APP_NAME,
-            'project_user_str_setting',
-            project=self.project,
-            user=self.user,
-        )
-        self.assertEqual(AppSetting.objects.count(), 15)
 
     def test_delete_scope_project_user_params_project(self):
         """Test delete() with PROJECT_USER scope and project param"""
         self.assertEqual(AppSetting.objects.count(), 16)
         app_settings.delete(
             EXAMPLE_APP_NAME,
             'project_user_str_setting',
             project=self.project,
-            user=self.user,
         )
         self.assertEqual(AppSetting.objects.count(), 15)
 
     def test_delete_scope_project_user_params_user_project(self):
         """Test delete() with PROJECT_USER scope and user/project params"""
         self.assertEqual(AppSetting.objects.count(), 16)
         app_settings.delete(
             EXAMPLE_APP_NAME,
             'project_user_str_setting',
             project=self.project,
             user=self.user,
         )
         self.assertEqual(AppSetting.objects.count(), 15)
 
-    def test_delete_scope_project_params_none(self):
-        """Test delete() with PROJECT scope and no params"""
+    def test_delete_by_scope(self):
+        """Test delete_by_scope() method"""
         self.assertEqual(AppSetting.objects.count(), 16)
-        app_settings.delete(
-            EXAMPLE_APP_NAME,
-            'project_str_setting',
+        # Delete PROJECT_USER scope settings
+        app_settings.delete_by_scope(
+            APP_SETTING_SCOPE_PROJECT_USER,
+            project=self.project,
+            user=self.user,
         )
-        self.assertEqual(AppSetting.objects.count(), 15)
+        self.assertEqual(AppSetting.objects.count(), 12)
+        # Delete PROJECT scope settings
+        app_settings.delete_by_scope(
+            APP_SETTING_SCOPE_USER,
+            user=self.user,
+        )
+        self.assertEqual(AppSetting.objects.count(), 6)
+        # Delete USER scope settings
+        app_settings.delete_by_scope(
+            APP_SETTING_SCOPE_PROJECT,
+            project=self.project,
+        )
+        self.assertEqual(AppSetting.objects.count(), 0)
 
-    def test_delete_scope_project_params_user(self):
-        """Test delete() with PROJECT scope and user param"""
+    def test_delete_by_scope_param_project(self):
+        """Test delete_by_scope() method with invalid Project params"""
         with self.assertRaises(ValueError):
-            app_settings.delete(
-                EXAMPLE_APP_NAME,
-                'project_str_setting',
+            app_settings.delete_by_scope(
+                APP_SETTING_SCOPE_PROJECT,
+                project=self.project,
                 user=self.user,
             )
 
-    def test_delete_scope_project_params_project(self):
-        """Test delete() with PROJECT scope and project param"""
-        self.assertEqual(AppSetting.objects.count(), 16)
-        app_settings.delete(
-            EXAMPLE_APP_NAME,
-            'project_str_setting',
-            project=self.project,
-        )
-        self.assertEqual(AppSetting.objects.count(), 15)
-
-    def test_delete_scope_project_params_user_project(self):
-        """Test delete() with PROJECT scope and user/project params"""
+    def test_delete_by_scope_param_user(self):
+        """Test delete_by_scope() method with invalid User params"""
         with self.assertRaises(ValueError):
-            app_settings.delete(
-                EXAMPLE_APP_NAME,
-                'project_str_setting',
+            app_settings.delete_by_scope(
+                APP_SETTING_SCOPE_USER,
                 project=self.project,
                 user=self.user,
             )
+
+    def test_validate_form_app_settings(self):
+        """Test validate_form_app_settings() method on valid app_setting"""
+        app_plugin = get_app_plugin(EXAMPLE_APP_NAME)
+        valid_setting = {'valid_setting': True}
+        errors = app_plugin.validate_form_app_settings(
+            valid_setting, project=self.project, user=self.user
+        )
+        self.assertEqual(errors, None)
+
+    def test_validate_form_app_settings_user_scope_error(self):
+        """Test validate_form_app_settings() method on invalid app_setting"""
+        app_plugin = get_app_plugin(EXAMPLE_APP_NAME)
+        settings = {'project_hidden_setting': 'Example project hidden setting'}
+        errors = app_plugin.validate_form_app_settings(
+            settings, project=self.project
+        )
+        self.assertIsNotNone(errors)
+        self.assertIn(
+            'Invalid value for a custom validation method', errors.values()
+        )
```

### Comparing `django-sodar-core-0.12.0/projectroles/tests/test_commands.py` & `django-sodar-core-0.13.0/projectroles/tests/test_commands.py`

 * *Files 12% similar despite different names*

```diff
@@ -7,27 +7,35 @@
 from django.core import mail
 from django.core.management import call_command
 from django.test import override_settings
 from djangoplugins.models import Plugin
 
 from test_plus.test import TestCase
 
-from projectroles.management.commands.cleanappsettings import START_MSG, END_MSG
+from projectroles.management.commands.cleanappsettings import (
+    START_MSG,
+    END_MSG,
+    DEFINITION_NOT_FOUND_MSG,
+    ALLOWED_TYPES_MSG,
+    DELETE_PREFIX_MSG,
+    DELETE_PROJECT_TYPE_MSG,
+    DELETE_SCOPE_MSG,
+)
 from projectroles.management.commands.batchupdateroles import (
     Command as BatchUpdateRolesCommand,
 )
 from projectroles.models import (
-    Role,
     RoleAssignment,
     ProjectInvite,
     AppSetting,
     SODAR_CONSTANTS,
 )
 from projectroles.tests.test_models import (
     ProjectMixin,
+    RoleMixin,
     RoleAssignmentMixin,
     ProjectInviteMixin,
     AppSettingMixin,
 )
 
 # SODAR constants
 PROJECT_ROLE_OWNER = SODAR_CONSTANTS['PROJECT_ROLE_OWNER']
@@ -54,34 +62,26 @@
             bytes('\n'.join([';'.join(r) for r in data]), encoding='utf-8')
         )
         self.file.close()
 
 
 class TestBatchUpdateRoles(
     ProjectMixin,
+    RoleMixin,
     RoleAssignmentMixin,
     ProjectInviteMixin,
     BatchUpdateRolesMixin,
     TestCase,
 ):
     """Tests for batchupdateroles command"""
 
     def setUp(self):
         super().setUp()
-
         # Init roles
-        self.role_owner = Role.objects.get_or_create(name=PROJECT_ROLE_OWNER)[0]
-        self.role_delegate = Role.objects.get_or_create(
-            name=PROJECT_ROLE_DELEGATE
-        )[0]
-        self.role_contributor = Role.objects.get_or_create(
-            name=PROJECT_ROLE_CONTRIBUTOR
-        )[0]
-        self.role_guest = Role.objects.get_or_create(name=PROJECT_ROLE_GUEST)[0]
-
+        self.init_roles()
         # Init users
         self.user_owner = self.make_user('owner')
         self.user_owner.email = 'owner_user@example.com'
         self.user_owner.save()
         self.user_owner_cat = self.make_user('owner_cat')
         self.user_owner_cat.email = 'cat_owner_user@example.com'
         self.user_owner_cat.save()
@@ -95,88 +95,86 @@
         )
         self.project = self.make_project(
             'sub_project', PROJECT_TYPE_PROJECT, self.category
         )
         self.owner_as = self.make_assignment(
             self.project, self.user_owner, self.role_owner
         )
+        # Save UUIDs for easy access
+        self.category_uuid = str(self.category.sodar_uuid)
+        self.project_uuid = str(self.project.sodar_uuid)
 
         # Init command class
         self.command = BatchUpdateRolesCommand()
         # Init file
         self.file = NamedTemporaryFile(delete=False)
 
     def tearDown(self):
         if self.file:
             os.remove(self.file.name)
         super().tearDown()
 
     def test_invite(self):
         """Test inviting a single user via email to project"""
-        p_uuid = str(self.project.sodar_uuid)
         email = 'new@example.com'
         self.assertEqual(ProjectInvite.objects.count(), 0)
 
-        self.write_file([p_uuid, email, PROJECT_ROLE_GUEST])
+        self.write_file([self.project_uuid, email, PROJECT_ROLE_GUEST])
         self.command.handle(
             **{'file': self.file.name, 'issuer': self.user_owner.username}
         )
 
         self.assertEqual(ProjectInvite.objects.count(), 1)
         invite = ProjectInvite.objects.first()
         self.assertEqual(invite.email, email)
         self.assertEqual(invite.project, self.project)
         self.assertEqual(invite.role, self.role_guest)
         self.assertEqual(invite.issuer, self.user_owner)
         self.assertEqual(len(mail.outbox), 1)
 
     def test_invite_existing(self):
         """Test inviting a user when they already have an active invite"""
-        p_uuid = str(self.project.sodar_uuid)
         email = 'new@example.com'
         self.make_invite(email, self.project, self.role_guest, self.user_owner)
         self.assertEqual(ProjectInvite.objects.count(), 1)
 
-        self.write_file([p_uuid, email, PROJECT_ROLE_GUEST])
+        self.write_file([self.project_uuid, email, PROJECT_ROLE_GUEST])
         self.command.handle(
             **{'file': self.file.name, 'issuer': self.user_owner.username}
         )
 
         self.assertEqual(ProjectInvite.objects.count(), 1)
         self.assertEqual(len(mail.outbox), 0)
 
     def test_invite_multi_user(self):
         """Test inviting multiple users"""
-        p_uuid = str(self.project.sodar_uuid)
         email = 'new@example.com'
         email2 = 'new2@example.com'
         self.assertEqual(ProjectInvite.objects.count(), 0)
 
         fd = [
-            [p_uuid, email, PROJECT_ROLE_GUEST],
-            [p_uuid, email2, PROJECT_ROLE_GUEST],
+            [self.project_uuid, email, PROJECT_ROLE_GUEST],
+            [self.project_uuid, email2, PROJECT_ROLE_GUEST],
         ]
         self.write_file(fd)
         self.command.handle(
             **{'file': self.file.name, 'issuer': self.user_owner.username}
         )
 
         self.assertEqual(ProjectInvite.objects.count(), 2)
         self.assertEqual(len(mail.outbox), 2)
 
     def test_invite_multi_project(self):
         """Test inviting user to multiple projects"""
-        c_uuid = str(self.category.sodar_uuid)
-        p_uuid = str(self.project.sodar_uuid)
         email = 'new@example.com'
         self.assertEqual(ProjectInvite.objects.count(), 0)
 
         fd = [
-            [c_uuid, email, PROJECT_ROLE_GUEST],
-            [p_uuid, email, PROJECT_ROLE_GUEST],
+            [self.category_uuid, email, PROJECT_ROLE_GUEST],
+            [self.project_uuid, email, PROJECT_ROLE_GUEST],
         ]
         self.write_file(fd)
         # NOTE: Using user_owner_cat as they have perms for both projects
         self.command.handle(
             **{'file': self.file.name, 'issuer': self.user_owner_cat.username}
         )
 
@@ -186,117 +184,112 @@
         self.assertEqual(
             ProjectInvite.objects.filter(project=self.project).count(), 1
         )
         self.assertEqual(len(mail.outbox), 2)
 
     def test_invite_owner(self):
         """Test inviting an owner (should fail)"""
-        p_uuid = str(self.project.sodar_uuid)
-        email = 'new@example.com'
-        self.write_file([p_uuid, email, PROJECT_ROLE_OWNER])
+        self.write_file(
+            [self.project_uuid, 'new@example.com', PROJECT_ROLE_OWNER]
+        )
         self.command.handle(
             **{'file': self.file.name, 'issuer': self.user_owner.username}
         )
         self.assertEqual(ProjectInvite.objects.count(), 0)
         self.assertEqual(len(mail.outbox), 0)
 
     def test_invite_delegate(self):
         """Test inviting a delegate"""
-        p_uuid = str(self.project.sodar_uuid)
-        email = 'new@example.com'
-        self.write_file([p_uuid, email, PROJECT_ROLE_DELEGATE])
+        self.write_file(
+            [self.project_uuid, 'new@example.com', PROJECT_ROLE_DELEGATE]
+        )
         self.command.handle(
             **{'file': self.file.name, 'issuer': self.user_owner.username}
         )
         self.assertEqual(ProjectInvite.objects.count(), 1)
         self.assertEqual(len(mail.outbox), 1)
 
     @override_settings(PROJECTROLES_DELEGATE_LIMIT=2)
     def test_invite_delegate_no_perms(self):
         """Test inviting a delegate without perms (should fail)"""
-        p_uuid = str(self.project.sodar_uuid)
-        email = 'new@example.com'
         user_delegate = self.make_user('delegate')
         self.make_assignment(self.project, user_delegate, self.role_delegate)
-        self.write_file([p_uuid, email, PROJECT_ROLE_DELEGATE])
+        self.write_file(
+            [self.project_uuid, 'new@example.com', PROJECT_ROLE_DELEGATE]
+        )
         self.command.handle(
             **{'file': self.file.name, 'issuer': user_delegate.username}
         )
         self.assertEqual(ProjectInvite.objects.count(), 0)
         self.assertEqual(len(mail.outbox), 0)
 
     def test_invite_delegate_limit(self):
         """Test inviting a delegate with limit reached (should fail)"""
-        p_uuid = str(self.project.sodar_uuid)
-        email = 'new@example.com'
         user_delegate = self.make_user('delegate')
         self.make_assignment(self.project, user_delegate, self.role_delegate)
-
-        self.write_file([p_uuid, email, PROJECT_ROLE_DELEGATE])
+        self.write_file(
+            [self.project_uuid, 'new@example.com', PROJECT_ROLE_DELEGATE]
+        )
         self.command.handle(
             **{'file': self.file.name, 'issuer': self.user_owner.username}
         )
-
         self.assertEqual(ProjectInvite.objects.count(), 0)
         self.assertEqual(len(mail.outbox), 0)
 
     def test_role_add(self):
         """Test adding role to user already in system"""
-        p_uuid = str(self.project.sodar_uuid)
         email = 'new@example.com'
         user_new = self.make_user('user_new')
         user_new.email = email
         user_new.save()
         self.assertEqual(ProjectInvite.objects.count(), 0)
 
-        self.write_file([p_uuid, email, PROJECT_ROLE_GUEST])
+        self.write_file([self.project_uuid, email, PROJECT_ROLE_GUEST])
         self.command.handle(
             **{'file': self.file.name, 'issuer': self.user_owner.username}
         )
 
         self.assertEqual(ProjectInvite.objects.count(), 0)
         role_as = RoleAssignment.objects.get(
             project=self.project, user=user_new
         )
         self.assertEqual(role_as.role, self.role_guest)
         self.assertEqual(len(mail.outbox), 1)
 
     def test_role_update(self):
         """Test updating an existing role for user"""
-        p_uuid = str(self.project.sodar_uuid)
         email = 'new@example.com'
         user_new = self.make_user('user_new')
         user_new.email = email
         user_new.save()
         role_as = self.make_assignment(self.project, user_new, self.role_guest)
         self.assertEqual(
             RoleAssignment.objects.filter(
                 project=self.project, user=user_new
             ).count(),
             1,
         )
 
-        self.write_file([p_uuid, email, PROJECT_ROLE_CONTRIBUTOR])
+        self.write_file([self.project_uuid, email, PROJECT_ROLE_CONTRIBUTOR])
         self.command.handle(
             **{'file': self.file.name, 'issuer': self.user_owner.username}
         )
 
         self.assertEqual(ProjectInvite.objects.count(), 0)
         role_as.refresh_from_db()
         self.assertEqual(role_as.role, self.role_contributor)
         self.assertEqual(len(mail.outbox), 1)
 
     def test_role_update_owner(self):
         """Test updating the role of current owner (should fail)"""
-        p_uuid = str(self.project.sodar_uuid)
         email = 'owner@example.com'
         self.user_owner.email = email
         self.user_owner.save()
 
-        self.write_file([p_uuid, email, PROJECT_ROLE_CONTRIBUTOR])
+        self.write_file([self.project_uuid, email, PROJECT_ROLE_CONTRIBUTOR])
         self.command.handle(
             **{'file': self.file.name, 'issuer': self.user_owner.username}
         )
 
         self.assertEqual(ProjectInvite.objects.count(), 0)
         self.owner_as.refresh_from_db()
         self.assertEqual(self.owner_as.role, self.role_owner)
@@ -307,86 +300,158 @@
             1,
         )
         self.assertEqual(len(mail.outbox), 0)
 
     @override_settings(PROJECTROLES_DELEGATE_LIMIT=2)
     def test_role_update_delegate_no_perms(self):
         """Test updating a delegate role without perms (should fail)"""
-        p_uuid = str(self.project.sodar_uuid)
         email = 'new@example.com'
         user_new = self.make_user('user_new')
         user_new.email = email
         user_new.save()
         role_as = self.make_assignment(self.project, user_new, self.role_guest)
         user_delegate = self.make_user('delegate')
         self.make_assignment(self.project, user_delegate, self.role_delegate)
 
-        self.write_file([p_uuid, email, PROJECT_ROLE_DELEGATE])
+        self.write_file([self.project_uuid, email, PROJECT_ROLE_DELEGATE])
         self.command.handle(
             **{'file': self.file.name, 'issuer': user_delegate.username}
         )
 
         self.assertEqual(ProjectInvite.objects.count(), 0)
         role_as.refresh_from_db()
         self.assertEqual(role_as.role, self.role_guest)
         self.assertEqual(len(mail.outbox), 0)
 
     def test_role_update_delegate_limit(self):
         """Test updating a delegate role with limit reached (should fail)"""
-        p_uuid = str(self.project.sodar_uuid)
         email = 'new@example.com'
         user_new = self.make_user('user_new')
         user_new.email = email
         user_new.save()
         role_as = self.make_assignment(self.project, user_new, self.role_guest)
         user_delegate = self.make_user('delegate')
         self.make_assignment(self.project, user_delegate, self.role_delegate)
 
-        self.write_file([p_uuid, email, PROJECT_ROLE_DELEGATE])
+        self.write_file([self.project_uuid, email, PROJECT_ROLE_DELEGATE])
         self.command.handle(
             **{'file': self.file.name, 'issuer': self.user_owner.username}
         )
 
         self.assertEqual(ProjectInvite.objects.count(), 0)
         role_as.refresh_from_db()
         self.assertEqual(role_as.role, self.role_guest)
         self.assertEqual(len(mail.outbox), 0)
 
     def test_role_add_inherited_owner(self):
-        """Test adding a role of an inherited owner (should fail)"""
-        p_uuid = str(self.project.sodar_uuid)
-        email = self.user_owner_cat.email
-
-        self.write_file([p_uuid, email, PROJECT_ROLE_CONTRIBUTOR])
+        """Test adding role with inherited owner rank (should fail)"""
+        self.write_file(
+            [
+                self.project_uuid,
+                self.user_owner_cat.email,
+                PROJECT_ROLE_CONTRIBUTOR,
+            ]
+        )
         self.command.handle(
             **{'file': self.file.name, 'issuer': self.user_owner.username}
         )
 
         self.assertEqual(ProjectInvite.objects.count(), 0)
         self.assertEqual(
             RoleAssignment.objects.filter(
                 project=self.project, user=self.user_owner_cat
             ).count(),
             0,
         )
         self.assertEqual(len(mail.outbox), 0)
 
+    def test_role_add_inherited_higher(self):
+        """Test adding role with inherited role of higher rank"""
+        user_new = self.make_user('user_new')
+        user_new.email = 'user_new@example.com'
+        self.make_assignment(self.category, user_new, self.role_guest)
+
+        self.write_file(
+            [
+                self.project_uuid,
+                user_new.email,
+                PROJECT_ROLE_CONTRIBUTOR,
+            ]
+        )
+        self.command.handle(
+            **{'file': self.file.name, 'issuer': self.user_owner.username}
+        )
+
+        self.assertEqual(ProjectInvite.objects.count(), 0)
+        self.assertEqual(
+            RoleAssignment.objects.filter(
+                project=self.project, user=user_new
+            ).count(),
+            0,
+        )
+        self.assertEqual(len(mail.outbox), 0)
+
+    def test_role_add_inherited_equal(self):
+        """Test adding role with inherited role of equal rank (should fail)"""
+        user_new = self.make_user('user_new')
+        user_new.email = 'user_new@example.com'
+        self.make_assignment(self.category, user_new, self.role_contributor)
+
+        self.write_file(
+            [
+                self.project_uuid,
+                user_new.email,
+                PROJECT_ROLE_CONTRIBUTOR,
+            ]
+        )
+        self.command.handle(
+            **{'file': self.file.name, 'issuer': self.user_owner.username}
+        )
+
+        self.assertEqual(ProjectInvite.objects.count(), 0)
+        self.assertEqual(
+            RoleAssignment.objects.filter(
+                project=self.project, user=user_new
+            ).count(),
+            0,
+        )
+        self.assertEqual(len(mail.outbox), 0)
+
+    def test_role_add_inherited_lower(self):
+        """Test adding role with inherited role of lower rank (should fail)"""
+        user_new = self.make_user('user_new')
+        user_new.email = 'user_new@example.com'
+        self.make_assignment(self.category, user_new, self.role_contributor)
+
+        self.write_file([self.project_uuid, user_new.email, PROJECT_ROLE_GUEST])
+        self.command.handle(
+            **{'file': self.file.name, 'issuer': self.user_owner.username}
+        )
+
+        self.assertEqual(ProjectInvite.objects.count(), 0)
+        self.assertEqual(
+            RoleAssignment.objects.filter(
+                project=self.project, user=user_new
+            ).count(),
+            0,
+        )
+        self.assertEqual(len(mail.outbox), 0)
+
     def test_invite_and_update(self):
         """Test inviting and updating in one command"""
-        p_uuid = str(self.project.sodar_uuid)
         email = 'new@example.com'
         user_new = self.make_user('user_new')
         user_new.email = email
         user_new.save()
         email2 = 'new2@example.com'
         self.assertEqual(ProjectInvite.objects.count(), 0)
 
         fd = [
-            [p_uuid, email, PROJECT_ROLE_GUEST],
-            [p_uuid, email2, PROJECT_ROLE_GUEST],
+            [self.project_uuid, email, PROJECT_ROLE_GUEST],
+            [self.project_uuid, email2, PROJECT_ROLE_GUEST],
         ]
         self.write_file(fd)
         self.command.handle(
             **{'file': self.file.name, 'issuer': self.user_owner.username}
         )
 
         self.assertEqual(ProjectInvite.objects.count(), 1)
@@ -399,68 +464,41 @@
         self.assertEqual(len(mail.outbox), 2)
 
     def test_command_no_issuer(self):
         """Test invite without issuer (should go under admin)"""
         admin = self.make_user(settings.PROJECTROLES_DEFAULT_ADMIN)
         admin.is_superuser = True
         admin.save()
-        p_uuid = str(self.project.sodar_uuid)
         email = 'new@example.com'
-
-        self.write_file([p_uuid, email, PROJECT_ROLE_GUEST])
+        self.write_file([self.project_uuid, email, PROJECT_ROLE_GUEST])
         self.command.handle(**{'file': self.file.name, 'issuer': None})
-
         invite = ProjectInvite.objects.first()
         self.assertEqual(invite.issuer, admin)
 
     def test_command_no_perms(self):
         """Test invite with issuer who lacks permissions for a project"""
         issuer = self.make_user('issuer')
-        p_uuid = str(self.project.sodar_uuid)
         email = 'new@example.com'
-
-        self.write_file([p_uuid, email, PROJECT_ROLE_GUEST])
+        self.write_file([self.project_uuid, email, PROJECT_ROLE_GUEST])
         self.command.handle(
             **{'file': self.file.name, 'issuer': issuer.username}
         )
-
         self.assertEqual(ProjectInvite.objects.count(), 0)
         self.assertEqual(len(mail.outbox), 0)
 
 
 class TestCleanAppSettings(
-    ProjectMixin, RoleAssignmentMixin, AppSettingMixin, TestCase
+    ProjectMixin, RoleMixin, RoleAssignmentMixin, AppSettingMixin, TestCase
 ):
     """Tests for cleanappsettings command and associated functions"""
 
-    def _make_undefined_setting(self):
-        """Create database setting not reflected in the AppSetting dict"""
-        ghost = AppSetting(
-            app_plugin=self.plugin,
-            project=self.project,
-            name='ghost',
-            type='BOOLEAN',
-            value=True,
-        )
-        ghost.save()
-        return ghost
-
     def setUp(self):
         super().setUp()
-
         # Init roles
-        self.role_owner = Role.objects.get_or_create(name=PROJECT_ROLE_OWNER)[0]
-        self.role_delegate = Role.objects.get_or_create(
-            name=PROJECT_ROLE_DELEGATE
-        )[0]
-        self.role_contributor = Role.objects.get_or_create(
-            name=PROJECT_ROLE_CONTRIBUTOR
-        )[0]
-        self.role_guest = Role.objects.get_or_create(name=PROJECT_ROLE_GUEST)[0]
-
+        self.init_roles()
         # Init users
         self.user_owner = self.make_user('owner')
         self.user_owner.email = 'owner_user@example.com'
         self.user_owner.save()
 
         # Init projects
         self.category = self.make_project(
@@ -540,29 +578,128 @@
                 name=s['name'],
                 setting_type=s['setting_type'],
                 value=s['value'] if s['setting_type'] != 'JSON' else '',
                 value_json=s['value'] if s['setting_type'] == 'JSON' else {},
                 project=s['project'],
             )
 
-    def test_command_cleanappsettings(self):
-        """Test the cleanappsetting commmand"""
-        self._make_undefined_setting()
+    def test_command_undefined(self):
+        """Test cleanappsettings with undefined setting"""
+        undef_setting = AppSetting(
+            app_plugin=self.plugin,
+            project=self.project,
+            name='ghost',
+            type='BOOLEAN',
+            value=True,
+        )
+        undef_setting.save()
         self.assertEqual(AppSetting.objects.count(), 6)
 
         with self.assertLogs(
             'projectroles.management.commands.cleanappsettings', level='INFO'
         ) as cm:
             call_command('cleanappsettings')
             self.assertEqual(
                 cm.output,
                 [
                     CLEAN_LOG_PREFIX + START_MSG,
                     (
                         CLEAN_LOG_PREFIX
-                        + 'Deleting "settings.example_project_app.ghost" '
-                        'from project "{}"'.format(self.project.title)
+                        + DELETE_PREFIX_MSG.format(
+                            'settings.example_project_app.ghost',
+                            self.project.title,
+                        )
+                        + DEFINITION_NOT_FOUND_MSG
                     ),
                     CLEAN_LOG_PREFIX + END_MSG,
                 ],
             )
         self.assertEqual(AppSetting.objects.count(), 5)
+        self.assertQuerysetEqual(
+            AppSetting.objects.filter(name='ghost'),
+            [],
+        )
+
+    def test_command_project_types(self):
+        """Test cleanappsettings with invalid project types"""
+        cat_setting = AppSetting(
+            app_plugin=self.plugin,
+            project=self.category,
+            name='project_user_bool_setting',
+            type='BOOLEAN',
+            value=True,
+        )
+        cat_setting.save()
+        self.assertEqual(AppSetting.objects.count(), 6)
+
+        with self.assertLogs(
+            'projectroles.management.commands.cleanappsettings', level='INFO'
+        ) as cm:
+            call_command('cleanappsettings')
+            self.assertEqual(
+                cm.output,
+                [
+                    CLEAN_LOG_PREFIX + START_MSG,
+                    (
+                        CLEAN_LOG_PREFIX
+                        + DELETE_PREFIX_MSG.format(
+                            'settings.example_project_app.'
+                            'project_user_bool_setting',
+                            self.category.title,
+                        )
+                        + DELETE_PROJECT_TYPE_MSG.format(
+                            self.category.type,
+                            ALLOWED_TYPES_MSG,
+                            '[\'PROJECT\']',
+                        )
+                    ),
+                    CLEAN_LOG_PREFIX + END_MSG,
+                ],
+            )
+            self.assertEqual(AppSetting.objects.count(), 5)
+            self.assertQuerysetEqual(
+                AppSetting.objects.filter(name='project_user_bool_setting'),
+                [],
+            )
+
+    def test_command_project_user_scope(self):
+        """Test cleanappsettings with PROJECT_USER scope"""
+        user_new = self.make_user('user_new')
+        user_new.save()
+        pu_setting = AppSetting(
+            app_plugin=self.plugin,
+            project=self.project,
+            user=user_new,
+            name='project_user_bool_setting',
+            type='BOOLEAN',
+            value=True,
+        )
+        pu_setting.save()
+        self.assertEqual(AppSetting.objects.count(), 6)
+
+        with self.assertLogs(
+            'projectroles.management.commands.cleanappsettings', level='INFO'
+        ) as cm:
+            call_command('cleanappsettings')
+            self.assertEqual(
+                cm.output,
+                [
+                    CLEAN_LOG_PREFIX + START_MSG,
+                    (
+                        CLEAN_LOG_PREFIX
+                        + DELETE_PREFIX_MSG.format(
+                            'settings.example_project_app.'
+                            'project_user_bool_setting',
+                            self.project.title,
+                        )
+                        + DELETE_SCOPE_MSG.format(
+                            user_new.username,
+                        )
+                    ),
+                    CLEAN_LOG_PREFIX + END_MSG,
+                ],
+            )
+            self.assertEqual(AppSetting.objects.count(), 5)
+            self.assertQuerysetEqual(
+                AppSetting.objects.filter(name='project_user_bool_setting'),
+                [],
+            )
```

### Comparing `django-sodar-core-0.12.0/projectroles/tests/test_email.py` & `django-sodar-core-0.13.0/projectroles/tests/test_email.py`

 * *Files 2% similar despite different names*

```diff
@@ -3,23 +3,27 @@
 from django.core import mail
 from django.test import override_settings
 from django.urls import reverse
 
 from test_plus.test import TestCase, RequestFactory
 
 from projectroles.app_settings import AppSettingAPI
-from projectroles.models import Role, SODAR_CONSTANTS
+from projectroles.models import SODAR_CONSTANTS
 from projectroles.email import (
     send_role_change_mail,
     send_generic_mail,
     send_project_create_mail,
     get_email_user,
     get_user_addr,
 )
-from projectroles.tests.test_models import ProjectMixin, RoleAssignmentMixin
+from projectroles.tests.test_models import (
+    ProjectMixin,
+    RoleMixin,
+    RoleAssignmentMixin,
+)
 
 
 app_settings = AppSettingAPI()
 
 
 # SODAR constants
 PROJECT_ROLE_OWNER = SODAR_CONSTANTS['PROJECT_ROLE_OWNER']
@@ -36,28 +40,19 @@
 CUSTOM_HEADER = 'Custom header'
 CUSTOM_FOOTER = 'Custom footer'
 
 USER_ADD_EMAIL = 'user1@example.com'
 USER_ADD_EMAIL2 = 'user2@example.com'
 
 
-class TestEmailSending(ProjectMixin, RoleAssignmentMixin, TestCase):
+class TestEmailSending(ProjectMixin, RoleMixin, RoleAssignmentMixin, TestCase):
     def setUp(self):
         self.factory = RequestFactory()
-
         # Init roles
-        self.role_owner = Role.objects.get_or_create(name=PROJECT_ROLE_OWNER)[0]
-        self.role_delegate = Role.objects.get_or_create(
-            name=PROJECT_ROLE_DELEGATE
-        )[0]
-        self.role_contributor = Role.objects.get_or_create(
-            name=PROJECT_ROLE_CONTRIBUTOR
-        )[0]
-        self.role_guest = Role.objects.get_or_create(name=PROJECT_ROLE_GUEST)[0]
-
+        self.init_roles()
         # Init users
         self.user_owner = self.make_user('owner')
         self.user_owner.email = 'owner_user@example.com'
         self.user_owner.save()
         self.user = self.make_user('user')
         self.user.email = 'user@example.com'
         self.user.save()
```

### Comparing `django-sodar-core-0.12.0/projectroles/tests/test_models.py` & `django-sodar-core-0.13.0/projectroles/tests/test_models.py`

 * *Files 14% similar despite different names*

```diff
@@ -1,52 +1,47 @@
 """Tests for models in the projectroles Django app"""
 
 import uuid
 
 from django.conf import settings
-from django.contrib.auth.models import AnonymousUser
 from django.core.exceptions import ValidationError
 from django.forms.models import model_to_dict
 from django.urls import reverse
 from django.utils import timezone
 from django.test import override_settings
 
 from test_plus.test import TestCase
 
 from projectroles.models import (
     Project,
     Role,
     RoleAssignment,
     ProjectInvite,
     AppSetting,
-    ProjectUserTag,
     RemoteSite,
     RemoteProject,
     SODAR_CONSTANTS,
-    PROJECT_TAG_STARRED,
+    ROLE_RANKING,
+    CAT_DELIMITER,
 )
 from projectroles.plugins import get_app_plugin
 from projectroles.utils import build_secret
 
 
 # SODAR constants
 PROJECT_ROLE_OWNER = SODAR_CONSTANTS['PROJECT_ROLE_OWNER']
 PROJECT_ROLE_DELEGATE = SODAR_CONSTANTS['PROJECT_ROLE_DELEGATE']
 PROJECT_ROLE_CONTRIBUTOR = SODAR_CONSTANTS['PROJECT_ROLE_CONTRIBUTOR']
 PROJECT_ROLE_GUEST = SODAR_CONSTANTS['PROJECT_ROLE_GUEST']
+PROJECT_ROLE_FINDER = SODAR_CONSTANTS['PROJECT_ROLE_FINDER']
 PROJECT_TYPE_CATEGORY = SODAR_CONSTANTS['PROJECT_TYPE_CATEGORY']
 PROJECT_TYPE_PROJECT = SODAR_CONSTANTS['PROJECT_TYPE_PROJECT']
 SITE_MODE_TARGET = SODAR_CONSTANTS['SITE_MODE_TARGET']
 SITE_MODE_SOURCE = SODAR_CONSTANTS['SITE_MODE_SOURCE']
 
-
-# Settings
-INVITE_EXPIRY_DAYS = settings.PROJECTROLES_INVITE_EXPIRY_DAYS
-
-
 # Local constants
 SECRET = 'rsd886hi8276nypuvw066sbvv0rb2a6x'
 EXAMPLE_APP_NAME = 'example_project_app'
 REMOTE_SITE_NAME = 'Test site'
 REMOTE_SITE_URL = 'https://sodar.example.org'
 REMOTE_SITE_SECRET = build_secret()
 REMOTE_SITE_USER_DISPLAY = True
@@ -80,14 +75,51 @@
         if sodar_uuid:
             values['sodar_uuid'] = sodar_uuid
         project = Project(**values)
         project.save()
         return project
 
 
+class RoleMixin:
+    """Helper mixin for Role initialization"""
+
+    def init_roles(self):
+        """Initialize SODAR Core roles for tests"""
+        self.role_owner = Role.objects.get_or_create(
+            name=PROJECT_ROLE_OWNER, rank=ROLE_RANKING[PROJECT_ROLE_OWNER]
+        )[0]
+        self.role_delegate = Role.objects.get_or_create(
+            name=PROJECT_ROLE_DELEGATE, rank=ROLE_RANKING[PROJECT_ROLE_DELEGATE]
+        )[0]
+        self.role_contributor = Role.objects.get_or_create(
+            name=PROJECT_ROLE_CONTRIBUTOR,
+            rank=ROLE_RANKING[PROJECT_ROLE_CONTRIBUTOR],
+        )[0]
+        self.role_guest = Role.objects.get_or_create(
+            name=PROJECT_ROLE_GUEST, rank=ROLE_RANKING[PROJECT_ROLE_GUEST]
+        )[0]
+        self.role_finder = Role.objects.get_or_create(
+            name=PROJECT_ROLE_FINDER,
+            rank=ROLE_RANKING[PROJECT_ROLE_FINDER],
+            project_types=[PROJECT_TYPE_CATEGORY],
+        )[0]
+
+
+class RoleAssignmentMixin:
+    """Helper mixin for RoleAssignment creation"""
+
+    @classmethod
+    def make_assignment(cls, project, user, role):
+        """Make and save a RoleAssignment"""
+        values = {'project': project, 'user': user, 'role': role}
+        result = RoleAssignment(**values)
+        result.save()
+        return result
+
+
 class ProjectInviteMixin:
     """Helper mixin for ProjectInvite creation"""
 
     @classmethod
     def make_invite(
         cls,
         email,
@@ -103,15 +135,20 @@
             'email': email,
             'project': project,
             'role': role,
             'issuer': issuer,
             'message': message,
             'date_expire': date_expire
             if date_expire
-            else (timezone.now() + timezone.timedelta(days=INVITE_EXPIRY_DAYS)),
+            else (
+                timezone.now()
+                + timezone.timedelta(
+                    days=settings.PROJECTROLES_INVITE_EXPIRY_DAYS
+                )
+            ),
             'secret': secret or SECRET,
             'active': True,
         }
         invite = ProjectInvite(**values)
         invite.save()
         return invite
 
@@ -148,26 +185,14 @@
         if sodar_uuid:
             values['sodar_uuid'] = sodar_uuid
         setting = AppSetting(**values)
         setting.save()
         return setting
 
 
-class ProjectUserTagMixin:
-    """Helper mixin for ProjectUserTag creation"""
-
-    @classmethod
-    def make_tag(cls, project, user, name):
-        """Make and save a ProjectUserTag"""
-        values = {'project': project, 'user': user, 'name': name}
-        tag = ProjectUserTag(**values)
-        tag.save()
-        return tag
-
-
 class RemoteSiteMixin:
     """Helper mixin for RemoteSite creation"""
 
     @classmethod
     def make_site(
         cls,
         name,
@@ -262,440 +287,598 @@
             user.email = email
         if sodar_uuid:
             user.sodar_uuid = sodar_uuid
         user.save()
         return user
 
 
-class TestProject(ProjectMixin, TestCase):
+class TestProject(ProjectMixin, RoleMixin, RoleAssignmentMixin, TestCase):
     """Tests for model.Project"""
 
     def setUp(self):
-        # Top level category
-        self.category_top = self.make_project(
-            title='TestCategoryTop', type=PROJECT_TYPE_CATEGORY, parent=None
+        # Set up category and project
+        self.category = self.make_project(
+            title='TestCategory', type=PROJECT_TYPE_CATEGORY, parent=None
         )
-        # Subproject under category_top
-        self.project_sub = self.make_project(
-            title='TestProjectSub',
+        self.project = self.make_project(
+            title='TestProject',
             type=PROJECT_TYPE_PROJECT,
-            parent=self.category_top,
+            parent=self.category,
         )
-        # Top level project
-        self.project_top = self.make_project(
-            title='TestProjectTop', type=PROJECT_TYPE_PROJECT, parent=None
+        # Init roles
+        self.init_roles()
+        # Init users
+        self.user_alice = self.make_user('alice')
+        self.user_bob = self.make_user('bob')
+        self.user_carol = self.make_user('carol')
+        self.user_dan = self.make_user('dan')
+        self.user_erin = self.make_user('erin')
+        self.user_frank = self.make_user('frank')
+        # Init assignment
+        self.owner_as_cat = self.make_assignment(
+            self.category, self.user_alice, self.role_owner
         )
 
     def test_initialization(self):
         """Test Project initialization"""
         expected = {
-            'id': self.project_sub.pk,
-            'title': 'TestProjectSub',
+            'id': self.project.pk,
+            'title': 'TestProject',
             'type': PROJECT_TYPE_PROJECT,
-            'parent': self.category_top.pk,
-            'full_title': 'TestCategoryTop / TestProjectSub',
-            'sodar_uuid': self.project_sub.sodar_uuid,
+            'parent': self.category.pk,
+            'full_title': 'TestCategory / TestProject',
+            'sodar_uuid': self.project.sodar_uuid,
             'description': '',
             'public_guest_access': False,
             'archive': False,
             'has_public_children': False,
         }
-        model_dict = model_to_dict(self.project_sub)
+        model_dict = model_to_dict(self.project)
         # HACK: Can't compare markupfields like this. Better solution?
         model_dict.pop('readme', None)
         self.assertEqual(model_dict, expected)
 
     def test__str__(self):
         """Test Project __str__()"""
-        expected = 'TestCategoryTop / TestProjectSub'
-        self.assertEqual(str(self.project_sub), expected)
+        expected = 'TestCategory / TestProject'
+        self.assertEqual(str(self.project), expected)
 
     def test__repr__(self):
         """Test Project __repr__()"""
-        expected = "Project('TestProjectSub', 'PROJECT', " "'TestCategoryTop')"
-        self.assertEqual(repr(self.project_sub), expected)
+        expected = "Project('TestProject', 'PROJECT', " "'TestCategory')"
+        self.assertEqual(repr(self.project), expected)
 
     def test_validate_parent(self):
-        """Test parent ForeignKey validation: project can't be its own
-        parent"""
+        """Test parent validation with self as parent"""
+        with self.assertRaises(ValidationError):
+            self.project.parent = self.project
+            self.project.save()
+
+    def test_validate_title_identical(self):
+        """Test title validation with identical title"""
         with self.assertRaises(ValidationError):
-            project_tmp = self.project_top
-            project_tmp.parent = project_tmp
-            project_tmp.save()
-
-    def test_validate_title(self):
-        """Test title validation: title can't be equal between subproject and
-        parent"""
+            self.make_project(
+                title='TestCategory',
+                type=PROJECT_TYPE_PROJECT,
+                parent=self.category,
+            )
+
+    def test_validate_title_delimiter(self):
+        """Test title validation with category delimiter"""
         with self.assertRaises(ValidationError):
             self.make_project(
-                title='TestCategoryTop',
+                title='Test{}PROJECT'.format(CAT_DELIMITER),
                 type=PROJECT_TYPE_PROJECT,
-                parent=self.category_top,
+                parent=self.category,
             )
 
     def test_validate_parent_type(self):
-        """Test parent type validation"""
+        """Test parent type validation with project under another project"""
         with self.assertRaises(ValidationError):
             self.make_project(
                 title='FailProject',
                 type=PROJECT_TYPE_PROJECT,
-                parent=self.project_top,
+                parent=self.project,
             )
 
+    def test_validate_public_guest_access(self):
+        """Test public guest access validation with project"""
+        # Test with project
+        self.project.public_guest_access = True
+        self.project.save()
+        # Test with category
+        with self.assertRaises(ValidationError):
+            self.category.public_guest_access = True
+            self.category.save()
+
     def test_get_absolute_url(self):
         """Test get_absolute_url()"""
         expected_url = reverse(
             'projectroles:detail',
-            kwargs={'project': self.project_sub.sodar_uuid},
+            kwargs={'project': self.project.sodar_uuid},
         )
-        self.assertEqual(self.project_sub.get_absolute_url(), expected_url)
+        self.assertEqual(self.project.get_absolute_url(), expected_url)
 
-    def test_get_children_top(self):
+    def test_get_children_category(self):
         """Test children getting function for top category"""
-        children = self.category_top.get_children()
-        self.assertEqual(children[0], self.project_sub)
+        children = self.category.get_children()
+        self.assertEqual(children[0], self.project)
 
-    def test_get_children_sub(self):
+    def test_get_children_project(self):
         """Test children getting function for sub project"""
-        children = self.project_sub.get_children()
+        children = self.project.get_children()
         self.assertEqual(children.count(), 0)
 
-    def test_get_depth_top(self):
+    def test_get_depth_category(self):
         """Test project depth getting function for top category"""
-        self.assertEqual(self.category_top.get_depth(), 0)
+        self.assertEqual(self.category.get_depth(), 0)
 
-    def test_get_depth_sub(self):
+    def test_get_depth_project(self):
         """Test children getting function for sub project"""
-        self.assertEqual(self.project_sub.get_depth(), 1)
+        self.assertEqual(self.project.get_depth(), 1)
 
-    def test_get_parents_top(self):
+    def test_get_parents_category(self):
         """Test get parents function for top category"""
-        self.assertEqual(self.category_top.get_parents(), [])
+        self.assertEqual(self.category.get_parents(), [])
 
-    def test_get_parents_sub(self):
+    def test_get_parents_project(self):
         """Test get parents function for sub project"""
-        self.assertEqual(
-            list(self.project_sub.get_parents()), [self.category_top]
-        )
+        self.assertEqual(list(self.project.get_parents()), [self.category])
 
     def test_is_remote(self):
         """Test Project.is_remote() without remote projects"""
-        self.assertEqual(self.project_sub.is_remote(), False)
+        self.assertEqual(self.project.is_remote(), False)
 
     def test_is_revoked(self):
         """Test Project.is_revoked() without remote projects"""
-        self.assertEqual(self.project_sub.is_revoked(), False)
+        self.assertEqual(self.project.is_revoked(), False)
 
     def test_set_public(self):
         """Test Project.set_public()"""
-        self.assertFalse(self.project_sub.public_guest_access)
-        self.project_sub.set_public()  # Default = True
-        self.assertTrue(self.project_sub.public_guest_access)
-        self.project_sub.set_public(False)
-        self.assertFalse(self.project_sub.public_guest_access)
-        self.project_sub.set_public(True)
-        self.assertTrue(self.project_sub.public_guest_access)
+        self.assertFalse(self.project.public_guest_access)
+        self.project.set_public()  # Default = True
+        self.assertTrue(self.project.public_guest_access)
+        self.project.set_public(False)
+        self.assertFalse(self.project.public_guest_access)
+        self.project.set_public(True)
+        self.assertTrue(self.project.public_guest_access)
 
     def test_set_archive(self):
         """Test Project.set_archive()"""
-        self.assertFalse(self.project_sub.archive)
-        self.project_sub.set_archive()  # Default = True
-        self.assertTrue(self.project_sub.archive)
-        self.project_sub.set_archive(False)
-        self.assertFalse(self.project_sub.archive)
-        self.project_sub.set_archive(True)
-        self.assertTrue(self.project_sub.archive)
+        self.assertFalse(self.project.archive)
+        self.project.set_archive()  # Default = True
+        self.assertTrue(self.project.archive)
+        self.project.set_archive(False)
+        self.assertFalse(self.project.archive)
+        self.project.set_archive(True)
+        self.assertTrue(self.project.archive)
 
     def test_set_archive_category(self):
         """Test Project.set_archive() for a category (should fail)"""
-        self.assertFalse(self.category_top.archive)
+        self.assertFalse(self.category.archive)
         with self.assertRaises(ValidationError):
-            self.category_top.set_archive()
+            self.category.set_archive()
+
+    def test_get_role(self):
+        """Test get_role()"""
+        project_as = self.make_assignment(
+            self.project, self.user_bob, self.role_owner
+        )
+        self.assertEqual(self.project.get_role(self.user_bob), project_as)
+
+    def test_get_role_inherit_only(self):
+        """Test get_role() with only an inherited role"""
+        self.assertEqual(
+            self.project.get_role(self.user_alice), self.owner_as_cat
+        )
+
+    def test_get_role_inherit_equal(self):
+        """Test get_role() with inherited role equal to local role"""
+        project_as = self.make_assignment(
+            self.project, self.user_alice, self.role_owner
+        )
+        self.assertEqual(self.project.get_role(self.user_alice), project_as)
 
+    def test_get_role_inherit_higher(self):
+        """Test get_role() with inherited role higher than local role"""
+        cat_as = self.make_assignment(
+            self.category, self.user_bob, self.role_contributor
+        )
+        self.make_assignment(self.project, self.user_bob, self.role_guest)
+        self.assertEqual(self.project.get_role(self.user_bob), cat_as)
+
+    def test_get_role_inherit_lower(self):
+        """Test get_role() with inherited role lower than local role"""
+        self.make_assignment(self.category, self.user_bob, self.role_guest)
+        project_as = self.make_assignment(
+            self.project, self.user_bob, self.role_contributor
+        )
+        self.assertEqual(self.project.get_role(self.user_bob), project_as)
+
+    def test_get_role_set_inherited_only(self):
+        """Test get_role() with inherited_only=True"""
+        self.make_assignment(self.project, self.user_alice, self.role_owner)
+        self.assertEqual(
+            self.project.get_role(self.user_alice, inherited_only=True),
+            self.owner_as_cat,
+        )
+
+    def test_get_roles(self):
+        """Test get_roles()"""
+        project_as = self.make_assignment(
+            self.project, self.user_bob, self.role_owner
+        )
+        roles = self.project.get_roles()
+        self.assertEqual(len(roles), 2)  # Includes inherited category owner
+        self.assertEqual(roles, [project_as, self.owner_as_cat])
+
+    def test_get_roles_no_inherited(self):
+        """Test get_roles() excluding inherited roles"""
+        project_as = self.make_assignment(
+            self.project, self.user_bob, self.role_owner
+        )
+        roles = self.project.get_roles(inherited=False)
+        self.assertEqual(len(roles), 1)
+        self.assertEqual(roles[0], project_as)
+
+    def test_get_roles_rank(self):
+        """Test get_roles() with rank limits"""
+        contrib_as = self.make_assignment(
+            self.project, self.user_bob, self.role_contributor
+        )
+        guest_as = self.make_assignment(
+            self.project, self.user_carol, self.role_guest
+        )
+        roles = self.project.get_roles()
+        self.assertIn(contrib_as, roles)
+        self.assertIn(guest_as, roles)
+        roles = self.project.get_roles(max_rank=30)
+        self.assertEqual(roles, [contrib_as, self.owner_as_cat])
+        roles = self.project.get_roles(max_rank=40)
+        self.assertEqual(roles, [contrib_as, guest_as, self.owner_as_cat])
+        roles = self.project.get_roles(min_rank=30)
+        self.assertEqual(roles, [contrib_as, guest_as])
+        roles = self.project.get_roles(min_rank=40)
+        self.assertEqual(roles, [guest_as])
+        roles = self.project.get_roles(min_rank=30, max_rank=30)
+        self.assertEqual(roles, [contrib_as])
+
+    def test_get_roles_rank_override(self):
+        """Test get_roles() with min_rank and role override"""
+        self.make_assignment(
+            self.category, self.user_bob, self.role_contributor
+        )
+        self.make_assignment(self.project, self.user_bob, self.role_guest)
+        roles = self.project.get_roles(min_rank=40)
+        # Neither assignment should be returned as the guest role is overridden
+        self.assertEqual(roles, [])
+
+    def test_get_roles_user(self):
+        """Test get_roles() with user limit"""
+        contrib_as = self.make_assignment(
+            self.project, self.user_bob, self.role_contributor
+        )
+        guest_as = self.make_assignment(
+            self.project, self.user_carol, self.role_guest
+        )
+        roles = self.project.get_roles()
+        self.assertIn(contrib_as, roles)
+        self.assertIn(guest_as, roles)
+        roles = self.project.get_roles(user=self.user_carol)
+        self.assertNotIn(contrib_as, roles)
+        self.assertIn(guest_as, roles)
+
+    def test_get_roles_by_rank(self):
+        """Test get_roles_by_rank()"""
+        owner_as = self.make_assignment(
+            self.project, self.user_bob, self.role_owner
+        )
+        contrib_as = self.make_assignment(
+            self.project, self.user_carol, self.role_contributor
+        )
+        contrib_as2 = self.make_assignment(
+            self.project, self.user_dan, self.role_contributor
+        )
+        self.assertEqual(
+            self.project.get_roles_by_rank(
+                role_name=PROJECT_ROLE_OWNER, inherited=False
+            ),
+            [owner_as],
+        )
+        self.assertEqual(
+            self.project.get_roles_by_rank(
+                role_name=PROJECT_ROLE_OWNER, inherited=True
+            ),
+            [owner_as, self.owner_as_cat],
+        )
+        self.assertEqual(
+            self.project.get_roles_by_rank(
+                role_name=PROJECT_ROLE_OWNER, inherited_only=True
+            ),
+            [self.owner_as_cat],
+        )
+        self.assertEqual(
+            self.project.get_roles_by_rank(
+                role_name=PROJECT_ROLE_CONTRIBUTOR,
+            ),
+            [contrib_as, contrib_as2],
+        )
+
+    def test_get_owner(self):
+        """Test get_owner()"""
+        self.assertEqual(self.category.get_owner().user, self.user_alice)
+
+    def test_get_owners(self):
+        """Test get_owners()"""
+        owner_as = self.make_assignment(
+            self.project, self.user_bob, self.role_owner
+        )
+        owners = self.project.get_owners()
+        self.assertEqual(len(owners), 2)
+        self.assertIn(self.owner_as_cat, owners)
+        self.assertIn(owner_as, owners)
+        self.assertEqual(
+            self.project.get_owners(inherited_only=True), [self.owner_as_cat]
+        )
+        self.assertEqual(self.project.get_owners(inherited=False), [owner_as])
+
+    def test_get_delegates(self):
+        """Test get_delegates()"""
+        delegate_as_cat = self.make_assignment(
+            self.category, self.user_carol, self.role_delegate
+        )
+        delegate_as = self.make_assignment(
+            self.project, self.user_dan, self.role_delegate
+        )
+        self.assertEqual(len(self.project.get_delegates()), 2)
+        self.assertEqual(
+            self.project.get_delegates(inherited_only=True), [delegate_as_cat]
+        )
+        self.assertEqual(
+            self.project.get_delegates(inherited=False), [delegate_as]
+        )
+        # Test with inherited owner role
+        delegate_as.user = self.user_alice
+        delegate_as.save()
+        self.assertNotIn(delegate_as, self.project.get_delegates())
+
+    def test_get_members(self):
+        """Test get_members()"""
+        as_contrib = self.make_assignment(
+            self.project, self.user_erin, self.role_contributor
+        )
+        as_contrib2 = self.make_assignment(
+            self.project, self.user_frank, self.role_contributor
+        )
+        expected = [
+            {
+                'id': as_contrib.pk,
+                'project': self.project.pk,
+                'user': self.user_erin.pk,
+                'role': self.role_contributor.pk,
+                'sodar_uuid': as_contrib.sodar_uuid,
+            },
+            {
+                'id': as_contrib2.pk,
+                'project': self.project.pk,
+                'user': self.user_frank.pk,
+                'role': self.role_contributor.pk,
+                'sodar_uuid': as_contrib2.sodar_uuid,
+            },
+        ]
+        members = self.project.get_members()
+        self.assertEqual(len(members), 2)
+        for i in range(0, len(members)):
+            self.assertEqual(model_to_dict(members[i]), expected[i])
+
+    def test_is_owner(self):
+        """Test is_owner()"""
+        self.make_assignment(self.project, self.user_bob, self.role_owner)
+        self.assertTrue(self.project.is_owner(self.user_bob))
+        self.assertTrue(self.project.is_owner(self.user_alice))  # Inherited
+        self.assertFalse(self.project.is_owner(self.user_carol))
+
+    def test_is_owner_inherited_and_local(self):
+        """Test is_owner() with inherited and local role on same user"""
+        self.make_assignment(self.project, self.user_alice, self.role_owner)
+        self.assertTrue(self.project.is_owner(self.user_alice))
+
+    def test_is_delegate(self):
+        """Test is_delegate()"""
+        self.make_assignment(self.project, self.user_bob, self.role_delegate)
+        self.make_assignment(self.category, self.user_carol, self.role_delegate)
+        self.assertTrue(self.project.is_delegate(self.user_bob))
+        self.assertFalse(self.project.is_delegate(self.user_alice))
+        self.assertTrue(self.project.is_delegate(self.user_carol))  # Inherited
+
+    def test_is_delegate_inherited_and_local(self):
+        """Test is_delegate() with inherited and local role on same user"""
+        self.make_assignment(self.category, self.user_bob, self.role_delegate)
+        self.make_assignment(self.project, self.user_bob, self.role_delegate)
+        self.assertTrue(self.project.is_delegate(self.user_bob))
+
+    def test_is_owner_or_delegate(self):
+        """Test is_owner_or_delegate()"""
+        self.make_assignment(self.project, self.user_bob, self.role_owner)
+        self.assertTrue(self.project.is_owner_or_delegate(self.user_bob))
+        self.assertTrue(self.project.is_owner_or_delegate(self.user_alice))
+        self.assertFalse(self.project.is_owner_or_delegate(self.user_carol))
+
+    def test_has_role(self):
+        """Test has_role() with a local role"""
+        self.make_assignment(self.project, self.user_bob, self.role_contributor)
+        self.assertFalse(self.category.has_role(self.user_bob))
+        self.assertTrue(self.project.has_role(self.user_bob))
+
+    def test_has_role_inherit(self):
+        """Test has_role() for inherited roles"""
+        self.make_assignment(self.category, self.user_bob, self.role_delegate)
+        self.make_assignment(
+            self.category, self.user_carol, self.role_contributor
+        )
+        self.make_assignment(self.category, self.user_dan, self.role_guest)
+        self.assertTrue(self.project.has_role(self.user_alice))
+        self.assertTrue(self.project.has_role(self.user_bob))
+        self.assertTrue(self.project.has_role(self.user_carol))
+        self.assertTrue(self.project.has_role(self.user_dan))
+
+    def test_has_role_public(self):
+        """Test has_role() in project with public guest access"""
+        self.project.set_public()
+        self.assertFalse(self.category.has_role(self.user_bob))
+        self.assertTrue(self.project.has_role(self.user_bob))
+
+
+class TestRole(RoleMixin, TestCase):
+    """Tests for models.Role"""
 
-class TestRole(TestCase):
     def setUp(self):
-        self.role = Role.objects.get(name=PROJECT_ROLE_OWNER)
+        self.init_roles()
 
     def test_initialization(self):
         """Test Role initialization"""
         expected = {
-            'id': self.role.pk,
+            'id': self.role_owner.pk,
             'name': PROJECT_ROLE_OWNER,
             'rank': 10,
-            'description': self.role.description,
+            'project_types': [PROJECT_TYPE_CATEGORY, PROJECT_TYPE_PROJECT],
+            'description': self.role_owner.description,
+        }
+        self.assertEqual(model_to_dict(self.role_owner), expected)
+
+    def test_initialization_finder(self):
+        """Test Role initialization for project finder"""
+        expected = {
+            'id': self.role_finder.pk,
+            'name': PROJECT_ROLE_FINDER,
+            'rank': 50,
+            'project_types': [PROJECT_TYPE_CATEGORY],
+            'description': self.role_finder.description,
         }
-        self.assertEqual(model_to_dict(self.role), expected)
+        self.assertEqual(model_to_dict(self.role_finder), expected)
 
     def test__str__(self):
         """Test Role __str__()"""
         expected = PROJECT_ROLE_OWNER
-        self.assertEqual(str(self.role), expected)
+        self.assertEqual(str(self.role_owner), expected)
 
     def test__repr__(self):
         """Test Role __repr__()"""
         expected = "Role('{}')".format(PROJECT_ROLE_OWNER)
-        self.assertEqual(repr(self.role), expected)
-
-
-class RoleAssignmentMixin:
-    """Helper mixin for RoleAssignment creation"""
-
-    @classmethod
-    def make_assignment(cls, project, user, role):
-        """Make and save a RoleAssignment"""
-        values = {'project': project, 'user': user, 'role': role}
-        result = RoleAssignment(**values)
-        result.save()
-        return result
+        self.assertEqual(repr(self.role_owner), expected)
 
 
-class TestRoleAssignment(ProjectMixin, RoleAssignmentMixin, TestCase):
+class TestRoleAssignment(
+    ProjectMixin, RoleMixin, RoleAssignmentMixin, TestCase
+):
     """Tests for model.RoleAssignment"""
 
     def setUp(self):
-        # Init projects/categories
-        # Top level category
-        self.category_top = self.make_project(
-            title='TestCategoryTop', type=PROJECT_TYPE_CATEGORY, parent=None
+        # Set up category and project
+        self.category = self.make_project(
+            title='TestCategory', type=PROJECT_TYPE_CATEGORY, parent=None
         )
-        # Subproject under category_top
-        self.project_sub = self.make_project(
-            title='TestProjectSub',
+        self.project = self.make_project(
+            title='TestProject',
             type=PROJECT_TYPE_PROJECT,
-            parent=self.category_top,
+            parent=self.category,
         )
-        # Top level project
-        self.project_top = self.make_project(
-            title='TestProjectTop', type=PROJECT_TYPE_PROJECT, parent=None
-        )
-
         # Init roles
-        self.role_owner = Role.objects.get_or_create(name=PROJECT_ROLE_OWNER)[0]
-        self.role_delegate = Role.objects.get_or_create(
-            name=PROJECT_ROLE_DELEGATE
-        )[0]
-        self.role_contributor = Role.objects.get_or_create(
-            name=PROJECT_ROLE_CONTRIBUTOR
-        )[0]
-        self.role_guest = Role.objects.get_or_create(name=PROJECT_ROLE_GUEST)[0]
-
+        self.init_roles()
         # Init users
         self.user_alice = self.make_user('alice')
         self.user_bob = self.make_user('bob')
         self.user_carol = self.make_user('carol')
-        self.user_dan = self.make_user('dan')
-        self.user_erin = self.make_user('erin')
-        self.user_frank = self.make_user('frank')
-
         # Init assignment
-        self.assignment_owner = self.make_assignment(
-            self.category_top, self.user_alice, self.role_owner
+        self.owner_as_cat = self.make_assignment(
+            self.category, self.user_alice, self.role_owner
         )
-
         self.expected_default = {
-            'id': self.assignment_owner.pk,
-            'project': self.category_top.pk,
+            'id': self.owner_as_cat.pk,
+            'project': self.category.pk,
             'user': self.user_alice.pk,
             'role': self.role_owner.pk,
-            'sodar_uuid': self.assignment_owner.sodar_uuid,
+            'sodar_uuid': self.owner_as_cat.sodar_uuid,
         }
 
     def test_initialization(self):
         """Test RoleAssignment initialization"""
         self.assertEqual(
-            model_to_dict(self.assignment_owner), self.expected_default
+            model_to_dict(self.owner_as_cat), self.expected_default
+        )
+
+    def test_init_finder_category(self):
+        """Test initializing project finder with category"""
+        role_as = self.make_assignment(
+            self.category, self.user_bob, self.role_finder
         )
+        self.assertIsInstance(role_as, RoleAssignment)
+
+    def test_init_finder_project(self):
+        """Test initializing project finder with project (should fail)"""
+        with self.assertRaises(ValidationError):
+            self.make_assignment(self.project, self.user_bob, self.role_finder)
 
     def test__str__(self):
         """Test RoleAssignment __str__()"""
-        expected = 'TestCategoryTop: {}: alice'.format(PROJECT_ROLE_OWNER)
-        self.assertEqual(str(self.assignment_owner), expected)
+        expected = 'TestCategory: {}: alice'.format(PROJECT_ROLE_OWNER)
+        self.assertEqual(str(self.owner_as_cat), expected)
 
     def test__repr__(self):
         """Test RoleAssignment __repr__()"""
-        expected = "RoleAssignment('TestCategoryTop', 'alice', '{}')".format(
+        expected = "RoleAssignment('TestCategory', 'alice', '{}')".format(
             PROJECT_ROLE_OWNER
         )
-        self.assertEqual(repr(self.assignment_owner), expected)
+        self.assertEqual(repr(self.owner_as_cat), expected)
 
     def test_validate_user(self):
         """Test adding more than one role for user in project (should fail)"""
         with self.assertRaises(ValidationError):
             self.make_assignment(
-                self.category_top, self.user_alice, self.role_contributor
+                self.category, self.user_alice, self.role_contributor
             )
 
     def test_validate_owner(self):
-        """Test adding owner if one exists (should fail)"""
+        """Test owner uniqueness validation"""
         with self.assertRaises(ValidationError):
-            self.make_assignment(
-                self.category_top, self.user_bob, self.role_owner
-            )
+            self.make_assignment(self.category, self.user_bob, self.role_owner)
 
-    @override_settings(PROJECTROLES_DELEGATE_LIMIT=1)
-    def test_validate_one_delegate(self):
-        """Test adding delegate if limit (1) is reached (should fail)"""
-        self.make_assignment(
-            self.project_sub, self.user_bob, self.role_delegate
-        )
+    def test_validate_delegate_single(self):
+        """Test delegate validation with reached limit"""
+        self.make_assignment(self.project, self.user_bob, self.role_delegate)
         with self.assertRaises(ValidationError):
             self.make_assignment(
-                self.project_sub, self.user_carol, self.role_delegate
+                self.project, self.user_carol, self.role_delegate
             )
 
     @override_settings(PROJECTROLES_DELEGATE_LIMIT=0)
-    def test_validate_several_delegates(self):
-        """Test adding validation with no limit set"""
-        self.make_assignment(
-            self.project_sub, self.user_bob, self.role_delegate
-        )
+    def test_validate_delegate_no_limit(self):
+        """Test delegate validation with zero as limit"""
+        self.make_assignment(self.project, self.user_bob, self.role_delegate)
         try:
             self.make_assignment(
-                self.project_sub, self.user_carol, self.role_delegate
+                self.project, self.user_carol, self.role_delegate
             )
         except ValidationError as e:
             self.fail(e)
 
-    # Tests for RoleAssignmentManager
-
-    def test_get_assignment(self):
-        """Test get_assignment() results"""
-        self.assertEqual(
-            model_to_dict(
-                RoleAssignment.objects.get_assignment(
-                    self.user_alice, self.category_top
-                )
-            ),
-            self.expected_default,
-        )
-
-    def test_get_assignment_anon(self):
-        """Test get_assignment() results with an anonymous user"""
-        anon_user = AnonymousUser()
-        self.assertIsNone(
-            RoleAssignment.objects.get_assignment(anon_user, self.category_top)
-        )
-
-    def test_get_project_owner(self):
-        """Test get_project_owner() results"""
-        self.assertEqual(self.category_top.get_owner().user, self.user_alice)
-
-    def test_get_project_owners(self):
-        """Test project.get_owners() results"""
-        # Set bob as project owner
-        self.make_assignment(self.project_sub, self.user_bob, self.role_owner)
-        self.assertEqual(len(self.project_sub.get_owners()), 2)
-        self.assertEqual(
-            len(self.project_sub.get_owners(inherited_only=True)), 1
-        )
-
-    def test_is_project_owner(self):
-        """Test project.is_owner() reuslts"""
-        self.make_assignment(self.project_sub, self.user_bob, self.role_owner)
-        self.assertTrue(self.project_sub.is_owner(self.user_bob))
-        self.assertTrue(self.project_sub.is_owner(self.user_alice))
-        self.assertFalse(self.project_sub.is_owner(self.user_carol))
-
-    def test_get_project_delegates(self):
-        """Test get_project_delegates() results"""
-        assignment_d0 = self.make_assignment(
-            self.project_top, self.user_carol, self.role_delegate
-        )
-
-        expected = [
-            {
-                'id': assignment_d0.pk,
-                'project': self.project_top.pk,
-                'user': self.user_carol.pk,
-                'role': self.role_delegate.pk,
-                'sodar_uuid': assignment_d0.sodar_uuid,
-            }
-        ]
-        if getattr(settings, 'PROJECTROLES_DELEGATE_LIMIT', 1) != 1:
-            assignment_d1 = self.make_assignment(
-                self.project_top, self.user_dan, self.role_delegate
-            )
-            expected.append(
-                {
-                    'id': assignment_d1.pk,
-                    'project': self.project_top.pk,
-                    'user': self.user_dan.pk,
-                    'role': self.role_delegate.pk,
-                    'sodar_uuid': assignment_d1.sodar_uuid,
-                }
-            )
-
-        delegates = self.project_top.get_delegates()
-        for i in range(0, delegates.count()):
-            self.assertEqual(model_to_dict(delegates[i]), expected[i])
-
-    def test_get_project_members(self):
-        """Test project.get_members() results"""
-        assignment_c0 = self.make_assignment(
-            self.project_top, self.user_erin, self.role_contributor
-        )
-        assignment_c1 = self.make_assignment(
-            self.project_top, self.user_frank, self.role_contributor
-        )
-
-        expected = [
-            {
-                'id': assignment_c0.pk,
-                'project': self.project_top.pk,
-                'user': self.user_erin.pk,
-                'role': self.role_contributor.pk,
-                'sodar_uuid': assignment_c0.sodar_uuid,
-            },
-            {
-                'id': assignment_c1.pk,
-                'project': self.project_top.pk,
-                'user': self.user_frank.pk,
-                'role': self.role_contributor.pk,
-                'sodar_uuid': assignment_c1.sodar_uuid,
-            },
-        ]
-
-        members = self.project_top.get_members()
-        for i in range(0, members.count()):
-            self.assertEqual(model_to_dict(members[i]), expected[i])
-
-    def test_get_all_project_roles(self):
-        """Test project.get_all_roles() results"""
-        self.make_assignment(self.project_sub, self.user_bob, self.role_owner)
-        self.assertEqual(len(self.project_sub.get_all_roles()), 2)
-
-    def test_has_role(self):
-        """Test the has_role() function for an existing role"""
-        self.assertEqual(self.category_top.has_role(self.user_alice), True)
-        self.assertEqual(self.project_sub.has_role(self.user_alice), True)
-
-    def test_has_role_norole(self):
-        """Test the has_role() function for a non-existing role without recursion"""
-        self.make_assignment(
-            self.project_sub, self.user_bob, self.role_contributor
-        )
-        self.assertEqual(self.category_top.has_role(self.user_bob), False)
-
-    def test_has_role_norole_children(self):
-        """Test the has_role() function for a non-existing role with
-        recursion using include_children"""
-        self.make_assignment(
-            self.project_sub, self.user_bob, self.role_contributor
-        )
-        self.assertEqual(
-            self.category_top.has_role(self.user_bob, include_children=True),
-            True,
+    def test_validate_delegate_inherited(self):
+        """Test delegate validation with inherited delegate"""
+        self.make_assignment(self.category, self.user_bob, self.role_delegate)
+        # Limit should not be reached
+        delegate_as = self.make_assignment(
+            self.project, self.user_carol, self.role_delegate
         )
+        self.assertIsInstance(delegate_as, RoleAssignment)
 
 
 class TestProjectInvite(
     ProjectMixin, RoleAssignmentMixin, ProjectInviteMixin, TestCase
 ):
-    """Tests for model.ProjectInvite"""
+    """Tests for ProjectInvite"""
 
     def setUp(self):
         # Init project
         self.project = self.make_project(
             title='TestProject', type=PROJECT_TYPE_PROJECT, parent=None
         )
         # Init roles
@@ -756,21 +939,21 @@
 
 
 class TestProjectManager(ProjectMixin, RoleAssignmentMixin, TestCase):
     """Tests for ProjectManager"""
 
     def setUp(self):
         self.category_top = self.make_project(
-            title='TestCategoryTop',
+            title='TestCategory',
             type=PROJECT_TYPE_CATEGORY,
             parent=None,
             description='XXX',
         )
-        self.project_sub = self.make_project(
-            title='TestProjectSub',
+        self.project = self.make_project(
+            title='TestProject',
             type=PROJECT_TYPE_PROJECT,
             parent=self.category_top,
             description='YYY',
         )
 
     def test_find_all(self):
         """Test find() with any project type"""
@@ -781,33 +964,33 @@
 
     def test_find_project(self):
         """Test find() with project_type=PROJECT"""
         result = Project.objects.find(
             ['test'], project_type=PROJECT_TYPE_PROJECT
         )
         self.assertEqual(len(result), 1)
-        self.assertEqual(result[0], self.project_sub)
+        self.assertEqual(result[0], self.project)
 
     def test_find_category(self):
         """Test find() with project_type=CATEGORY"""
         result = Project.objects.find(
             ['test'], project_type=PROJECT_TYPE_CATEGORY
         )
         self.assertEqual(len(result), 1)
         self.assertEqual(result[0], self.category_top)
 
     def test_find_multi_one(self):
         """Test find() with one valid multi-term"""
-        result = Project.objects.find(['sub', 'ThisFails'])
+        result = Project.objects.find(['project', 'ThisFails'])
         self.assertEqual(len(result), 1)
-        self.assertEqual(result[0], self.project_sub)
+        self.assertEqual(result[0], self.project)
 
     def test_find_multi_two(self):
         """Test find() with two valid multi-terms"""
-        result = Project.objects.find(['top', 'sub'])
+        result = Project.objects.find(['category', 'project'])
         self.assertEqual(len(result), 2)
 
     def test_find_description(self):
         """Test find() with search term for description"""
         result = Project.objects.find(['xxx'], project_type=None)
         self.assertEqual(len(result), 1)
         self.assertEqual(result[0], self.category_top)
@@ -821,24 +1004,23 @@
     def test_find_description_multi_two(self):
         """Test find() with two valid multi-search terms for description"""
         result = Project.objects.find(['xxx', 'yyy'], project_type=None)
         self.assertEqual(len(result), 2)
 
     def test_find_multi_fields(self):
         """Test find() with multiple terms for different fields"""
-        result = Project.objects.find(['sub', 'xxx'])
+        result = Project.objects.find(['project', 'xxx'])
         self.assertEqual(len(result), 2)
 
 
 class TestProjectSetting(
     ProjectMixin, RoleAssignmentMixin, AppSettingMixin, TestCase
 ):
     """Tests for model.AppSetting with user == None"""
 
-    # NOTE: This assumes an example app is available
     def setUp(self):
         # Init project
         self.project = self.make_project(
             title='TestProject', type=PROJECT_TYPE_PROJECT, parent=None
         )
         # Init role
         self.role_owner = Role.objects.get(name=PROJECT_ROLE_OWNER)
@@ -967,45 +1149,41 @@
         val = self.setting_json.get_value()
         self.assertEqual(val, {'Testing': 'good'})
 
 
 class TestUserSetting(
     ProjectMixin, RoleAssignmentMixin, AppSettingMixin, TestCase
 ):
-    """Tests for model.AppSetting with project == None"""
+    """Tests for AppSetting with USER scope"""
 
-    # NOTE: This assumes an example app is available
     def setUp(self):
         # Init user & role
         self.user = self.make_user('owner')
-        # Init test setting
+        # Init settings
         self.setting_str = self.make_setting(
             app_name=EXAMPLE_APP_NAME,
             name='str_setting',
             setting_type='STRING',
             value='test',
             user=self.user,
         )
-        # Init integer setting
         self.setting_int = self.make_setting(
             app_name=EXAMPLE_APP_NAME,
             name='int_setting',
             setting_type='INTEGER',
             value=170,
             user=self.user,
         )
-        # Init boolean setting
         self.setting_bool = self.make_setting(
             app_name=EXAMPLE_APP_NAME,
             name='bool_setting',
             setting_type='BOOLEAN',
             value=True,
             user=self.user,
         )
-        # Init JSON setting
         self.setting_json = self.make_setting(
             app_name=EXAMPLE_APP_NAME,
             name='json_setting',
             setting_type='JSON',
             value=None,
             value_json={'Testing': 'good'},
             user=self.user,
@@ -1091,59 +1269,14 @@
 
     def test_get_value_json(self):
         """Test get_value() with type BOOLEAN"""
         val = self.setting_json.get_value()
         self.assertEqual(val, {'Testing': 'good'})
 
 
-# TODO: Test manager
-
-
-class TestProjectUserTag(
-    ProjectMixin, RoleAssignmentMixin, ProjectUserTagMixin, TestCase
-):
-    """Tests for model.ProjectUserTag"""
-
-    def setUp(self):
-        # Init project
-        self.project = self.make_project(
-            title='TestProject', type=PROJECT_TYPE_PROJECT, parent=None
-        )
-        # Init role
-        self.role_owner = Role.objects.get(name=PROJECT_ROLE_OWNER)
-        # Init user & role
-        self.user = self.make_user('owner')
-        self.owner_as = self.make_assignment(
-            self.project, self.user, self.role_owner
-        )
-        # Init tag
-        self.tag = self.make_tag(self.project, self.user, PROJECT_TAG_STARRED)
-
-    def test_initialization(self):
-        """Test ProjectUserTag initialization"""
-        expected = {
-            'id': self.tag.pk,
-            'project': self.project.pk,
-            'user': self.user.pk,
-            'name': PROJECT_TAG_STARRED,
-            'sodar_uuid': self.tag.sodar_uuid,
-        }
-        self.assertEqual(model_to_dict(self.tag), expected)
-
-    def test__str__(self):
-        """Test ProjectUserTag __str__()"""
-        expected = 'TestProject: owner: STARRED'
-        self.assertEqual(str(self.tag), expected)
-
-    def test__repr__(self):
-        """Test ProjectUserTag __repr__()"""
-        expected = "ProjectUserTag('TestProject', 'owner', 'STARRED')"
-        self.assertEqual(repr(self.tag), expected)
-
-
 class TestRemoteSite(
     ProjectMixin, RoleAssignmentMixin, RemoteSiteMixin, TestCase
 ):
     """Tests for model.RemoteSite"""
 
     def setUp(self):
         # Init project
@@ -1321,12 +1454,67 @@
         except ValidationError as e:
             self.fail(e)
 
     def test_get_project(self):
         """Test get_project() with project and project_uuid"""
         self.assertEqual(self.remote_project.get_project(), self.project)
 
-    def test_get_project_no_foreignkey(self):
+    def test_get_project_no_foreign_key(self):
         """Test get_project() with no project foreign key"""
         self.remote_project.project = None
         self.remote_project.save()
         self.assertEqual(self.remote_project.get_project(), self.project)
+
+
+class TestSODARUser(TestCase):
+    """Tests for the SODARUser class"""
+
+    def setUp(self):
+        self.user = self.make_user()
+
+    def test__str__(self):
+        """Test __str__()"""
+        self.assertEqual(
+            self.user.__str__(), 'testuser'
+        )  # This is the default username for self.make_user()
+
+    def test_get_form_label(self):
+        """Test get_form_label()"""
+        self.assertEqual(self.user.get_form_label(), 'testuser')
+
+    def test_get_form_label_email(self):
+        """Test get_form_label() with email"""
+        self.assertEqual(
+            self.user.get_form_label(email=True),
+            'testuser <testuser@example.com>',
+        )
+
+    def test_get_form_label_name(self):
+        """Test get_form_label() with name"""
+        self.user.name = 'Full Name'
+        self.assertEqual(
+            self.user.get_form_label(),
+            'Full Name (testuser)',
+        )
+
+    def test_get_form_label_first_last(self):
+        """Test get_form_label() with first and last name"""
+        self.user.first_name = 'Full'
+        self.user.last_name = 'Name'
+        self.assertEqual(
+            self.user.get_form_label(email=True),
+            'Full Name (testuser) <testuser@example.com>',
+        )
+
+    def test_update_full_name(self):
+        """Test update_full_name()"""
+        self.assertEqual(self.user.name, '')
+        self.user.first_name = 'Full'
+        self.user.last_name = 'Name'
+        self.user.update_full_name()
+        self.assertEqual(self.user.name, 'Full Name')
+
+    def test_update_ldap_username(self):
+        """Test update_ldap_username()"""
+        self.user.username = 'user@example'
+        self.user.update_ldap_username()
+        self.assertEqual(self.user.username, 'user@EXAMPLE')
```

### Comparing `django-sodar-core-0.12.0/projectroles/tests/test_permissions.py` & `django-sodar-core-0.13.0/filesfolders/tests/test_permissions_api.py`

 * *Files 21% similar despite different names*

```diff
@@ -1,2143 +1,2044 @@
-"""UI view permission tests for the projectroles app"""
+"""REST API view permission tests for the filesfolders app"""
 
-from urllib.parse import urlencode, quote
+import os
+import uuid
 
 from django.test import override_settings
 from django.urls import reverse
 
-from test_plus.test import TestCase
-
-from projectroles.models import Role, SODAR_CONSTANTS
-from projectroles.utils import build_secret
-from projectroles.tests.test_models import (
-    ProjectMixin,
-    RoleAssignmentMixin,
-    ProjectInviteMixin,
-    RemoteSiteMixin,
-    RemoteProjectMixin,
-    AppSettingMixin,
+# Projectroles dependency
+from projectroles.tests.test_permissions_api import (
+    TestCoreProjectAPIPermissionBase,
 )
+from projectroles.utils import build_secret
 
+from filesfolders.models import File, Folder, HyperLink
+from filesfolders.tests.test_models import (
+    FileMixin,
+    FolderMixin,
+    HyperLinkMixin,
+)
 
-# SODAR constants
-PROJECT_ROLE_OWNER = SODAR_CONSTANTS['PROJECT_ROLE_OWNER']
-PROJECT_ROLE_DELEGATE = SODAR_CONSTANTS['PROJECT_ROLE_DELEGATE']
-PROJECT_ROLE_CONTRIBUTOR = SODAR_CONSTANTS['PROJECT_ROLE_CONTRIBUTOR']
-PROJECT_ROLE_GUEST = SODAR_CONSTANTS['PROJECT_ROLE_GUEST']
-PROJECT_TYPE_CATEGORY = SODAR_CONSTANTS['PROJECT_TYPE_CATEGORY']
-PROJECT_TYPE_PROJECT = SODAR_CONSTANTS['PROJECT_TYPE_PROJECT']
-SITE_MODE_SOURCE = SODAR_CONSTANTS['SITE_MODE_SOURCE']
-SITE_MODE_TARGET = SODAR_CONSTANTS['SITE_MODE_TARGET']
 
 # Local constants
-REMOTE_SITE_NAME = 'Test site'
-REMOTE_SITE_URL = 'https://sodar.bihealth.org'
-REMOTE_SITE_SECRET = build_secret()
-
-
-class TestPermissionMixin:
-    """Helper class for permission tests"""
-
-    def _send_request(self, url, method, req_kwargs):
-        req_method = getattr(self.client, method.lower(), None)
-        if not req_method:
-            raise ValueError('Invalid method "{}"'.format(method))
-        return req_method(url, **req_kwargs)
-
-    def assert_response(
-        self,
-        url,
-        users,
-        status_code,
-        redirect_user=None,
-        redirect_anon=None,
-        method='GET',
-        data=None,
-        header=None,
-        cleanup_method=None,
-        req_kwargs=None,
-    ):
-        """
-        Assert a response status code for url with a list of users. Also checks
-        for redirection URL where applicable.
-
-        :param url: Target URL for the request
-        :param users: Users to test (single user, list or tuple)
-        :param status_code: Status code
-        :param redirect_user: Redirect URL for signed in user (optional)
-        :param redirect_anon: Redirect URL for anonymous (optional)
-        :param method: Method for request (string, optional, default='GET')
-        :param data: Optional data for request (dict, optional)
-        :param header: Request header (dict, optional)
-        :param cleanup_method: Callable method to clean up data after a
-               successful request
-        :param req_kwargs: Optional request kwargs override (dict or None)
-        """
-        if header is None:
-            header = {}
-        if not isinstance(users, (list, tuple)):
-            users = [users]
-
-        for user in users:
-            req_kwargs = req_kwargs if req_kwargs else {}
-            if data:
-                req_kwargs.update({'data': data})
-            if header:
-                req_kwargs.update(header)
-
-            if user:  # Authenticated user
-                re_url = redirect_user if redirect_user else reverse('home')
-                with self.login(user):
-                    response = self._send_request(url, method, req_kwargs)
-            else:  # Anonymous
-                if redirect_anon:
-                    re_url = redirect_anon
-                else:
-                    url_split = url.split('?')
-                    if len(url_split) > 1:
-                        next_url = url_split[0] + quote('?' + url_split[1])
-                    else:
-                        next_url = url
-                    re_url = reverse('login') + '?next=' + next_url
-                response = self._send_request(url, method, req_kwargs)
-
-            msg = 'user={}'.format(user)
-            self.assertEqual(response.status_code, status_code, msg=msg)
-            if status_code == 302:
-                self.assertEqual(response.url, re_url, msg=msg)
-            if cleanup_method:
-                cleanup_method()
-
-
-class TestPermissionBase(TestPermissionMixin, TestCase):
-    """
-    Base class for permission tests for UI views.
+SECRET = '7dqq83clo2iyhg29hifbor56og6911r5'
+TEST_DATA_PATH = os.path.dirname(__file__) + '/data/'
+ZIP_PATH_NO_FILES = TEST_DATA_PATH + 'no_files.zip'
 
-    NOTE: To use with DRF API views, you need to use APITestCase
-    """
 
+class TestFolderAPIPermissions(FolderMixin, TestCoreProjectAPIPermissionBase):
+    """Tests for Folder API view permissions"""
 
-class TestProjectPermissionBase(
-    ProjectMixin, RoleAssignmentMixin, ProjectInviteMixin, TestPermissionBase
-):
-    """
-    Base class for testing project permissions.
+    @classmethod
+    def _cleanup_folder_create(cls):
+        Folder.objects.order_by('-pk').first().delete()
 
-    NOTE: To use with DRF API views, you need to use APITestCase
-    """
+    def _cleanup_folder_destroy(self, obj_uuid):
+        folder = self.make_folder(
+            name='folder',
+            project=self.project,
+            folder=None,
+            owner=self.user_owner,
+            description='',
+        )
+        folder.sodar_uuid = obj_uuid
+        folder.save()
 
     def setUp(self):
-        # Init roles
-        self.role_owner = Role.objects.get_or_create(name=PROJECT_ROLE_OWNER)[0]
-        self.role_delegate = Role.objects.get_or_create(
-            name=PROJECT_ROLE_DELEGATE
-        )[0]
-        self.role_contributor = Role.objects.get_or_create(
-            name=PROJECT_ROLE_CONTRIBUTOR
-        )[0]
-        self.role_guest = Role.objects.get_or_create(name=PROJECT_ROLE_GUEST)[0]
-
-        # Init users
-        # Superuser
-        self.superuser = self.make_user('superuser')
-        self.superuser.is_staff = True
-        self.superuser.is_superuser = True
-        self.superuser.save()
-        # No user
-        self.anonymous = None
-        # Users with role assignments
-        self.user_owner_cat = self.make_user('user_owner_cat')
-        self.user_owner = self.make_user('user_owner')
-        self.user_delegate = self.make_user('user_delegate')
-        self.user_contributor = self.make_user('user_contributor')
-        self.user_guest = self.make_user('user_guest')
-        # User without role assignments
-        self.user_no_roles = self.make_user('user_no_roles')
-
-        # Init projects
-        # Top level category
-        self.category = self.make_project(
-            title='TestCategoryTop', type=PROJECT_TYPE_CATEGORY, parent=None
-        )
-        # Subproject under category
-        self.project = self.make_project(
-            title='TestProjectSub',
-            type=PROJECT_TYPE_PROJECT,
-            parent=self.category,
-        )
-        # Init role assignments
-        self.owner_as_cat = self.make_assignment(
-            self.category, self.user_owner_cat, self.role_owner
-        )
-        self.owner_as = self.make_assignment(
-            self.project, self.user_owner, self.role_owner
-        )
-        self.delegate_as = self.make_assignment(
-            self.project, self.user_delegate, self.role_delegate
-        )
-        self.contributor_as = self.make_assignment(
-            self.project, self.user_contributor, self.role_contributor
-        )
-        self.guest_as = self.make_assignment(
-            self.project, self.user_guest, self.role_guest
-        )
-
-
-class TestBaseViews(TestProjectPermissionBase):
-    """Tests for base UI views"""
-
-    def test_home(self):
-        """Test permissions for the home view"""
-        url = reverse('home')
-        good_users = [
-            self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-            self.user_no_roles,
-        ]
-        bad_users = [self.anonymous]
-        self.assert_response(url, good_users, 200)
-        self.assert_response(url, bad_users, 302)
-
-    @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
-    def test_home_anon(self):
-        """Test permissions for the home view with anonymous access"""
-        url = reverse('home')
-        good_users = [
-            self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-            self.user_no_roles,
-            self.anonymous,
-        ]
-        self.assert_response(url, good_users, 200)
+        super().setUp()
+        self.folder = self.make_folder(
+            name='folder',
+            project=self.project,
+            folder=None,
+            owner=self.user_owner,  # Project owner is the owner of folder
+            description='',
+        )
 
-    def test_project_search(self):
-        """Test permissions for search results"""
-        url = reverse('projectroles:search') + '?' + urlencode({'s': 'test'})
+    def test_folder_list(self):
+        """Test permissions for folder listing"""
+        url = reverse(
+            'filesfolders:api_folder_list_create',
+            kwargs={'project': self.project.sodar_uuid},
+        )
         good_users = [
             self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-            self.user_no_roles,
-        ]
-        bad_users = [self.anonymous]
-        self.assert_response(url, good_users, 200)
-        self.assert_response(reverse('home'), bad_users, 302)
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
+        ]
+        bad_users = [self.user_finder_cat, self.user_no_roles]
+        self.assert_response_api(url, good_users, 200)
+        self.assert_response_api(url, bad_users, 403)
+        self.assert_response_api(url, self.anonymous, 401)
+        self.assert_response_api(url, good_users, 200, knox=True)
+        # Test public project
+        self.project.set_public()
+        self.assert_response_api(url, self.user_no_roles, 200)
 
     @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
-    def test_project_search_anon(self):
-        """Test permissions for search results with anonymous access"""
-        url = reverse('projectroles:search') + '?' + urlencode({'s': 'test'})
-        good_users = [
-            self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-            self.user_no_roles,
-            self.anonymous,
-        ]
-        self.assert_response(url, good_users, 200)
-
-    def test_project_search_advanced(self):
-        """Test permissions for the advanced search view"""
-        url = reverse('projectroles:search_advanced')
-        good_users = [
-            self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-            self.user_no_roles,
-        ]
-        bad_users = [self.anonymous]
-        self.assert_response(url, good_users, 200)
-        self.assert_response(reverse('home'), bad_users, 302)
+    def test_folder_list_anon(self):
+        """Test permissions for folder listing with anonymous access"""
+        url = reverse(
+            'filesfolders:api_folder_list_create',
+            kwargs={'project': self.project.sodar_uuid},
+        )
+        self.project.set_public()
+        self.assert_response_api(url, self.anonymous, 200)
 
-    @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
-    def test_project_search_advanced_anon(self):
-        """Test permissions for the advanced search view with anonymous access"""
-        url = reverse('projectroles:search_advanced')
+    def test_folder_list_archive(self):
+        """Test permissions for folder listing with archived project"""
+        self.project.set_archive()
+        url = reverse(
+            'filesfolders:api_folder_list_create',
+            kwargs={'project': self.project.sodar_uuid},
+        )
         good_users = [
             self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-            self.user_no_roles,
-            self.anonymous,
-        ]
-        self.assert_response(url, good_users, 200)
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
+        ]
+        bad_users = [self.user_finder_cat, self.user_no_roles]
+        self.assert_response_api(url, good_users, 200)
+        self.assert_response_api(url, bad_users, 403)
+        self.assert_response_api(url, self.anonymous, 401)
+        self.assert_response_api(url, good_users, 200, knox=True)
+        # Test public project
+        self.project.set_public()
+        self.assert_response_api(url, self.user_no_roles, 200)
 
-    def test_login(self):
-        """Test permissions for the login view"""
-        url = reverse('login')
+    def test_folder_create(self):
+        """Test permissions for folder creation"""
+        url = reverse(
+            'filesfolders:api_folder_list_create',
+            kwargs={'project': self.project.sodar_uuid},
+        )
+        request_data = {
+            'name': 'New Folder',
+            'flag': 'IMPORTANT',
+            'description': 'Folder\'s description',
+        }
         good_users = [
             self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-            self.user_no_roles,
-            self.anonymous,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
         ]
-        self.assert_response(url, good_users, 200)
-
-    def test_logout(self):
-        """Test permissions for the logout view"""
-        url = reverse('logout')
-        good_users = [
-            self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
+        bad_users = [
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_guest,
             self.user_no_roles,
         ]
-        self.assert_response(
+        self.assert_response_api(
             url,
             good_users,
-            302,
-            redirect_user='/login/',
-            redirect_anon='/login/',
+            201,
+            method='POST',
+            data=request_data,
+            cleanup_method=self._cleanup_folder_create,
         )
-
-    def test_admin(self):
-        """Test permissions for the admin view"""
-        url = '/admin/'
-        good_users = [self.superuser]
-        bad_users = [
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-            self.user_no_roles,
-            self.anonymous,
-        ]
-        self.assert_response(url, good_users, 200)
-        self.assert_response(
+        self.assert_response_api(
+            url, bad_users, 403, method='POST', data=request_data
+        )
+        self.assert_response_api(
+            url, self.anonymous, 401, method='POST', data=request_data
+        )
+        self.assert_response_api(
             url,
-            bad_users,
-            302,
-            redirect_user='/admin/login/?next=/admin/',
-            redirect_anon='/admin/login/?next=/admin/',
+            good_users,
+            201,
+            method='POST',
+            data=request_data,
+            cleanup_method=self._cleanup_folder_create,
+            knox=True,
+        )
+        # Test public project
+        self.project.set_public()
+        self.assert_response_api(
+            url, self.user_no_roles, 403, method='POST', data=request_data
         )
 
     @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
-    def test_admin_anon(self):
-        """Test permissions for the admin view with anonymous access"""
-        url = '/admin/'
+    def test_folder_create_anon(self):
+        """Test permissions for folder creation with anonymous access"""
+        url = reverse(
+            'filesfolders:api_folder_list_create',
+            kwargs={'project': self.project.sodar_uuid},
+        )
+        request_data = {
+            'name': 'New Folder',
+            'flag': 'IMPORTANT',
+            'description': 'Folder\'s description',
+        }
+        self.project.set_public()
+        self.assert_response_api(
+            url, self.anonymous, 401, method='POST', data=request_data
+        )
+
+    def test_folder_create_archive(self):
+        """Test permissions for folder creation with archived project"""
+        self.project.set_archive()
+        url = reverse(
+            'filesfolders:api_folder_list_create',
+            kwargs={'project': self.project.sodar_uuid},
+        )
+        request_data = {
+            'name': 'New Folder',
+            'flag': 'IMPORTANT',
+            'description': 'Folder\'s description',
+        }
         good_users = [self.superuser]
         bad_users = [
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
             self.user_no_roles,
-            self.anonymous,
         ]
-        self.assert_response(url, good_users, 200)
-        self.assert_response(
+        self.assert_response_api(
             url,
-            bad_users,
-            302,
-            redirect_user='/admin/login/?next=/admin/',
-            redirect_anon='/admin/login/?next=/admin/',
+            good_users,
+            201,
+            method='POST',
+            data=request_data,
+            cleanup_method=self._cleanup_folder_create,
         )
-
-
-class TestProjectViews(AppSettingMixin, TestProjectPermissionBase):
-    """Permission tests for Project UI views"""
-
-    def _setup_ip_allowing(self, ip_list):
-        # Init IP restrict setting
-        self.make_setting(
-            app_name='projectroles',
-            name='ip_restrict',
-            setting_type='BOOLEAN',
-            value=True,
-            project=self.project,
+        self.assert_response_api(
+            url, bad_users, 403, method='POST', data=request_data
         )
-        # Init IP allowlist setting
-        self.make_setting(
-            app_name='projectroles',
-            name='ip_allowlist',
-            setting_type='JSON',
-            value=None,
-            value_json=ip_list,
-            project=self.project,
+        self.assert_response_api(
+            url, self.anonymous, 401, method='POST', data=request_data
         )
-
-    def test_category_details(self):
-        """Test permissions for category details"""
-        url = reverse(
-            'projectroles:detail', kwargs={'project': self.category.sodar_uuid}
+        self.assert_response_api(
+            url,
+            good_users,
+            201,
+            method='POST',
+            data=request_data,
+            cleanup_method=self._cleanup_folder_create,
+            knox=True,
         )
-        # Add user with access to project below category: should still be able
-        # to view the category
-        new_user = self.make_user('new_user')
-        self.make_assignment(self.project, new_user, self.role_contributor)
-        good_users = [
-            self.superuser,
-            self.owner_as_cat.user,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-            new_user,
-        ]
-        bad_users = [self.anonymous, self.user_no_roles]
-        self.assert_response(url, good_users, 200)
-        self.assert_response(url, bad_users, 302)
         # Test public project
         self.project.set_public()
-        self.assert_response(url, self.user_no_roles, 200)
+        self.assert_response_api(
+            url, self.user_no_roles, 403, method='POST', data=request_data
+        )
 
-    @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
-    def test_category_details_anon(self):
-        """Test permissions for category details with anonymous access"""
+    def test_folder_retrieve(self):
+        """Test permissions for folder retrieval"""
         url = reverse(
-            'projectroles:detail', kwargs={'project': self.category.sodar_uuid}
+            'filesfolders:api_folder_retrieve_update_destroy',
+            kwargs={'folder': self.folder.sodar_uuid},
         )
         good_users = [
             self.superuser,
-            self.owner_as_cat.user,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
         ]
-        bad_users = [self.anonymous, self.user_no_roles]
-        self.assert_response(url, good_users, 200)
-        self.assert_response(url, bad_users, 302)
+        bad_users = [self.user_finder_cat, self.user_no_roles]
+        self.assert_response_api(url, good_users, 200, method='GET')
+        self.assert_response_api(url, bad_users, 403)
+        self.assert_response_api(url, self.anonymous, 401)
+        self.assert_response_api(url, good_users, 200, knox=True)
         # Test public project
         self.project.set_public()
-        self.assert_response(url, bad_users, 200)
+        self.assert_response_api(url, self.user_no_roles, 200)
 
-    def test_project_details(self):
-        """Test permissions for project details"""
+    @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
+    def test_folder_retrieve_anon(self):
+        """Test permissions for folder retrieval with anonymous access"""
         url = reverse(
-            'projectroles:detail', kwargs={'project': self.project.sodar_uuid}
+            'filesfolders:api_folder_retrieve_update_destroy',
+            kwargs={'folder': self.folder.sodar_uuid},
         )
-        good_users = [
-            self.superuser,
-            self.owner_as_cat.user,  # Inherited
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-        ]
-        bad_users = [self.anonymous, self.user_no_roles]
-        self.assert_response(url, good_users, 200)
-        self.assert_response(url, bad_users, 302)
         self.project.set_public()
-        self.assert_response(url, self.user_no_roles, 200)
+        self.assert_response_api(url, self.anonymous, 200)
 
-    @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
-    def test_project_details_anon(self):
-        """Test permissions for project details with anonymous access"""
+    def test_folder_retrieve_archive(self):
+        """Test permissions for folder retrieval with archived project"""
+        self.project.set_archive()
         url = reverse(
-            'projectroles:detail', kwargs={'project': self.project.sodar_uuid}
+            'filesfolders:api_folder_retrieve_update_destroy',
+            kwargs={'folder': self.folder.sodar_uuid},
         )
         good_users = [
             self.superuser,
-            self.owner_as_cat.user,  # Inherited
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-        ]
-        bad_users = [self.anonymous, self.user_no_roles]
-        self.assert_response(url, good_users, 200)
-        self.assert_response(url, bad_users, 302)
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
+        ]
+        bad_users = [self.user_finder_cat, self.user_no_roles]
+        self.assert_response_api(url, good_users, 200, method='GET')
+        self.assert_response_api(url, bad_users, 403)
+        self.assert_response_api(url, self.anonymous, 401)
+        # Test public project
         self.project.set_public()
-        self.assert_response(url, bad_users, 200)
+        self.assert_response_api(url, self.user_no_roles, 200)
 
-    def test_project_details_ip_allowing_http_x_forwarded_for_block_all(self):
-        """Test permissions for project details"""
-        self._setup_ip_allowing([])
+    def test_folder_update_put(self):
+        """Test permissions for folder updating with PUT"""
         url = reverse(
-            'projectroles:detail', kwargs={'project': self.project.sodar_uuid}
+            'filesfolders:api_folder_retrieve_update_destroy',
+            kwargs={'folder': self.folder.sodar_uuid},
         )
+        request_data = {
+            'name': 'UPDATED Folder',
+            'flag': 'FLAG',
+            'description': 'UPDATED Description',
+        }
         good_users = [
             self.superuser,
-            self.owner_as_cat.user,  # Inherited
-            self.owner_as.user,
-            self.delegate_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_owner,  # Owner of folder
+            self.user_delegate,
         ]
         bad_users = [
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_contributor,
+            self.user_guest,
             self.user_no_roles,
-            self.anonymous,
         ]
-        header = {'HTTP_X_FORWARDED_FOR': '192.168.1.1'}
-        self.assert_response(url, good_users, 200, header=header)
-        self.assert_response(url, bad_users, 302, header=header)
+        self.assert_response_api(
+            url, good_users, 200, method='PUT', data=request_data
+        )
+        self.assert_response_api(
+            url, bad_users, 403, method='PUT', data=request_data
+        )
+        self.assert_response_api(
+            url, self.anonymous, 401, method='PUT', data=request_data
+        )
+        self.assert_response_api(
+            url, good_users, 200, method='PUT', data=request_data, knox=True
+        )
+        # Test public project
         self.project.set_public()
-        self.assert_response(url, self.user_no_roles, 302, header=header)
-
-    def test_project_details_ip_allowing_x_forwarded_for_block_all(self):
-        """Test permissions for project details"""
-        self._setup_ip_allowing([])
+        self.assert_response_api(
+            url, self.user_no_roles, 403, method='PUT', data=request_data
+        )
 
+    @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
+    def test_folder_update_put_anon(self):
+        """Test permissions for folder updating with anonymous access"""
         url = reverse(
-            'projectroles:detail', kwargs={'project': self.project.sodar_uuid}
+            'filesfolders:api_folder_retrieve_update_destroy',
+            kwargs={'folder': self.folder.sodar_uuid},
         )
-        good_users = [
-            self.superuser,
-            self.owner_as_cat.user,  # Inherited
-            self.owner_as.user,
-            self.delegate_as.user,
-        ]
-        bad_users = [
-            self.contributor_as.user,
-            self.guest_as.user,
-            self.user_no_roles,
-            self.anonymous,
-        ]
-        header = {'X_FORWARDED_FOR': '192.168.1.1'}
-        self.assert_response(url, good_users, 200, header=header)
-        self.assert_response(url, bad_users, 302, header=header)
+        request_data = {
+            'name': 'UPDATED Folder',
+            'flag': 'FLAG',
+            'description': 'UPDATED Description',
+        }
         self.project.set_public()
-        self.assert_response(url, self.user_no_roles, 302, header=header)
+        self.assert_response_api(
+            url, self.anonymous, 401, method='PUT', data=request_data
+        )
 
-    def test_project_details_ip_allowing_forwarded_block_all(self):
-        """Test permissions for project details"""
-        self._setup_ip_allowing([])
+    def test_folder_update_put_archive(self):
+        """Test permissions for folder updating with PUT and archived project"""
+        self.project.set_archive()
         url = reverse(
-            'projectroles:detail', kwargs={'project': self.project.sodar_uuid}
+            'filesfolders:api_folder_retrieve_update_destroy',
+            kwargs={'folder': self.folder.sodar_uuid},
         )
-        good_users = [
-            self.superuser,
-            self.owner_as_cat.user,  # Inherited
-            self.owner_as.user,
-            self.delegate_as.user,
-        ]
+        request_data = {
+            'name': 'UPDATED Folder',
+            'flag': 'FLAG',
+            'description': 'UPDATED Description',
+        }
+        good_users = [self.superuser]
         bad_users = [
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
             self.user_no_roles,
-            self.anonymous,
         ]
-        header = {'FORWARDED': '192.168.1.1'}
-        self.assert_response(url, good_users, 200, header=header)
-        self.assert_response(url, bad_users, 302, header=header)
+        self.assert_response_api(
+            url, good_users, 200, method='PUT', data=request_data
+        )
+        self.assert_response_api(
+            url, bad_users, 403, method='PUT', data=request_data
+        )
+        self.assert_response_api(
+            url, self.anonymous, 401, method='PUT', data=request_data
+        )
+        # Test public project
         self.project.set_public()
-        self.assert_response(url, self.user_no_roles, 302, header=header)
+        self.assert_response_api(
+            url, self.user_no_roles, 403, method='PUT', data=request_data
+        )
 
-    def test_project_details_ip_allowing_remote_addr_block_all(self):
-        """Test permissions for project details"""
-        self._setup_ip_allowing([])
+    def test_folder_update_patch(self):
+        """Test permissions for folder updating with PATCH"""
         url = reverse(
-            'projectroles:detail', kwargs={'project': self.project.sodar_uuid}
+            'filesfolders:api_folder_retrieve_update_destroy',
+            kwargs={'folder': self.folder.sodar_uuid},
         )
+        request_data = {'name': 'UPDATED Folder'}
         good_users = [
             self.superuser,
-            self.owner_as_cat.user,  # Inherited
-            self.owner_as.user,
-            self.delegate_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_owner,  # Owner of folder
+            self.user_delegate,
         ]
         bad_users = [
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_contributor,
+            self.user_guest,
             self.user_no_roles,
-            self.anonymous,
         ]
-        header = {'REMOTE_ADDR': '192.168.1.1'}
-        self.assert_response(url, good_users, 200, header=header)
-        self.assert_response(url, bad_users, 302, header=header)
+        self.assert_response_api(
+            url, good_users, 200, method='PATCH', data=request_data
+        )
+        self.assert_response_api(
+            url, bad_users, 403, method='PATCH', data=request_data
+        )
+        self.assert_response_api(
+            url, self.anonymous, 401, method='PATCH', data=request_data
+        )
+        self.assert_response_api(
+            url, good_users, 200, method='PATCH', data=request_data, knox=True
+        )
+        # Test public project
         self.project.set_public()
-        self.assert_response(url, self.user_no_roles, 302, header=header)
+        self.assert_response_api(
+            url, self.user_no_roles, 403, method='PATCH', data=request_data
+        )
 
-    def test_project_details_ip_allowing_http_x_forwarded_for_allow_ip(self):
-        """Test permissions for project details"""
-        self._setup_ip_allowing(['192.168.1.1'])
+    @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
+    def test_folder_update_patch_anon(self):
+        """Test permissions for folder updating with anonymous access"""
         url = reverse(
-            'projectroles:detail', kwargs={'project': self.project.sodar_uuid}
+            'filesfolders:api_folder_retrieve_update_destroy',
+            kwargs={'folder': self.folder.sodar_uuid},
         )
-        good_users = [
-            self.superuser,
-            self.owner_as_cat.user,  # Inherited
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-        ]
-        bad_users = [
-            self.user_no_roles,
-            self.anonymous,
-        ]
-        header = {'HTTP_X_FORWARDED_FOR': '192.168.1.1'}
-        self.assert_response(url, good_users, 200, header=header)
-        self.assert_response(url, bad_users, 302, header=header)
+        request_data = {'name': 'UPDATED Folder'}
         self.project.set_public()
-        self.assert_response(url, self.user_no_roles, 200, header=header)
+        self.assert_response_api(
+            url, self.anonymous, 401, method='PATCH', data=request_data
+        )
 
-    def test_project_details_ip_allowing_x_forwarded_for_allow_ip(self):
-        """Test permissions for project details"""
-        self._setup_ip_allowing(['192.168.1.1'])
+    def test_folder_update_patch_archive(self):
+        """Test permissions for folder updating with PATCH and archived project"""
+        self.project.set_archive()
         url = reverse(
-            'projectroles:detail', kwargs={'project': self.project.sodar_uuid}
+            'filesfolders:api_folder_retrieve_update_destroy',
+            kwargs={'folder': self.folder.sodar_uuid},
         )
-        good_users = [
-            self.superuser,
-            self.owner_as_cat.user,  # Inherited
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-        ]
+        request_data = {'name': 'UPDATED Folder'}
+        good_users = [self.superuser]
         bad_users = [
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
             self.user_no_roles,
-            self.anonymous,
         ]
-        header = {'X_FORWARDED_FOR': '192.168.1.1'}
-        self.assert_response(url, good_users, 200, header=header)
-        self.assert_response(url, bad_users, 302, header=header)
+        self.assert_response_api(
+            url, good_users, 200, method='PATCH', data=request_data
+        )
+        self.assert_response_api(
+            url, bad_users, 403, method='PATCH', data=request_data
+        )
+        self.assert_response_api(
+            url, self.anonymous, 401, method='PATCH', data=request_data
+        )
+        # Test public project
         self.project.set_public()
-        self.assert_response(url, self.user_no_roles, 200, header=header)
-
-    def test_project_details_ip_allowing_forwarded_allow_ip(self):
-        """Test permissions for project details"""
-        self._setup_ip_allowing(['192.168.1.1'])
+        self.assert_response_api(
+            url, self.user_no_roles, 403, method='PATCH', data=request_data
+        )
 
+    def test_folder_destroy(self):
+        """Test permissions for folder destroying with DELETE"""
+        obj_uuid = uuid.uuid4()
+        c_kwargs = {'obj_uuid': obj_uuid}
         url = reverse(
-            'projectroles:detail', kwargs={'project': self.project.sodar_uuid}
+            'filesfolders:api_folder_retrieve_update_destroy',
+            kwargs={'folder': obj_uuid},
         )
         good_users = [
             self.superuser,
-            self.owner_as_cat.user,  # Inherited
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_owner,  # Owner of folder
+            self.user_delegate,
         ]
         bad_users = [
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_contributor,
+            self.user_guest,
             self.user_no_roles,
-            self.anonymous,
         ]
-        header = {'FORWARDED': '192.168.1.1'}
-        self.assert_response(url, good_users, 200, header=header)
-        self.assert_response(url, bad_users, 302, header=header)
+        self._cleanup_folder_destroy(**c_kwargs)
+        self.assert_response_api(
+            url,
+            good_users,
+            204,
+            method='DELETE',
+            cleanup_method=self._cleanup_folder_destroy,
+            cleanup_kwargs=c_kwargs,
+        )
+        self.assert_response_api(url, bad_users, 403, method='DELETE')
+        self.assert_response_api(url, self.anonymous, 401, method='DELETE')
+        self.assert_response_api(
+            url,
+            good_users,
+            204,
+            method='DELETE',
+            cleanup_method=self._cleanup_folder_destroy,
+            cleanup_kwargs=c_kwargs,
+            knox=True,
+        )
+        # Test public project
         self.project.set_public()
-        self.assert_response(url, self.user_no_roles, 200, header=header)
+        self.assert_response_api(url, self.user_no_roles, 403, method='DELETE')
 
-    def test_project_details_ip_allowing_remote_addr_allow_ip(self):
-        """Test permissions for project details"""
-        self._setup_ip_allowing(['192.168.1.1'])
+    @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
+    def test_folder_destroy_anon(self):
+        """Test permissions for folder destroying with anonymous access"""
+        folder = self.make_folder(
+            name='folder',
+            project=self.project,
+            folder=None,
+            owner=self.user_owner,
+            description='',
+        )
         url = reverse(
-            'projectroles:detail', kwargs={'project': self.project.sodar_uuid}
+            'filesfolders:api_folder_retrieve_update_destroy',
+            kwargs={'folder': folder.sodar_uuid},
         )
-        good_users = [
-            self.superuser,
-            self.owner_as_cat.user,  # Inherited
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-        ]
-        bad_users = [
-            self.user_no_roles,
-            self.anonymous,
-        ]
-        header = {'REMOTE_ADDR': '192.168.1.1'}
-        self.assert_response(url, good_users, 200, header=header)
-        self.assert_response(url, bad_users, 302, header=header)
         self.project.set_public()
-        self.assert_response(url, self.user_no_roles, 200, header=header)
-
-    def test_project_details_ip_allowing_remote_addr_allow_network(self):
-        """Test permissions for project details"""
-        self._setup_ip_allowing(['192.168.1.0/24'])
+        self.assert_response_api(url, self.anonymous, 401, method='DELETE')
 
+    def test_folder_destroy_archive(self):
+        """Test permissions for folder destroying with DELETE and archived project"""
+        self.project.set_archive()
+        obj_uuid = uuid.uuid4()
+        c_kwargs = {'obj_uuid': obj_uuid}
         url = reverse(
-            'projectroles:detail', kwargs={'project': self.project.sodar_uuid}
+            'filesfolders:api_folder_retrieve_update_destroy',
+            kwargs={'folder': obj_uuid},
         )
-        good_users = [
-            self.superuser,
-            self.owner_as_cat.user,  # Inherited
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-        ]
+        good_users = [self.superuser]
         bad_users = [
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
             self.user_no_roles,
-            self.anonymous,
         ]
-        header = {'REMOTE_ADDR': '192.168.1.1'}
-        self.assert_response(url, good_users, 200, header=header)
-        self.assert_response(url, bad_users, 302, header=header)
+        self._cleanup_folder_destroy(**c_kwargs)
+        self.assert_response_api(
+            url,
+            good_users,
+            204,
+            method='DELETE',
+            cleanup_method=self._cleanup_folder_destroy,
+            cleanup_kwargs=c_kwargs,
+        )
+        self.assert_response_api(url, bad_users, 403, method='DELETE')
+        self.assert_response_api(url, self.anonymous, 401, method='DELETE')
+        # Test public project
         self.project.set_public()
-        self.assert_response(url, self.user_no_roles, 200, header=header)
+        self.assert_response_api(url, self.user_no_roles, 403, method='DELETE')
 
-    def test_project_details_ip_allowing_remote_addr_not_in_allowlist_ip(self):
-        """Test permissions for project details"""
-        self._setup_ip_allowing(['192.168.1.2'])
-        url = reverse(
-            'projectroles:detail', kwargs={'project': self.project.sodar_uuid}
+
+class TestFileAPIPermissions(FileMixin, TestCoreProjectAPIPermissionBase):
+    """Tests for File API view permissions"""
+
+    def _cleanup_file_create(self):
+        file = File.objects.filter(name=self.new_file_name).first()
+        if file:
+            file.delete()
+        self.request_data['file'].seek(0)
+
+    def _cleanup_file_update(self):
+        self.request_data['file'].seek(0)
+
+    def _cleanup_file_destroy(self, obj_uuid):
+        file = self.make_file(
+            name='file2.txt',
+            file_name='file2.txt',
+            file_content=self.file_content,
+            project=self.project,
+            folder=None,
+            owner=self.user_owner,
+            description='',
+            public_url=True,
+            secret=build_secret(),
         )
-        good_users = [
-            self.superuser,
-            self.owner_as_cat.user,  # Inherited
-            self.owner_as.user,
-            self.delegate_as.user,
-        ]
-        bad_users = [
-            self.contributor_as.user,
-            self.guest_as.user,
-            self.user_no_roles,
-            self.anonymous,
-        ]
-        header = {'REMOTE_ADDR': '192.168.1.1'}
-        self.assert_response(url, good_users, 200, header=header)
-        self.assert_response(url, bad_users, 302, header=header)
-        self.project.set_public()
-        self.assert_response(url, self.user_no_roles, 302, header=header)
+        file.sodar_uuid = obj_uuid
+        file.save()
+
+    def setUp(self):
+        super().setUp()
+        self.file_content = bytes('content'.encode('utf-8'))
+        self.file = self.make_file(
+            name='file.txt',
+            file_name='file.txt',
+            file_content=self.file_content,
+            project=self.project,
+            folder=None,
+            owner=self.user_owner,
+            description='',
+            public_url=True,
+            secret=SECRET,
+        )
+        self.new_file_name = 'New File'
+        self.request_data = {
+            'name': self.new_file_name,
+            'flag': 'IMPORTANT',
+            'description': 'File\'s description',
+            'secret': 'foo',
+            'public_url': True,
+            'file': open(ZIP_PATH_NO_FILES, 'rb'),
+        }
+
+    def tearDown(self):
+        self.request_data['file'].close()
+        super().tearDown()
 
-    def test_project_details_ip_allowing_remote_addr_not_in_allowlist_network(
-        self,
-    ):
-        """Test permissions for project details"""
-        self._setup_ip_allowing(['192.168.2.0/24'])
+    def test_file_list(self):
+        """Test permissions for file listing"""
         url = reverse(
-            'projectroles:detail', kwargs={'project': self.project.sodar_uuid}
+            'filesfolders:api_file_list_create',
+            kwargs={'project': self.project.sodar_uuid},
         )
         good_users = [
             self.superuser,
-            self.owner_as_cat.user,  # Inherited
-            self.owner_as.user,
-            self.delegate_as.user,
-        ]
-        bad_users = [
-            self.contributor_as.user,
-            self.guest_as.user,
-            self.user_no_roles,
-            self.anonymous,
-        ]
-        header = {'REMOTE_ADDR': '192.168.1.1'}
-        self.assert_response(url, good_users, 200, header=header)
-        self.assert_response(url, bad_users, 302, header=header)
-        self.project.set_public()
-        self.assert_response(url, self.user_no_roles, 302, header=header)
-
-    def test_create_top(self):
-        """Test permissions for top level project creation"""
-        url = reverse('projectroles:create')
-        good_users = [self.superuser]
-        bad_users = [
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-            self.user_no_roles,
-            self.anonymous,
-        ]
-        self.assert_response(url, good_users, 200)
-        self.assert_response(url, bad_users, 302)
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
+        ]
+        bad_users = [self.user_finder_cat, self.user_no_roles]
+        self.assert_response_api(url, good_users, 200)
+        self.assert_response_api(url, bad_users, 403)
+        self.assert_response_api(url, self.anonymous, 401)
+        self.assert_response_api(url, good_users, 200, knox=True)
+        # Test public project
         self.project.set_public()
-        self.assert_response(url, self.user_no_roles, 302)
+        self.assert_response_api(url, self.user_no_roles, 200)
 
     @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
-    def test_create_top_anon(self):
-        """Test permissions for top level project creation with anonymous access"""
-        url = reverse('projectroles:create')
-        self.project.set_public()
-        self.assert_response(url, [self.user_no_roles, self.anonymous], 302)
-
-    def test_create_sub(self):
-        """Test permissions for subproject creation"""
+    def test_file_list_anon(self):
+        """Test permissions for file listing with anonymous access"""
         url = reverse(
-            'projectroles:create', kwargs={'project': self.category.sodar_uuid}
+            'filesfolders:api_file_list_create',
+            kwargs={'project': self.project.sodar_uuid},
         )
-        good_users = [self.superuser, self.owner_as_cat.user]
-        bad_users = [
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-            self.user_no_roles,
-            self.anonymous,
-        ]
-        self.assert_response(url, good_users, 200)
-        self.assert_response(url, bad_users, 302)
         self.project.set_public()
-        self.assert_response(url, self.user_no_roles, 302)
+        self.assert_response_api(url, self.anonymous, 200)
 
-    @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
-    def test_create_sub_anon(self):
-        """Test permissions for subproject creation with anonymous access"""
+    def test_file_list_archive(self):
+        """Test permissions for file listing with archived project"""
+        self.project.set_archive()
         url = reverse(
-            'projectroles:create', kwargs={'project': self.category.sodar_uuid}
+            'filesfolders:api_file_list_create',
+            kwargs={'project': self.project.sodar_uuid},
         )
+        good_users = [
+            self.superuser,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
+        ]
+        bad_users = [self.user_finder_cat, self.user_no_roles]
+        self.assert_response_api(url, good_users, 200)
+        self.assert_response_api(url, bad_users, 403)
+        self.assert_response_api(url, self.anonymous, 401)
+        self.assert_response_api(url, good_users, 200, knox=True)
+        # Test public project
         self.project.set_public()
-        self.assert_response(url, [self.user_no_roles, self.anonymous], 302)
+        self.assert_response_api(url, self.user_no_roles, 200)
 
-    def test_update(self):
-        """Test permissions for project updating"""
+    def test_file_create(self):
+        """Test permissions for file creation"""
         url = reverse(
-            'projectroles:update', kwargs={'project': self.project.sodar_uuid}
+            'filesfolders:api_file_list_create',
+            kwargs={'project': self.project.sodar_uuid},
         )
+        # NOTE: Must call cleanup for ALL requests to seek the file
         good_users = [
             self.superuser,
-            self.owner_as_cat.user,
-            self.owner_as.user,
-            self.delegate_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
         ]
         bad_users = [
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_guest,
             self.user_no_roles,
-            self.anonymous,
         ]
-        self.assert_response(url, good_users, 200)
-        self.assert_response(url, bad_users, 302)
-        self.project.set_public()
-        self.assert_response(url, self.user_no_roles, 302)
-
-    @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
-    def test_update_anon(self):
-        """Test permissions for project updating with anonymous access"""
-        url = reverse(
-            'projectroles:update', kwargs={'project': self.project.sodar_uuid}
+        self.assert_response_api(
+            url,
+            good_users,
+            201,
+            method='POST',
+            format='multipart',
+            data=self.request_data,
+            cleanup_method=self._cleanup_file_create,
         )
-        self.project.set_public()
-        self.assert_response(url, [self.user_no_roles, self.anonymous], 302)
-
-    def test_update_category(self):
-        """Test permissions for category updating"""
-        url = reverse(
-            'projectroles:update', kwargs={'project': self.category.sodar_uuid}
+        self.assert_response_api(
+            url,
+            bad_users,
+            403,
+            method='POST',
+            format='multipart',
+            data=self.request_data,
+            cleanup_method=self._cleanup_file_create,
         )
-        good_users = [self.superuser, self.owner_as_cat.user]
-        bad_users = [
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-            self.user_no_roles,
+        self.assert_response_api(
+            url,
             self.anonymous,
-        ]
-        self.assert_response(url, good_users, 200)
-        self.assert_response(url, bad_users, 302)
+            401,
+            method='POST',
+            format='multipart',
+            data=self.request_data,
+            cleanup_method=self._cleanup_file_create,
+        )
+        self.assert_response_api(
+            url,
+            good_users,
+            201,
+            method='POST',
+            format='multipart',
+            data=self.request_data,
+            cleanup_method=self._cleanup_file_create,
+            knox=True,
+        )
+        # Test public project
         self.project.set_public()
-        self.assert_response(url, self.user_no_roles, 302)
+        self.assert_response_api(
+            url,
+            self.user_no_roles,
+            403,
+            method='POST',
+            format='multipart',
+            data=self.request_data,
+        )
+        self.request_data['file'].close()
 
     @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
-    def test_update_category_anon(self):
-        """Test permissions for category updating with anonymous access"""
+    def test_file_create_anon(self):
+        """Test permissions for file creation with anonymous access"""
         url = reverse(
-            'projectroles:update', kwargs={'project': self.category.sodar_uuid}
+            'filesfolders:api_file_list_create',
+            kwargs={'project': self.project.sodar_uuid},
         )
         self.project.set_public()
-        self.assert_response(url, [self.user_no_roles, self.anonymous], 302)
+        self.assert_response_api(
+            url,
+            self.anonymous,
+            401,
+            method='POST',
+            format='multipart',
+            data=self.request_data,
+        )
+        self.request_data['file'].close()
 
-    def test_archive(self):
-        """Test ProjectArchiveView permissions for project archiving"""
+    def test_file_create_archive(self):
+        """Test permissions for file creation with archived project"""
+        self.project.set_archive()
         url = reverse(
-            'projectroles:archive', kwargs={'project': self.project.sodar_uuid}
+            'filesfolders:api_file_list_create',
+            kwargs={'project': self.project.sodar_uuid},
         )
-        good_users = [
-            self.superuser,
-            self.owner_as_cat.user,
-            self.owner_as.user,
-            self.delegate_as.user,
-        ]
+        good_users = [self.superuser]
         bad_users = [
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
             self.user_no_roles,
-            self.anonymous,
         ]
-        self.assert_response(url, good_users, 200)
-        self.assert_response(url, bad_users, 302)
-        self.project.set_public()
-        self.assert_response(url, self.user_no_roles, 302)
-
-    def test_archive_category(self):
-        """Test ProjectArchiveView permissions for category archiving"""
-        url = reverse(
-            'projectroles:archive', kwargs={'project': self.category.sodar_uuid}
+        self.assert_response_api(
+            url,
+            good_users,
+            201,
+            method='POST',
+            format='multipart',
+            data=self.request_data,
+            cleanup_method=self._cleanup_file_create,
         )
-        bad_users_cat = [
-            self.superuser,
-            self.owner_as_cat.user,
-        ]
-        bad_users_other = [
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-            self.user_no_roles,
-            self.anonymous,
-        ]
-        self.assert_response(
+        self.assert_response_api(
+            url,
+            bad_users,
+            403,
+            method='POST',
+            format='multipart',
+            data=self.request_data,
+            cleanup_method=self._cleanup_file_create,
+        )
+        self.assert_response_api(
             url,
-            bad_users_cat,
-            302,
-            redirect_user=reverse(
-                'projectroles:detail',
-                kwargs={'project': self.category.sodar_uuid},
-            ),
+            self.anonymous,
+            401,
+            method='POST',
+            format='multipart',
+            data=self.request_data,
+            cleanup_method=self._cleanup_file_create,
         )
-        self.assert_response(
+        self.assert_response_api(
             url,
-            bad_users_other,
-            302,  # Non-category users get redirected to home
+            good_users,
+            201,
+            method='POST',
+            format='multipart',
+            data=self.request_data,
+            cleanup_method=self._cleanup_file_create,
+            knox=True,
         )
+        # Test public project
         self.project.set_public()
-        self.assert_response(url, self.user_no_roles, 302)
-
-    def test_roles(self):
-        """Test permissions for role list"""
-        url = reverse(
-            'projectroles:roles', kwargs={'project': self.project.sodar_uuid}
+        self.assert_response_api(
+            url,
+            self.user_no_roles,
+            403,
+            method='POST',
+            format='multipart',
+            data=self.request_data,
+        )
+        self.request_data['file'].close()
+
+    def test_file_retrieve(self):
+        """Test permissions for file retrieval"""
+        url = reverse(
+            'filesfolders:api_file_retrieve_update_destroy',
+            kwargs={'file': self.file.sodar_uuid},
         )
         good_users = [
             self.superuser,
-            self.owner_as_cat.user,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-        ]
-        bad_users = [self.user_no_roles, self.anonymous]
-        self.assert_response(url, good_users, 200)
-        self.assert_response(url, bad_users, 302)
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
+        ]
+        bad_users = [self.user_finder_cat, self.user_no_roles]
+        self.assert_response_api(url, good_users, 200)
+        self.assert_response_api(url, bad_users, 403)
+        self.assert_response_api(url, self.anonymous, 401)
+        self.assert_response_api(url, good_users, 200, knox=True)
+        # Test public project
         self.project.set_public()
-        self.assert_response(url, self.user_no_roles, 200)
+        self.assert_response_api(url, self.user_no_roles, 200)
 
     @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
-    def test_roles_anon(self):
-        """Test permissions for role list with anonymous access"""
+    def test_file_retrieve_anon(self):
+        """Test permissions for file retrieval with anonymous access"""
         url = reverse(
-            'projectroles:roles', kwargs={'project': self.project.sodar_uuid}
+            'filesfolders:api_file_retrieve_update_destroy',
+            kwargs={'file': self.file.sodar_uuid},
         )
         self.project.set_public()
-        self.assert_response(url, [self.user_no_roles, self.anonymous], 200)
-
-    def test_roles_category(self):
-        """Test permissions for role list under category"""
-        # Set up category roles
-        self.make_assignment(
-            self.category, self.delegate_as.user, self.role_delegate
-        )
-        self.make_assignment(
-            self.category, self.contributor_as.user, self.role_contributor
-        )
-        self.make_assignment(self.category, self.guest_as.user, self.role_guest)
+        self.assert_response_api(url, self.anonymous, 200)
 
+    def test_file_retrieve_archive(self):
+        """Test permissions for file retrieval with archived project"""
+        self.project.set_archive()
         url = reverse(
-            'projectroles:roles', kwargs={'project': self.category.sodar_uuid}
+            'filesfolders:api_file_retrieve_update_destroy',
+            kwargs={'file': self.file.sodar_uuid},
         )
         good_users = [
             self.superuser,
-            self.owner_as_cat.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-        ]
-        bad_users = [self.owner_as.user, self.user_no_roles, self.anonymous]
-        self.assert_response(url, good_users, 200)
-        self.assert_response(url, bad_users, 302)
-        self.category.set_public()
-        self.assert_response(url, self.user_no_roles, 200)
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
+        ]
+        bad_users = [self.user_finder_cat, self.user_no_roles]
+        self.assert_response_api(url, good_users, 200)
+        self.assert_response_api(url, bad_users, 403)
+        self.assert_response_api(url, self.anonymous, 401)
+        self.assert_response_api(url, good_users, 200, knox=True)
+        # Test public project
+        self.project.set_public()
+        self.assert_response_api(url, self.user_no_roles, 200)
 
-    def test_role_create(self):
-        """Test permissions for role creation"""
+    def test_file_update_put(self):
+        """Test permissions for file updating with PUT"""
         url = reverse(
-            'projectroles:role_create',
-            kwargs={'project': self.project.sodar_uuid},
+            'filesfolders:api_file_retrieve_update_destroy',
+            kwargs={'file': self.file.sodar_uuid},
+        )
+        self.request_data.update(
+            {
+                'name': 'UPDATED Folder',
+                'flag': 'FLAG',
+                'description': 'UPDATED Description',
+            }
         )
         good_users = [
             self.superuser,
-            self.owner_as_cat.user,
-            self.owner_as.user,
-            self.delegate_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_owner,  # Owner of file
+            self.user_delegate,
         ]
         bad_users = [
-            self.guest_as.user,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_contributor,
+            self.user_guest,
             self.user_no_roles,
-            self.anonymous,
         ]
-        self.assert_response(url, good_users, 200)
-        self.assert_response(url, bad_users, 302)
+        self.assert_response_api(
+            url,
+            good_users,
+            200,
+            method='PUT',
+            format='multipart',
+            data=self.request_data,
+            cleanup_method=self._cleanup_file_update,
+        )
+        self.assert_response_api(
+            url,
+            bad_users,
+            403,
+            method='PUT',
+            format='multipart',
+            data=self.request_data,
+            cleanup_method=self._cleanup_file_update,
+        )
+        self.assert_response_api(
+            url,
+            self.anonymous,
+            401,
+            method='PUT',
+            format='multipart',
+            data=self.request_data,
+            cleanup_method=self._cleanup_file_update,
+        )
+        self.assert_response_api(
+            url,
+            good_users,
+            200,
+            method='PUT',
+            format='multipart',
+            data=self.request_data,
+            cleanup_method=self._cleanup_file_update,
+            knox=True,
+        )
+        # Test public project
         self.project.set_public()
-        self.assert_response(url, self.user_no_roles, 302)
+        self.assert_response_api(
+            url,
+            self.user_no_roles,
+            403,
+            method='PUT',
+            format='multipart',
+            data=self.request_data,
+        )
 
     @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
-    def test_role_create_anon(self):
-        """Test permissions for role creation with anonymous access"""
+    def test_file_update_put_anon(self):
+        """Test permissions for file updating with anonymous access"""
         url = reverse(
-            'projectroles:role_create',
-            kwargs={'project': self.project.sodar_uuid},
+            'filesfolders:api_file_retrieve_update_destroy',
+            kwargs={'file': self.file.sodar_uuid},
         )
-        self.project.set_public()
-        self.assert_response(url, [self.user_no_roles, self.anonymous], 302)
-
-    def test_role_create_category(self):
-        """Test permissions for role creation under category"""
-        # Set up category roles
-        self.make_assignment(
-            self.category, self.delegate_as.user, self.role_delegate
+        self.request_data.update(
+            {
+                'name': 'UPDATED Folder',
+                'flag': 'FLAG',
+                'description': 'UPDATED Description',
+            }
         )
-        self.make_assignment(
-            self.category, self.contributor_as.user, self.role_contributor
+        self.project.set_public()
+        self.assert_response_api(
+            url,
+            self.anonymous,
+            401,
+            method='PUT',
+            format='multipart',
+            data=self.request_data,
         )
-        self.make_assignment(self.category, self.guest_as.user, self.role_guest)
 
+    def test_file_update_put_archive(self):
+        """Test permissions for file updating with PUT and archived project"""
+        self.project.set_archive()
         url = reverse(
-            'projectroles:role_create',
-            kwargs={'project': self.category.sodar_uuid},
+            'filesfolders:api_file_retrieve_update_destroy',
+            kwargs={'file': self.file.sodar_uuid},
         )
-        good_users = [
-            self.superuser,
-            self.owner_as_cat.user,
-            self.delegate_as.user,
-        ]
+        self.request_data.update(
+            {
+                'name': 'UPDATED Folder',
+                'flag': 'FLAG',
+                'description': 'UPDATED Description',
+            }
+        )
+        good_users = [self.superuser]
         bad_users = [
-            self.owner_as.user,  # Not the owner here
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
             self.user_no_roles,
-            self.anonymous,
         ]
-        self.assert_response(url, good_users, 200)
-        self.assert_response(url, bad_users, 302)
-        self.category.set_public()
-        self.assert_response(url, self.user_no_roles, 302)
-
-    def test_role_create_archive(self):
-        """Test permissions for role creation in archived project"""
-        self.project.set_archive()
-        url = reverse(
-            'projectroles:role_create',
-            kwargs={'project': self.project.sodar_uuid},
+        self.assert_response_api(
+            url,
+            good_users,
+            200,
+            method='PUT',
+            format='multipart',
+            data=self.request_data,
+            cleanup_method=self._cleanup_file_update,
         )
-        good_users = [
-            self.superuser,
-            self.owner_as_cat.user,
-            self.owner_as.user,
-            self.delegate_as.user,
-        ]
-        bad_users = [
-            self.guest_as.user,
-            self.user_no_roles,
+        self.assert_response_api(
+            url,
+            bad_users,
+            403,
+            method='PUT',
+            format='multipart',
+            data=self.request_data,
+            cleanup_method=self._cleanup_file_update,
+        )
+        self.assert_response_api(
+            url,
             self.anonymous,
-        ]
-        self.assert_response(url, good_users, 200)  # Should be allowed
-        self.assert_response(url, bad_users, 302)
+            401,
+            method='PUT',
+            format='multipart',
+            data=self.request_data,
+            cleanup_method=self._cleanup_file_update,
+        )
+        # Test public project
         self.project.set_public()
-        self.assert_response(url, self.user_no_roles, 302)
+        self.assert_response_api(
+            url,
+            self.user_no_roles,
+            403,
+            method='PUT',
+            format='multipart',
+            data=self.request_data,
+        )
 
-    def test_role_update(self):
-        """Test permissions for role updating"""
+    def test_file_update_patch(self):
+        """Test permissions for file updating with PATCH"""
         url = reverse(
-            'projectroles:role_update',
-            kwargs={'roleassignment': self.contributor_as.sodar_uuid},
+            'filesfolders:api_file_retrieve_update_destroy',
+            kwargs={'file': self.file.sodar_uuid},
         )
+        self.request_data.update({'name': 'UPDATED Folder'})
         good_users = [
             self.superuser,
-            self.owner_as_cat.user,
-            self.owner_as.user,
-            self.delegate_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_owner,  # Owner of file
+            self.user_delegate,
         ]
         bad_users = [
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_contributor,
+            self.user_guest,
             self.user_no_roles,
-            self.anonymous,
         ]
-        self.assert_response(url, good_users, 200)
-        self.assert_response(url, bad_users, 302)
+        self.assert_response_api(
+            url,
+            good_users,
+            200,
+            method='PATCH',
+            format='multipart',
+            data=self.request_data,
+            cleanup_method=self._cleanup_file_update,
+        )
+        self.assert_response_api(
+            url,
+            bad_users,
+            403,
+            method='PATCH',
+            format='multipart',
+            data=self.request_data,
+            cleanup_method=self._cleanup_file_update,
+        )
+        self.assert_response_api(
+            url,
+            self.anonymous,
+            401,
+            method='PATCH',
+            format='multipart',
+            data=self.request_data,
+            cleanup_method=self._cleanup_file_update,
+        )
+        self.assert_response_api(
+            url,
+            good_users,
+            200,
+            method='PATCH',
+            format='multipart',
+            data=self.request_data,
+            cleanup_method=self._cleanup_file_update,
+            knox=True,
+        )
+        # Test public project
         self.project.set_public()
-        self.assert_response(url, self.user_no_roles, 302)
+        self.assert_response_api(
+            url,
+            self.user_no_roles,
+            403,
+            method='PATCH',
+            format='multipart',
+            data=self.request_data,
+        )
 
     @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
-    def test_role_update_anon(self):
-        """Test permissions for role updating with anonymous access"""
+    def test_file_update_patch_anon(self):
+        """Test permissions for file updating with anonymous access"""
         url = reverse(
-            'projectroles:role_update',
-            kwargs={'roleassignment': self.contributor_as.sodar_uuid},
+            'filesfolders:api_file_retrieve_update_destroy',
+            kwargs={'file': self.file.sodar_uuid},
         )
+        self.request_data.update({'name': 'UPDATED Folder'})
         self.project.set_public()
-        self.assert_response(url, [self.user_no_roles, self.anonymous], 302)
+        self.assert_response_api(
+            url,
+            self.anonymous,
+            401,
+            method='PATCH',
+            format='multipart',
+            data=self.request_data,
+        )
 
-    def test_role_delete(self):
-        """Test permissions for role deletion"""
+    def test_file_update_patch_archive(self):
+        """Test permissions for file updating with PATCH and archived project"""
+        self.project.set_archive()
         url = reverse(
-            'projectroles:role_delete',
-            kwargs={'roleassignment': self.contributor_as.sodar_uuid},
+            'filesfolders:api_file_retrieve_update_destroy',
+            kwargs={'file': self.file.sodar_uuid},
         )
-        good_users = [
-            self.superuser,
-            self.owner_as_cat.user,
-            self.owner_as.user,
-            self.delegate_as.user,
-        ]
+        self.request_data.update({'name': 'UPDATED Folder'})
+        good_users = [self.superuser]
         bad_users = [
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
             self.user_no_roles,
-            self.anonymous,
         ]
-        self.assert_response(url, good_users, 200)
-        self.assert_response(url, bad_users, 302)
-        self.project.set_public()
-        self.assert_response(url, self.user_no_roles, 302)
-
-    @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
-    def test_role_delete_anon(self):
-        """Test permissions for role deletion with anonymous access"""
-        url = reverse(
-            'projectroles:role_delete',
-            kwargs={'roleassignment': self.contributor_as.sodar_uuid},
+        self.assert_response_api(
+            url,
+            good_users,
+            200,
+            method='PATCH',
+            format='multipart',
+            data=self.request_data,
+            cleanup_method=self._cleanup_file_update,
+        )
+        self.assert_response_api(
+            url,
+            bad_users,
+            403,
+            method='PATCH',
+            format='multipart',
+            data=self.request_data,
+            cleanup_method=self._cleanup_file_update,
+        )
+        self.assert_response_api(
+            url,
+            self.anonymous,
+            401,
+            method='PATCH',
+            format='multipart',
+            data=self.request_data,
+            cleanup_method=self._cleanup_file_update,
         )
+        # Test public project
         self.project.set_public()
-        self.assert_response(url, [self.user_no_roles, self.anonymous], 302)
+        self.assert_response_api(
+            url,
+            self.user_no_roles,
+            403,
+            method='PATCH',
+            format='multipart',
+            data=self.request_data,
+        )
 
-    def test_role_update_owner(self):
-        """Test permissions for owner role update (should fail)"""
+    def test_file_destroy(self):
+        """Test permissions for file destroying with DELETE"""
+        obj_uuid = uuid.uuid4()
+        c_kwargs = {'obj_uuid': obj_uuid}
         url = reverse(
-            'projectroles:role_update',
-            kwargs={'roleassignment': self.owner_as.sodar_uuid},
+            'filesfolders:api_file_retrieve_update_destroy',
+            kwargs={'file': obj_uuid},
         )
-        bad_users = [
+        good_users = [
             self.superuser,
-            self.owner_as_cat.user,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_owner,  # Owner of file
+            self.user_delegate,
+        ]
+        bad_users = [
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_contributor,
+            self.user_guest,
             self.user_no_roles,
-            self.anonymous,
         ]
-        self.assert_response(url, bad_users, 302)
+        self._cleanup_file_destroy(**c_kwargs)
+        self.assert_response_api(
+            url,
+            good_users,
+            204,
+            method='DELETE',
+            cleanup_method=self._cleanup_file_destroy,
+            cleanup_kwargs=c_kwargs,
+        )
+        self.assert_response_api(url, bad_users, 403, method='DELETE')
+        self.assert_response_api(url, self.anonymous, 401, method='DELETE')
+        self.assert_response_api(
+            url,
+            good_users,
+            204,
+            method='DELETE',
+            cleanup_method=self._cleanup_file_destroy,
+            cleanup_kwargs=c_kwargs,
+            knox=True,
+        )
+        # Test public project
         self.project.set_public()
-        self.assert_response(url, self.user_no_roles, 302)
+        self.assert_response_api(
+            url,
+            self.user_no_roles,
+            403,
+            method='DELETE',
+        )
 
     @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
-    def test_role_update_owner_anon(self):
-        """Test permissions for owner role update with anonymous access (should fail)"""
+    def test_file_destroy_anon(self):
+        """Test permissions for file destroying with anonymous access"""
+        file = self.make_file(
+            name='file2.txt',
+            file_name='file2.txt',
+            file_content=self.file_content,
+            project=self.project,
+            folder=None,
+            owner=self.user_owner,
+            description='',
+            public_url=True,
+            secret=build_secret(),
+        )
         url = reverse(
-            'projectroles:role_update',
-            kwargs={'roleassignment': self.owner_as.sodar_uuid},
+            'filesfolders:api_file_retrieve_update_destroy',
+            kwargs={'file': file.sodar_uuid},
         )
         self.project.set_public()
-        self.assert_response(url, [self.user_no_roles, self.anonymous], 302)
+        self.assert_response_api(
+            url,
+            self.anonymous,
+            401,
+            method='DELETE',
+        )
 
-    def test_role_update_archive(self):
-        """Test permissions for role updating for archived project"""
+    def test_file_destroy_archive(self):
+        """Test permissions for file destroying with DELETE and archived project"""
         self.project.set_archive()
+        obj_uuid = uuid.uuid4()
+        c_kwargs = {'obj_uuid': obj_uuid}
         url = reverse(
-            'projectroles:role_update',
-            kwargs={'roleassignment': self.contributor_as.sodar_uuid},
+            'filesfolders:api_file_retrieve_update_destroy',
+            kwargs={'file': obj_uuid},
         )
-        good_users = [
-            self.superuser,
-            self.owner_as_cat.user,
-            self.owner_as.user,
-            self.delegate_as.user,
-        ]
+        good_users = [self.superuser]
         bad_users = [
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
             self.user_no_roles,
-            self.anonymous,
         ]
-        self.assert_response(url, good_users, 200)  # Should be allowed
-        self.assert_response(url, bad_users, 302)
+        self._cleanup_file_destroy(**c_kwargs)
+        self.assert_response_api(
+            url,
+            good_users,
+            204,
+            method='DELETE',
+            cleanup_method=self._cleanup_file_destroy,
+            cleanup_kwargs=c_kwargs,
+        )
+        self.assert_response_api(url, bad_users, 403, method='DELETE')
+        self.assert_response_api(url, self.anonymous, 401, method='DELETE')
+        # Test public project
         self.project.set_public()
-        self.assert_response(url, self.user_no_roles, 302)
+        self.assert_response_api(
+            url,
+            self.user_no_roles,
+            403,
+            method='DELETE',
+        )
 
-    def test_role_delete_owner(self):
-        """Test permissions for owner role deletion (should fail)"""
+    def test_file_serve(self):
+        """Test permissions for file serving"""
         url = reverse(
-            'projectroles:role_delete',
-            kwargs={'roleassignment': self.owner_as.sodar_uuid},
+            'filesfolders:api_file_serve', kwargs={'file': self.file.sodar_uuid}
         )
-        bad_users = [
+        good_users = [
             self.superuser,
-            self.owner_as_cat.user,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-            self.user_no_roles,
-            self.anonymous,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
         ]
-        self.assert_response(url, bad_users, 302)
+        bad_users = [self.user_finder_cat, self.user_no_roles]
+        self.assert_response_api(url, good_users, 200, method='GET')
+        self.assert_response_api(url, bad_users, 403)
+        self.assert_response_api(url, self.anonymous, 401)
+        self.assert_response_api(url, good_users, 200, knox=True)
+        # Test public project
         self.project.set_public()
-        self.assert_response(url, self.user_no_roles, 302)
+        self.assert_response_api(url, self.user_no_roles, 200)
 
     @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
-    def test_role_delete_owner_anon(self):
-        """Test permissions for owner role deletion with anonymous access (should fail)"""
+    def test_file_serve_anon(self):
+        """Test permissions for file serving with anonymous access"""
         url = reverse(
-            'projectroles:role_delete',
-            kwargs={'roleassignment': self.owner_as.sodar_uuid},
+            'filesfolders:api_file_serve', kwargs={'file': self.file.sodar_uuid}
         )
         self.project.set_public()
-        self.assert_response(url, [self.user_no_roles, self.anonymous], 302)
+        self.assert_response_api(url, self.anonymous, 200)
 
-    def test_role_update_delegate(self):
-        """Test permissions for delegate role update"""
+    def test_file_serve_archive(self):
+        """Test permissions for file serving with archived project"""
+        self.project.set_archive()
         url = reverse(
-            'projectroles:role_update',
-            kwargs={'roleassignment': self.delegate_as.sodar_uuid},
+            'filesfolders:api_file_serve', kwargs={'file': self.file.sodar_uuid}
         )
         good_users = [
             self.superuser,
-            self.owner_as_cat.user,
-            self.owner_as.user,
-        ]
-        bad_users = [
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-            self.user_no_roles,
-            self.anonymous,
-        ]
-        self.assert_response(url, good_users, 200)
-        self.assert_response(url, bad_users, 302)
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
+        ]
+        bad_users = [self.user_finder_cat, self.user_no_roles]
+        self.assert_response_api(url, good_users, 200, method='GET')
+        self.assert_response_api(url, bad_users, 403)
+        self.assert_response_api(url, self.anonymous, 401)
+        self.assert_response_api(url, good_users, 200, knox=True)
+        # Test public project
         self.project.set_public()
-        self.assert_response(url, self.user_no_roles, 302)
+        self.assert_response_api(url, self.user_no_roles, 200)
 
-    def test_role_delete_delegate(self):
-        """Test permissions for role deletion for delegate"""
-        url = reverse(
-            'projectroles:role_delete',
-            kwargs={'roleassignment': self.delegate_as.sodar_uuid},
+
+class TestHyperLinkAPIPermissions(
+    HyperLinkMixin, TestCoreProjectAPIPermissionBase
+):
+    """Tests for HyperLink API view permissions"""
+
+    @classmethod
+    def _cleanup_link_create(cls):
+        HyperLink.objects.order_by('-pk').first().delete()
+
+    def _cleanup_link_destroy(self, obj_uuid):
+        link = self.make_hyperlink(
+            name='New Link',
+            url='http://www.duckduckgo.com/',
+            project=self.project,
+            folder=None,
+            owner=self.user_owner,
+            description='',
         )
-        good_users = [
-            self.superuser,
-            self.owner_as_cat.user,
-            self.owner_as.user,
-        ]
-        bad_users = [
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-            self.user_no_roles,
-            self.anonymous,
-        ]
-        self.assert_response(url, good_users, 200)
-        self.assert_response(url, bad_users, 302)
-        self.project.set_public()
-        self.assert_response(url, self.user_no_roles, 302)
+        link.sodar_uuid = obj_uuid
+        link.save()
 
-    def test_role_owner_transfer(self):
-        """Test permissions for owner role update"""
+    def setUp(self):
+        super().setUp()
+        self.hyperlink = self.make_hyperlink(
+            name='Link',
+            url='http://www.google.com/',
+            project=self.project,
+            folder=None,
+            owner=self.user_owner,
+            description='',
+        )
+
+    def test_hyperlink_list(self):
+        """Test permissions for hyperlink listing"""
         url = reverse(
-            'projectroles:role_owner_transfer',
+            'filesfolders:api_hyperlink_list_create',
             kwargs={'project': self.project.sodar_uuid},
         )
         good_users = [
             self.superuser,
-            self.owner_as_cat.user,
-            self.owner_as.user,
-        ]
-        bad_users = [
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-            self.user_no_roles,
-            self.anonymous,
-        ]
-        self.assert_response(url, good_users, 200)
-        self.assert_response(url, bad_users, 302)
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
+        ]
+        bad_users = [self.user_finder_cat, self.user_no_roles]
+        self.assert_response_api(url, good_users, 200)
+        self.assert_response_api(url, bad_users, 403)
+        self.assert_response_api(url, self.anonymous, 401)
+        self.assert_response_api(url, good_users, 200, knox=True)
+        # Test public project
         self.project.set_public()
-        self.assert_response(url, self.user_no_roles, 302)
+        self.assert_response_api(url, self.user_no_roles, 200)
 
     @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
-    def test_role_owner_transfer_anon(self):
-        """Test permissions for owner role update with anonymous access (should fail)"""
+    def test_hyperlink_list_anon(self):
+        """Test permissions for hyperlink listing with anonymous access"""
         url = reverse(
-            'projectroles:role_owner_transfer',
+            'filesfolders:api_hyperlink_list_create',
             kwargs={'project': self.project.sodar_uuid},
         )
         self.project.set_public()
-        self.assert_response(url, [self.user_no_roles, self.anonymous], 302)
+        self.assert_response_api(url, self.anonymous, 200)
 
-    def test_role_invite_create(self):
-        """Test permissions for role invite creation"""
+    def test_hyperlink_list_archive(self):
+        """Test permissions for hyperlink listing with archived project"""
+        self.project.set_archive()
         url = reverse(
-            'projectroles:invite_create',
+            'filesfolders:api_hyperlink_list_create',
             kwargs={'project': self.project.sodar_uuid},
         )
         good_users = [
             self.superuser,
-            self.owner_as_cat.user,
-            self.owner_as.user,
-            self.delegate_as.user,
-        ]
-        bad_users = [
-            self.contributor_as.user,
-            self.guest_as.user,
-            self.user_no_roles,
-            self.anonymous,
-        ]
-        self.assert_response(url, good_users, 200)
-        self.assert_response(url, bad_users, 302)
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
+        ]
+        bad_users = [self.user_finder_cat, self.user_no_roles]
+        self.assert_response_api(url, good_users, 200)
+        self.assert_response_api(url, bad_users, 403)
+        self.assert_response_api(url, self.anonymous, 401)
+        self.assert_response_api(url, good_users, 200, knox=True)
+        # Test public project
         self.project.set_public()
-        self.assert_response(url, self.user_no_roles, 302)
+        self.assert_response_api(url, self.user_no_roles, 200)
 
-    @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
-    def test_role_invite_create_anon(self):
-        """Test permissions for role invite creation with anonymous access (should fail)"""
+    def test_hyperlink_create(self):
+        """Test permissions for hyperlink creation"""
         url = reverse(
-            'projectroles:invite_create',
+            'filesfolders:api_hyperlink_list_create',
             kwargs={'project': self.project.sodar_uuid},
         )
-        self.project.set_public()
-        self.assert_response(url, [self.user_no_roles, self.anonymous], 302)
-
-    def test_role_invite_create_category(self):
-        """Test permissions for role invite creation under category"""
-        # Set up category roles
-        self.make_assignment(
-            self.category, self.delegate_as.user, self.role_delegate
-        )
-        self.make_assignment(
-            self.category, self.contributor_as.user, self.role_contributor
-        )
-        self.make_assignment(self.category, self.guest_as.user, self.role_guest)
+        request_data = {
+            'name': 'New HyperLink',
+            'flag': 'IMPORTANT',
+            'description': 'HyperLink\'s description',
+            'url': 'http://www.cubi.bihealth.org',
+        }
 
-        url = reverse(
-            'projectroles:invite_create',
-            kwargs={'project': self.category.sodar_uuid},
-        )
         good_users = [
             self.superuser,
-            self.owner_as_cat.user,
-            self.delegate_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
         ]
         bad_users = [
-            self.owner_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_guest,
             self.user_no_roles,
-            self.anonymous,
         ]
-        self.assert_response(url, good_users, 200)
-        self.assert_response(url, bad_users, 302)
-        self.project.set_public()
-        self.assert_response(url, self.user_no_roles, 302)
-
-    def test_role_invite_list(self):
-        """Test permissions for role invite list"""
-        url = reverse(
-            'projectroles:invites', kwargs={'project': self.project.sodar_uuid}
+        self.assert_response_api(
+            url,
+            good_users,
+            201,
+            method='POST',
+            data=request_data,
+            cleanup_method=self._cleanup_link_create,
         )
-        good_users = [
-            self.superuser,
-            self.owner_as_cat.user,
-            self.owner_as.user,
-            self.delegate_as.user,
-        ]
-        bad_users = [
-            self.contributor_as.user,
-            self.guest_as.user,
-            self.user_no_roles,
-            self.anonymous,
-        ]
-        self.assert_response(url, good_users, 200)
-        self.assert_response(url, bad_users, 302)
+        self.assert_response_api(
+            url, bad_users, 403, method='POST', data=request_data
+        )
+        self.assert_response_api(
+            url, self.anonymous, 401, method='POST', data=request_data
+        )
+        self.assert_response_api(
+            url,
+            good_users,
+            201,
+            method='POST',
+            data=request_data,
+            cleanup_method=self._cleanup_link_create,
+            knox=True,
+        )
+        # Test public project
         self.project.set_public()
-        self.assert_response(url, self.user_no_roles, 302)
+        self.assert_response_api(
+            url, self.user_no_roles, 403, method='POST', data=request_data
+        )
 
     @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
-    def test_role_invite_list_anon(self):
-        """Test permissions for role invite list with anonymous access"""
+    def test_hyperlink_create_anon(self):
+        """Test permissions for hyperlink creation with anonymous access"""
         url = reverse(
-            'projectroles:invites', kwargs={'project': self.project.sodar_uuid}
+            'filesfolders:api_hyperlink_list_create',
+            kwargs={'project': self.project.sodar_uuid},
         )
+        request_data = {
+            'name': 'New HyperLink',
+            'flag': 'IMPORTANT',
+            'description': 'HyperLink\'s description',
+            'url': 'http://www.cubi.bihealth.org',
+        }
         self.project.set_public()
-        self.assert_response(url, [self.user_no_roles, self.anonymous], 302)
-
-    def test_role_invite_list_category(self):
-        """Test permissions for role invite list under category"""
-        # Set up category roles
-        self.make_assignment(
-            self.category, self.delegate_as.user, self.role_delegate
-        )
-        self.make_assignment(
-            self.category, self.contributor_as.user, self.role_contributor
+        self.assert_response_api(
+            url, self.anonymous, 401, method='POST', data=request_data
         )
-        self.make_assignment(self.category, self.guest_as.user, self.role_guest)
 
+    def test_hyperlink_create_archive(self):
+        """Test permissions for hyperlink creation with archived project"""
+        self.project.set_archive()
         url = reverse(
-            'projectroles:invites', kwargs={'project': self.category.sodar_uuid}
+            'filesfolders:api_hyperlink_list_create',
+            kwargs={'project': self.project.sodar_uuid},
         )
-        good_users = [
-            self.superuser,
-            self.owner_as_cat.user,
-            self.delegate_as.user,
-        ]
+        request_data = {
+            'name': 'New HyperLink',
+            'flag': 'IMPORTANT',
+            'description': 'HyperLink\'s description',
+            'url': 'http://www.cubi.bihealth.org',
+        }
+
+        good_users = [self.superuser]
         bad_users = [
-            self.owner_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_owner,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
             self.user_no_roles,
-            self.anonymous,
         ]
-        self.assert_response(url, good_users, 200)
-        self.assert_response(url, bad_users, 302)
-        self.category.set_public()
-        self.assert_response(url, self.user_no_roles, 302)
-
-    def test_role_invite_resend(self):
-        """Test permissions for role invite resending"""
-        # Init invite
-        invite = self.make_invite(
-            email='test@example.com',
-            project=self.project,
-            role=self.role_contributor,
-            issuer=self.user_owner,
-            message='',
+        self.assert_response_api(
+            url,
+            good_users,
+            201,
+            method='POST',
+            data=request_data,
+            cleanup_method=self._cleanup_link_create,
         )
-
-        url = reverse(
-            'projectroles:invite_resend',
-            kwargs={'projectinvite': invite.sodar_uuid},
+        self.assert_response_api(
+            url, bad_users, 403, method='POST', data=request_data
         )
-        good_users = [
-            self.superuser,
-            self.owner_as_cat.user,
-            self.owner_as.user,
-            self.delegate_as.user,
-        ]
-        bad_users = [
-            self.contributor_as.user,
-            self.guest_as.user,
-            self.user_no_roles,
-            self.anonymous,
-        ]
-        self.assert_response(
+        self.assert_response_api(
+            url, self.anonymous, 401, method='POST', data=request_data
+        )
+        self.assert_response_api(
             url,
             good_users,
-            302,
-            redirect_user=reverse(
-                'projectroles:invites',
-                kwargs={'project': self.project.sodar_uuid},
-            ),
+            201,
+            method='POST',
+            data=request_data,
+            cleanup_method=self._cleanup_link_create,
+            knox=True,
         )
-        self.assert_response(url, bad_users, 302)
+        # Test public project
         self.project.set_public()
-        self.assert_response(url, self.user_no_roles, 302)
-
-    def test_role_invite_revoke(self):
-        """Test permissions for role invite revoking"""
-        # Init invite
-        invite = self.make_invite(
-            email='test@example.com',
-            project=self.project,
-            role=self.role_contributor,
-            issuer=self.user_owner,
-            message='',
+        self.assert_response_api(
+            url, self.user_no_roles, 403, method='POST', data=request_data
         )
 
+    def test_hyperlink_retrieve(self):
+        """Test permissions for hyperlink retrieval"""
         url = reverse(
-            'projectroles:invite_revoke',
-            kwargs={'projectinvite': invite.sodar_uuid},
+            'filesfolders:api_hyperlink_retrieve_update_destroy',
+            kwargs={'hyperlink': self.hyperlink.sodar_uuid},
         )
         good_users = [
             self.superuser,
-            self.owner_as_cat.user,
-            self.owner_as.user,
-            self.delegate_as.user,
-        ]
-        bad_users = [
-            self.contributor_as.user,
-            self.guest_as.user,
-            self.user_no_roles,
-            self.anonymous,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
         ]
-        self.assert_response(url, good_users, 200)
-        self.assert_response(url, bad_users, 302)
+        bad_users = [self.user_finder_cat, self.user_no_roles]
+        self.assert_response_api(url, good_users, 200, method='GET')
+        self.assert_response_api(url, bad_users, 403)
+        self.assert_response_api(url, self.anonymous, 401)
+        self.assert_response_api(url, good_users, 200, knox=True)
+        # Test public project
         self.project.set_public()
-        self.assert_response(url, self.user_no_roles, 302)
-
-
-@override_settings(PROJECTROLES_SITE_MODE=SITE_MODE_TARGET)
-class TestTargetProjectViews(
-    AppSettingMixin,
-    RemoteSiteMixin,
-    RemoteProjectMixin,
-    TestProjectPermissionBase,
-):
-    """Tests for Project updating views on a TARGET site"""
-
-    def setUp(self):
-        super().setUp()
-        # Create site
-        self.site = self.make_site(
-            name=REMOTE_SITE_NAME,
-            url=REMOTE_SITE_URL,
-            mode=SODAR_CONSTANTS['SITE_MODE_SOURCE'],
-            description='',
-            secret=REMOTE_SITE_SECRET,
-        )
-        # Create RemoteProject objects
-        self.remote_category = self.make_remote_project(
-            project_uuid=self.category.sodar_uuid,
-            project=self.category,
-            site=self.site,
-            level=SODAR_CONSTANTS['REMOTE_LEVEL_READ_ROLES'],
-        )
-        self.remote_project = self.make_remote_project(
-            project_uuid=self.project.sodar_uuid,
-            project=self.project,
-            site=self.site,
-            level=SODAR_CONSTANTS['REMOTE_LEVEL_READ_ROLES'],
-        )
+        self.assert_response_api(url, self.user_no_roles, 200)
 
-    def test_project_details(self):
-        """Test permissions for project details"""
+    @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
+    def test_hyperlink_retrieve_anon(self):
+        """Test permissions for hyperlink retrieval with anonymous access"""
         url = reverse(
-            'projectroles:detail', kwargs={'project': self.project.sodar_uuid}
-        )
-        good_users = [
-            self.superuser,
-            self.owner_as_cat.user,  # Inherited
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-        ]
-        bad_users = [self.user_no_roles, self.anonymous]
-        self.assert_response(url, good_users, 200)
-        self.assert_response(url, bad_users, 302)
-
-    def _setup_ip_allowing(self, ip_list):
-        # Init IP restrict setting
-        self.make_setting(
-            app_name='projectroles',
-            name='ip_restrict',
-            setting_type='BOOLEAN',
-            value=True,
-            project=self.project,
-        )
-
-        # Init IP allowlist setting
-        self.make_setting(
-            app_name='projectroles',
-            name='ip_allowlist',
-            setting_type='JSON',
-            value=None,
-            value_json=ip_list,
-            project=self.project,
+            'filesfolders:api_hyperlink_retrieve_update_destroy',
+            kwargs={'hyperlink': self.hyperlink.sodar_uuid},
         )
+        self.project.set_public()
+        self.assert_response_api(url, self.anonymous, 200)
 
-    def test_project_details_ip_allowing_http_x_forwarded_for_block_all(self):
-        """Test permissions for project details"""
-        self._setup_ip_allowing([])
+    def test_hyperlink_retrieve_archive(self):
+        """Test permissions for hyperlink retrieval with archived project"""
+        self.project.set_archive()
         url = reverse(
-            'projectroles:detail', kwargs={'project': self.project.sodar_uuid}
+            'filesfolders:api_hyperlink_retrieve_update_destroy',
+            kwargs={'hyperlink': self.hyperlink.sodar_uuid},
         )
         good_users = [
             self.superuser,
-            self.owner_as_cat.user,  # Inherited
-            self.owner_as.user,
-            self.delegate_as.user,
-        ]
-        bad_users = [
-            self.contributor_as.user,
-            self.guest_as.user,
-            self.user_no_roles,
-            self.anonymous,
-        ]
-        header = {'HTTP_X_FORWARDED_FOR': '192.168.1.1'}
-        self.assert_response(url, good_users, 200, header=header)
-        self.assert_response(url, bad_users, 302, header=header)
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
+        ]
+        bad_users = [self.user_finder_cat, self.user_no_roles]
+        self.assert_response_api(url, good_users, 200, method='GET')
+        self.assert_response_api(url, bad_users, 403)
+        self.assert_response_api(url, self.anonymous, 401)
+        self.assert_response_api(url, good_users, 200, knox=True)
+        # Test public project
+        self.project.set_public()
+        self.assert_response_api(url, self.user_no_roles, 200)
 
-    def test_project_details_ip_allowing_x_forwarded_for_block_all(self):
-        """Test permissions for project details"""
-        self._setup_ip_allowing([])
+    def test_hyperlink_update_put(self):
+        """Test permissions for hyperlink updating with PUT"""
         url = reverse(
-            'projectroles:detail', kwargs={'project': self.project.sodar_uuid}
+            'filesfolders:api_hyperlink_retrieve_update_destroy',
+            kwargs={'hyperlink': self.hyperlink.sodar_uuid},
         )
+        request_data = {
+            'name': 'UPDATED HyperLink',
+            'flag': 'FLAG',
+            'description': 'UPDATED Description',
+            'url': 'http://www.bihealth.org',
+        }
         good_users = [
             self.superuser,
-            self.owner_as_cat.user,  # Inherited
-            self.owner_as.user,
-            self.delegate_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_owner,  # Owner of link
+            self.user_delegate,
         ]
         bad_users = [
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_contributor,
+            self.user_guest,
             self.user_no_roles,
-            self.anonymous,
         ]
-        header = {'X_FORWARDED_FOR': '192.168.1.1'}
-        self.assert_response(url, good_users, 200, header=header)
-        self.assert_response(url, bad_users, 302, header=header)
-
-    def test_project_details_ip_allowing_forwarded_block_all(self):
-        """Test permissions for project details"""
-        self._setup_ip_allowing([])
-        url = reverse(
-            'projectroles:detail', kwargs={'project': self.project.sodar_uuid}
+        self.assert_response_api(
+            url, good_users, 200, method='PUT', data=request_data
         )
-        good_users = [
-            self.superuser,
-            self.owner_as_cat.user,  # Inherited
-            self.owner_as.user,
-            self.delegate_as.user,
-        ]
-        bad_users = [
-            self.contributor_as.user,
-            self.guest_as.user,
-            self.user_no_roles,
-            self.anonymous,
-        ]
-        header = {'FORWARDED': '192.168.1.1'}
-        self.assert_response(url, good_users, 200, header=header)
-        self.assert_response(url, bad_users, 302, header=header)
-
-    def test_project_details_ip_allowing_remote_addr_block_all(self):
-        """Test permissions for project details"""
-        self._setup_ip_allowing([])
-        url = reverse(
-            'projectroles:detail', kwargs={'project': self.project.sodar_uuid}
+        self.assert_response_api(
+            url, bad_users, 403, method='PUT', data=request_data
         )
-        good_users = [
-            self.superuser,
-            self.owner_as_cat.user,  # Inherited
-            self.owner_as.user,
-            self.delegate_as.user,
-        ]
-        bad_users = [
-            self.contributor_as.user,
-            self.guest_as.user,
-            self.user_no_roles,
-            self.anonymous,
-        ]
-        header = {'REMOTE_ADDR': '192.168.1.1'}
-        self.assert_response(url, good_users, 200, header=header)
-        self.assert_response(url, bad_users, 302, header=header)
-
-    def test_project_details_ip_allowing_http_x_forwarded_for_allow_ip(self):
-        """Test permissions for project details"""
-        self._setup_ip_allowing(['192.168.1.1'])
-        url = reverse(
-            'projectroles:detail', kwargs={'project': self.project.sodar_uuid}
+        self.assert_response_api(
+            url, self.anonymous, 401, method='PUT', data=request_data
         )
-        good_users = [
-            self.superuser,
-            self.owner_as_cat.user,  # Inherited
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-        ]
-        bad_users = [
-            self.user_no_roles,
-            self.anonymous,
-        ]
-        header = {'HTTP_X_FORWARDED_FOR': '192.168.1.1'}
-        self.assert_response(url, good_users, 200, header=header)
-        self.assert_response(url, bad_users, 302, header=header)
-
-    def test_project_details_ip_allowing_x_forwarded_for_allow_ip(self):
-        """Test permissions for project details"""
-        self._setup_ip_allowing(['192.168.1.1'])
-        url = reverse(
-            'projectroles:detail', kwargs={'project': self.project.sodar_uuid}
+        self.assert_response_api(
+            url, good_users, 200, method='PUT', data=request_data, knox=True
         )
-        good_users = [
-            self.superuser,
-            self.owner_as_cat.user,  # Inherited
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-        ]
-        bad_users = [
-            self.user_no_roles,
-            self.anonymous,
-        ]
-        header = {'X_FORWARDED_FOR': '192.168.1.1'}
-        self.assert_response(url, good_users, 200, header=header)
-        self.assert_response(url, bad_users, 302, header=header)
-
-    def test_project_details_ip_allowing_forwarded_allow_ip(self):
-        """Test permissions for project details"""
-        self._setup_ip_allowing(['192.168.1.1'])
-        url = reverse(
-            'projectroles:detail', kwargs={'project': self.project.sodar_uuid}
+        # Test public project
+        self.project.set_public()
+        self.assert_response_api(
+            url, self.user_no_roles, 403, method='PUT', data=request_data
         )
-        good_users = [
-            self.superuser,
-            self.owner_as_cat.user,  # Inherited
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-        ]
-        bad_users = [
-            self.user_no_roles,
-            self.anonymous,
-        ]
-        header = {'FORWARDED': '192.168.1.1'}
-        self.assert_response(url, good_users, 200, header=header)
-        self.assert_response(url, bad_users, 302, header=header)
 
-    def test_project_details_ip_allowing_remote_addr_allow_ip(self):
-        """Test permissions for project details"""
-        self._setup_ip_allowing(['192.168.1.1'])
+    @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
+    def test_hyperlink_update_put_anon(self):
+        """Test permissions for hyperlink updating with anonymous access"""
         url = reverse(
-            'projectroles:detail', kwargs={'project': self.project.sodar_uuid}
+            'filesfolders:api_hyperlink_retrieve_update_destroy',
+            kwargs={'hyperlink': self.hyperlink.sodar_uuid},
         )
-        good_users = [
-            self.superuser,
-            self.owner_as_cat.user,  # Inherited
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-        ]
-        bad_users = [
-            self.user_no_roles,
-            self.anonymous,
-        ]
-        header = {'REMOTE_ADDR': '192.168.1.1'}
-        self.assert_response(url, good_users, 200, header=header)
-        self.assert_response(url, bad_users, 302, header=header)
-
-    def test_project_details_ip_allowing_remote_addr_allow_network(self):
-        """Test permissions for project details"""
-        self._setup_ip_allowing(['192.168.1.0/24'])
-        url = reverse(
-            'projectroles:detail', kwargs={'project': self.project.sodar_uuid}
+        request_data = {
+            'name': 'UPDATED HyperLink',
+            'flag': 'FLAG',
+            'description': 'UPDATED Description',
+            'url': 'http://www.bihealth.org',
+        }
+        self.project.set_public()
+        self.assert_response_api(
+            url, self.anonymous, 401, method='PUT', data=request_data
         )
-        good_users = [
-            self.superuser,
-            self.owner_as_cat.user,  # Inherited
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-        ]
-        bad_users = [
-            self.user_no_roles,
-            self.anonymous,
-        ]
-        header = {'REMOTE_ADDR': '192.168.1.1'}
-        self.assert_response(url, good_users, 200, header=header)
-        self.assert_response(url, bad_users, 302, header=header)
 
-    def test_project_details_ip_allowing_remote_addr_not_in_allowlist_ip(self):
-        """Test permissions for project details"""
-        self._setup_ip_allowing(['192.168.1.2'])
+    def test_hyperlink_update_put_archive(self):
+        """Test permissions for hyperlink updating with PUT and archived project"""
+        self.project.set_archive()
         url = reverse(
-            'projectroles:detail', kwargs={'project': self.project.sodar_uuid}
+            'filesfolders:api_hyperlink_retrieve_update_destroy',
+            kwargs={'hyperlink': self.hyperlink.sodar_uuid},
         )
-        good_users = [
-            self.superuser,
-            self.owner_as_cat.user,  # Inherited
-            self.owner_as.user,
-            self.delegate_as.user,
-        ]
+        request_data = {
+            'name': 'UPDATED HyperLink',
+            'flag': 'FLAG',
+            'description': 'UPDATED Description',
+            'url': 'http://www.bihealth.org',
+        }
+        good_users = [self.superuser]
         bad_users = [
-            self.contributor_as.user,
-            self.guest_as.user,
-            self.user_no_roles,
-            self.anonymous,
-        ]
-        header = {'REMOTE_ADDR': '192.168.1.1'}
-        self.assert_response(url, good_users, 200, header=header)
-        self.assert_response(url, bad_users, 302, header=header)
-
-    def test_project_details_ip_allowing_remote_addr_not_in_allowlist_network(
-        self,
-    ):
-        """Test permissions for project details"""
-        self._setup_ip_allowing(['192.168.2.0/24'])
-
-        url = reverse(
-            'projectroles:detail', kwargs={'project': self.project.sodar_uuid}
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
+            self.user_no_roles,
+        ]
+        self.assert_response_api(
+            url, good_users, 200, method='PUT', data=request_data
+        )
+        self.assert_response_api(
+            url, bad_users, 403, method='PUT', data=request_data
+        )
+        self.assert_response_api(
+            url, self.anonymous, 401, method='PUT', data=request_data
+        )
+        self.assert_response_api(
+            url, good_users, 200, method='PUT', data=request_data, knox=True
+        )
+        # Test public project
+        self.project.set_public()
+        self.assert_response_api(
+            url, self.user_no_roles, 403, method='PUT', data=request_data
         )
-        good_users = [
-            self.superuser,
-            self.owner_as_cat.user,  # Inherited
-            self.owner_as.user,
-            self.delegate_as.user,
-        ]
-        bad_users = [
-            self.contributor_as.user,
-            self.guest_as.user,
-            self.user_no_roles,
-            self.anonymous,
-        ]
-        header = {'REMOTE_ADDR': '192.168.1.1'}
-        self.assert_response(url, good_users, 200, header=header)
-        self.assert_response(url, bad_users, 302, header=header)
 
-    def test_update(self):
-        """Test permissions for project updating as target"""
+    def test_hyperlink_update_patch(self):
+        """Test permissions for hyperlink updating with PATCH"""
         url = reverse(
-            'projectroles:update', kwargs={'project': self.project.sodar_uuid}
+            'filesfolders:api_hyperlink_retrieve_update_destroy',
+            kwargs={'hyperlink': self.hyperlink.sodar_uuid},
         )
+        request_data = {'name': 'UPDATED Hyperlink'}
         good_users = [
             self.superuser,
-            self.owner_as.user,
-            self.owner_as_cat.user,
-            self.delegate_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_owner,  # Owner of link
+            self.user_delegate,
         ]
         bad_users = [
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_contributor,
+            self.user_guest,
             self.user_no_roles,
-            self.anonymous,
         ]
-        self.assert_response(url, good_users, 200)
-        self.assert_response(url, bad_users, 302, redirect_anon=reverse('home'))
-
-    def test_create_top_allowed(self):
-        """Test permissions for top level project creation as target"""
-        url = reverse('projectroles:create')
-        good_users = [self.superuser]
-        bad_users = [
-            self.anonymous,
-            self.owner_as_cat.user,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-            self.user_no_roles,
-        ]
-        self.assert_response(url, good_users, 200)
-        self.assert_response(url, bad_users, 302)
-
-    # TODO: Add separate tests for local/remote creation
-    # TODO: Remote creation should fail
-    def test_create_sub_local(self):
-        """Test permissions for subproject creation as target under a local category"""
-        # Make category local
-        self.remote_category.delete()
-        url = reverse(
-            'projectroles:create', kwargs={'project': self.category.sodar_uuid}
+        self.assert_response_api(
+            url, good_users, 200, method='PATCH', data=request_data
         )
-        good_users = [self.superuser, self.owner_as_cat.user]
-        bad_users = [
-            self.anonymous,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-            self.user_no_roles,
-        ]
-        self.assert_response(url, good_users, 200)
-        self.assert_response(url, bad_users, 302)
-
-    def test_create_sub_remote(self):
-        """Test permissions for subproject creation as target under a local category"""
-        url = reverse(
-            'projectroles:create', kwargs={'project': self.category.sodar_uuid}
+        self.assert_response_api(
+            url, bad_users, 403, method='PATCH', data=request_data
         )
-        bad_users = [
-            self.superuser,
-            self.owner_as_cat.user,
-            self.anonymous,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-            self.user_no_roles,
-        ]
-        self.assert_response(url, bad_users, 302)
-
-    @override_settings(PROJECTROLES_TARGET_CREATE=False)
-    def test_create_sub_disallowed(self):
-        """Test permissions for subproject creation with creation disallowed as target"""
-        url = reverse(
-            'projectroles:create', kwargs={'project': self.category.sodar_uuid}
+        self.assert_response_api(
+            url, self.anonymous, 401, method='PATCH', data=request_data
         )
-        bad_users = [
-            self.anonymous,
-            self.superuser,
-            self.owner_as_cat.user,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-            self.user_no_roles,
-        ]
-        self.assert_response(url, bad_users, 302)
-
-    def test_role_create(self):
-        """Test permissions for role creation as target"""
-        url = reverse(
-            'projectroles:role_create',
-            kwargs={'project': self.project.sodar_uuid},
+        self.assert_response_api(
+            url, good_users, 200, method='PATCH', data=request_data, knox=True
         )
-        bad_users = [
-            self.superuser,
-            self.owner_as_cat.user,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-            self.user_no_roles,
-            self.anonymous,
-        ]
-        self.assert_response(url, bad_users, 302, redirect_anon=reverse('home'))
-
-    def test_role_update(self):
-        """Test permissions for role updating as target"""
-        url = reverse(
-            'projectroles:role_update',
-            kwargs={'roleassignment': self.contributor_as.sodar_uuid},
+        # Test public project
+        self.project.set_public()
+        self.assert_response_api(
+            url, self.user_no_roles, 403, method='PATCH', data=request_data
         )
-        bad_users = [
-            self.anonymous,
-            self.superuser,
-            self.owner_as_cat.user,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-            self.user_no_roles,
-        ]
-        self.assert_response(url, bad_users, 302, redirect_anon=reverse('home'))
 
-    def test_role_delete(self):
-        """Test permissions for role deletion as target"""
+    @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
+    def test_hyperlink_update_patch_anon(self):
+        """Test permissions for hyperlink updating with anonymous access"""
         url = reverse(
-            'projectroles:role_delete',
-            kwargs={'roleassignment': self.contributor_as.sodar_uuid},
+            'filesfolders:api_hyperlink_retrieve_update_destroy',
+            kwargs={'hyperlink': self.hyperlink.sodar_uuid},
         )
-        bad_users = [
-            self.anonymous,
-            self.superuser,
-            self.owner_as_cat.user,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-            self.user_no_roles,
-        ]
-        self.assert_response(url, bad_users, 302, redirect_anon=reverse('home'))
-
-    def test_role_update_delegate(self):
-        """Test permissions for delegate role update as target"""
-        url = reverse(
-            'projectroles:role_update',
-            kwargs={'roleassignment': self.delegate_as.sodar_uuid},
+        request_data = {'name': 'UPDATED Hyperlink'}
+        self.project.set_public()
+        self.assert_response_api(
+            url, self.anonymous, 401, method='PATCH', data=request_data
         )
-        bad_users = [
-            self.anonymous,
-            self.superuser,
-            self.owner_as_cat.user,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-            self.user_no_roles,
-        ]
-        self.assert_response(url, bad_users, 302, redirect_anon=reverse('home'))
 
-    def test_role_delete_delegate(self):
-        """Test permissions for role deletion for delegate as target"""
+    def test_hyperlink_update_patch_archive(self):
+        """Test permissions for hyperlink updating with PATCH and archived project"""
+        self.project.set_archive()
         url = reverse(
-            'projectroles:role_delete',
-            kwargs={'roleassignment': self.delegate_as.sodar_uuid},
+            'filesfolders:api_hyperlink_retrieve_update_destroy',
+            kwargs={'hyperlink': self.hyperlink.sodar_uuid},
         )
+        request_data = {'name': 'UPDATED Hyperlink'}
+        good_users = [self.superuser]
         bad_users = [
-            self.anonymous,
-            self.superuser,
-            self.owner_as_cat.user,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-            self.user_no_roles,
-        ]
-        self.assert_response(url, bad_users, 302, redirect_anon=reverse('home'))
-
-    def test_role_invite_create(self):
-        """Test permissions for role invite creation as target"""
-        url = reverse(
-            'projectroles:invite_create',
-            kwargs={'project': self.project.sodar_uuid},
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
+            self.user_no_roles,
+        ]
+        self.assert_response_api(
+            url, good_users, 200, method='PATCH', data=request_data
         )
-        bad_users = [
-            self.superuser,
-            self.anonymous,
-            self.owner_as_cat.user,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-            self.user_no_roles,
-        ]
-        self.assert_response(url, bad_users, 302, redirect_anon=reverse('home'))
-
-    def test_role_invite_list(self):
-        """Test permissions for role invite list as target"""
-        url = reverse(
-            'projectroles:invites', kwargs={'project': self.project.sodar_uuid}
+        self.assert_response_api(
+            url, bad_users, 403, method='PATCH', data=request_data
         )
-        bad_users = [
-            self.superuser,
-            self.anonymous,
-            self.owner_as_cat.user,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-            self.user_no_roles,
-        ]
-        self.assert_response(url, bad_users, 302, redirect_anon=reverse('home'))
-
-
-@override_settings(PROJECTROLES_SITE_MODE=SITE_MODE_TARGET)
-class TestRevokedRemoteProject(
-    RemoteSiteMixin, RemoteProjectMixin, TestProjectPermissionBase
-):
-    """Tests for views for a revoked project on a TARGET site"""
-
-    def setUp(self):
-        super().setUp()
-        # Create site
-        self.site = self.make_site(
-            name=REMOTE_SITE_NAME,
-            url=REMOTE_SITE_URL,
-            mode=SODAR_CONSTANTS['SITE_MODE_SOURCE'],
-            description='',
-            secret=REMOTE_SITE_SECRET,
+        self.assert_response_api(
+            url, self.anonymous, 401, method='PATCH', data=request_data
         )
-        # Create RemoteProject objects
-        self.remote_category = self.make_remote_project(
-            project_uuid=self.category.sodar_uuid,
-            project=self.category,
-            site=self.site,
-            level=SODAR_CONSTANTS['REMOTE_LEVEL_READ_INFO'],
+        self.assert_response_api(
+            url, good_users, 200, method='PATCH', data=request_data, knox=True
         )
-        self.remote_project = self.make_remote_project(
-            project_uuid=self.project.sodar_uuid,
-            project=self.project,
-            site=self.site,
-            level=SODAR_CONSTANTS['REMOTE_LEVEL_REVOKED'],
+        # Test public project
+        self.project.set_public()
+        self.assert_response_api(
+            url, self.user_no_roles, 403, method='PATCH', data=request_data
         )
 
-    def test_project_details(self):
-        """Test permissions for REVOKED project detail page as target"""
+    def test_hyperlink_destroy(self):
+        """Test permissions for hyperlink destroying with DELETE"""
+        obj_uuid = uuid.uuid4()
+        c_kwargs = {'obj_uuid': obj_uuid}
         url = reverse(
-            'projectroles:detail', kwargs={'project': self.project.sodar_uuid}
+            'filesfolders:api_hyperlink_retrieve_update_destroy',
+            kwargs={'hyperlink': obj_uuid},
         )
-        good_users = [self.superuser, self.owner_as.user, self.delegate_as.user]
+        good_users = [
+            self.superuser,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_owner,  # Owner of link
+            self.user_delegate,
+        ]
         bad_users = [
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_contributor,
+            self.user_guest,
             self.user_no_roles,
-            self.anonymous,
         ]
-        self.assert_response(url, good_users, 200)
-        self.assert_response(url, bad_users, 302)
-
-    def test_role_list(self):
-        """Test permissions for REVOKED project's role list as target"""
-        url = reverse(
-            'projectroles:roles', kwargs={'project': self.project.sodar_uuid}
+        self._cleanup_link_destroy(**c_kwargs)
+        self.assert_response_api(
+            url,
+            good_users,
+            204,
+            method='DELETE',
+            cleanup_method=self._cleanup_link_destroy,
+            cleanup_kwargs=c_kwargs,
+        )
+        self.assert_response_api(url, bad_users, 403, method='DELETE')
+        self.assert_response_api(url, self.anonymous, 401, method='DELETE')
+        self.assert_response_api(
+            url,
+            good_users,
+            204,
+            method='DELETE',
+            cleanup_method=self._cleanup_link_destroy,
+            cleanup_kwargs=c_kwargs,
+            knox=True,
         )
-        good_users = [self.superuser, self.owner_as.user, self.delegate_as.user]
-        bad_users = [
-            self.contributor_as.user,
-            self.guest_as.user,
+        # Test public project
+        self.project.set_public()
+        self.assert_response_api(
+            url,
             self.user_no_roles,
-            self.anonymous,
-        ]
-        self.assert_response(url, good_users, 200)
-        self.assert_response(url, bad_users, 302)
-
-
-class TestRemoteSiteApp(RemoteSiteMixin, TestPermissionBase):
-    """Tests for remote site management views"""
+            403,
+            method='DELETE',
+        )
 
-    def setUp(self):
-        # Create users
-        self.superuser = self.make_user('superuser')
-        self.superuser.is_superuser = True
-        self.superuser.is_staff = True
-        self.superuser.save()
-        self.regular_user = self.make_user('regular_user')
-        # No user
-        self.anonymous = None
-        # Create site
-        self.site = self.make_site(
-            name=REMOTE_SITE_NAME,
-            url=REMOTE_SITE_URL,
-            mode=SODAR_CONSTANTS['SITE_MODE_TARGET'],
+    @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
+    def test_hyperlink_destroy_anon(self):
+        """Test permissions for hyperlink destroying with anonymous access"""
+        link = self.make_hyperlink(
+            name='New Link',
+            url='http://www.duckduckgo.com/',
+            project=self.project,
+            folder=None,
+            owner=self.user_owner,
             description='',
-            secret=REMOTE_SITE_SECRET,
         )
-
-    def test_site_list(self):
-        """Test remote site list view permissions"""
-        url = reverse('projectroles:remote_sites')
-        good_users = [self.superuser]
-        bad_users = [self.regular_user, self.anonymous]
-        self.assert_response(url, good_users, 200)
-        self.assert_response(url, bad_users, 302)
-
-    def test_site_create(self):
-        """Test remote site create view permissions"""
-        url = reverse('projectroles:remote_site_create')
-        good_users = [self.superuser]
-        bad_users = [self.regular_user, self.anonymous]
-        self.assert_response(url, good_users, 200)
-        self.assert_response(url, bad_users, 302)
-
-    def test_site_update(self):
-        """Test remote site update view permissions"""
         url = reverse(
-            'projectroles:remote_site_update',
-            kwargs={'remotesite': self.site.sodar_uuid},
+            'filesfolders:api_hyperlink_retrieve_update_destroy',
+            kwargs={'hyperlink': link.sodar_uuid},
         )
-        good_users = [self.superuser]
-        bad_users = [self.regular_user, self.anonymous]
-        self.assert_response(url, good_users, 200)
-        self.assert_response(url, bad_users, 302)
-
-    def test_site_delete(self):
-        """Test remote site delete view permissions"""
-        url = reverse(
-            'projectroles:remote_site_delete',
-            kwargs={'remotesite': self.site.sodar_uuid},
+        self.project.set_public()
+        self.assert_response_api(
+            url,
+            self.anonymous,
+            401,
+            method='DELETE',
         )
-        good_users = [self.superuser]
-        bad_users = [self.regular_user, self.anonymous]
-        self.assert_response(url, good_users, 200)
-        self.assert_response(url, bad_users, 302)
 
-    def test_project_list(self):
-        """Test remote project list view permissions"""
+    def test_hyperlink_destroy_archive(self):
+        """Test permissions for hyperlink destroying with DELETE and archived project"""
+        self.project.set_archive()
+        obj_uuid = uuid.uuid4()
+        c_kwargs = {'obj_uuid': obj_uuid}
         url = reverse(
-            'projectroles:remote_projects',
-            kwargs={'remotesite': self.site.sodar_uuid},
+            'filesfolders:api_hyperlink_retrieve_update_destroy',
+            kwargs={'hyperlink': obj_uuid},
         )
         good_users = [self.superuser]
-        bad_users = [self.regular_user, self.anonymous]
-        self.assert_response(url, good_users, 200)
-        self.assert_response(url, bad_users, 302)
-
-    def test_project_update(self):
-        """Test remote project update view permissions"""
-        url = reverse(
-            'projectroles:remote_projects_update',
-            kwargs={'remotesite': self.site.sodar_uuid},
+        bad_users = [
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
+            self.user_no_roles,
+        ]
+        self._cleanup_link_destroy(**c_kwargs)
+        self.assert_response_api(
+            url,
+            good_users,
+            204,
+            method='DELETE',
+            cleanup_method=self._cleanup_link_destroy,
+            cleanup_kwargs=c_kwargs,
+        )
+        self.assert_response_api(url, bad_users, 403, method='DELETE')
+        self.assert_response_api(url, self.anonymous, 401, method='DELETE')
+        self.assert_response_api(
+            url,
+            good_users,
+            204,
+            method='DELETE',
+            cleanup_method=self._cleanup_link_destroy,
+            cleanup_kwargs=c_kwargs,
+            knox=True,
+        )
+        # Test public project
+        self.project.set_public()
+        self.assert_response_api(
+            url,
+            self.user_no_roles,
+            403,
+            method='DELETE',
         )
-        good_users = [self.superuser]
-        bad_users = [self.regular_user, self.anonymous]
-        self.assert_response(url, good_users, 200)
-        self.assert_response(url, bad_users, 302)
```

### Comparing `django-sodar-core-0.12.0/projectroles/tests/test_permissions_ajax.py` & `django-sodar-core-0.13.0/projectroles/tests/test_permissions_ajax.py`

 * *Files 13% similar despite different names*

```diff
@@ -16,48 +16,58 @@
 PROJECT_TYPE_PROJECT = SODAR_CONSTANTS['PROJECT_TYPE_PROJECT']
 
 
 class TestProjectViews(TestProjectPermissionBase):
     """Permission tests for Project Ajax views"""
 
     def test_project_list_ajax(self):
-        """Test permissions for ProjectListAjaxView"""
+        """Test ProjectListAjaxView permissions"""
         url = reverse('projectroles:ajax_project_list')
         good_users = [
             self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
             self.user_no_roles,
         ]
         self.assert_response(url, good_users, 200)
         self.assert_response(url, self.anonymous, 403)
         self.project.set_public()
         self.assert_response(url, self.anonymous, 403)
 
     @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
     def test_project_list_ajax_anon(self):
-        """Test permissions for ProjectListAjaxView with anonymous access"""
+        """Test ProjectListAjaxView permissions with anonymous access"""
         url = reverse('projectroles:ajax_project_list')
         self.assert_response(url, self.anonymous, 200)
         self.project.set_public()
         self.assert_response(url, self.anonymous, 200)
 
     def test_project_list_column_ajax(self):
-        """Test permissions for ProjectListColumnAjaxView"""
+        """Test ProjectListColumnAjaxView permissions"""
         url = reverse('projectroles:ajax_project_list_columns')
         data = {'projects': [str(self.project.sodar_uuid)]}
         req_kwargs = {'content_type': 'application/json'}
         good_users = [
             self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
             self.user_no_roles,
         ]
         self.assert_response(
             url,
             good_users,
             200,
             method='POST',
@@ -80,39 +90,44 @@
             method='POST',
             data=data,
             req_kwargs=req_kwargs,
         )
 
     @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
     def test_project_list_column_ajax_anon(self):
-        """Test permissions for ProjectListColumnAjaxView with anonymous access"""
+        """Test ProjectListColumnAjaxView permissions with anonymous access"""
         url = reverse('projectroles:ajax_project_list_columns')
         data = {'projects': [str(self.project.sodar_uuid)]}
         req_kwargs = {'content_type': 'application/json'}
         self.project.set_public()
         self.assert_response(
             url,
             self.anonymous,
             200,
             method='POST',
             data=data,
             req_kwargs=req_kwargs,
         )
 
     def test_project_list_role_ajax(self):
-        """Test permissions for ProjectListRoleAjaxView"""
+        """Test ProjectListRoleAjaxView permissions"""
         url = reverse('projectroles:ajax_project_list_roles')
         data = {'projects': [str(self.project.sodar_uuid)]}
         req_kwargs = {'content_type': 'application/json'}
         good_users = [
             self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
             self.user_no_roles,
         ]
         self.assert_response(
             url,
             good_users,
             200,
             method='POST',
@@ -135,111 +150,130 @@
             method='POST',
             data=data,
             req_kwargs=req_kwargs,
         )
 
     @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
     def test_project_list_role_ajax_anon(self):
-        """Test permissions for ProjectListRoleAjaxView with anonymous access"""
+        """Test ProjectListRoleAjaxView permissions with anonymous access"""
         url = reverse('projectroles:ajax_project_list_roles')
         data = {'projects': [str(self.project.sodar_uuid)]}
         req_kwargs = {'content_type': 'application/json'}
         self.project.set_public()
         self.assert_response(
             url,
             self.anonymous,
             200,
             method='POST',
             data=data,
             req_kwargs=req_kwargs,
         )
 
     def test_starring_ajax(self):
-        """Test permissions for ProjectStarringAjaxView"""
+        """Test ProjectStarringAjaxView permissions"""
         url = reverse(
             'projectroles:ajax_star',
             kwargs={'project': self.project.sodar_uuid},
         )
         good_users = [
             self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
         ]
-        bad_users = [self.anonymous, self.user_no_roles]
+        bad_users = [self.user_finder_cat, self.user_no_roles, self.anonymous]
         self.assert_response(url, good_users, 200, method='POST')
         self.assert_response(url, bad_users, 403, method='POST')
         # Test public project
         self.project.set_public()
         self.assert_response(url, self.user_no_roles, 200, method='POST')
 
     @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
     def test_starring_ajax_anon(self):
-        """Test permissions for project starring Ajax view with anonymous access"""
+        """Test ProjectStarringAjaxView permissions with anonymous access"""
         url = reverse(
             'projectroles:ajax_star',
             kwargs={'project': self.project.sodar_uuid},
         )
         self.project.set_public()
         self.assert_response(url, self.anonymous, 401, method='POST')
 
     def test_starring_ajax_category(self):
-        """Test permissions for project starring Ajax view under category"""
+        """Test ProjectStarringAjaxView permissions with category"""
         url = reverse(
             'projectroles:ajax_star',
             kwargs={'project': self.category.sodar_uuid},
         )
         good_users = [
             self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
         ]
-        bad_users = [self.anonymous, self.user_no_roles]
+        bad_users = [self.user_no_roles, self.anonymous]
         self.assert_response(url, good_users, 200, method='POST')
         self.assert_response(url, bad_users, 403, method='POST')
         # Test public project
         self.project.set_public()
         self.assert_response(url, self.user_no_roles, 200, method='POST')
 
     @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
     def test_starring_ajax_category_anon(self):
-        """Test permissions for category starring Ajax view with anonymous access"""
+        """Test ProjectStarringAjaxView permissions with category and anon access"""
         url = reverse(
             'projectroles:ajax_star',
             kwargs={'project': self.category.sodar_uuid},
         )
         self.project.set_public()
         self.assert_response(url, self.anonymous, 401, method='POST')
 
     def test_current_user(self):
         """Test CurrentUserRetrieveAjaxView access"""
         url = reverse('projectroles:ajax_user_current')
         good_users = [
             self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
             self.user_no_roles,
         ]
         bad_users = [self.anonymous]
         self.assert_response(url, good_users, 200)
         self.assert_response(url, bad_users, 403)
 
     @override_settings(PROJECTROLES_ALLOW_LOCAL_USERS=True)
     def test_user_autocomplete_ajax(self):
         """Test UserAutocompleteAjaxView access"""
         url = reverse('projectroles:ajax_autocomplete_user')
         good_users = [
             self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
             self.user_no_roles,
         ]
         bad_users = [self.anonymous]
         self.assert_response(url, good_users, 200)
         self.assert_response(url, bad_users, 403)
```

### Comparing `django-sodar-core-0.12.0/projectroles/tests/test_remote_projects_api.py` & `django-sodar-core-0.13.0/projectroles/tests/test_remote_projects_api.py`

 * *Files 1% similar despite different names*

```diff
@@ -9,24 +9,24 @@
 from django.forms.models import model_to_dict
 from django.test import override_settings
 
 from test_plus.test import TestCase
 
 from projectroles.models import (
     Project,
-    Role,
     RoleAssignment,
     RemoteProject,
     RemoteSite,
     SODAR_CONSTANTS,
     AppSetting,
 )
 from projectroles.remote_projects import RemoteProjectAPI
 from projectroles.tests.test_models import (
     ProjectMixin,
+    RoleMixin,
     RoleAssignmentMixin,
     RemoteSiteMixin,
     RemoteProjectMixin,
     SODARUserMixin,
     AppSettingMixin,
 )
 from projectroles.utils import build_secret
@@ -126,41 +126,34 @@
 
 PR_IP_RESTRICT_UUID = str(uuid.uuid4())
 PR_IP_ALLOWLIST_UUID = str(uuid.uuid4())
 
 
 class TestGetSourceData(
     ProjectMixin,
+    RoleMixin,
     RoleAssignmentMixin,
     RemoteSiteMixin,
     RemoteProjectMixin,
     SODARUserMixin,
     TestCase,
 ):
     """Tests for the get_source_data() API function"""
 
     def setUp(self):
         # Init roles
-        self.role_owner = Role.objects.get_or_create(name=PROJECT_ROLE_OWNER)[0]
-        self.role_delegate = Role.objects.get_or_create(
-            name=PROJECT_ROLE_DELEGATE
-        )[0]
-        self.role_contributor = Role.objects.get_or_create(
-            name=PROJECT_ROLE_CONTRIBUTOR
-        )[0]
-        self.role_guest = Role.objects.get_or_create(name=PROJECT_ROLE_GUEST)[0]
+        self.init_roles()
         # Init an LDAP user on the source site
         self.user_source = self.make_sodar_user(
             username=SOURCE_USER_USERNAME,
             name=SOURCE_USER_NAME,
             first_name=SOURCE_USER_FIRST_NAME,
             last_name=SOURCE_USER_LAST_NAME,
             email=SOURCE_USER_EMAIL,
         )
-
         # Init local category and project
         self.category = self.make_project(
             SOURCE_CATEGORY_TITLE, PROJECT_TYPE_CATEGORY, None
         )
         self.project = self.make_project(
             SOURCE_PROJECT_TITLE, PROJECT_TYPE_PROJECT, self.category
         )
@@ -216,15 +209,15 @@
             },
             'peer_sites': {},
             'app_settings': {},
         }
         self.assertEqual(sync_data, expected)
 
     def test_read_info(self):
-        """Test get data with project level of READ_INFO (read information)"""
+        """Test get data with project level of READ_INFO"""
         self.make_remote_project(
             project_uuid=self.project.sodar_uuid,
             site=self.target_site,
             level=REMOTE_LEVEL_READ_INFO,
         )
         self.make_remote_project(
             project_uuid=self.project.sodar_uuid,
@@ -310,15 +303,15 @@
             },
             'peer_sites': {},
             'app_settings': {},
         }
         self.assertEqual(sync_data, expected)
 
     def test_read_roles(self):
-        """Test get data with project level of READ_ROLES (read roles)"""
+        """Test get data with project level of READ_ROLES"""
         self.make_remote_project(
             project_uuid=self.project.sodar_uuid,
             site=self.target_site,
             level=REMOTE_LEVEL_READ_ROLES,
         )
         self.make_remote_project(
             project_uuid=self.project.sodar_uuid,
@@ -343,30 +336,30 @@
                     'type': PROJECT_TYPE_CATEGORY,
                     'level': REMOTE_LEVEL_READ_ROLES,
                     'parent_uuid': None,
                     'description': self.category.description,
                     'readme': self.category.readme.raw,
                     'roles': {
                         str(self.category_owner_as.sodar_uuid): {
-                            'user': self.category_owner_as.user.username,
-                            'role': self.category_owner_as.role.name,
+                            'user': self.user_source.username,
+                            'role': self.role_owner.name,
                         }
                     },
                 },
                 str(self.project.sodar_uuid): {
                     'title': self.project.title,
                     'type': PROJECT_TYPE_PROJECT,
                     'level': REMOTE_LEVEL_READ_ROLES,
                     'description': self.project.description,
                     'readme': self.project.readme.raw,
                     'parent_uuid': str(self.category.sodar_uuid),
                     'roles': {
                         str(self.project_owner_as.sodar_uuid): {
-                            'user': self.project_owner_as.user.username,
-                            'role': self.project_owner_as.role.name,
+                            'user': self.user_source.username,
+                            'role': self.role_owner.name,
                         }
                     },
                     'remote_sites': [str(self.peer_site.sodar_uuid)],
                 },
             },
             'peer_sites': {
                 str(self.peer_site.sodar_uuid): {
@@ -376,14 +369,52 @@
                     'user_display': self.peer_site.user_display,
                 }
             },
             'app_settings': {},
         }
         self.assertEqual(sync_data, expected)
 
+    def test_read_roles_inherited(self):
+        """Test get data with READ_ROLES and inherited contributor"""
+        user_new_name = 'user_new@' + SOURCE_USER_DOMAIN
+        user_new = self.make_sodar_user(
+            username=user_new_name,
+            name='New User',
+            first_name='New',
+            last_name='User',
+            email='user_new@example.com',
+        )
+        contrib_as = self.make_assignment(
+            self.category, user_new, self.role_contributor
+        )
+        self.make_remote_project(
+            project_uuid=self.project.sodar_uuid,
+            site=self.target_site,
+            level=REMOTE_LEVEL_READ_ROLES,
+        )
+        self.make_remote_project(
+            project_uuid=self.project.sodar_uuid,
+            site=self.peer_site,
+            level=REMOTE_LEVEL_READ_ROLES,
+        )
+
+        sync_data = self.remote_api.get_source_data(self.target_site)
+        c_uuid = str(self.category.sodar_uuid)
+        a_uuid = str(contrib_as.sodar_uuid)
+        self.assertIn(str(user_new.sodar_uuid), sync_data['users'].keys())
+        self.assertIn(a_uuid, sync_data['projects'][c_uuid]['roles'].keys())
+        self.assertEqual(
+            sync_data['projects'][c_uuid]['roles'][a_uuid]['user'],
+            user_new_name,
+        )
+        self.assertEqual(
+            sync_data['projects'][c_uuid]['roles'][a_uuid]['role'],
+            PROJECT_ROLE_CONTRIBUTOR,
+        )
+
     def test_revoked(self):
         """Test get data with project level of REVOKED"""
         user_source_new = self.make_user('new_source_user')
         self.make_assignment(self.project, user_source_new, self.role_guest)
         self.make_remote_project(
             project_uuid=self.project.sodar_uuid,
             site=self.target_site,
@@ -420,16 +451,16 @@
                     'type': PROJECT_TYPE_PROJECT,
                     'level': REMOTE_LEVEL_REVOKED,
                     'description': self.project.description,
                     'readme': self.project.readme.raw,
                     'parent_uuid': str(self.category.sodar_uuid),
                     'roles': {
                         str(self.project_owner_as.sodar_uuid): {
-                            'user': self.project_owner_as.user.username,
-                            'role': self.project_owner_as.role.name,
+                            'user': self.user_source.username,
+                            'role': self.role_owner.name,
                         }  # NOTE: Another user should not be synced
                     },
                     'remote_sites': [],
                 },
             },
             'peer_sites': {},
             'app_settings': {},
@@ -447,14 +478,15 @@
         }
         self.assertEqual(sync_data, expected)
 
 
 @override_settings(PROJECTROLES_SITE_MODE=SITE_MODE_TARGET)
 class TestSyncRemoteDataBase(
     ProjectMixin,
+    RoleMixin,
     RoleAssignmentMixin,
     RemoteSiteMixin,
     RemoteProjectMixin,
     SODARUserMixin,
     AppSettingMixin,
     TestCase,
 ):
@@ -463,23 +495,15 @@
     def setUp(self):
         # Init users
         self.admin_user = self.make_user(settings.PROJECTROLES_DEFAULT_ADMIN)
         self.admin_user.is_staff = True
         self.admin_user.is_superuser = True
         self.maxDiff = None
         # Init roles
-        self.role_owner = Role.objects.get_or_create(name=PROJECT_ROLE_OWNER)[0]
-        self.role_delegate = Role.objects.get_or_create(
-            name=PROJECT_ROLE_DELEGATE
-        )[0]
-        self.role_contributor = Role.objects.get_or_create(
-            name=PROJECT_ROLE_CONTRIBUTOR
-        )[0]
-        self.role_guest = Role.objects.get_or_create(name=PROJECT_ROLE_GUEST)[0]
-
+        self.init_roles()
         # Init source site
         self.source_site = self.make_site(
             name=SOURCE_SITE_NAME,
             url=SOURCE_SITE_URL,
             mode=SITE_MODE_SOURCE,
             description=SOURCE_SITE_DESC,
             secret=SOURCE_SITE_SECRET,
@@ -1065,14 +1089,45 @@
 
         self.assertEqual(Project.objects.all().count(), 1)
         self.assertEqual(RoleAssignment.objects.all().count(), 0)
         self.assertEqual(User.objects.all().count(), 1)
         self.assertEqual(RemoteProject.objects.all().count(), 0)
         self.assertEqual(RemoteSite.objects.all().count(), 1)
 
+    def test_create_inherited(self):
+        """Test sync with inherited contributor"""
+        self.assertEqual(User.objects.all().count(), 1)
+        new_user_username = 'newuser@' + SOURCE_USER_DOMAIN
+        new_user_uuid = str(uuid.uuid4())
+        new_role_uuid = str(uuid.uuid4())
+        remote_data = self.default_data
+        remote_data['users'][str(new_user_uuid)] = {
+            'sodar_uuid': new_user_uuid,
+            'username': new_user_username,
+            'name': 'Some Name',
+            'first_name': 'Some',
+            'last_name': 'Name',
+            'groups': [SOURCE_USER_GROUP],
+        }
+        remote_data['projects'][SOURCE_CATEGORY_UUID]['roles'][
+            new_role_uuid
+        ] = {
+            'user': new_user_username,
+            'role': PROJECT_ROLE_CONTRIBUTOR,
+        }
+        self.remote_api.sync_remote_data(self.source_site, remote_data)
+
+        self.assertEqual(User.objects.all().count(), 3)
+        new_user = User.objects.get(username=new_user_username)
+        category = Project.objects.get(sodar_uuid=SOURCE_CATEGORY_UUID)
+        self.assertEqual(
+            RoleAssignment.objects.get(project=category, user=new_user).role,
+            self.role_contributor,
+        )
+
     def test_create_no_access(self):
         """Test sync with no READ_ROLE access set"""
         remote_data = self.default_data
         remote_data['projects'][SOURCE_CATEGORY_UUID][
             'level'
         ] = REMOTE_LEVEL_READ_INFO
         remote_data['projects'][SOURCE_PROJECT_UUID][
@@ -1572,14 +1627,47 @@
         expected['app_settings'][PR_IP_ALLOWLIST_UUID]['value_json'] = [
             '192.168.1.1'
         ]
         expected['app_settings'][PR_IP_RESTRICT_UUID]['status'] = 'updated'
         expected['app_settings'][PR_IP_ALLOWLIST_UUID]['status'] = 'updated'
         self.assertEqual(remote_data, expected)
 
+    def test_update_inherited(self):
+        """Test sync with existing project data and inherited contributor"""
+        self.assertEqual(User.objects.all().count(), 2)
+        remote_data = self.default_data
+        # Add new user and contributor role to source category
+        new_user_username = 'newuser@' + SOURCE_USER_DOMAIN
+        new_user_uuid = str(uuid.uuid4())
+        new_role_uuid = str(uuid.uuid4())
+        remote_data['users'][str(new_user_uuid)] = {
+            'sodar_uuid': new_user_uuid,
+            'username': new_user_username,
+            'name': 'Some Name',
+            'first_name': 'Some',
+            'last_name': 'Name',
+            'groups': [SOURCE_USER_GROUP],
+        }
+        remote_data['projects'][SOURCE_CATEGORY_UUID]['roles'][
+            new_role_uuid
+        ] = {
+            'user': new_user_username,
+            'role': PROJECT_ROLE_CONTRIBUTOR,
+        }
+        self.remote_api.sync_remote_data(self.source_site, remote_data)
+
+        self.assertEqual(User.objects.all().count(), 3)
+        new_user = User.objects.get(username=new_user_username)
+        self.assertEqual(
+            RoleAssignment.objects.get(
+                project=self.category_obj, user=new_user
+            ).role,
+            self.role_contributor,
+        )
+
     def test_update_app_setting_local(self):
         """Test update with a local app setting"""
         remote_data = self.default_data
         # Change projectroles app settings
         remote_data['app_settings'][PR_IP_RESTRICT_UUID]['local'] = True
         remote_data['app_settings'][PR_IP_ALLOWLIST_UUID]['local'] = True
         remote_data['app_settings'][PR_IP_RESTRICT_UUID]['value'] = True
```

### Comparing `django-sodar-core-0.12.0/projectroles/tests/test_templatetags.py` & `django-sodar-core-0.13.0/projectroles/tests/test_templatetags.py`

 * *Files 19% similar despite different names*

```diff
@@ -1,118 +1,107 @@
 """Tests for template tags in the projectroles app"""
 
 import mistune
 import uuid
 
 from importlib import import_module
-from math import ceil
 
 from django.conf import settings
 from django.test import override_settings, RequestFactory
 from django.urls import reverse
 
 from test_plus.test import TestCase
 
 import projectroles
 from projectroles.app_settings import AppSettingAPI
 from projectroles.models import (
-    Role,
-    SODAR_CONSTANTS,
-    PROJECT_TAG_STARRED,
     Project,
     RemoteProject,
     RemoteSite,
     AppSetting,
+    SODAR_CONSTANTS,
 )
 from projectroles.plugins import get_app_plugin, get_active_plugins
-from projectroles.project_tags import set_tag_state
 from projectroles.templatetags import (
     projectroles_common_tags as c_tags,
+    projectroles_role_tags as r_tags,
     projectroles_tags as tags,
 )
 from projectroles.tests.test_models import (
     ProjectMixin,
+    RoleMixin,
     RoleAssignmentMixin,
     ProjectInviteMixin,
 )
 
 
+app_settings = AppSettingAPI()
+site = import_module(settings.SITE_PACKAGE)
+
+
 # SODAR constants
 PROJECT_ROLE_OWNER = SODAR_CONSTANTS['PROJECT_ROLE_OWNER']
 PROJECT_ROLE_DELEGATE = SODAR_CONSTANTS['PROJECT_ROLE_DELEGATE']
 PROJECT_ROLE_CONTRIBUTOR = SODAR_CONSTANTS['PROJECT_ROLE_CONTRIBUTOR']
 PROJECT_ROLE_GUEST = SODAR_CONSTANTS['PROJECT_ROLE_GUEST']
 PROJECT_TYPE_CATEGORY = SODAR_CONSTANTS['PROJECT_TYPE_CATEGORY']
 PROJECT_TYPE_PROJECT = SODAR_CONSTANTS['PROJECT_TYPE_PROJECT']
 SITE_MODE_SOURCE = SODAR_CONSTANTS['SITE_MODE_SOURCE']
 SITE_MODE_TARGET = SODAR_CONSTANTS['SITE_MODE_TARGET']
 SITE_MODE_PEER = SODAR_CONSTANTS['SITE_MODE_PEER']
 REMOTE_LEVEL_READ_ROLES = SODAR_CONSTANTS['REMOTE_LEVEL_READ_ROLES']
 
-
 # Local constants
 NON_EXISTING_UUID = uuid.uuid4()
 STATIC_FILE_PATH = 'images/logo_navbar.png'
 TEMPLATE_PATH = 'projectroles/home.html'
 
 
-site = import_module(settings.SITE_PACKAGE)
-
-
-# App settings API
-app_settings = AppSettingAPI()
-
-
 class TestTemplateTagsBase(
-    ProjectMixin, RoleAssignmentMixin, ProjectInviteMixin, TestCase
+    ProjectMixin, RoleMixin, RoleAssignmentMixin, ProjectInviteMixin, TestCase
 ):
     """Base class for testing template tags"""
 
     def setUp(self):
         # Init roles
-        self.role_owner = Role.objects.get_or_create(name=PROJECT_ROLE_OWNER)[0]
-
+        self.init_roles()
         # Init users
         self.user = self.make_user('user_owner')
-
         # Init category
         self.category = self.make_project(
             title='TestCategoryTop', type=PROJECT_TYPE_CATEGORY, parent=None
         )
-
         # Init project under category
         self.project = self.make_project(
             title='TestProjectSub',
             type=PROJECT_TYPE_PROJECT,
             parent=self.category,
         )
-
         # Init role assignments
         self.owner_as_cat = self.make_assignment(
             self.category, self.user, self.role_owner
         )
         self.owner_as = self.make_assignment(
             self.project, self.user, self.role_owner
         )
-
-        # Init app_setting
+        # Init app_settings
         app_settings.set(
             'filesfolders', 'allow_public_links', True, project=self.project
         )
         app_settings.set(
             'projectroles', 'ip_restrict', True, project=self.project
         )
         self.setting_filesfolders = AppSetting.objects.get(
             project=self.project,
             app_plugin__name='filesfolders',
             name='allow_public_links',
         )
 
 
-class TestCommonTemplateTags(TestTemplateTagsBase):
+class TestProjectrolesCommonTags(TestTemplateTagsBase):
     """Test for template tags in projectroles_common_tags"""
 
     def test_site_version(self):
         """Test site_version()"""
         self.assertEqual(c_tags.site_version(), site.__version__)
 
     def test_core_version(self):
@@ -273,15 +262,15 @@
                 'project': self.project.sodar_uuid,
                 'object_model': self.user.__class__.__name__,
                 'object_uuid': self.user.sodar_uuid,
             },
         )
         self.assertEqual(
             c_tags.get_history_dropdown(self.user, self.project),
-            '<a class="dropdown-item" href="{}">\n'
+            '<a class="dropdown-item sodar-pr-role-link-history" href="{}">\n'
             '<i class="iconify" data-icon="mdi:clock-time-eight-outline"></i> '
             'History</a>\n'.format(url),
         )
 
     def test_highlight_search_term(self):
         """Test highlight_search_term()"""
         item = 'Some Highlighted Text'
@@ -432,16 +421,107 @@
         self.assertEqual(
             c_tags.get_backend_include(backend_plugin.name, 'css'),
             '<link rel="stylesheet" type="text/css" '
             'href="/static/example_backend_app/css/greeting.css"/>',
         )
 
 
-class TestProjectrolesTemplateTags(TestTemplateTagsBase):
-    """Test for template tags in projectroless_tags"""
+class TestProjectrolesRoleTags(TestTemplateTagsBase):
+    """Test for template tags in projectroles_role_tags"""
+
+    def test_get_role_icon(self):
+        """Test get_role_icon()"""
+        self.assertEqual(r_tags.get_role_icon(self.role_owner), 'mdi:star')
+        self.assertEqual(
+            r_tags.get_role_icon(self.role_delegate), 'mdi:star-half-full'
+        )
+        self.assertEqual(
+            r_tags.get_role_icon(self.role_contributor), 'mdi:account'
+        )
+        self.assertEqual(r_tags.get_role_icon(self.role_guest), 'mdi:account')
+
+    def test_get_role_perms(self):
+        """Test get_role_perms()"""
+        self.assertEqual(
+            r_tags.get_role_perms(self.project, self.user),
+            {
+                'can_update_owner': True,
+                'can_update_delegate': True,
+                'can_update_members': True,
+                'can_invite': True,
+            },
+        )
+        # Guest
+        user_guest = self.make_user('user_new')
+        self.make_assignment(self.project, user_guest, self.role_guest)
+        self.assertEqual(
+            r_tags.get_role_perms(self.project, user_guest),
+            {
+                'can_update_owner': False,
+                'can_update_delegate': False,
+                'can_update_members': False,
+                'can_invite': False,
+            },
+        )
+        # Inherited delegate
+        user_delegate_cat = self.make_user('user_delegate_cat')
+        self.make_assignment(
+            self.category, user_delegate_cat, self.role_delegate
+        )
+        self.assertEqual(
+            r_tags.get_role_perms(self.project, user_delegate_cat),
+            {
+                'can_update_owner': False,
+                'can_update_delegate': False,
+                'can_update_members': True,
+                'can_invite': True,
+            },
+        )
+
+    def test_display_role_buttons(self):
+        """Test display_role_buttons()"""
+        self.assertTrue(
+            r_tags.display_role_buttons(
+                self.project,
+                self.owner_as,
+                r_tags.get_role_perms(self.project, self.user),
+            ),
+        )
+        # Guest
+        user_guest = self.make_user('user_new')
+        guest_as = self.make_assignment(
+            self.project, user_guest, self.role_guest
+        )
+        self.assertFalse(
+            r_tags.display_role_buttons(
+                self.project,
+                guest_as,
+                r_tags.get_role_perms(self.project, guest_as.user),
+            ),
+        )
+
+    def test_get_inactive_role(self):
+        """Test get_inactive_role()"""
+        inh_user = self.make_user('inh_user')
+        self.owner_as_cat.user = inh_user
+        self.owner_as_cat.save()
+        self.assertEqual(
+            r_tags.get_inactive_role(self.project, self.owner_as_cat), None
+        )
+        inactive_as = self.make_assignment(
+            self.project, inh_user, self.role_contributor
+        )
+        self.assertEqual(
+            r_tags.get_inactive_role(self.project, self.owner_as_cat),
+            inactive_as,
+        )
+
+
+class TestProjectrolesTags(TestTemplateTagsBase):
+    """Test for template tags in projectroles_tags"""
 
     def test_sodar_constant(self):
         """Test sodar_constant()"""
         self.assertEqual(tags.sodar_constant('PROJECT_TYPE_PROJECT'), 'PROJECT')
         self.assertEqual(tags.sodar_constant('NON_EXISTING_CONSTANT'), None)
 
     def test_get_backend_plugins(self):
@@ -449,25 +529,14 @@
         self.assertEqual(
             len(tags.get_backend_plugins()),
             len(settings.ENABLED_BACKEND_PLUGINS),
         )
 
     # TODO: Test get_site_app_messages() (set up admin alert)
 
-    def test_has_star(self):
-        """Test has_star()"""
-        # Test with no star
-        self.assertEqual(tags.has_star(self.project, self.user), False)
-
-        # Set star and test again
-        set_tag_state(self.project, self.user, name=PROJECT_TAG_STARRED)
-        self.assertEqual(tags.has_star(self.project, self.user), True)
-
-    # TODO: Test get_remote_project_obj() (Set up remote projects)
-
     def test_allow_project_creation(self):
         """Test allow_project_creation()"""
         self.assertEqual(tags.allow_project_creation(), True)
 
     @override_settings(
         PROJECTROLES_SITE_MODE='TARGET', PROJECTROLES_TARGET_CREATE=False
     )
@@ -493,40 +562,28 @@
     def test_is_app_visible_category_enabled(self):
         """Test is_app_visible() with category_enable=True"""
         app_plugin = get_app_plugin('timeline')
         self.assertEqual(
             tags.is_app_visible(app_plugin, self.category, self.user), True
         )
 
-    @override_settings(PROJECTROLES_HIDE_APP_LINKS=['filesfolders'])
+    @override_settings(PROJECTROLES_HIDE_PROJECT_APPS=['filesfolders'])
     def test_is_app_visible_hide(self):
         """Test is_app_visible() with a hidden app and normal/superuser"""
         app_plugin = get_app_plugin('filesfolders')
         superuser = self.make_user('superuser')
         superuser.is_superuser = True
         superuser.save()
         self.assertEqual(
             tags.is_app_visible(app_plugin, self.project, self.user), False
         )
         self.assertEqual(
             tags.is_app_visible(app_plugin, self.project, superuser), False
         )
 
-    def test_is_inherited_owner(self):
-        """Test is_inherited_owner()"""
-        owner_cat = self.make_user('user_cat_owner')
-        self.owner_as_cat.user = owner_cat
-        self.owner_as_cat.save()
-        self.assertEqual(
-            tags.is_inherited_owner(self.project, self.user), False
-        )
-        self.assertEqual(tags.is_inherited_owner(self.project, owner_cat), True)
-        # Should work without crashing
-        self.assertEqual(tags.is_inherited_owner(None, None), False)
-
     def test_get_app_link_state(self):
         """Test get_app_link_state()"""
         app_plugin = get_app_plugin('filesfolders')
         # TODO: Why does this also require app_name?
         self.assertEqual(
             tags.get_app_link_state(app_plugin, 'filesfolders', 'list'),
             'active',
@@ -557,62 +614,7 @@
         )
 
     def test_get_sidebar_app_legend(self):
         """Test get_sidebar_app_legend()"""
         self.assertEqual(
             tags.get_sidebar_app_legend('Update Project'), 'Update<br />Project'
         )
-
-    def test_get_sidebar_icon_size(self):
-        """Test get_sidebar_icon_size() with default value"""
-        self.assertEqual(tags.get_sidebar_icon_size(), 36)
-
-    @override_settings(
-        PROJECTROLES_SIDEBAR_ICON_SIZE=tags.SIDEBAR_ICON_MIN_SIZE - 2
-    )
-    def test_get_sidebar_icon_size_min(self):
-        """Test get_sidebar_icon_size() with a value below minimum"""
-        self.assertEqual(
-            tags.get_sidebar_icon_size(), tags.SIDEBAR_ICON_MIN_SIZE
-        )
-
-    @override_settings(
-        PROJECTROLES_SIDEBAR_ICON_SIZE=tags.SIDEBAR_ICON_MAX_SIZE + 2
-    )
-    def test_get_sidebar_icon_size_max(self):
-        """Test get_sidebar_icon_size() with a value over max"""
-        self.assertEqual(
-            tags.get_sidebar_icon_size(), tags.SIDEBAR_ICON_MAX_SIZE
-        )
-
-    def test_get_sidebar_notch_pos(self):
-        """Test get_sidebar_notch_pos()"""
-        self.assertEqual(tags.get_sidebar_notch_pos(), ceil(36 / 3))
-
-    def test_get_sidebar_notch_size(self):
-        """Test get_sidebar_notch_size()"""
-        self.assertEqual(tags.get_sidebar_notch_size(), 12)
-
-    @override_settings(
-        PROJECTROLES_SIDEBAR_ICON_SIZE=tags.SIDEBAR_ICON_MIN_SIZE
-    )
-    def test_get_sidebar_notch_size_min(self):
-        """Test get_sidebar_notch_size() with minimum icon size"""
-        self.assertEqual(tags.get_sidebar_notch_size(), 9)
-
-    def test_get_sidebar_padding(self):
-        """Test get_sidebar_padding()"""
-        self.assertEqual(tags.get_sidebar_padding(), 8)
-
-    @override_settings(
-        PROJECTROLES_SIDEBAR_ICON_SIZE=tags.SIDEBAR_ICON_MAX_SIZE
-    )
-    def test_get_sidebar_padding_max(self):
-        """Test get_sidebar_padding() with maximum icon size"""
-        self.assertEqual(tags.get_sidebar_padding(), 10)
-
-    @override_settings(
-        PROJECTROLES_SIDEBAR_ICON_SIZE=tags.SIDEBAR_ICON_MIN_SIZE
-    )
-    def test_get_sidebar_padding_min(self):
-        """Test get_sidebar_padding() with minimum icon size"""
-        self.assertEqual(tags.get_sidebar_padding(), 4)
```

### Comparing `django-sodar-core-0.12.0/projectroles/tests/test_ui.py` & `django-sodar-core-0.13.0/projectroles/tests/test_ui.py`

 * *Files 19% similar despite different names*

```diff
@@ -14,24 +14,24 @@
 from django.test import LiveServerTestCase, override_settings
 from django.urls import reverse
 
 from selenium import webdriver
 from selenium.common.exceptions import NoSuchElementException
 from selenium.webdriver.common.by import By
 from selenium.webdriver.support import expected_conditions as ec
-from selenium.webdriver.support.ui import WebDriverWait
+from selenium.webdriver.support.ui import WebDriverWait, Select
 
 from projectroles.app_settings import AppSettingAPI
-from projectroles.models import Role, SODAR_CONSTANTS, PROJECT_TAG_STARRED
+from projectroles.models import SODAR_CONSTANTS
 from projectroles.plugins import get_active_plugins
 from projectroles.tests.test_models import (
     ProjectMixin,
+    RoleMixin,
     RoleAssignmentMixin,
     ProjectInviteMixin,
-    ProjectUserTagMixin,
     RemoteTargetMixin,
     RemoteSiteMixin,
     RemoteProjectMixin,
 )
 from projectroles.utils import build_secret
 
 
@@ -82,24 +82,28 @@
         else:
             user = User.objects.create_user(**kwargs)
         user.save()
         return user
 
 
 class TestUIBase(
-    LiveUserMixin, ProjectMixin, RoleAssignmentMixin, LiveServerTestCase
+    LiveUserMixin,
+    ProjectMixin,
+    RoleMixin,
+    RoleAssignmentMixin,
+    LiveServerTestCase,
 ):
     """Base class for UI tests"""
 
     #: Selenium Chrome options from settings
     chrome_options = getattr(
         settings,
         'PROJECTROLES_TEST_UI_CHROME_OPTIONS',
         [
-            'headless',
+            'headless=new',
             'no-sandbox',  # For Gitlab-CI compatibility
             'disable-dev-shm-usage',  # For testing stability
         ],
     )
 
     #: Selenium window size from settings
     window_size = getattr(
@@ -116,45 +120,54 @@
         for arg in self.chrome_options:
             options.add_argument(arg)
         self.selenium = webdriver.Chrome(chrome_options=options)
         # Prevent ElementNotVisibleException
         self.selenium.set_window_size(self.window_size[0], self.window_size[1])
 
         # Init roles
-        self.role_owner = Role.objects.get_or_create(name=PROJECT_ROLE_OWNER)[0]
-        self.role_delegate = Role.objects.get_or_create(
-            name=PROJECT_ROLE_DELEGATE
-        )[0]
-        self.role_contributor = Role.objects.get_or_create(
-            name=PROJECT_ROLE_CONTRIBUTOR
-        )[0]
-        self.role_guest = Role.objects.get_or_create(name=PROJECT_ROLE_GUEST)[0]
-
+        self.init_roles()
         # Init users
         self.superuser = self.make_user('admin', True)
-        self.user_owner = self.make_user('user_owner', False)
-        self.user_delegate = self.make_user('user_delegate', False)
-        self.user_contributor = self.make_user('user_contributor', False)
-        self.user_guest = self.make_user('user_guest', False)
-        self.user_no_roles = self.make_user('user_no_roles', False)
+        self.user_owner_cat = self.make_user('user_owner_cat')
+        self.user_delegate_cat = self.make_user('user_delegate_cat')
+        self.user_contributor_cat = self.make_user('user_contributor_cat')
+        self.user_guest_cat = self.make_user('user_guest_cat')
+        self.user_finder_cat = self.make_user('user_finder_cat')
+        self.user_owner = self.make_user('user_owner')
+        self.user_delegate = self.make_user('user_delegate')
+        self.user_contributor = self.make_user('user_contributor')
+        self.user_guest = self.make_user('user_guest')
+        self.user_no_roles = self.make_user('user_no_roles')
 
         # Init category and project
         self.category = self.make_project(
-            title='TestCategoryTop', type=PROJECT_TYPE_CATEGORY, parent=None
+            title='TestCategory', type=PROJECT_TYPE_CATEGORY, parent=None
         )
         self.project = self.make_project(
-            title='TestProjectSub',
+            title='TestProject',
             type=PROJECT_TYPE_PROJECT,
             parent=self.category,
         )
 
         # Init role assignments
-        # Category
-        self.make_assignment(self.category, self.user_owner, self.role_owner)
-        # Sub level project
+        self.owner_as_cat = self.make_assignment(
+            self.category, self.user_owner_cat, self.role_owner
+        )
+        self.delegate_as_cat = self.make_assignment(
+            self.category, self.user_delegate_cat, self.role_delegate
+        )
+        self.contributor_as_cat = self.make_assignment(
+            self.category, self.user_contributor_cat, self.role_contributor
+        )
+        self.guest_as_cat = self.make_assignment(
+            self.category, self.user_guest_cat, self.role_guest
+        )
+        self.finder_as_cat = self.make_assignment(
+            self.category, self.user_finder_cat, self.role_finder
+        )
         self.owner_as = self.make_assignment(
             self.project, self.user_owner, self.role_owner
         )
         self.delegate_as = self.make_assignment(
             self.project, self.user_delegate, self.role_delegate
         )
         self.contributor_as = self.make_assignment(
@@ -435,32 +448,37 @@
 class TestBaseTemplate(TestUIBase):
     """Tests for the base project template"""
 
     def test_admin_link(self):
         """Test admin site link visibility according to user permissions"""
         expected_true = [self.superuser]
         expected_false = [
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
             self.user_no_roles,
         ]
         url = reverse('home')
-        self.assert_element_exists(
-            expected_true, url, 'sodar-navbar-link-admin', True
-        )
-        self.assert_element_exists(
-            expected_false, url, 'sodar-navbar-link-admin', False
-        )
+        elem_id = 'sodar-navbar-link-admin'
+        self.assert_element_exists(expected_true, url, elem_id, True)
+        self.assert_element_exists(expected_false, url, elem_id, False)
 
 
-class TestHomeView(ProjectUserTagMixin, TestUIBase):
+class TestHomeView(TestUIBase):
     """Tests for the home view and project list UI"""
 
+    #: Home view URL
+    url = reverse('home')
+
     #: Arguments for waiting for the list to get poplulated on the client side
     wait_kwargs = {
         'wait_elem': 'sodar-pr-project-list-item',
         'wait_loc': 'CLASS_NAME',
     }
 
     #: Arguments for populating an empty list with a message
@@ -476,156 +494,716 @@
                 for e in self.selenium.find_elements(
                     By.CLASS_NAME, 'sodar-pr-project-list-item'
                 )
                 if e.get_attribute('style') != 'display: none;'
             ]
         )
 
+    def _get_list_item(self, project):
+        return self.selenium.find_element(
+            By.XPATH,
+            '//tr[@class="sodar-pr-project-list-item '
+            'sodar-pr-project-list-item-{}" and @data-uuid="{}"]'.format(
+                project.type.lower(), project.sodar_uuid
+            ),
+        )
+
     def test_project_list_items(self):
         """Test visibility of project list items"""
         expected = [
             (self.superuser, 2),
-            (self.owner_as.user, 2),
-            (self.delegate_as.user, 2),
-            (self.contributor_as.user, 2),
-            (self.guest_as.user, 2),
+            (self.user_owner_cat, 2),
+            (self.user_delegate_cat, 2),
+            (self.user_contributor_cat, 2),
+            (self.user_guest_cat, 2),
+            (self.user_finder_cat, 2),
+            (self.user_owner, 2),
+            (self.user_delegate, 2),
+            (self.user_contributor, 2),
+            (self.user_guest, 2),
         ]
-        url = reverse('home')
+        elem_id = 'sodar-pr-project-list-item'
         self.assert_element_count(
-            expected, url, 'sodar-pr-project-list-item', **self.wait_kwargs
+            expected, self.url, elem_id, **self.wait_kwargs
         )
         self.assert_element_count(
             [(self.user_no_roles, 0)],
-            url,
-            'sodar-pr-project-list-item',
-            **self.wait_kwargs_empty,
+            self.url,
+            elem_id,
+            **self.wait_kwargs_empty
         )
 
     def test_project_list_items_public(self):
         """Test visibility of project list items with public access project"""
         self.project.set_public()
         expected = [
             (self.superuser, 2),
-            (self.owner_as.user, 2),
-            (self.delegate_as.user, 2),
-            (self.contributor_as.user, 2),
-            (self.guest_as.user, 2),
+            (self.user_owner_cat, 2),
+            (self.user_delegate_cat, 2),
+            (self.user_contributor_cat, 2),
+            (self.user_guest_cat, 2),
+            (self.user_finder_cat, 2),
+            (self.user_owner, 2),
+            (self.user_delegate, 2),
+            (self.user_contributor, 2),
+            (self.user_guest, 2),
             (self.user_no_roles, 2),
         ]
-        url = reverse('home')
         self.assert_element_count(
-            expected, url, 'sodar-pr-project-list-item', **self.wait_kwargs
+            expected, self.url, 'sodar-pr-project-list-item', **self.wait_kwargs
         )
 
     @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
     def test_project_list_items_anon(self):
         """Test visibility of project list items with anonymous access"""
         self.project.set_public()
-        self.selenium.get(self.build_selenium_url(reverse('home')))
+        self.selenium.get(self.build_selenium_url(self.url))
         WebDriverWait(self.selenium, self.wait_time).until(
             ec.presence_of_element_located(
                 (getattr(By, 'CLASS_NAME'), 'sodar-pr-project-list-item')
             )
         )
         self.assertEqual(self._get_item_vis_count(), 2)
+        links = self.selenium.find_elements(
+            By.CLASS_NAME, 'sodar-pr-project-link'
+        )
+        self.assertEqual(len(links), 1)
+
+    def test_project_list_links_member(self):
+        """Test project links as regular member"""
+        self.login_and_redirect(self.user_guest, self.url, **self.wait_kwargs)
+        elem = self._get_list_item(self.category)
+        self.assertIsNotNone(
+            elem.find_element(By.CLASS_NAME, 'sodar-pr-project-link')
+        )
+        elem = self._get_list_item(self.project)
+        self.assertIsNotNone(
+            elem.find_element(By.CLASS_NAME, 'sodar-pr-project-link')
+        )
+        with self.assertRaises(NoSuchElementException):
+            elem.find_element(By.CLASS_NAME, 'sodar-pr-project-findable')
+
+    def test_project_list_links_finder(self):
+        """Test project links as finder"""
+        self.login_and_redirect(
+            self.user_finder_cat, self.url, **self.wait_kwargs
+        )
+        elem = self._get_list_item(self.category)
+        self.assertIsNotNone(
+            elem.find_element(By.CLASS_NAME, 'sodar-pr-project-link')
+        )
+        with self.assertRaises(NoSuchElementException):
+            elem.find_element(By.CLASS_NAME, 'sodar-pr-project-findable')
+        # Project is present but it is not a link
+        elem = self._get_list_item(self.project)
+        with self.assertRaises(NoSuchElementException):
+            elem.find_element(By.CLASS_NAME, 'sodar-pr-project-link')
+        # Link to parent project is found
+        self.assertIsNotNone(
+            elem.find_element(By.CLASS_NAME, 'sodar-pr-project-findable')
+        )
 
     def test_project_list_filter(self):
         """Test filtering project list items"""
-        url = reverse('home')
-        self.login_and_redirect(self.owner_as.user, url, **self.wait_kwargs)
+        self.login_and_redirect(self.user_owner, self.url, **self.wait_kwargs)
         self.assertEqual(self._get_item_vis_count(), 2)
         f_input = self.selenium.find_element(
             By.ID, 'sodar-pr-project-list-filter'
         )
-        f_input.send_keys('sub')
+        f_input.send_keys('project')
         self.assertEqual(self._get_item_vis_count(), 1)
 
     def test_project_list_filter_trim(self):
         """Test filtering project list items with trimming for spaces"""
-        url = reverse('home')
-        self.login_and_redirect(self.owner_as.user, url, **self.wait_kwargs)
+        self.login_and_redirect(self.user_owner, self.url, **self.wait_kwargs)
         self.assertEqual(self._get_item_vis_count(), 2)
         f_input = self.selenium.find_element(
             By.ID, 'sodar-pr-project-list-filter'
         )
-        f_input.send_keys(' sub  ')
+        f_input.send_keys(' project  ')
         self.assertEqual(self._get_item_vis_count(), 1)
 
     def test_project_list_star(self):
         """Test project list star filter"""
-        self.make_tag(
-            self.project, self.owner_as.user, name=PROJECT_TAG_STARRED
-        )
-        url = reverse('home')
-        self.login_and_redirect(self.owner_as.user, url, **self.wait_kwargs)
+        app_settings.set(
+            app_name='projectroles',
+            setting_name='project_star',
+            value=True,
+            project=self.project,
+            user=self.user_owner,
+            validate=False,
+        ),
+        self.login_and_redirect(self.user_owner, self.url, **self.wait_kwargs)
         self.assertEqual(self._get_item_vis_count(), 2)
-
         button = self.selenium.find_element(
             By.ID, 'sodar-pr-project-list-link-star'
         )
         button.click()
         self.assertEqual(self._get_item_vis_count(), 1)
         self.assertEqual(
             self.selenium.find_element(
                 By.ID, 'sodar-pr-project-list-message'
             ).get_attribute('style'),
             'display: none;',
         )
 
     def test_project_list_star_no_project(self):
         """Test project list star filter with no starred project"""
-        url = reverse('home')
-        self.login_and_redirect(self.owner_as.user, url, **self.wait_kwargs)
+        self.login_and_redirect(self.user_owner, self.url, **self.wait_kwargs)
         self.assertEqual(self._get_item_vis_count(), 2)
-
         button = self.selenium.find_element(
             By.ID, 'sodar-pr-project-list-link-star'
         )
         self.assertFalse(button.is_enabled())
         button.click()
 
     def test_link_create_toplevel(self):
         """Test project creation link visibility"""
         expected_true = [self.superuser]
         expected_false = [
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
             self.user_no_roles,
         ]
-        url = reverse('home')
-
         self.assert_element_exists(
-            expected_true, url, 'sodar-pr-home-link-create', True
+            expected_true, self.url, 'sodar-pr-home-link-create', True
         )
         self.assert_element_exists(
-            expected_false, url, 'sodar-pr-home-link-create', False
+            expected_false, self.url, 'sodar-pr-home-link-create', False
         )
 
     @override_settings(PROJECTROLES_INLINE_HEAD_INCLUDE=HEAD_INCLUDE)
     def test_inline_head_include_enabled(self):
         """Test visibility of inline head include from env variables"""
-        url = reverse('home')
-        self.login_and_redirect(self.owner_as.user, url)
+        self.login_and_redirect(self.user_owner, self.url)
         self.assertIsNotNone(
             self.selenium.find_element(By.XPATH, '//meta[@name="keywords"]')
         )
 
     def test_inline_head_include_disabled(self):
         """Test absence of inline head include when not set"""
-        url = reverse('home')
-        self.login_and_redirect(self.owner_as.user, url)
+        self.login_and_redirect(self.user_owner, self.url)
         with self.assertRaises(NoSuchElementException):
             self.selenium.find_element(By.XPATH, '//meta[@name="keywords"]')
 
 
+class TestProjectSidebar(ProjectInviteMixin, RemoteTargetMixin, TestUIBase):
+    """Tests for the project sidebar"""
+
+    def setUp(self):
+        super().setUp()
+        self.sidebar_ids = [
+            'sodar-pr-nav-project-detail',
+            'sodar-pr-nav-project-roles',
+            'sodar-pr-nav-project-update',
+        ]
+        # Add app plugin navs
+        for p in get_active_plugins():
+            self.sidebar_ids.append('sodar-pr-nav-app-plugin-{}'.format(p.name))
+
+    def test_render_detail(self):
+        """Test visibility of sidebar in the project_detail view"""
+        url = reverse(
+            'projectroles:detail', kwargs={'project': self.project.sodar_uuid}
+        )
+        self.assert_element_exists(
+            [self.superuser], url, 'sodar-pr-sidebar', True
+        )
+
+    def test_render_home(self):
+        """Test visibility of sidebar in the home view"""
+        url = reverse('home')
+        self.assert_element_exists(
+            [self.superuser], url, 'sodar-pr-sidebar', True
+        )
+
+    def test_app_links(self):
+        """Test visibility of app links"""
+        url = reverse(
+            'projectroles:detail', kwargs={'project': self.project.sodar_uuid}
+        )
+        expected = [(self.superuser, len(get_active_plugins()))]
+        self.assert_element_count(expected, url, 'sodar-pr-nav-app-plugin')
+
+    @override_settings(PROJECTROLES_HIDE_PROJECT_APPS=['timeline'])
+    def test_app_links_hide(self):
+        """Test visibility of app links with timeline hidden"""
+        url = reverse(
+            'projectroles:detail', kwargs={'project': self.project.sodar_uuid}
+        )
+        expected = [
+            (self.superuser, len(get_active_plugins()) - 1),
+            (self.user_owner, len(get_active_plugins()) - 1),
+        ]
+        self.assert_element_count(expected, url, 'sodar-pr-nav-app-plugin')
+
+    def test_update_link(self):
+        """Test visibility of update link"""
+        expected_true = [
+            self.superuser,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_owner,
+            self.user_delegate,
+        ]
+        expected_false = [self.user_contributor, self.user_guest]
+        url = reverse(
+            'projectroles:detail', kwargs={'project': self.project.sodar_uuid}
+        )
+        self.assert_element_exists(
+            expected_true, url, 'sodar-pr-nav-project-update', True
+        )
+        self.assert_element_exists(
+            expected_false, url, 'sodar-pr-nav-project-update', False
+        )
+        self.assert_element_exists(
+            expected_true, url, 'sodar-pr-alt-link-project-update', True
+        )
+        self.assert_element_exists(
+            expected_false, url, 'sodar-pr-alt-link-project-update', False
+        )
+
+    @override_settings(PROJECTROLES_SITE_MODE=SITE_MODE_TARGET)
+    def test_update_link_target(self):
+        """Test visibility of update link as target"""
+        # Set up site as target
+        self.set_up_as_target(projects=[self.category, self.project])
+
+        expected_true = [
+            self.superuser,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_owner,
+            self.user_delegate,
+        ]
+        expected_false = [self.user_contributor, self.user_guest]
+        url = reverse(
+            'projectroles:detail', kwargs={'project': self.project.sodar_uuid}
+        )
+
+        self.assert_element_exists(
+            expected_true, url, 'sodar-pr-nav-project-update', True
+        )
+        self.assert_element_exists(
+            expected_false, url, 'sodar-pr-nav-project-update', False
+        )
+        self.assert_element_exists(
+            expected_true, url, 'sodar-pr-alt-link-project-update', True
+        )
+        self.assert_element_exists(
+            expected_false, url, 'sodar-pr-alt-link-project-update', False
+        )
+
+    def test_create_link(self):
+        """Test visibility of create link"""
+        expected_true = [
+            self.superuser,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+        ]
+        expected_false = [
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
+        ]
+        url = reverse(
+            'projectroles:detail', kwargs={'project': self.category.sodar_uuid}
+        )
+
+        self.assert_element_exists(
+            expected_true, url, 'sodar-pr-nav-project-create', True
+        )
+        self.assert_element_exists(
+            expected_false, url, 'sodar-pr-nav-project-create', False
+        )
+        self.assert_element_exists(
+            expected_true, url, 'sodar-pr-alt-link-project-create', True
+        )
+        self.assert_element_exists(
+            expected_false, url, 'sodar-pr-alt-link-project-create', False
+        )
+
+    @override_settings(PROJECTROLES_DISABLE_CATEGORIES=True)
+    def test_create_link_disable_categories(self):
+        """Test visibility of create link with categories disabled"""
+        expected_true = [self.superuser]
+        expected_false = [
+            self.user_owner,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
+        ]
+        url = reverse(
+            'projectroles:detail', kwargs={'project': self.project.sodar_uuid}
+        )
+
+        self.assert_element_exists(
+            expected_true, url, 'sodar-pr-nav-project-create', True
+        )
+        self.assert_element_exists(
+            expected_false, url, 'sodar-pr-nav-project-create', False
+        )
+        self.assert_element_exists(
+            expected_true, url, 'sodar-pr-alt-link-project-create', True
+        )
+        self.assert_element_exists(
+            expected_false, url, 'sodar-pr-alt-link-project-create', False
+        )
+
+    @override_settings(PROJECTROLES_SITE_MODE=SITE_MODE_TARGET)
+    def test_create_link_target_remote(self):
+        """Test visibility of create link as target under a remote category"""
+        # Set up site as target
+        self.set_up_as_target(projects=[self.category, self.project])
+
+        expected_false = [
+            self.superuser,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
+        ]
+        url = reverse(
+            'projectroles:detail', kwargs={'project': self.category.sodar_uuid}
+        )
+
+        self.assert_element_exists(
+            expected_false, url, 'sodar-pr-nav-project-create', False
+        )
+        self.assert_element_exists(
+            expected_false, url, 'sodar-pr-alt-link-project-create', False
+        )
+
+    @override_settings(PROJECTROLES_SITE_MODE=SITE_MODE_TARGET)
+    def test_create_link_target_local(self):
+        """Test visibility of create link as target under a local category"""
+        expected_true = [
+            self.superuser,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+        ]
+        expected_false = [
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
+        ]
+        url = reverse(
+            'projectroles:detail', kwargs={'project': self.category.sodar_uuid}
+        )
+
+        self.assert_element_exists(
+            expected_true, url, 'sodar-pr-nav-project-create', True
+        )
+        self.assert_element_exists(
+            expected_false, url, 'sodar-pr-nav-project-create', False
+        )
+        self.assert_element_exists(
+            expected_true, url, 'sodar-pr-alt-link-project-create', True
+        )
+        self.assert_element_exists(
+            expected_false, url, 'sodar-pr-alt-link-project-create', False
+        )
+
+    @override_settings(
+        PROJECTROLES_SITE_MODE=SITE_MODE_TARGET,
+        PROJECTROLES_TARGET_CREATE=False,
+    )
+    def test_create_link_target_disable(self):
+        """Test visibility of create link as target with creation not allowed"""
+        self.set_up_as_target(projects=[self.category, self.project])
+        expected_false = [
+            self.superuser,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
+        ]
+        url = reverse(
+            'projectroles:detail', kwargs={'project': self.category.sodar_uuid}
+        )
+        self.assert_element_exists(
+            expected_false, url, 'sodar-pr-nav-project-create', False
+        )
+        self.assert_element_exists(
+            expected_false, url, 'sodar-pr-alt-link-project-create', False
+        )
+
+    def test_link_active_detail(self):
+        """Test active status of link on the project_detail page"""
+        url = reverse(
+            'projectroles:detail', kwargs={'project': self.project.sodar_uuid}
+        )
+        self.assert_element_active(
+            self.superuser, 'sodar-pr-nav-project-detail', self.sidebar_ids, url
+        )
+
+    def test_link_active_role_list(self):
+        """Test active status of link on the project roles page"""
+        self.assert_element_active(
+            self.superuser,
+            'sodar-pr-nav-project-roles',
+            self.sidebar_ids,
+            reverse(
+                'projectroles:roles',
+                kwargs={'project': self.project.sodar_uuid},
+            ),
+        )
+
+    def test_link_active_role_create(self):
+        """Test active status of link on the role creation page"""
+        self.assert_element_active(
+            self.superuser,
+            'sodar-pr-nav-project-roles',
+            self.sidebar_ids,
+            reverse(
+                'projectroles:role_create',
+                kwargs={'project': self.project.sodar_uuid},
+            ),
+        )
+
+    def test_link_active_role_update(self):
+        """Test active status of link on the role update page"""
+        self.assert_element_active(
+            self.superuser,
+            'sodar-pr-nav-project-roles',
+            self.sidebar_ids,
+            reverse(
+                'projectroles:role_update',
+                kwargs={'roleassignment': self.contributor_as.sodar_uuid},
+            ),
+        )
+
+    def test_link_active_role_delete(self):
+        """Test active status of link on the role deletion page"""
+        self.assert_element_active(
+            self.superuser,
+            'sodar-pr-nav-project-roles',
+            self.sidebar_ids,
+            reverse(
+                'projectroles:role_delete',
+                kwargs={'roleassignment': self.contributor_as.sodar_uuid},
+            ),
+        )
+
+    def test_link_active_role_invites(self):
+        """Test active status of link on the invites page"""
+        self.assert_element_active(
+            self.superuser,
+            'sodar-pr-nav-project-roles',
+            self.sidebar_ids,
+            reverse(
+                'projectroles:invites',
+                kwargs={'project': self.project.sodar_uuid},
+            ),
+        )
+
+    def test_link_active_role_invite_create(self):
+        """Test active status of link on the invite create page"""
+        self.assert_element_active(
+            self.superuser,
+            'sodar-pr-nav-project-roles',
+            self.sidebar_ids,
+            reverse(
+                'projectroles:invite_create',
+                kwargs={'project': self.project.sodar_uuid},
+            ),
+        )
+
+    def test_link_active_role_invite_resend(self):
+        """Test active status of link on the invite resend page"""
+        invite = self.make_invite(
+            email='test@example.com',
+            project=self.project,
+            role=self.role_contributor,
+            issuer=self.user_owner,
+            message='',
+        )
+        self.assert_element_active(
+            self.superuser,
+            'sodar-pr-nav-project-roles',
+            self.sidebar_ids,
+            reverse(
+                'projectroles:invite_resend',
+                kwargs={'projectinvite': invite.sodar_uuid},
+            ),
+        )
+
+    def test_link_active_role_invite_revoke(self):
+        """Test active status of link on the invite revoke page"""
+        invite = self.make_invite(
+            email='test@example.com',
+            project=self.project,
+            role=self.role_contributor,
+            issuer=self.user_owner,
+            message='',
+        )
+        self.assert_element_active(
+            self.superuser,
+            'sodar-pr-nav-project-roles',
+            self.sidebar_ids,
+            reverse(
+                'projectroles:invite_revoke',
+                kwargs={'projectinvite': invite.sodar_uuid},
+            ),
+        )
+
+    def test_link_active_update(self):
+        """Test active status of link on the project_update page"""
+        url = reverse(
+            'projectroles:update', kwargs={'project': self.project.sodar_uuid}
+        )
+        self.assert_element_active(
+            self.superuser, 'sodar-pr-nav-project-update', self.sidebar_ids, url
+        )
+
+
+class TestProjectSearchResultsView(TestUIBase):
+    """Tests for ProjectSearchResultsView UI"""
+
+    def test_search_results(self):
+        """Test project search items visibility according to user permissions"""
+        expected = [
+            (self.superuser, 1),
+            (self.user_owner_cat, 1),
+            (self.user_delegate_cat, 1),
+            (self.user_contributor_cat, 1),
+            (self.user_guest_cat, 1),
+            (self.user_finder_cat, 1),
+            (self.user_owner, 1),
+            (self.user_delegate, 1),
+            (self.user_contributor, 1),
+            (self.user_guest, 1),
+            (self.user_no_roles, 0),
+        ]
+        url = reverse('projectroles:search') + '?' + urlencode({'s': 'test'})
+        self.assert_element_count(expected, url, 'sodar-pr-project-search-item')
+
+    def test_search_type_project(self):
+        """Test project search items visibility with 'project' type"""
+        expected = [
+            (self.superuser, 1),
+            (self.user_owner_cat, 1),
+            (self.user_delegate_cat, 1),
+            (self.user_contributor_cat, 1),
+            (self.user_guest_cat, 1),
+            (self.user_finder_cat, 1),
+            (self.user_owner, 1),
+            (self.user_delegate, 1),
+            (self.user_contributor, 1),
+            (self.user_guest, 1),
+            (self.user_no_roles, 0),
+        ]
+        url = (
+            reverse('projectroles:search')
+            + '?'
+            + urlencode({'s': 'test type:project'})
+        )
+        self.assert_element_count(expected, url, 'sodar-pr-project-search-item')
+
+    def test_search_type_nonexisting(self):
+        """Test project search items visibility with a nonexisting type"""
+        expected = [
+            (self.superuser, 0),
+            (self.user_owner_cat, 0),
+            (self.user_delegate_cat, 0),
+            (self.user_contributor_cat, 0),
+            (self.user_guest_cat, 0),
+            (self.user_finder_cat, 0),
+            (self.user_owner, 0),
+            (self.user_delegate, 0),
+            (self.user_contributor, 0),
+            (self.user_guest, 0),
+            (self.user_no_roles, 0),
+        ]
+        url = (
+            reverse('projectroles:search')
+            + '?'
+            + urlencode({'s': 'test type:Jaix1au'})
+        )
+        self.assert_element_count(expected, url, 'sodar-pr-project-search-item')
+
+    def test_search_project_link(self):
+        """Test project link visibility according to user permissions"""
+        expected = [
+            (self.superuser, 1),
+            (self.user_owner_cat, 1),
+            (self.user_delegate_cat, 1),
+            (self.user_contributor_cat, 1),
+            (self.user_guest_cat, 1),
+            (self.user_finder_cat, 0),  # This should not exist
+            (self.user_owner, 1),
+            (self.user_delegate, 1),
+            (self.user_contributor, 1),
+            (self.user_guest, 1),
+            (self.user_no_roles, 0),
+        ]
+        url = reverse('projectroles:search') + '?' + urlencode({'s': 'test'})
+        self.assert_element_count(
+            expected, url, 'sodar-pr-project-search-link', attribute='class'
+        )
+
+    def test_search_project_findable_link(self):
+        """Test project findable link visibility"""
+        expected = [
+            (self.superuser, 0),
+            (self.user_owner_cat, 0),
+            (self.user_delegate_cat, 0),
+            (self.user_contributor_cat, 0),
+            (self.user_guest_cat, 0),
+            (self.user_finder_cat, 1),  # Finder user should see this
+            (self.user_owner, 0),
+            (self.user_delegate, 0),
+            (self.user_contributor, 0),
+            (self.user_guest, 0),
+            (self.user_no_roles, 0),
+        ]
+        url = reverse('projectroles:search') + '?' + urlencode({'s': 'test'})
+        self.assert_element_count(
+            expected, url, 'sodar-pr-project-findable', attribute='class'
+        )
+
+
 class TestProjectDetailView(RemoteSiteMixin, RemoteProjectMixin, TestUIBase):
     """Tests for ProjectDetailView UI"""
 
+    @classmethod
+    def _get_pr_links(cls, *args):
+        """Return full IDs of project links"""
+        return ['sodar-pr-link-project-' + x for x in args]
+
     def _setup_remote_project(
         self, site_mode=SITE_MODE_TARGET, user_visibility=True
     ):
         """Create remote site and project with given user_visibility setting"""
         self.remote_site = self.make_site(
             name=REMOTE_SITE_NAME,
             url=REMOTE_SITE_URL,
@@ -642,88 +1220,75 @@
             level=SODAR_CONSTANTS['REMOTE_LEVEL_READ_ROLES'],
             project=self.project,
         )
 
     def test_project_links(self):
         """Test visibility of project links"""
         expected = [
+            (self.superuser, self._get_pr_links('roles', 'update', 'star')),
             (
-                self.superuser,
-                [
-                    'sodar-pr-link-project-roles',
-                    'sodar-pr-link-project-update',
-                    'sodar-pr-link-project-star',
-                ],
-            ),
-            (
-                self.owner_as.user,
-                [
-                    'sodar-pr-link-project-roles',
-                    'sodar-pr-link-project-update',
-                    'sodar-pr-link-project-star',
-                ],
+                self.user_owner_cat,
+                self._get_pr_links('roles', 'update', 'star'),
             ),
             (
-                self.delegate_as.user,
-                [
-                    'sodar-pr-link-project-roles',
-                    'sodar-pr-link-project-update',
-                    'sodar-pr-link-project-star',
-                ],
-            ),
-            (
-                self.contributor_as.user,
-                ['sodar-pr-link-project-roles', 'sodar-pr-link-project-star'],
-            ),
-            (
-                self.guest_as.user,
-                ['sodar-pr-link-project-roles', 'sodar-pr-link-project-star'],
+                self.user_delegate_cat,
+                self._get_pr_links('roles', 'update', 'star'),
             ),
+            (self.user_contributor_cat, self._get_pr_links('roles', 'star')),
+            (self.user_guest_cat, self._get_pr_links('roles', 'star')),
+            (self.user_owner, self._get_pr_links('roles', 'update', 'star')),
+            (self.user_delegate, self._get_pr_links('roles', 'update', 'star')),
+            (self.user_contributor, self._get_pr_links('roles', 'star')),
+            (self.user_guest, self._get_pr_links('roles', 'star')),
         ]
         url = reverse(
             'projectroles:detail', kwargs={'project': self.project.sodar_uuid}
         )
         self.assert_element_set(expected, PROJECT_LINK_IDS, url)
 
     def test_project_links_category(self):
         """Test visibility of top level category links"""
-        # Add user with rights only for the subproject
-        sub_user = self.make_user('sub_user', False)
-        self.make_assignment(self.project, sub_user, self.role_contributor)
-
         expected = [
             (
                 self.superuser,
-                [
-                    'sodar-pr-link-project-roles',
-                    'sodar-pr-link-project-update',
-                    'sodar-pr-link-project-create',
-                    'sodar-pr-link-project-star',
-                ],
+                self._get_pr_links('roles', 'update', 'create', 'star'),
             ),
             (
-                self.owner_as.user,
-                [
-                    'sodar-pr-link-project-roles',
-                    'sodar-pr-link-project-update',
-                    'sodar-pr-link-project-create',
-                    'sodar-pr-link-project-star',
-                ],
+                self.user_owner_cat,
+                self._get_pr_links('roles', 'update', 'create', 'star'),
             ),
-            (sub_user, ['sodar-pr-link-project-star']),
+            (
+                self.user_delegate_cat,
+                self._get_pr_links('roles', 'update', 'create', 'star'),
+            ),
+            (
+                self.user_contributor_cat,
+                self._get_pr_links('roles', 'create', 'star'),
+            ),
+            (self.user_guest_cat, self._get_pr_links('roles', 'star')),
+            (self.user_finder_cat, self._get_pr_links('roles', 'star')),
+            (self.user_owner, self._get_pr_links('star')),
+            (self.user_delegate, self._get_pr_links('star')),
+            (self.user_contributor, self._get_pr_links('star')),
+            (self.user_guest, self._get_pr_links('star')),
         ]
         url = reverse(
             'projectroles:detail', kwargs={'project': self.category.sodar_uuid}
         )
         self.assert_element_set(expected, PROJECT_LINK_IDS, url)
 
     def test_copy_uuid_visibility_default(self):
         """Test default UUID copy button visibility (should not be visible)"""
         users = [
             self.superuser,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
             self.user_owner,
             self.user_delegate,
             self.user_contributor,
             self.user_guest,
         ]
         url = reverse(
             'projectroles:detail', kwargs={'project': self.project.sodar_uuid}
@@ -765,23 +1330,26 @@
         self.assert_element_count(expected, url, 'sodar-pr-app-item')
 
     def test_remote_project_visible(self):
         """Test project card for enabled visbility for all users"""
         self._setup_remote_project(user_visibility=True)
         users = [
             self.superuser,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
             self.user_owner,
             self.user_delegate,
             self.user_contributor,
             self.user_guest,
         ]
         url = reverse(
             'projectroles:detail', kwargs={'project': self.project.sodar_uuid}
         )
-
         # Visibile for all users
         for user in users:
             self.login_and_redirect(user, url)
             project_details = self.selenium.find_element(
                 By.ID, 'sodar-pr-details-card-remote'
             )
             remote_project = project_details.find_element(
@@ -792,15 +1360,14 @@
     def test_remote_project_invisible(self):
         """Test project card for disabled visibility for different users"""
         self._setup_remote_project(user_visibility=False)
         users = [self.user_delegate, self.user_contributor, self.user_guest]
         url = reverse(
             'projectroles:detail', kwargs={'project': self.project.sodar_uuid}
         )
-
         # Invisible for basic users
         for user in users:
             self.login_and_redirect(user, url)
             with self.assertRaises(NoSuchElementException):
                 self.selenium.find_element(
                     By.ID, 'sodar-pr-details-card-remote'
                 )
@@ -814,26 +1381,29 @@
                 By.CLASS_NAME, 'btn-secondary'
             )
             self.assertEqual(remote_project.text, REMOTE_SITE_NAME)
 
     def test_peer_project_source_invisible(self):
         """Test visibility of peer projects on SOURCE site"""
         self._setup_remote_project(site_mode=SITE_MODE_PEER)
-
         url = reverse(
             'projectroles:detail', kwargs={'project': self.project.sodar_uuid}
         )
         users = [
             self.superuser,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
             self.user_owner,
             self.user_delegate,
             self.user_contributor,
             self.user_guest,
         ]
-
         for user in users:
             self.login_and_redirect(user, url)
             with self.assertRaises(NoSuchElementException):
                 self.selenium.find_element(
                     By.ID, 'sodar-pr-details-card-remote'
                 )
 
@@ -859,14 +1429,18 @@
         self._setup_remote_project(site_mode=SITE_MODE_PEER)
 
         url = reverse(
             'projectroles:detail', kwargs={'project': self.project.sodar_uuid}
         )
         users = [
             self.superuser,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
             self.user_owner,
             self.user_delegate,
             self.user_contributor,
             self.user_guest,
         ]
 
         for user in users:
@@ -906,16 +1480,19 @@
         self._setup_remote_project(
             site_mode=SITE_MODE_PEER, user_visibility=False
         )
 
         url = reverse(
             'projectroles:detail', kwargs={'project': self.project.sodar_uuid}
         )
-        expected_true = [self.superuser, self.user_owner]
+        expected_true = [self.superuser, self.user_owner_cat, self.user_owner]
         expected_false = [
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
             self.user_delegate,
             self.user_contributor,
             self.user_guest,
         ]
 
         for user in expected_true:
             self.login_and_redirect(user, url)
@@ -943,14 +1520,19 @@
                 remote_links[0].get_attribute('class'),
             )
 
     def test_archive_visibility_default(self):
         """Test archive icon and alert visibility (should not be visible)"""
         users = [
             self.superuser,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
             self.user_owner,
             self.user_delegate,
             self.user_contributor,
             self.user_guest,
         ]
         url = reverse(
             'projectroles:detail', kwargs={'project': self.project.sodar_uuid}
@@ -965,14 +1547,18 @@
                 self.selenium.find_element(By.ID, 'sodar-pr-alert-archive')
 
     def test_archive_visibility_archived(self):
         """Test archive icon and alert visibility for archived project"""
         self.project.set_archive()
         users = [
             self.superuser,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
             self.user_owner,
             self.user_delegate,
             self.user_contributor,
             self.user_guest,
         ]
         url = reverse(
             'projectroles:detail', kwargs={'project': self.project.sodar_uuid}
@@ -985,133 +1571,423 @@
             self.assertIsNotNone(
                 self.selenium.find_element(
                     By.ID, 'sodar-pr-header-icon-archive'
                 )
             )
 
 
+class TestProjectCreateView(TestUIBase):
+    """Tests for ProjectCreateView UI"""
+
+    def test_owner_widget_top(self):
+        """Test rendering the owner widget on the top level"""
+        url = reverse('projectroles:create')
+        self.assert_element_exists([self.superuser], url, 'div_id_owner', True)
+
+    def test_owner_widget_sub(self):
+        """Test rendering the owner widget under a category"""
+        # Add new user, make them a contributor in category
+        new_user = self.make_user('new_user')
+        self.make_assignment(self.category, new_user, self.role_contributor)
+        url = reverse(
+            'projectroles:create', kwargs={'project': self.category.sodar_uuid}
+        )
+        self.assert_element_exists([self.superuser], url, 'div_id_owner', True)
+        self.assert_element_exists(
+            [self.user_owner, new_user], url, 'div_id_owner', False
+        )
+
+    def test_archive_button(self):
+        """Test rendering form without archive button"""
+        url = reverse('projectroles:create')
+        self.assert_element_exists(
+            [self.superuser], url, 'sodar-pr-btn-archive', False
+        )
+
+    def test_settings_fields_default(self):
+        """Test rendering of app settings fields for default view"""
+        url = reverse('projectroles:create')
+        self.login_and_redirect(
+            self.superuser, url, wait_elem=None, wait_loc='ID'
+        )
+        element = self.selenium.find_element(
+            By.ID, 'div_id_settings.example_project_app.project_int_setting'
+        )
+        self.assertFalse(element.is_displayed())
+
+    def test_settings_fields_project(self):
+        """Test rendering of app settings fields for project creation"""
+        url = reverse(
+            'projectroles:create', kwargs={'project': self.category.sodar_uuid}
+        )
+        self.login_and_redirect(
+            self.superuser, url, wait_elem=None, wait_loc='ID'
+        )
+        element = self.selenium.find_element(
+            By.ID, 'div_id_settings.example_project_app.project_int_setting'
+        )
+        self.assertFalse(element.is_displayed())
+        select = Select(
+            self.selenium.find_element(
+                By.CSS_SELECTOR,
+                'div[id="div_id_type"] div select[id="id_type"]',
+            )
+        )
+        select.select_by_value('PROJECT')
+        self.assertEqual(select.first_selected_option.text, 'Project')
+        WebDriverWait(self.selenium, 10)
+        element = self.selenium.find_element(
+            By.ID, 'div_id_settings.example_project_app.project_int_setting'
+        )
+        self.assertTrue(element.is_displayed())
+
+    def test_settings_fields_category(self):
+        """Test rendering of app settings fields for category creation"""
+        url = reverse(
+            'projectroles:create', kwargs={'project': self.category.sodar_uuid}
+        )
+        self.login_and_redirect(
+            self.superuser, url, wait_elem=None, wait_loc='ID'
+        )
+        element = self.selenium.find_element(
+            By.ID, 'div_id_settings.example_project_app.project_int_setting'
+        )
+        self.assertFalse(element.is_displayed())
+        select = Select(
+            self.selenium.find_element(
+                By.CSS_SELECTOR,
+                'div[id="div_id_type"] div select[id="id_type"]',
+            )
+        )
+        select.select_by_value('CATEGORY')
+        self.assertEqual(select.first_selected_option.text, 'Category')
+        WebDriverWait(self.selenium, 10)
+        element = self.selenium.find_element(
+            By.ID, 'div_id_settings.example_project_app.project_int_setting'
+        )
+        self.assertFalse(element.is_displayed())
+
+    def test_settings_label_icon(self):
+        """Test rendering of app settings icon for project creation"""
+        url = reverse(
+            'projectroles:create', kwargs={'project': self.category.sodar_uuid}
+        )
+        self.login_and_redirect(
+            self.superuser, url, wait_elem=None, wait_loc='ID'
+        )
+        select = Select(
+            self.selenium.find_element(
+                By.CSS_SELECTOR,
+                'div[id="div_id_type"] div select[id="id_type"]',
+            )
+        )
+        select.select_by_value('PROJECT')
+        WebDriverWait(self.selenium, 10)
+        logo = self.selenium.find_element(
+            By.CSS_SELECTOR,
+            'div[id="div_id_settings.example_project_app.project_int_setting"]',
+        ).find_element(By.TAG_NAME, 'svg')
+        self.assertTrue(logo.is_displayed())
+
+
+class TestProjectUpdateView(TestUIBase):
+    """Tests for ProjectUpdateView UI"""
+
+    def test_archive_button(self):
+        """Test rendering of archive button"""
+        url = reverse(
+            'projectroles:update', kwargs={'project': self.project.sodar_uuid}
+        )
+        self.assert_element_exists(
+            [self.superuser], url, 'sodar-pr-btn-archive', True
+        )
+        element = self.selenium.find_element(By.ID, 'sodar-pr-btn-archive')
+        self.assertEqual(element.text, 'Archive')
+
+    def test_archive_button_archived(self):
+        """Test rendering of archive button with archived project"""
+        self.project.set_archive()
+        url = reverse(
+            'projectroles:update', kwargs={'project': self.project.sodar_uuid}
+        )
+        self.assert_element_exists(
+            [self.superuser], url, 'sodar-pr-btn-archive', True
+        )
+        element = self.selenium.find_element(By.ID, 'sodar-pr-btn-archive')
+        self.assertEqual(element.text, 'Unarchive')
+
+    def test_settings_fields_project_update(self):
+        """Test rendering of app settings fields for project update view"""
+        url = reverse(
+            'projectroles:update', kwargs={'project': self.project.sodar_uuid}
+        )
+        self.login_and_redirect(
+            self.superuser, url, wait_elem=None, wait_loc='ID'
+        )
+        element = self.selenium.find_element(
+            By.ID, 'div_id_settings.example_project_app.project_int_setting'
+        )
+        self.assertTrue(element.is_displayed())
+
+    def test_settings_fields_category_update(self):
+        """Test rendering of app settings fields for category update view"""
+        url = reverse(
+            'projectroles:update', kwargs={'project': self.category.sodar_uuid}
+        )
+        self.login_and_redirect(
+            self.superuser, url, wait_elem=None, wait_loc='ID'
+        )
+        element = self.selenium.find_element(
+            By.ID, 'div_id_settings.example_project_app.project_int_setting'
+        )
+        self.assertFalse(element.is_displayed())
+
+
+class TestProjectArchiveView(TestUIBase):
+    """Tests for ProjectArchiveView UI"""
+
+    def test_archive_button(self):
+        """Test rendering of archive button"""
+        url = reverse(
+            'projectroles:archive', kwargs={'project': self.project.sodar_uuid}
+        )
+        self.assert_element_exists(
+            [self.superuser], url, 'sodar-pr-btn-confirm-archive', True
+        )
+
+    def test_archive_button_archived(self):
+        """Test rendering of archive button with archived project"""
+        self.project.set_archive()
+        url = reverse(
+            'projectroles:archive', kwargs={'project': self.project.sodar_uuid}
+        )
+        self.assert_element_exists(
+            [self.superuser], url, 'sodar-pr-btn-confirm-unarchive', True
+        )
+
+
 class TestProjectRoleView(RemoteTargetMixin, TestUIBase):
     """Tests for ProjectRoleView UI"""
 
-    def test_list_buttons(self):
-        """Test visibility of role list button group"""
-        good_users = [self.superuser, self.owner_as.user, self.delegate_as.user]
-        bad_users = [self.contributor_as.user, self.guest_as.user]
-        url = reverse(
+    def _get_role_dropdown(self, user):
+        """Return role dropdown for a user"""
+        row = self.selenium.find_element(
+            By.XPATH,
+            '//tr[@class="sodar-pr-role-list-row" and '
+            '@data-user-uuid="{}"]'.format(user.sodar_uuid),
+        )
+        return row.find_element(By.CLASS_NAME, 'sodar-pr-role-dropdown')
+
+    def _get_role_links(self, user):
+        """Return role dropdown links for a user"""
+        dropdown = self._get_role_dropdown(user)
+        return dropdown.find_elements(By.CLASS_NAME, 'dropdown-item')
+
+    def setUp(self):
+        super().setUp()
+        self.user_assign = self.make_user('user_assign')
+        self.url = reverse(
             'projectroles:roles', kwargs={'project': self.project.sodar_uuid}
         )
+
+    def test_list_buttons(self):
+        """Test visibility of role list button group"""
+        good_users = [self.superuser, self.user_owner, self.user_delegate]
+        bad_users = [self.user_contributor, self.user_guest]
         self.assert_element_exists(
-            good_users, url, 'sodar-pr-btn-role-op', True
+            good_users, self.url, 'sodar-pr-btn-role-op', True
         )
         self.assert_element_exists(
-            bad_users, url, 'sodar-pr-btn-role-op', False
+            bad_users, self.url, 'sodar-pr-btn-role-op', False
         )
 
     @override_settings(PROJECTROLES_SITE_MODE=SITE_MODE_TARGET)
     def test_list_buttons_target(self):
         """Test visibility of role list button group as target"""
         # Set up site as target
         self.set_up_as_target(projects=[self.category, self.project])
-
         non_superusers = [
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_owner,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
         ]
-        url = reverse(
-            'projectroles:roles', kwargs={'project': self.project.sodar_uuid}
-        )
-        self.login_and_redirect(self.superuser, url)
-
+        self.login_and_redirect(self.superuser, self.url)
         btn = self.selenium.find_element(By.ID, 'sodar-pr-btn-role-op')
         self.assertEqual(btn.is_enabled(), False)
         self.assert_element_exists(
-            non_superusers, url, 'sodar-pr-btn-role-op', False
+            non_superusers, self.url, 'sodar-pr-btn-role-op', False
         )
 
     def test_role_list_invite_button(self):
         """Test visibility of role invite button"""
         expected_true = [
             self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_owner,
+            self.user_delegate,
+        ]
+        expected_false = [
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_contributor,
+            self.user_guest,
         ]
-        expected_false = [self.contributor_as.user, self.guest_as.user]
-        url = reverse(
-            'projectroles:roles', kwargs={'project': self.project.sodar_uuid}
-        )
         self.assert_element_exists(
-            expected_true, url, 'sodar-pr-btn-role-list-invite', True
+            expected_true, self.url, 'sodar-pr-btn-role-list-invite', True
         )
         self.assert_element_exists(
-            expected_false, url, 'sodar-pr-btn-role-list-invite', False
+            expected_false, self.url, 'sodar-pr-btn-role-list-invite', False
         )
 
     def test_role_list_add_button(self):
         """Test visibility of role invite button"""
         expected_true = [
             self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_owner,
+            self.user_delegate,
+        ]
+        expected_false = [
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_contributor,
+            self.user_guest,
         ]
-        expected_false = [self.contributor_as.user, self.guest_as.user]
-        url = reverse(
-            'projectroles:roles', kwargs={'project': self.project.sodar_uuid}
-        )
         self.assert_element_exists(
-            expected_true, url, 'sodar-pr-btn-role-list-create', True
+            expected_true, self.url, 'sodar-pr-btn-role-list-create', True
         )
         self.assert_element_exists(
-            expected_false, url, 'sodar-pr-btn-role-list-create', False
+            expected_false, self.url, 'sodar-pr-btn-role-list-create', False
         )
 
     def test_role_buttons(self):
         """Test visibility of role management buttons"""
         expected = [
-            (self.superuser, 4),
-            (self.owner_as.user, 4),
-            (self.delegate_as.user, 2),
-            (self.contributor_as.user, 0),
-            (self.guest_as.user, 0),
-        ]
-        url = reverse(
-            'projectroles:roles', kwargs={'project': self.project.sodar_uuid}
+            (self.superuser, 6),
+            (self.user_owner_cat, 6),
+            (self.user_delegate_cat, 4),
+            (self.user_contributor_cat, 0),
+            (self.user_guest_cat, 0),
+            (self.user_finder_cat, 0),
+            (self.user_owner, 6),
+            (self.user_delegate, 4),
+            (self.user_contributor, 0),
+            (self.user_guest, 0),
+        ]
+        self.assert_element_count(expected, self.url, 'sodar-pr-btn-grp-role')
+
+    def test_role_links_owner_local(self):
+        """Test role dropdown links for local owner"""
+        self.login_and_redirect(self.superuser, self.url)
+        elem = self._get_role_dropdown(self.user_owner)
+        self.assertIsNotNone(
+            elem.find_element(By.CLASS_NAME, 'sodar-pr-role-link-transfer')
         )
-        self.assert_element_count(expected, url, 'sodar-pr-btn-grp-role')
+        # TODO: Assert link enabling/disabling after updating owner transfer
 
-    def test_role_preview(self):
-        """Test visibility of role preview popup"""
-        url = reverse(
-            'projectroles:role_create',
-            kwargs={'project': self.project.sodar_uuid},
+    def test_role_links_owner_inherited(self):
+        """Test role dropdown links for inherited owner"""
+        # Set category owner to new user
+        self.owner_as_cat.user = self.user_assign
+        self.owner_as_cat.save()
+        self.login_and_redirect(self.superuser, self.url)
+        with self.assertRaises(NoSuchElementException):
+            self._get_role_dropdown(self.user_assign)
+
+    def test_role_links_delegate_local(self):
+        """Test role dropdown links for local delegate"""
+        self.login_and_redirect(self.superuser, self.url)
+        elem = self._get_role_dropdown(self.user_delegate)
+        self.assertIsNotNone(
+            elem.find_element(By.CLASS_NAME, 'sodar-pr-role-link-update')
+        )
+        self.assertIsNotNone(
+            elem.find_element(By.CLASS_NAME, 'sodar-pr-role-link-delete')
         )
-        self.login_and_redirect(self.owner_as.user, url)
 
-        button = self.selenium.find_element(
-            By.ID, 'sodar-pr-email-preview-link'
+    def test_role_links_delegate_inherited(self):
+        """Test role dropdown links for inherited delegate"""
+        self.login_and_redirect(self.superuser, self.url)
+        with self.assertRaises(NoSuchElementException):
+            self._get_role_dropdown(self.user_delegate_cat)
+
+    def test_role_links_contrib_local(self):
+        """Test role dropdown links for local contributor"""
+        self.login_and_redirect(self.superuser, self.url)
+        elem = self._get_role_dropdown(self.user_contributor)
+        self.assertIsNotNone(
+            elem.find_element(By.CLASS_NAME, 'sodar-pr-role-link-update')
         )
-        button.click()
-        WebDriverWait(self.selenium, self.wait_time).until(
-            ec.presence_of_element_located((By.ID, 'sodar-email-body'))
+        self.assertIsNotNone(
+            elem.find_element(By.CLASS_NAME, 'sodar-pr-role-link-delete')
+        )
+
+    def test_role_links_contrib_inherited(self):
+        """Test role dropdown links for inherited contributor"""
+        self.make_assignment(
+            self.category, self.user_assign, self.role_contributor
         )
+        self.login_and_redirect(self.superuser, self.url)
+        elem = self._get_role_dropdown(self.user_assign)
         self.assertIsNotNone(
-            self.selenium.find_element(By.ID, 'sodar-email-body')
+            elem.find_element(By.CLASS_NAME, 'sodar-pr-role-link-promote')
         )
+        with self.assertRaises(NoSuchElementException):
+            elem.find_element(By.CLASS_NAME, 'sodar-pr-role-link-update')
+        with self.assertRaises(NoSuchElementException):
+            elem.find_element(By.CLASS_NAME, 'sodar-pr-role-link-delete')
 
-    def test_invite_preview(self):
-        """Test visibility of invite preview popup"""
+    def test_role_links_guest_local(self):
+        """Test role dropdown links for local guest"""
+        self.login_and_redirect(self.superuser, self.url)
+        elem = self._get_role_dropdown(self.user_guest)
+        self.assertIsNotNone(
+            elem.find_element(By.CLASS_NAME, 'sodar-pr-role-link-update')
+        )
+        self.assertIsNotNone(
+            elem.find_element(By.CLASS_NAME, 'sodar-pr-role-link-delete')
+        )
+
+    def test_role_links_guest_inherited(self):
+        """Test role dropdown links for inherited guest"""
+        self.make_assignment(self.category, self.user_assign, self.role_guest)
+        self.login_and_redirect(self.superuser, self.url)
+        elem = self._get_role_dropdown(self.user_assign)
+        self.assertIsNotNone(
+            elem.find_element(By.CLASS_NAME, 'sodar-pr-role-link-promote')
+        )
+        with self.assertRaises(NoSuchElementException):
+            elem.find_element(By.CLASS_NAME, 'sodar-pr-role-link-update')
+        with self.assertRaises(NoSuchElementException):
+            elem.find_element(By.CLASS_NAME, 'sodar-pr-role-link-delete')
+
+
+class TestRoleAssignmentCreateView(TestUIBase):
+    """Tests for RoleAssignmentCreateView UI"""
+
+    def test_role_preview(self):
+        """Test visibility of role preview popup"""
         url = reverse(
-            'projectroles:invite_create',
+            'projectroles:role_create',
             kwargs={'project': self.project.sodar_uuid},
         )
-        self.login_and_redirect(self.owner_as.user, url)
+        self.login_and_redirect(self.user_owner, url)
 
         button = self.selenium.find_element(
-            By.ID, 'sodar-pr-invite-preview-link'
+            By.ID, 'sodar-pr-email-preview-link'
         )
         button.click()
         WebDriverWait(self.selenium, self.wait_time).until(
             ec.presence_of_element_located((By.ID, 'sodar-email-body'))
         )
         self.assertIsNotNone(
             self.selenium.find_element(By.ID, 'sodar-email-body')
@@ -1119,15 +1995,15 @@
 
     def test_widget_user_options(self):
         """Test visibility of user options given by the autocomplete widget"""
         url = reverse(
             'projectroles:role_create',
             kwargs={'project': self.project.sodar_uuid},
         )
-        self.login_and_redirect(self.owner_as.user, url)
+        self.login_and_redirect(self.user_owner, url)
 
         widget = self.selenium.find_element(
             By.CLASS_NAME, 'select2-container--default'
         )
         widget.click()
         WebDriverWait(self.selenium, self.wait_time).until(
             ec.presence_of_element_located((By.ID, 'select2-id_user-results'))
@@ -1143,175 +2019,186 @@
                     By.CLASS_NAME, 'select2-selection__rendered'
                 )
             ),
             1,
         )
 
 
+class TestRoleAssignmentDeleteView(TestUIBase):
+    """Tests for RoleAssignmentDeleteView UI"""
+
+    def test_render(self):
+        """Test rendering RoleAssignment deletion confirm view"""
+        url = reverse(
+            'projectroles:role_delete',
+            kwargs={'roleassignment': self.contributor_as.sodar_uuid},
+        )
+        self.login_and_redirect(self.superuser, url)
+        with self.assertRaises(NoSuchElementException):
+            self.selenium.find_element(
+                By.ID, 'sodar-pr-role-delete-alert-inherit'
+            )
+        with self.assertRaises(NoSuchElementException):
+            self.selenium.find_element(
+                By.ID, 'sodar-pr-role-delete-alert-child'
+            )
+
+    def test_render_inherit(self):
+        """Test rendering with inherited role remaining for user"""
+        self.make_assignment(
+            self.category, self.user_contributor, self.role_contributor
+        )
+        url = reverse(
+            'projectroles:role_delete',
+            kwargs={'roleassignment': self.contributor_as.sodar_uuid},
+        )
+        self.login_and_redirect(self.superuser, url)
+        self.assertIsNotNone(
+            self.selenium.find_element(
+                By.ID, 'sodar-pr-role-delete-alert-inherit'
+            )
+        )
+        with self.assertRaises(NoSuchElementException):
+            self.selenium.find_element(
+                By.ID, 'sodar-pr-role-delete-alert-child'
+            )
+
+    def test_render_children(self):
+        """Test rendering with inherited child roles to be removed"""
+        user_new = self.make_user('user_new')
+        new_as = self.make_assignment(
+            self.category, user_new, self.role_contributor
+        )
+        url = reverse(
+            'projectroles:role_delete',
+            kwargs={'roleassignment': new_as.sodar_uuid},
+        )
+        self.login_and_redirect(self.superuser, url)
+        with self.assertRaises(NoSuchElementException):
+            self.selenium.find_element(
+                By.ID, 'sodar-pr-role-delete-alert-inherit'
+            )
+        self.assertIsNotNone(
+            self.selenium.find_element(
+                By.ID, 'sodar-pr-role-delete-alert-child'
+            )
+        )
+
+    def test_render_children_inherit(self):
+        """Test rendering as finder with inherited child roles"""
+        user_new = self.make_user('user_new')
+        new_as = self.make_assignment(self.category, user_new, self.role_finder)
+        url = reverse(
+            'projectroles:role_delete',
+            kwargs={'roleassignment': new_as.sodar_uuid},
+        )
+        self.login_and_redirect(self.superuser, url)
+        with self.assertRaises(NoSuchElementException):
+            self.selenium.find_element(
+                By.ID, 'sodar-pr-role-delete-alert-inherit'
+            )
+        with self.assertRaises(NoSuchElementException):
+            self.selenium.find_element(
+                By.ID, 'sodar-pr-role-delete-alert-child'
+            )
+
+
 class TestProjectInviteView(ProjectInviteMixin, TestUIBase):
     """Tests for ProjectInviteView UI"""
 
     def test_list_buttons(self):
         """Test visibility of invite list button group"""
         expected_true = [
             self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_owner,
+            self.user_delegate,
         ]
         url = reverse(
             'projectroles:invites', kwargs={'project': self.project.sodar_uuid}
         )
         self.assert_element_exists(
             expected_true, url, 'sodar-pr-btn-role-list', True
         )
 
     def test_role_list_invite_button(self):
         """Test visibility of role invite button"""
         expected_true = [
             self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_owner,
+            self.user_delegate,
         ]
         url = reverse(
             'projectroles:invites', kwargs={'project': self.project.sodar_uuid}
         )
         self.assert_element_exists(
             expected_true, url, 'sodar-pr-btn-role-list-invite', True
         )
 
     def test_role_list_add_button(self):
         """Test visibility of role invite button"""
         expected_true = [
             self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_owner,
+            self.user_delegate,
         ]
         url = reverse(
             'projectroles:invites', kwargs={'project': self.project.sodar_uuid}
         )
         self.assert_element_exists(
             expected_true, url, 'sodar-pr-btn-role-list-create', True
         )
 
     def test_invite_buttons(self):
         """Test visibility of invite management buttons"""
         self.make_invite(
             email='test@example.com',
             project=self.project,
             role=self.role_contributor,
-            issuer=self.owner_as.user,
+            issuer=self.user_owner,
             message='',
         )
         expected = [
             (self.superuser, 1),
-            (self.owner_as.user, 1),
-            (self.delegate_as.user, 1),
+            (self.user_owner_cat, 1),
+            (self.user_delegate_cat, 1),
+            (self.user_owner, 1),
+            (self.user_delegate, 1),
         ]
         url = reverse(
             'projectroles:invites', kwargs={'project': self.project.sodar_uuid}
         )
         self.assert_element_count(expected, url, 'sodar-pr-btn-grp-invite')
 
 
-class TestProjectCreateView(TestUIBase):
-    """Tests for ProjectCreateView UI"""
-
-    def test_owner_widget_top(self):
-        """Test rendering the owner widget on the top level"""
-        url = reverse('projectroles:create')
-        self.assert_element_exists([self.superuser], url, 'div_id_owner', True)
+class TestProjectInviteCreateView(TestUIBase):
+    """Tests for ProjectInviteCreateView UI"""
 
-    def test_owner_widget_sub(self):
-        """Test rendering the owner widget under a category"""
-        # Add new user, make them a contributor in category
-        new_user = self.make_user('new_user')
-        self.make_assignment(self.category, new_user, self.role_contributor)
-        url = reverse(
-            'projectroles:create', kwargs={'project': self.category.sodar_uuid}
-        )
-        self.assert_element_exists([self.superuser], url, 'div_id_owner', True)
-        self.assert_element_exists(
-            [self.user_owner, new_user], url, 'div_id_owner', False
-        )
-
-    def test_archive_button(self):
-        """Test rendering form without archive button"""
-        url = reverse('projectroles:create')
-        self.assert_element_exists(
-            [self.superuser], url, 'sodar-pr-btn-archive', False
-        )
-
-
-class TestProjectUpdateView(TestUIBase):
-    """Tests for ProjectUpdateView UI"""
-
-    def test_archive_button(self):
-        """Test rendering of archive button"""
-        url = reverse(
-            'projectroles:update', kwargs={'project': self.project.sodar_uuid}
-        )
-        self.assert_element_exists(
-            [self.superuser], url, 'sodar-pr-btn-archive', True
-        )
-        element = self.selenium.find_element(By.ID, 'sodar-pr-btn-archive')
-        self.assertEqual(element.text, 'Archive')
-
-    def test_archive_button_archived(self):
-        """Test rendering of archive button with archived project"""
-        self.project.set_archive()
-        url = reverse(
-            'projectroles:update', kwargs={'project': self.project.sodar_uuid}
-        )
-        self.assert_element_exists(
-            [self.superuser], url, 'sodar-pr-btn-archive', True
-        )
-        element = self.selenium.find_element(By.ID, 'sodar-pr-btn-archive')
-        self.assertEqual(element.text, 'Unarchive')
-
-
-class TestProjectArchiveView(TestUIBase):
-    """Tests for ProjectArchiveView UI"""
-
-    def test_archive_button(self):
-        """Test rendering of archive button"""
+    def test_invite_preview(self):
+        """Test visibility of invite preview popup"""
         url = reverse(
-            'projectroles:archive', kwargs={'project': self.project.sodar_uuid}
-        )
-        self.assert_element_exists(
-            [self.superuser], url, 'sodar-pr-btn-confirm-archive', True
+            'projectroles:invite_create',
+            kwargs={'project': self.project.sodar_uuid},
         )
+        self.login_and_redirect(self.user_owner, url)
 
-    def test_archive_button_archived(self):
-        """Test rendering of archive button with archived project"""
-        self.project.set_archive()
-        url = reverse(
-            'projectroles:archive', kwargs={'project': self.project.sodar_uuid}
+        button = self.selenium.find_element(
+            By.ID, 'sodar-pr-invite-preview-link'
         )
-        self.assert_element_exists(
-            [self.superuser], url, 'sodar-pr-btn-confirm-unarchive', True
+        button.click()
+        WebDriverWait(self.selenium, self.wait_time).until(
+            ec.presence_of_element_located((By.ID, 'sodar-email-body'))
         )
-
-
-class TestRemoteSiteCreateView(RemoteSiteMixin, TestUIBase):
-    """Tests for RemoteSiteCreateView UI"""
-
-    def test_source_user_toggle(self):
-        """Test site create form user display toggle on source site"""
-        url = reverse('projectroles:remote_site_create')
-        self.login_and_redirect(self.superuser, url)
-        element = self.selenium.find_element(By.ID, 'div_id_user_display')
-        self.assertIsNotNone(element)
-
-    @override_settings(PROJECTROLES_SITE_MODE=SITE_MODE_TARGET)
-    def test_target_user_toggle(self):
-        """Test site create form user display toggle on target site"""
-        url = reverse('projectroles:remote_site_create')
-        self.login_and_redirect(self.superuser, url)
-        self.assertFalse(
-            self.selenium.find_element(By.ID, 'id_user_display').is_displayed()
+        self.assertIsNotNone(
+            self.selenium.find_element(By.ID, 'sodar-email-body')
         )
 
 
 class TestRemoteSiteListView(RemoteSiteMixin, TestUIBase):
     """Tests for RemoteSiteListView UI"""
 
     def test_source_user_display(self):
@@ -1374,414 +2261,25 @@
             )
         with self.assertRaises(NoSuchElementException):
             remote_site_table.find_element(
                 By.XPATH, '//td[contains(text(), "Yes")]'
             )
 
 
-class TestProjectSidebar(ProjectInviteMixin, RemoteTargetMixin, TestUIBase):
-    """Tests for the project sidebar"""
-
-    def setUp(self):
-        super().setUp()
-        self.sidebar_ids = [
-            'sodar-pr-nav-project-detail',
-            'sodar-pr-nav-project-roles',
-            'sodar-pr-nav-project-update',
-        ]
-        # Add app plugin navs
-        for p in get_active_plugins():
-            self.sidebar_ids.append('sodar-pr-nav-app-plugin-{}'.format(p.name))
-
-    def test_render_detail(self):
-        """Test visibility of sidebar in the project_detail view"""
-        url = reverse(
-            'projectroles:detail', kwargs={'project': self.project.sodar_uuid}
-        )
-        self.assert_element_exists(
-            [self.superuser], url, 'sodar-pr-sidebar', True
-        )
-
-    def test_render_home(self):
-        """Test visibility of sidebar in the home view"""
-        url = reverse('home')
-        self.assert_element_exists(
-            [self.superuser], url, 'sodar-pr-sidebar', True
-        )
-
-    def test_app_links(self):
-        """Test visibility of app links"""
-        url = reverse(
-            'projectroles:detail', kwargs={'project': self.project.sodar_uuid}
-        )
-        expected = [(self.superuser, len(get_active_plugins()))]
-        self.assert_element_count(expected, url, 'sodar-pr-nav-app-plugin')
-
-    @override_settings(PROJECTROLES_HIDE_APP_LINKS=['timeline'])
-    def test_app_links_hide(self):
-        """Test visibility of app links with timeline hidden"""
-        url = reverse(
-            'projectroles:detail', kwargs={'project': self.project.sodar_uuid}
-        )
-        expected = [
-            (self.superuser, len(get_active_plugins()) - 1),
-            (self.user_owner, len(get_active_plugins()) - 1),
-        ]
-        self.assert_element_count(expected, url, 'sodar-pr-nav-app-plugin')
-
-    def test_update_link(self):
-        """Test visibility of update link"""
-        expected_true = [
-            self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
-        ]
-        expected_false = [self.contributor_as.user, self.guest_as.user]
-        url = reverse(
-            'projectroles:detail', kwargs={'project': self.project.sodar_uuid}
-        )
-        self.assert_element_exists(
-            expected_true, url, 'sodar-pr-nav-project-update', True
-        )
-        self.assert_element_exists(
-            expected_false, url, 'sodar-pr-nav-project-update', False
-        )
-        self.assert_element_exists(
-            expected_true, url, 'sodar-pr-alt-link-project-update', True
-        )
-        self.assert_element_exists(
-            expected_false, url, 'sodar-pr-alt-link-project-update', False
-        )
-
-    @override_settings(PROJECTROLES_SITE_MODE=SITE_MODE_TARGET)
-    def test_update_link_target(self):
-        """Test visibility of update link as target"""
-        # Set up site as target
-        self.set_up_as_target(projects=[self.category, self.project])
-
-        expected_true = [
-            self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
-        ]
-        expected_false = [self.contributor_as.user, self.guest_as.user]
-        url = reverse(
-            'projectroles:detail', kwargs={'project': self.project.sodar_uuid}
-        )
-
-        self.assert_element_exists(
-            expected_true, url, 'sodar-pr-nav-project-update', True
-        )
-        self.assert_element_exists(
-            expected_false, url, 'sodar-pr-nav-project-update', False
-        )
-        self.assert_element_exists(
-            expected_true, url, 'sodar-pr-alt-link-project-update', True
-        )
-        self.assert_element_exists(
-            expected_false, url, 'sodar-pr-alt-link-project-update', False
-        )
-
-    def test_create_link(self):
-        """Test visibility of create link"""
-        expected_true = [self.superuser, self.owner_as.user]
-        expected_false = [
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-        ]
-        url = reverse(
-            'projectroles:detail', kwargs={'project': self.category.sodar_uuid}
-        )
-
-        self.assert_element_exists(
-            expected_true, url, 'sodar-pr-nav-project-create', True
-        )
-        self.assert_element_exists(
-            expected_false, url, 'sodar-pr-nav-project-create', False
-        )
-        self.assert_element_exists(
-            expected_true, url, 'sodar-pr-alt-link-project-create', True
-        )
-        self.assert_element_exists(
-            expected_false, url, 'sodar-pr-alt-link-project-create', False
-        )
-
-    @override_settings(PROJECTROLES_DISABLE_CATEGORIES=True)
-    def test_create_link_disable_categories(self):
-        """Test visibility of create link with categories disabled"""
-        expected_true = [self.superuser]
-        expected_false = [
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-        ]
-        url = reverse(
-            'projectroles:detail', kwargs={'project': self.project.sodar_uuid}
-        )
-
-        self.assert_element_exists(
-            expected_true, url, 'sodar-pr-nav-project-create', True
-        )
-        self.assert_element_exists(
-            expected_false, url, 'sodar-pr-nav-project-create', False
-        )
-        self.assert_element_exists(
-            expected_true, url, 'sodar-pr-alt-link-project-create', True
-        )
-        self.assert_element_exists(
-            expected_false, url, 'sodar-pr-alt-link-project-create', False
-        )
-
-    @override_settings(PROJECTROLES_SITE_MODE=SITE_MODE_TARGET)
-    def test_create_link_target_remote(self):
-        """Test visibility of create link as target under a remote category"""
-        # Set up site as target
-        self.set_up_as_target(projects=[self.category, self.project])
-
-        expected_false = [
-            self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-        ]
-        url = reverse(
-            'projectroles:detail', kwargs={'project': self.category.sodar_uuid}
-        )
+class TestRemoteSiteCreateView(RemoteSiteMixin, TestUIBase):
+    """Tests for RemoteSiteCreateView UI"""
 
-        self.assert_element_exists(
-            expected_false, url, 'sodar-pr-nav-project-create', False
-        )
-        self.assert_element_exists(
-            expected_false, url, 'sodar-pr-alt-link-project-create', False
-        )
+    def test_source_user_toggle(self):
+        """Test site create form user display toggle on source site"""
+        url = reverse('projectroles:remote_site_create')
+        self.login_and_redirect(self.superuser, url)
+        element = self.selenium.find_element(By.ID, 'div_id_user_display')
+        self.assertIsNotNone(element)
 
     @override_settings(PROJECTROLES_SITE_MODE=SITE_MODE_TARGET)
-    def test_create_link_target_local(self):
-        """Test visibility of create link as target under a local category"""
-        expected_true = [self.superuser, self.owner_as.user]
-        expected_false = [
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-        ]
-        url = reverse(
-            'projectroles:detail', kwargs={'project': self.category.sodar_uuid}
-        )
-
-        self.assert_element_exists(
-            expected_true, url, 'sodar-pr-nav-project-create', True
-        )
-        self.assert_element_exists(
-            expected_false, url, 'sodar-pr-nav-project-create', False
-        )
-        self.assert_element_exists(
-            expected_true, url, 'sodar-pr-alt-link-project-create', True
-        )
-        self.assert_element_exists(
-            expected_false, url, 'sodar-pr-alt-link-project-create', False
-        )
-
-    @override_settings(
-        PROJECTROLES_SITE_MODE=SITE_MODE_TARGET,
-        PROJECTROLES_TARGET_CREATE=False,
-    )
-    def test_create_link_target_disable(self):
-        """Test visibility of create link as target with creation not allowed"""
-        self.set_up_as_target(projects=[self.category, self.project])
-        expected_false = [
-            self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
-        ]
-        url = reverse(
-            'projectroles:detail', kwargs={'project': self.category.sodar_uuid}
-        )
-        self.assert_element_exists(
-            expected_false, url, 'sodar-pr-nav-project-create', False
-        )
-        self.assert_element_exists(
-            expected_false, url, 'sodar-pr-alt-link-project-create', False
-        )
-
-    def test_link_active_detail(self):
-        """Test active status of link on the project_detail page"""
-        url = reverse(
-            'projectroles:detail', kwargs={'project': self.project.sodar_uuid}
-        )
-        self.assert_element_active(
-            self.superuser, 'sodar-pr-nav-project-detail', self.sidebar_ids, url
-        )
-
-    def test_link_active_role_list(self):
-        """Test active status of link on the project roles page"""
-        self.assert_element_active(
-            self.superuser,
-            'sodar-pr-nav-project-roles',
-            self.sidebar_ids,
-            reverse(
-                'projectroles:roles',
-                kwargs={'project': self.project.sodar_uuid},
-            ),
-        )
-
-    def test_link_active_role_create(self):
-        """Test active status of link on the role creation page"""
-        self.assert_element_active(
-            self.superuser,
-            'sodar-pr-nav-project-roles',
-            self.sidebar_ids,
-            reverse(
-                'projectroles:role_create',
-                kwargs={'project': self.project.sodar_uuid},
-            ),
-        )
-
-    def test_link_active_role_update(self):
-        """Test active status of link on the role update page"""
-        self.assert_element_active(
-            self.superuser,
-            'sodar-pr-nav-project-roles',
-            self.sidebar_ids,
-            reverse(
-                'projectroles:role_update',
-                kwargs={'roleassignment': self.contributor_as.sodar_uuid},
-            ),
-        )
-
-    def test_link_active_role_delete(self):
-        """Test active status of link on the role deletion page"""
-        self.assert_element_active(
-            self.superuser,
-            'sodar-pr-nav-project-roles',
-            self.sidebar_ids,
-            reverse(
-                'projectroles:role_delete',
-                kwargs={'roleassignment': self.contributor_as.sodar_uuid},
-            ),
-        )
-
-    def test_link_active_role_invites(self):
-        """Test active status of link on the invites page"""
-        self.assert_element_active(
-            self.superuser,
-            'sodar-pr-nav-project-roles',
-            self.sidebar_ids,
-            reverse(
-                'projectroles:invites',
-                kwargs={'project': self.project.sodar_uuid},
-            ),
-        )
-
-    def test_link_active_role_invite_create(self):
-        """Test active status of link on the invite create page"""
-        self.assert_element_active(
-            self.superuser,
-            'sodar-pr-nav-project-roles',
-            self.sidebar_ids,
-            reverse(
-                'projectroles:invite_create',
-                kwargs={'project': self.project.sodar_uuid},
-            ),
-        )
-
-    def test_link_active_role_invite_resend(self):
-        """Test active status of link on the invite resend page"""
-        invite = self.make_invite(
-            email='test@example.com',
-            project=self.project,
-            role=self.role_contributor,
-            issuer=self.owner_as.user,
-            message='',
-        )
-        self.assert_element_active(
-            self.superuser,
-            'sodar-pr-nav-project-roles',
-            self.sidebar_ids,
-            reverse(
-                'projectroles:invite_resend',
-                kwargs={'projectinvite': invite.sodar_uuid},
-            ),
-        )
-
-    def test_link_active_role_invite_revoke(self):
-        """Test active status of link on the invite revoke page"""
-        invite = self.make_invite(
-            email='test@example.com',
-            project=self.project,
-            role=self.role_contributor,
-            issuer=self.owner_as.user,
-            message='',
-        )
-        self.assert_element_active(
-            self.superuser,
-            'sodar-pr-nav-project-roles',
-            self.sidebar_ids,
-            reverse(
-                'projectroles:invite_revoke',
-                kwargs={'projectinvite': invite.sodar_uuid},
-            ),
-        )
-
-    def test_link_active_update(self):
-        """Test active status of link on the project_update page"""
-        url = reverse(
-            'projectroles:update', kwargs={'project': self.project.sodar_uuid}
-        )
-        self.assert_element_active(
-            self.superuser, 'sodar-pr-nav-project-update', self.sidebar_ids, url
-        )
-
-
-class TestProjectSearchResultsView(TestUIBase):
-    """Tests for ProjectSearchResultsView UI"""
-
-    def test_search_results(self):
-        """Test project search items visibility according to user permissions"""
-        expected = [
-            (self.superuser, 1),
-            (self.owner_as.user, 1),
-            (self.delegate_as.user, 1),
-            (self.contributor_as.user, 1),
-            (self.guest_as.user, 1),
-            (self.user_no_roles, 0),
-        ]
-        url = reverse('projectroles:search') + '?' + urlencode({'s': 'test'})
-        self.assert_element_count(expected, url, 'sodar-pr-project-search-item')
-
-    def test_search_type_project(self):
-        """Test project search items visibility with 'project' type"""
-        expected = [
-            (self.superuser, 1),
-            (self.owner_as.user, 1),
-            (self.delegate_as.user, 1),
-            (self.contributor_as.user, 1),
-            (self.guest_as.user, 1),
-            (self.user_no_roles, 0),
-        ]
-        url = (
-            reverse('projectroles:search')
-            + '?'
-            + urlencode({'s': 'test type:project'})
-        )
-        self.assert_element_count(expected, url, 'sodar-pr-project-search-item')
-
-    def test_search_type_nonexisting(self):
-        """Test project search items visibility with a nonexisting type"""
-        expected = [
-            (self.superuser, 0),
-            (self.owner_as.user, 0),
-            (self.delegate_as.user, 0),
-            (self.contributor_as.user, 0),
-            (self.guest_as.user, 0),
-            (self.user_no_roles, 0),
-        ]
-        url = (
-            reverse('projectroles:search')
-            + '?'
-            + urlencode({'s': 'test type:Jaix1au'})
+    def test_target_user_toggle(self):
+        """Test site create form user display toggle on target site"""
+        url = reverse('projectroles:remote_site_create')
+        self.login_and_redirect(self.superuser, url)
+        self.assertFalse(
+            self.selenium.find_element(By.ID, 'id_user_display').is_displayed()
         )
-        self.assert_element_count(expected, url, 'sodar-pr-project-search-item')
```

### Comparing `django-sodar-core-0.12.0/projectroles/tests/test_views.py` & `django-sodar-core-0.13.0/projectroles/tests/test_views.py`

 * *Files 12% similar despite different names*

```diff
@@ -1,10 +1,11 @@
 """UI view tests for the projectroles app"""
 
 import json
+
 from urllib.parse import urlencode
 
 from django.contrib import auth
 from django.contrib.messages import get_messages
 from django.core import mail
 from django.forms import HiddenInput
 from django.forms.models import model_to_dict
@@ -15,37 +16,43 @@
 from test_plus.test import TestCase
 
 # Appalerts dependency
 from appalerts.models import AppAlert
 
 # Timeline dependency
 from timeline.models import ProjectEvent
+from timeline.tests.test_models import (
+    ProjectEventMixin,
+    ProjectEventStatusMixin,
+)
 
 from projectroles.app_settings import AppSettingAPI
-from projectroles.forms import EMPTY_CHOICE_LABEL
+from projectroles.forms import get_role_option, EMPTY_CHOICE_LABEL
 from projectroles.models import (
     Project,
-    Role,
+    AppSetting,
     RoleAssignment,
     ProjectInvite,
     RemoteSite,
     RemoteProject,
     SODAR_CONSTANTS,
+    CAT_DELIMITER,
 )
 from projectroles.plugins import (
     get_backend_api,
     get_active_plugins,
 )
 from projectroles.utils import (
     build_secret,
     get_display_name,
     get_user_display_name,
 )
 from projectroles.tests.test_models import (
     ProjectMixin,
+    RoleMixin,
     RoleAssignmentMixin,
     ProjectInviteMixin,
     RemoteSiteMixin,
     RemoteProjectMixin,
     AppSettingMixin,
     RemoteTargetMixin,
 )
@@ -54,14 +61,18 @@
     MSG_USER_PROFILE_LDAP,
     MSG_INVITE_LDAP_LOCAL_VIEW,
     MSG_INVITE_LOCAL_NOT_ALLOWED,
     MSG_INVITE_LOGGED_IN_ACCEPT,
     MSG_INVITE_USER_NOT_EQUAL,
     MSG_INVITE_USER_EXISTS,
 )
+from projectroles.context_processors import (
+    SIDEBAR_ICON_MIN_SIZE,
+    SIDEBAR_ICON_MAX_SIZE,
+)
 
 
 app_settings = AppSettingAPI()
 User = auth.get_user_model()
 
 
 # SODAR constants
@@ -70,14 +81,18 @@
 PROJECT_ROLE_CONTRIBUTOR = SODAR_CONSTANTS['PROJECT_ROLE_CONTRIBUTOR']
 PROJECT_ROLE_GUEST = SODAR_CONSTANTS['PROJECT_ROLE_GUEST']
 PROJECT_TYPE_CATEGORY = SODAR_CONSTANTS['PROJECT_TYPE_CATEGORY']
 PROJECT_TYPE_PROJECT = SODAR_CONSTANTS['PROJECT_TYPE_PROJECT']
 SITE_MODE_TARGET = SODAR_CONSTANTS['SITE_MODE_TARGET']
 SITE_MODE_SOURCE = SODAR_CONSTANTS['SITE_MODE_SOURCE']
 APP_SETTING_SCOPE_PROJECT = SODAR_CONSTANTS['APP_SETTING_SCOPE_PROJECT']
+APP_SETTING_SCOPE_USER = SODAR_CONSTANTS['APP_SETTING_SCOPE_USER']
+APP_SETTING_SCOPE_PROJECT_USER = SODAR_CONSTANTS[
+    'APP_SETTING_SCOPE_PROJECT_USER'
+]
 
 # Local constants
 INVITE_EMAIL = 'test@example.com'
 SECRET = 'rsd886hi8276nypuvw066sbvv0rb2a6x'
 TASKFLOW_SECRET_INVALID = 'Not a valid secret'
 REMOTE_SITE_NAME = 'Test site'
 REMOTE_SITE_URL = 'https://sodar.bihealth.org'
@@ -89,48 +104,46 @@
 REMOTE_SITE_NEW_DESC = 'New description'
 REMOTE_SITE_NEW_SECRET = build_secret()
 EXAMPLE_APP_NAME = 'example_project_app'
 INVALID_UUID = '11111111-1111-1111-1111-111111111111'
 
 PROJECTROLES_APP_SETTINGS_TEST_LOCAL = {
     'test_setting': {
-        'scope': 'PROJECT',  # PROJECT/USER
+        'scope': APP_SETTING_SCOPE_PROJECT,  # PROJECT/USER
         'type': 'BOOLEAN',  # STRING/INTEGER/BOOLEAN
         'default': False,
         'label': 'Test setting',  # Optional, defaults to name/key
         'description': 'Test setting',  # Optional
         'user_modifiable': True,  # Optional, show/hide in forms
         'local': False,
     },
     'test_setting_local': {
-        'scope': 'PROJECT',  # PROJECT/USER
+        'scope': APP_SETTING_SCOPE_PROJECT,  # PROJECT/USER
         'type': 'BOOLEAN',  # STRING/INTEGER/BOOLEAN
         'default': False,
         'label': 'Test setting',  # Optional, defaults to name/key
         'description': 'Test setting',  # Optional
         'user_modifiable': True,  # Optional, show/hide in forms
         'local': True,
     },
+    'project_star': {  # NOTE: We have to include this for view tests
+        'scope': APP_SETTING_SCOPE_PROJECT_USER,
+        'type': 'BOOLEAN',
+        'default': False,
+        'local': False,
+    },
 }
 
 
-class TestViewsBase(TestCase):
+class TestViewsBase(RoleMixin, TestCase):
     """Base class for view testing"""
 
     def setUp(self):
         # Init roles
-        self.role_owner = Role.objects.get_or_create(name=PROJECT_ROLE_OWNER)[0]
-        self.role_delegate = Role.objects.get_or_create(
-            name=PROJECT_ROLE_DELEGATE
-        )[0]
-        self.role_contributor = Role.objects.get_or_create(
-            name=PROJECT_ROLE_CONTRIBUTOR
-        )[0]
-        self.role_guest = Role.objects.get_or_create(name=PROJECT_ROLE_GUEST)[0]
-
+        self.init_roles()
         # Init superuser
         self.user = self.make_user('superuser')
         self.user.is_staff = True
         self.user.is_superuser = True
         self.user.save()
 
 
@@ -164,16 +177,87 @@
 
     @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
     def test_render_anon(self):
         """Test rendering with anonymous access"""
         response = self.client.get(reverse('home'))
         self.assertEqual(response.status_code, 200)
 
+    def test_context_get_sidebar_icon_size(self):
+        """Test getting sidebar icon size in context"""
+        with self.login(self.user):
+            response = self.client.get(reverse('home'))
+            self.assertEqual(response.context['sidebar_icon_size'], 36)
+
+    @override_settings(PROJECTROLES_SIDEBAR_ICON_SIZE=SIDEBAR_ICON_MIN_SIZE - 2)
+    def test_context_get_sidebar_icon_size_min(self):
+        """Test sidebar icon size with value below minimum"""
+        with self.login(self.user):
+            response = self.client.get(reverse('home'))
+            self.assertEqual(
+                response.context['sidebar_icon_size'],
+                SIDEBAR_ICON_MIN_SIZE,
+            )
+
+    @override_settings(PROJECTROLES_SIDEBAR_ICON_SIZE=SIDEBAR_ICON_MAX_SIZE + 2)
+    def test_context_get_sidebar_icon_size_max(self):
+        """Test sidebar icon size with value over max"""
+        with self.login(self.user):
+            response = self.client.get(reverse('home'))
+            self.assertEqual(
+                response.context['sidebar_icon_size'],
+                SIDEBAR_ICON_MAX_SIZE,
+            )
+
+    def test_context_get_sidebar_notch_pos(self):
+        """Test siderbar notch position"""
+        with self.login(self.user):
+            response = self.client.get(reverse('home'))
+            self.assertEqual(response.context['sidebar_notch_pos'], 12)
+
+    def test_context_get_sidebar_notch_size(self):
+        """Test sidebar notch size"""
+        with self.login(self.user):
+            response = self.client.get(reverse('home'))
+            self.assertEqual(response.context['sidebar_notch_size'], 12)
+
+    @override_settings(PROJECTROLES_SIDEBAR_ICON_SIZE=SIDEBAR_ICON_MIN_SIZE)
+    def test_context_get_sidebar_notch_size_min(self):
+        """Test sidebar notch size with minimum icon size"""
+        with self.login(self.user):
+            response = self.client.get(reverse('home'))
+            self.assertEqual(response.context['sidebar_notch_size'], 9)
+
+    def test_context_get_sidebar_padding(self):
+        """Test sidebar padding"""
+        with self.login(self.user):
+            response = self.client.get(reverse('home'))
+            self.assertEqual(response.context['sidebar_padding'], 8)
 
-class TestProjectSearchView(ProjectMixin, RoleAssignmentMixin, TestViewsBase):
+    @override_settings(PROJECTROLES_SIDEBAR_ICON_SIZE=SIDEBAR_ICON_MAX_SIZE)
+    def test_context_get_sidebar_padding_max(self):
+        """Test sidebar padding with maximum icon size"""
+        with self.login(self.user):
+            response = self.client.get(reverse('home'))
+            self.assertEqual(response.context['sidebar_padding'], 10)
+
+    @override_settings(PROJECTROLES_SIDEBAR_ICON_SIZE=SIDEBAR_ICON_MIN_SIZE)
+    def test_context_get_sidebar_padding_min(self):
+        """Test sidebar padding with minimum icon size"""
+        with self.login(self.user):
+            response = self.client.get(reverse('home'))
+            self.assertEqual(response.context['sidebar_padding'], 4)
+
+
+class TestProjectSearchResultsView(
+    ProjectMixin,
+    RoleAssignmentMixin,
+    TestViewsBase,
+    ProjectEventMixin,
+    ProjectEventStatusMixin,
+):
     """Tests for the project search results view"""
 
     def setUp(self):
         super().setUp()
         self.category = self.make_project(
             'TestCategory', PROJECT_TYPE_CATEGORY, None
         )
@@ -232,31 +316,50 @@
         """Test non-text input from standard search (should redirect)"""
         with self.login(self.user):
             response = self.client.get(
                 reverse('projectroles:search') + '?s=+++'
             )
             self.assertRedirects(response, reverse('home'))
 
+    def test_render_finder(self):
+        """Test rendering project search view as finder"""
+        user_finder = self.make_user('user_finder')
+        finder_cat = self.make_project(
+            'FinderCategory', PROJECT_TYPE_CATEGORY, self.category
+        )
+        self.make_assignment(finder_cat, self.user, self.role_owner)
+        self.make_assignment(finder_cat, user_finder, self.role_finder)
+        finder_project = self.make_project(
+            'FinderProject', PROJECT_TYPE_PROJECT, finder_cat
+        )
+        self.make_assignment(finder_project, self.user, self.role_owner)
+        with self.login(user_finder):
+            response = self.client.get(
+                reverse('projectroles:search') + '?' + urlencode({'s': 'test'})
+            )
+        self.assertEqual(response.status_code, 200)
+        self.assertEqual(len(response.context['project_results']), 1)
+        self.assertEqual(response.context['project_results'][0], finder_project)
+
     def test_render_advanced(self):
         """Test input from advanced search"""
         new_project = self.make_project(
             'AnotherProject',
             PROJECT_TYPE_PROJECT,
             self.category,
             description='xxx',
         )
         self.cat_owner_as = self.make_assignment(
             new_project, self.user, self.role_owner
         )
 
         with self.login(self.user):
-            response = self.client.get(
-                reverse('projectroles:search')
-                + '?'
-                + urlencode({'m': 'testproject\r\nxxx', 'k': ''})
+            response = self.client.post(
+                reverse('projectroles:search_advanced'),
+                data={'m': 'testproject\r\nxxx', 'k': ''},
             )
         self.assertEqual(response.status_code, 200)
         self.assertEqual(
             response.context['search_terms'], ['testproject', 'xxx']
         )
         self.assertEqual(response.context['search_keywords'], {})
         self.assertEqual(response.context['search_type'], None)
@@ -271,67 +374,97 @@
             description='xxx',
         )
         self.cat_owner_as = self.make_assignment(
             new_project, self.user, self.role_owner
         )
 
         with self.login(self.user):
-            response = self.client.get(
-                reverse('projectroles:search')
-                + '?'
-                + urlencode({'m': 'testproject\r\nxx', 'k': ''})
+            response = self.client.post(
+                reverse('projectroles:search_advanced'),
+                data={'m': 'testproject\r\nxx', 'k': ''},
             )
         self.assertEqual(response.status_code, 200)
         self.assertEqual(response.context['search_terms'], ['testproject'])
         self.assertEqual(len(response.context['project_results']), 1)
 
     def test_render_advanced_empty_input(self):
-        """Test input from advanced search with empty term (should be ignored)"""
+        """Test advanced search input with empty term (should be ignored)"""
         new_project = self.make_project(
             'AnotherProject',
             PROJECT_TYPE_PROJECT,
             self.category,
             description='xxx',
         )
         self.cat_owner_as = self.make_assignment(
             new_project, self.user, self.role_owner
         )
 
         with self.login(self.user):
-            response = self.client.get(
-                reverse('projectroles:search')
-                + '?'
-                + urlencode({'m': 'testproject\r\n\r\nxxx', 'k': ''})
+            response = self.client.post(
+                reverse('projectroles:search_advanced'),
+                data={'m': 'testproject\r\nxxx', 'k': ''},
             )
         self.assertEqual(response.status_code, 200)
         self.assertEqual(
             response.context['search_terms'], ['testproject', 'xxx']
         )
         self.assertEqual(len(response.context['project_results']), 2)
 
     def test_render_advanced_dupe(self):
         """Test input from advanced search with a duplicate term"""
         with self.login(self.user):
-            response = self.client.get(
-                reverse('projectroles:search')
-                + '?'
-                + urlencode({'m': 'xxx\r\nxxx', 'k': ''})
+            response = self.client.post(
+                reverse('projectroles:search_advanced'),
+                data={'m': 'xxx\r\nxxx', 'k': ''},
             )
         self.assertEqual(response.status_code, 200)
         self.assertEqual(response.context['search_terms'], ['xxx'])
 
     @override_settings(PROJECTROLES_ENABLE_SEARCH=False)
     def test_disable_search(self):
         """Test redirecting the view due to search being disabled"""
         with self.login(self.user):
             response = self.client.get(
                 reverse('projectroles:search') + '?' + urlencode({'s': 'test'})
             )
             self.assertRedirects(response, reverse('home'))
 
+    def test_search_omit_app(self):
+        """Test omitting an app from the advanced search"""
+        self.event = self.make_event(
+            project=self.project,
+            app='projectroles',
+            user=self.user,
+            event_name='test_event',
+            description='description',
+            classified=False,
+            extra_data={'test_key': 'test_val'},
+        )
+        self.make_event_status(
+            event=self.event,
+            status_type='SUBMIT',
+            description='SUBMIT',
+            extra_data={'test_key': 'test_val'},
+        )
+        with self.login(self.user):
+            response = self.client.get(
+                reverse('projectroles:search') + '?' + urlencode({'s': 'test'})
+            )
+        self.assertEqual(response.status_code, 200)
+        self.assertEqual(len(response.context['app_results']), 2)
+        with override_settings(PROJECTROLES_SEARCH_OMIT_APPS=['timeline']):
+            with self.login(self.user):
+                response = self.client.get(
+                    reverse('projectroles:search')
+                    + '?'
+                    + urlencode({'s': 'test'})
+                )
+            self.assertEqual(response.status_code, 200)
+            self.assertEqual(len(response.context['app_results']), 1)
+
 
 class TestProjectAdvancedSearchView(
     ProjectMixin, RoleAssignmentMixin, TestViewsBase
 ):
     """Tests for the advanced search view"""
 
     def test_render(self):
@@ -393,29 +526,27 @@
         if app_alerts:
             self.app_alert_model = app_alerts.get_model()
 
     def test_render_top(self):
         """Test rendering top level category creation form"""
         with self.login(self.user):
             response = self.client.get(reverse('projectroles:create'))
-
         self.assertEqual(response.status_code, 200)
         form = response.context['form']
         self.assertIsNotNone(form)
         self.assertEqual(form.initial['type'], PROJECT_TYPE_CATEGORY)
         self.assertIsInstance(form.fields['type'].widget, HiddenInput)
         self.assertIsInstance(form.fields['parent'].widget, HiddenInput)
         self.assertEqual(form.initial['owner'], self.user)
 
     @override_settings(PROJECTROLES_DISABLE_CATEGORIES=True)
     def test_render_top_disable_categories(self):
         """Test rendering top level creation with categories disabled"""
         with self.login(self.user):
             response = self.client.get(reverse('projectroles:create'))
-
         self.assertEqual(response.status_code, 200)
         form = response.context['form']
         self.assertIsNotNone(form)
         self.assertEqual(form.initial['type'], PROJECT_TYPE_PROJECT)
         self.assertIsInstance(form.fields['type'].widget, HiddenInput)
         self.assertIsInstance(form.fields['parent'].widget, HiddenInput)
         self.assertEqual(form.initial['owner'], self.user)
@@ -523,15 +654,14 @@
         self.assertEqual(response.status_code, 200)
         form = response.context['form']
         self.assertEqual(form.initial['owner'], user_new)
 
     def test_create_top_level_category(self):
         """Test creation of top level category"""
         self.assertEqual(Project.objects.all().count(), 0)
-
         values = {
             'title': 'TestCategory',
             'type': PROJECT_TYPE_CATEGORY,
             'parent': '',
             'owner': self.user.sodar_uuid,
             'description': 'description',
             'public_guest_access': False,
@@ -563,29 +693,32 @@
             'has_public_children': False,
             'sodar_uuid': project.sodar_uuid,
         }
         model_dict = model_to_dict(project)
         model_dict.pop('readme', None)
         self.assertEqual(model_dict, expected)
 
-        # TODO: Assert settings
+        # Assert settings comparison
+        settings = AppSetting.objects.filter(project=project)
+        self.assertEqual(settings.count(), 1)
+        setting = settings.first()
+        self.assertEqual(setting.name, 'project_category_bool_setting')
 
         # Assert owner role assignment
         owner_as = RoleAssignment.objects.get(
             project=project, role=self.role_owner
         )
         expected = {
             'id': owner_as.pk,
             'project': project.pk,
             'role': self.role_owner.pk,
             'user': self.user.pk,
             'sodar_uuid': owner_as.sodar_uuid,
         }
         self.assertEqual(model_to_dict(owner_as), expected)
-
         # Assert redirect
         with self.login(self.user):
             self.assertRedirects(
                 response,
                 reverse(
                     'projectroles:detail',
                     kwargs={'project': project.sodar_uuid},
@@ -610,15 +743,15 @@
 
         with self.login(self.user):
             response = self.client.post(reverse('projectroles:create'), values)
         self.assertEqual(response.status_code, 302)
         category = Project.objects.first()
         self.assertIsNotNone(category)
 
-        # Make project with owner in Django
+        # Create project
         values = {
             'title': 'TestProject',
             'type': PROJECT_TYPE_PROJECT,
             'parent': category.sodar_uuid,
             'owner': self.user.sodar_uuid,
             'description': 'description',
             'public_guest_access': False,
@@ -654,14 +787,37 @@
             'full_title': 'TestCategory / TestProject',
             'has_public_children': False,
             'sodar_uuid': project.sodar_uuid,
         }
         model_dict = model_to_dict(project)
         model_dict.pop('readme', None)
         self.assertEqual(model_dict, expected)
+
+        # Assert settings comparison
+        project_settings = [
+            'project_bool_setting',
+            'project_callable_setting',
+            'project_callable_setting_options',
+            'project_global_setting',
+            'project_hidden_json_setting',
+            'project_hidden_setting',
+            'project_int_setting',
+            'project_int_setting_options',
+            'project_json_setting',
+            'project_str_setting',
+            'project_str_setting_options',
+            'allow_public_links',
+            'ip_allowlist',
+            'ip_restrict',
+        ]
+        settings = AppSetting.objects.filter(project=project)
+        self.assertEqual(settings.count(), 14)
+        for setting in settings:
+            self.assertIn(setting.name, project_settings)
+
         # Assert owner role assignment
         owner_as = RoleAssignment.objects.get(
             project=project, role=self.role_owner
         )
         expected = {
             'id': owner_as.pk,
             'project': project.pk,
@@ -705,14 +861,43 @@
         self.assertEqual(Project.objects.all().count(), 2)
         project = Project.objects.get(type=PROJECT_TYPE_PROJECT)
         self.assertEqual(project.get_owner().user, new_user)
         # Alert and email for parent owner should be created
         self.assertEqual(self.app_alert_model.objects.count(), 1)
         self.assertEqual(len(mail.outbox), 1)
 
+    def test_create_project_title_delimiter(self):
+        """Test Project creation with category delimiter in title (should fail)"""
+        category = self.make_project(
+            'TestCategory', PROJECT_TYPE_CATEGORY, None
+        )
+        self.make_assignment(category, self.user, self.role_owner)
+        self.assertEqual(Project.objects.all().count(), 1)
+        values = {
+            'title': 'Test{}Project'.format(CAT_DELIMITER),
+            'type': PROJECT_TYPE_PROJECT,
+            'parent': category.sodar_uuid,
+            'owner': self.user.sodar_uuid,
+            'description': 'description',
+            'public_guest_access': False,
+        }
+        values.update(
+            app_settings.get_defaults(APP_SETTING_SCOPE_PROJECT, post_safe=True)
+        )
+        with self.login(self.user):
+            response = self.client.post(
+                reverse(
+                    'projectroles:create',
+                    kwargs={'project': category.sodar_uuid},
+                ),
+                values,
+            )
+        self.assertEqual(response.status_code, 200)
+        self.assertEqual(Project.objects.all().count(), 1)
+
 
 class TestProjectUpdateView(
     ProjectMixin, RoleAssignmentMixin, RemoteTargetMixin, TestViewsBase
 ):
     """Tests for Project updating view"""
 
     def setUp(self):
@@ -776,29 +961,34 @@
         self.assertEqual(len(form.fields['parent'].choices), 2)
 
     def test_update_project(self):
         """Test Project updating"""
         timeline = get_backend_api('timeline_backend')
         new_category = self.make_project('NewCat', PROJECT_TYPE_CATEGORY, None)
         self.make_assignment(new_category, self.user, self.role_owner)
-
         self.assertEqual(Project.objects.all().count(), 3)
 
         values = model_to_dict(self.project)
         values['title'] = 'updated title'
         values['description'] = 'updated description'
         values['parent'] = new_category.sodar_uuid  # NOTE: Updated parent
         values['owner'] = self.user.sodar_uuid  # NOTE: Must add owner
         # Add settings values
         ps = app_settings.get_all(project=self.project, post_safe=True)
         # Edit settings to non-default values
         ps['settings.example_project_app.project_int_setting'] = 1
         ps['settings.example_project_app.project_str_setting'] = 'test'
         ps['settings.example_project_app.project_bool_setting'] = True
         ps['settings.example_project_app.project_json_setting'] = '{}'
+        ps[
+            'settings.example_project_app.project_callable_setting'
+        ] = 'No project or user for callable'
+        ps[
+            'settings.example_project_app.project_callable_setting_options'
+        ] = str(self.project.sodar_uuid)
         ps['settings.projectroles.ip_restrict'] = True
         ps['settings.projectroles.ip_allowlist'] = '["192.168.1.1"]'
         values.update(ps)
 
         with self.login(self.user):
             response = self.client.post(
                 reverse(
@@ -854,24 +1044,43 @@
             self.assertRedirects(
                 response,
                 reverse(
                     'projectroles:detail',
                     kwargs={'project': self.project.sodar_uuid},
                 ),
             )
-
         # Assert timeline event
         tl_event = (
             timeline.get_project_events(self.project).order_by('-pk').first()
         )
         self.assertEqual(tl_event.event_name, 'project_update')
         self.assertIn('title', tl_event.extra_data)
         self.assertIn('description', tl_event.extra_data)
         self.assertIn('parent', tl_event.extra_data)
 
+    def test_update_project_title_delimiter(self):
+        """Test Project updating with category delimiter in title (should fail)"""
+        values = model_to_dict(self.project)
+        values['title'] = 'Project{}Title'.format(CAT_DELIMITER)
+        # Add settings values
+        values.update(
+            app_settings.get_all(project=self.project, post_safe=True)
+        )
+        with self.login(self.user):
+            response = self.client.post(
+                reverse(
+                    'projectroles:update',
+                    kwargs={'project': self.project.sodar_uuid},
+                ),
+                values,
+            )
+        self.assertEqual(response.status_code, 200)
+        self.project.refresh_from_db()
+        self.assertEqual(self.project.title, 'TestProject')
+
     def test_render_category(self):
         """Test rendering with existing category"""
         with self.login(self.user):
             response = self.client.get(
                 reverse(
                     'projectroles:update',
                     kwargs={'project': self.category.sodar_uuid},
@@ -926,15 +1135,19 @@
             'has_public_children': False,
             'sodar_uuid': self.category.sodar_uuid,
         }
         model_dict = model_to_dict(self.category)
         model_dict.pop('readme', None)
         self.assertEqual(model_dict, expected)
 
-        # TODO: Assert settings
+        # Assert settings comparison
+        settings = AppSetting.objects.filter(project=self.category)
+        self.assertEqual(settings.count(), 1)
+        setting = settings.first()
+        self.assertEqual(setting.name, 'project_category_bool_setting')
 
         # Assert redirect
         with self.login(self.user):
             self.assertRedirects(
                 response,
                 reverse(
                     'projectroles:detail',
@@ -944,15 +1157,14 @@
 
     def test_update_category_parent(self):
         """Test category parent updating to ensure titles are changed"""
         new_category = self.make_project(
             'NewCategory', PROJECT_TYPE_CATEGORY, None
         )
         self.make_assignment(new_category, self.user, self.role_owner)
-
         self.assertEqual(
             self.category.full_title,
             self.category.title,
         )
         self.assertEqual(
             self.project.full_title,
             self.category.title + ' / ' + self.project.title,
@@ -1024,15 +1236,14 @@
         # Assert the parent category has_public_children is set true
         self.assertEqual(self.category.has_public_children, True)
 
     @override_settings(PROJECTROLES_SITE_MODE=SITE_MODE_TARGET)
     def test_render_remote(self):
         """Test rendering form for remote site as target"""
         self.set_up_as_target(projects=[self.category, self.project])
-
         with self.login(self.user):
             response = self.client.get(
                 reverse(
                     'projectroles:update',
                     kwargs={'project': self.project.sodar_uuid},
                 )
             )
@@ -1059,14 +1270,26 @@
         )
         self.assertNotIsInstance(
             form.fields[
                 'settings.example_project_app.project_bool_setting'
             ].widget,
             HiddenInput,
         )
+        self.assertNotIsInstance(
+            form.fields[
+                'settings.example_project_app.project_callable_setting'
+            ].widget,
+            HiddenInput,
+        )
+        self.assertNotIsInstance(
+            form.fields[
+                'settings.example_project_app.project_callable_setting_options'
+            ].widget,
+            HiddenInput,
+        )
         self.assertTrue(
             form.fields['settings.projectroles.ip_restrict'].disabled
         )
         self.assertTrue(
             form.fields['settings.projectroles.ip_allowlist'].disabled
         )
 
@@ -1080,14 +1303,20 @@
         values['settings.example_project_app.project_int_setting'] = 0
         values['settings.example_project_app.project_int_setting_options'] = 0
         values['settings.example_project_app.project_str_setting'] = 'test'
         values[
             'settings.example_project_app.project_str_setting_options'
         ] = 'string1'
         values['settings.example_project_app.project_bool_setting'] = True
+        values[
+            'settings.example_project_app.project_callable_setting'
+        ] = 'No project or user for callable'
+        values[
+            'settings.example_project_app.project_callable_setting_options'
+        ] = str(self.project.sodar_uuid)
         values['settings.projectroles.ip_restrict'] = True
         values['settings.projectroles.ip_allowlist'] = '["192.168.1.1"]'
         self.assertEqual(Project.objects.all().count(), 2)
 
         with self.login(self.user):
             response = self.client.post(
                 reverse(
@@ -1315,74 +1544,67 @@
         self.setting_str = self.make_setting(
             app_name=EXAMPLE_APP_NAME,
             name='project_str_setting',
             setting_type='STRING',
             value='',
             project=self.project,
         )
-
         # Init string setting with options
         self.setting_str_options = self.make_setting(
             app_name=EXAMPLE_APP_NAME,
             name='project_str_setting_options',
             setting_type='STRING',
             value='string1',
             project=self.project,
         )
-
         # Init integer setting
         self.setting_int = self.make_setting(
             app_name=EXAMPLE_APP_NAME,
             name='project_int_setting',
             setting_type='INTEGER',
             value=0,
             project=self.project,
         )
-
         # Init integer setting with options
         self.setting_int_options = self.make_setting(
             app_name=EXAMPLE_APP_NAME,
             name='project_int_setting_options',
             setting_type='INTEGER',
             value=0,
             project=self.project,
         )
-
         # Init boolean setting
         self.setting_bool = self.make_setting(
             app_name=EXAMPLE_APP_NAME,
             name='project_bool_setting',
             setting_type='BOOLEAN',
             value=False,
             project=self.project,
         )
-
-        # Init json setting
+        # Init JSON setting
         self.setting_json = self.make_setting(
             app_name=EXAMPLE_APP_NAME,
             name='project_json_setting',
             setting_type='JSON',
             value=None,
             value_json={
                 'Example': 'Value',
                 'list': [1, 2, 3, 4, 5],
                 'level_6': False,
             },
             project=self.project,
         )
-
         # Init IP restrict setting
         self.setting_ip_restrict = self.make_setting(
             app_name='projectroles',
             name='ip_restrict',
             setting_type='BOOLEAN',
             value=False,
             project=self.project,
         )
-
         # Init IP allowlist setting
         self.setting_ip_allowlist = self.make_setting(
             app_name='projectroles',
             name='ip_allowlist',
             setting_type='JSON',
             value=None,
             value_json=[],
@@ -1397,41 +1619,41 @@
                     'projectroles:update',
                     kwargs={'project': self.project.sodar_uuid},
                 )
             )
         self.assertEqual(response.status_code, 200)
         self.assertIsNotNone(response.context['form'])
         field = response.context['form'].fields.get(
-            'settings.%s.project_str_setting' % EXAMPLE_APP_NAME
+            'settings.example_project_app.project_str_setting'
         )
         self.assertIsNotNone(field)
         self.assertEqual(field.widget.attrs['placeholder'], 'Example string')
         field = response.context['form'].fields.get(
-            'settings.%s.project_int_setting' % EXAMPLE_APP_NAME
+            'settings.example_project_app.project_int_setting'
         )
         self.assertIsNotNone(field)
         self.assertEqual(field.widget.attrs['placeholder'], 0)
         self.assertIsNotNone(
             response.context['form'].fields.get(
-                'settings.%s.project_str_setting_options' % EXAMPLE_APP_NAME
+                'settings.example_project_app.project_str_setting_options'
             )
         )
         self.assertIsNotNone(
             response.context['form'].fields.get(
-                'settings.%s.project_int_setting_options' % EXAMPLE_APP_NAME
+                'settings.example_project_app.project_int_setting_options'
             )
         )
         self.assertIsNotNone(
             response.context['form'].fields.get(
-                'settings.%s.project_bool_setting' % EXAMPLE_APP_NAME
+                'settings.example_project_app.project_bool_setting'
             )
         )
         self.assertIsNotNone(
             response.context['form'].fields.get(
-                'settings.%s.project_json_setting' % EXAMPLE_APP_NAME
+                'settings.example_project_app.project_json_setting'
             )
         )
         self.assertIsNotNone(
             response.context['form'].fields.get(
                 'settings.projectroles.ip_restrict'
             )
         )
@@ -1493,22 +1715,24 @@
             app_settings.get(
                 'projectroles', 'ip_allowlist', project=self.project
             ),
             [],
         )
 
         values = {
-            'settings.%s.project_str_setting' % EXAMPLE_APP_NAME: 'updated',
-            'settings.%s.project_int_setting' % EXAMPLE_APP_NAME: 170,
-            'settings.%s.project_str_setting_options'
-            % EXAMPLE_APP_NAME: 'string2',
-            'settings.%s.project_int_setting_options' % EXAMPLE_APP_NAME: 1,
-            'settings.%s.project_bool_setting' % EXAMPLE_APP_NAME: True,
-            'settings.%s.project_json_setting'
-            % EXAMPLE_APP_NAME: '{"Test": "Updated"}',
+            'settings.example_project_app.project_str_setting': 'updated',
+            'settings.example_project_app.project_int_setting': 170,
+            'settings.example_project_app.'
+            'project_str_setting_options': 'string2',
+            'settings.example_project_app.project_int_setting_options': 1,
+            'settings.example_project_app.project_bool_setting': True,
+            'settings.example_project_app.'
+            'project_json_setting': '{"Test": "Updated"}',
+            'settings.example_project_app.'
+            'project_callable_setting_options': str(self.project.sodar_uuid),
             'settings.projectroles.ip_restrict': True,
             'settings.projectroles.ip_allowlist': '["192.168.1.1"]',
             'owner': self.user.sodar_uuid,
             'title': 'TestProject',
             'type': PROJECT_TYPE_PROJECT,
         }
 
@@ -1526,15 +1750,14 @@
             self.assertRedirects(
                 response,
                 reverse(
                     'projectroles:detail',
                     kwargs={'project': self.project.sodar_uuid},
                 ),
             )
-
         # Assert settings state after update
         self.assertEqual(
             app_settings.get(
                 EXAMPLE_APP_NAME, 'project_str_setting', project=self.project
             ),
             'updated',
         )
@@ -1605,24 +1828,22 @@
         # Init user & role
         self.project = self.make_project(
             'TestProject', PROJECT_TYPE_PROJECT, None
         )
         self.owner_as = self.make_assignment(
             self.project, self.user, self.role_owner
         )
-
         # Create site
         self.site = self.make_site(
             name=REMOTE_SITE_NAME,
             url=REMOTE_SITE_URL,
             mode=SODAR_CONSTANTS['SITE_MODE_SOURCE'],
             description='',
             secret=REMOTE_SITE_SECRET,
         )
-
         self.remote_project = self.make_remote_project(
             project_uuid=self.project.sodar_uuid,
             project=self.project,
             site=self.site,
             level=SODAR_CONSTANTS['REMOTE_LEVEL_READ_ROLES'],
         )
 
@@ -1630,52 +1851,47 @@
         self.setting_str = self.make_setting(
             app_name=EXAMPLE_APP_NAME,
             name='project_str_setting',
             setting_type='STRING',
             value='',
             project=self.project,
         )
-
         # Init string setting with options
         self.setting_str_options = self.make_setting(
             app_name=EXAMPLE_APP_NAME,
             name='project_str_setting_options',
             setting_type='STRING',
             value='string1',
             project=self.project,
         )
-
         # Init integer setting
         self.setting_int = self.make_setting(
             app_name=EXAMPLE_APP_NAME,
             name='project_int_setting',
             setting_type='INTEGER',
             value='0',
             project=self.project,
         )
-
         # Init integer setting with options
         self.setting_int_options = self.make_setting(
             app_name=EXAMPLE_APP_NAME,
             name='project_int_setting_options',
             setting_type='INTEGER',
             value=0,
             project=self.project,
         )
-
         # Init boolean setting
         self.setting_bool = self.make_setting(
             app_name=EXAMPLE_APP_NAME,
             name='project_bool_setting',
             setting_type='BOOLEAN',
             value=False,
             project=self.project,
         )
-
-        # Init json setting
+        # Init JSON setting
         self.setting_json = self.make_setting(
             app_name=EXAMPLE_APP_NAME,
             name='project_json_setting',
             setting_type='JSON',
             value=None,
             value_json={
                 'Example': 'Value',
@@ -1694,40 +1910,50 @@
                     kwargs={'project': self.project.sodar_uuid},
                 )
             )
         self.assertEqual(response.status_code, 200)
         self.assertIsNotNone(response.context['form'])
         self.assertIsNotNone(
             response.context['form'].fields.get(
-                'settings.%s.project_str_setting' % EXAMPLE_APP_NAME
+                'settings.example_project_app.project_str_setting'
+            )
+        )
+        self.assertIsNotNone(
+            response.context['form'].fields.get(
+                'settings.example_project_app.project_int_setting'
+            )
+        )
+        self.assertIsNotNone(
+            response.context['form'].fields.get(
+                'settings.example_project_app.project_str_setting_options'
             )
         )
         self.assertIsNotNone(
             response.context['form'].fields.get(
-                'settings.%s.project_int_setting' % EXAMPLE_APP_NAME
+                'settings.example_project_app.project_int_setting_options'
             )
         )
         self.assertIsNotNone(
             response.context['form'].fields.get(
-                'settings.%s.project_str_setting_options' % EXAMPLE_APP_NAME
+                'settings.example_project_app.project_bool_setting'
             )
         )
         self.assertIsNotNone(
             response.context['form'].fields.get(
-                'settings.%s.project_int_setting_options' % EXAMPLE_APP_NAME
+                'settings.example_project_app.project_json_setting'
             )
         )
         self.assertIsNotNone(
             response.context['form'].fields.get(
-                'settings.%s.project_bool_setting' % EXAMPLE_APP_NAME
+                'settings.example_project_app.project_callable_setting'
             )
         )
         self.assertIsNotNone(
             response.context['form'].fields.get(
-                'settings.%s.project_json_setting' % EXAMPLE_APP_NAME
+                'settings.example_project_app.project_callable_setting_options'
             )
         )
         self.assertIsNotNone(
             response.context['form'].fields.get(
                 'settings.projectroles.ip_restrict'
             )
         )
@@ -1787,46 +2013,48 @@
             app_settings.get(
                 EXAMPLE_APP_NAME, 'project_json_setting', project=self.project
             ),
             {'Example': 'Value', 'list': [1, 2, 3, 4, 5], 'level_6': False},
         )
 
         values = {
-            'settings.%s.project_str_setting' % EXAMPLE_APP_NAME: 'updated',
-            'settings.%s.project_int_setting' % EXAMPLE_APP_NAME: 170,
-            'settings.%s.project_str_setting_options'
-            % EXAMPLE_APP_NAME: 'string2',
-            'settings.%s.project_int_setting_options' % EXAMPLE_APP_NAME: 1,
-            'settings.%s.project_bool_setting' % EXAMPLE_APP_NAME: True,
-            'settings.%s.project_json_setting'
-            % EXAMPLE_APP_NAME: '{"Test": "Updated"}',
+            'settings.example_project_app.project_str_setting': 'updated',
+            'settings.example_project_app.project_int_setting': 170,
+            'settings.example_project_app.'
+            'project_str_setting_options': 'string2',
+            'settings.example_project_app.project_int_setting_options': 1,
+            'settings.example_project_app.project_bool_setting': True,
+            'settings.example_project_app.'
+            'project_json_setting': '{"Test": "Updated"}',
+            'settings.example_project_app.'
+            'project_callable_setting': 'No project or user for callable',
+            'settings.example_project_app.'
+            'project_callable_setting_options': str(self.project.sodar_uuid),
             'owner': self.user.sodar_uuid,
             'title': 'TestProject',
             'type': PROJECT_TYPE_PROJECT,
         }
 
         with self.login(self.user):
             response = self.client.post(
                 reverse(
                     'projectroles:update',
                     kwargs={'project': self.project.sodar_uuid},
                 ),
                 values,
             )
-
         # Assert redirect
         with self.login(self.user):
             self.assertRedirects(
                 response,
                 reverse(
                     'projectroles:detail',
                     kwargs={'project': self.project.sodar_uuid},
                 ),
             )
-
         # Assert settings state after update
         self.assertEqual(
             app_settings.get(
                 EXAMPLE_APP_NAME, 'project_str_setting', project=self.project
             ),
             'updated',
         )
@@ -1860,19 +2088,35 @@
         )
         self.assertEqual(
             app_settings.get(
                 EXAMPLE_APP_NAME, 'project_json_setting', project=self.project
             ),
             {'Test': 'Updated'},
         )
+        self.assertEqual(
+            app_settings.get(
+                EXAMPLE_APP_NAME,
+                'project_callable_setting',
+                project=self.project,
+            ),
+            'No project or user for callable',
+        )
+        self.assertEqual(
+            app_settings.get(
+                EXAMPLE_APP_NAME,
+                'project_callable_setting_options',
+                project=self.project,
+            ),
+            str(self.project.sodar_uuid),
+        )
 
 
-@override_settings(PROJECTROLES_SITE_MODE=SITE_MODE_TARGET)
 @override_settings(
-    PROJECTROLES_APP_SETTINGS_TEST=PROJECTROLES_APP_SETTINGS_TEST_LOCAL
+    PROJECTROLES_SITE_MODE=SITE_MODE_TARGET,
+    PROJECTROLES_APP_SETTINGS_TEST=PROJECTROLES_APP_SETTINGS_TEST_LOCAL,
 )
 class TestProjectSettingsFormTargetLocal(
     RemoteSiteMixin,
     RemoteProjectMixin,
     AppSettingMixin,
     TestViewsBase,
     ProjectMixin,
@@ -1888,24 +2132,22 @@
         # Init user & role
         self.project = self.make_project(
             'TestProject', PROJECT_TYPE_PROJECT, None
         )
         self.owner_as = self.make_assignment(
             self.project, self.user, self.role_owner
         )
-
         # Create site
         self.site = self.make_site(
             name=REMOTE_SITE_NAME,
             url=REMOTE_SITE_URL,
             mode=SODAR_CONSTANTS['SITE_MODE_SOURCE'],
             description='',
             secret=REMOTE_SITE_SECRET,
         )
-
         self.remote_project = self.make_remote_project(
             project_uuid=self.project.sodar_uuid,
             project=self.project,
             site=self.site,
             level=SODAR_CONSTANTS['REMOTE_LEVEL_READ_ROLES'],
         )
 
@@ -1913,52 +2155,47 @@
         self.setting_str = self.make_setting(
             app_name=EXAMPLE_APP_NAME,
             name='project_str_setting',
             setting_type='STRING',
             value='',
             project=self.project,
         )
-
         # Init string setting with options
         self.setting_str_options = self.make_setting(
             app_name=EXAMPLE_APP_NAME,
             name='project_str_setting_options',
             setting_type='STRING',
             value='string1',
             project=self.project,
         )
-
         # Init integer setting
         self.setting_int = self.make_setting(
             app_name=EXAMPLE_APP_NAME,
             name='project_int_setting',
             setting_type='INTEGER',
             value='0',
             project=self.project,
         )
-
         # Init integer setting with options
         self.setting_int_options = self.make_setting(
             app_name=EXAMPLE_APP_NAME,
             name='project_int_setting_options',
             setting_type='INTEGER',
             value=0,
             project=self.project,
         )
-
         # Init boolean setting
         self.setting_bool = self.make_setting(
             app_name=EXAMPLE_APP_NAME,
             name='project_bool_setting',
             setting_type='BOOLEAN',
             value=False,
             project=self.project,
         )
-
-        # Init json setting
+        # Init JSON setting
         self.setting_json = self.make_setting(
             app_name=EXAMPLE_APP_NAME,
             name='project_json_setting',
             setting_type='JSON',
             value=None,
             value_json={
                 'Example': 'Value',
@@ -1977,40 +2214,40 @@
                     kwargs={'project': self.project.sodar_uuid},
                 )
             )
         self.assertEqual(response.status_code, 200)
         self.assertIsNotNone(response.context['form'])
         self.assertIsNotNone(
             response.context['form'].fields.get(
-                'settings.%s.project_str_setting' % EXAMPLE_APP_NAME
+                'settings.example_project_app.project_str_setting'
             )
         )
         self.assertIsNotNone(
             response.context['form'].fields.get(
-                'settings.%s.project_int_setting' % EXAMPLE_APP_NAME
+                'settings.example_project_app.project_int_setting'
             )
         )
         self.assertIsNotNone(
             response.context['form'].fields.get(
-                'settings.%s.project_str_setting_options' % EXAMPLE_APP_NAME
+                'settings.example_project_app.project_str_setting_options'
             )
         )
         self.assertIsNotNone(
             response.context['form'].fields.get(
-                'settings.%s.project_int_setting_options' % EXAMPLE_APP_NAME
+                'settings.example_project_app.project_int_setting_options'
             )
         )
         self.assertIsNotNone(
             response.context['form'].fields.get(
-                'settings.%s.project_bool_setting' % EXAMPLE_APP_NAME
+                'settings.example_project_app.project_bool_setting'
             )
         )
         self.assertIsNotNone(
             response.context['form'].fields.get(
-                'settings.%s.project_json_setting' % EXAMPLE_APP_NAME
+                'settings.example_project_app.project_json_setting'
             )
         )
         self.assertIsNotNone(
             response.context['form'].fields.get(
                 'settings.projectroles.test_setting_local'
             )
         )
@@ -2076,22 +2313,26 @@
             app_settings.get(
                 'projectroles', 'test_setting', project=self.project
             ),
             False,
         )
 
         values = {
-            'settings.%s.project_str_setting' % EXAMPLE_APP_NAME: 'updated',
-            'settings.%s.project_int_setting' % EXAMPLE_APP_NAME: 170,
-            'settings.%s.project_str_setting_options'
-            % EXAMPLE_APP_NAME: 'string2',
-            'settings.%s.project_int_setting_options' % EXAMPLE_APP_NAME: 1,
-            'settings.%s.project_bool_setting' % EXAMPLE_APP_NAME: True,
-            'settings.%s.project_json_setting'
-            % EXAMPLE_APP_NAME: '{"Test": "Updated"}',
+            'settings.example_project_app.project_str_setting': 'updated',
+            'settings.example_project_app.project_int_setting': 170,
+            'settings.example_project_app.'
+            'project_str_setting_options': 'string2',
+            'settings.example_project_app.project_int_setting_options': 1,
+            'settings.example_project_app.project_bool_setting': True,
+            'settings.example_project_app.'
+            'project_json_setting': '{"Test": "Updated"}',
+            'settings.example_project_app.'
+            'project_callable_setting': 'No project or user for callable',
+            'settings.example_project_app.'
+            'project_callable_setting_options': str(self.project.sodar_uuid),
             'settings.projectroles.test_setting_local': True,
             'owner': self.user.sodar_uuid,
             'title': 'TestProject',
             'type': PROJECT_TYPE_PROJECT,
         }
 
         with self.login(self.user):
@@ -2108,15 +2349,14 @@
             self.assertRedirects(
                 response,
                 reverse(
                     'projectroles:detail',
                     kwargs={'project': self.project.sodar_uuid},
                 ),
             )
-
         # Assert settings state after update
         self.assertEqual(
             app_settings.get(
                 EXAMPLE_APP_NAME, 'project_str_setting', project=self.project
             ),
             'updated',
         )
@@ -2152,14 +2392,30 @@
             app_settings.get(
                 EXAMPLE_APP_NAME, 'project_json_setting', project=self.project
             ),
             {'Test': 'Updated'},
         )
         self.assertEqual(
             app_settings.get(
+                EXAMPLE_APP_NAME,
+                'project_callable_setting',
+                project=self.project,
+            ),
+            'No project or user for callable',
+        )
+        self.assertEqual(
+            app_settings.get(
+                EXAMPLE_APP_NAME,
+                'project_callable_setting_options',
+                project=self.project,
+            ),
+            str(self.project.sodar_uuid),
+        )
+        self.assertEqual(
+            app_settings.get(
                 'projectroles', 'test_setting_local', project=self.project
             ),
             True,
         )
         self.assertEqual(
             app_settings.get(
                 'projectroles', 'test_setting', project=self.project
@@ -2172,30 +2428,27 @@
     """Tests for project roles view"""
 
     def setUp(self):
         super().setUp()
         self.project = self.make_project(
             'TestProject', PROJECT_TYPE_PROJECT, None
         )
-
         # Set superuser as owner
         self.owner_as = self.make_assignment(
             self.project, self.user, self.role_owner
         )
-
         # Set new user as delegate
-        self.user_delegate = self.make_user('delegate')
+        self.user_delegate = self.make_user('user_delegate')
         self.delegate_as = self.make_assignment(
             self.project, self.user_delegate, self.role_delegate
         )
-
         # Set another new user as guest (= one of the member roles)
-        self.user_new = self.make_user('guest')
+        self.user_guest = self.make_user('user_guest')
         self.guest_as = self.make_assignment(
-            self.project, self.user_new, self.role_guest
+            self.project, self.user_guest, self.role_guest
         )
 
     def test_render(self):
         """Test rendering project roles view"""
         with self.login(self.user):
             response = self.client.get(
                 reverse(
@@ -2203,40 +2456,42 @@
                     kwargs={'project': self.project.sodar_uuid},
                 )
             )
         self.assertEqual(response.status_code, 200)
         self.assertEqual(response.context['project'].pk, self.project.pk)
 
         # Assert users
-        expected = {
-            'id': self.owner_as.pk,
-            'project': self.project.pk,
-            'role': self.role_owner.pk,
-            'user': self.user.pk,
-            'sodar_uuid': self.owner_as.sodar_uuid,
-        }
-        self.assertEqual(model_to_dict(response.context['owner']), expected)
-        expected = {
-            'id': self.delegate_as.pk,
-            'project': self.project.pk,
-            'role': self.role_delegate.pk,
-            'user': self.user_delegate.pk,
-            'sodar_uuid': self.delegate_as.sodar_uuid,
-        }
-        self.assertEqual(model_to_dict(response.context['delegate']), expected)
-        expected = {
-            'id': self.guest_as.pk,
-            'project': self.project.pk,
-            'role': self.role_guest.pk,
-            'user': self.user_new.pk,
-            'sodar_uuid': self.guest_as.sodar_uuid,
-        }
+        expected = [
+            {
+                'id': self.owner_as.pk,
+                'project': self.project.pk,
+                'role': self.role_owner.pk,
+                'user': self.user.pk,
+                'sodar_uuid': self.owner_as.sodar_uuid,
+            },
+            {
+                'id': self.delegate_as.pk,
+                'project': self.project.pk,
+                'role': self.role_delegate.pk,
+                'user': self.user_delegate.pk,
+                'sodar_uuid': self.delegate_as.sodar_uuid,
+            },
+            {
+                'id': self.guest_as.pk,
+                'project': self.project.pk,
+                'role': self.role_guest.pk,
+                'user': self.user_guest.pk,
+                'sodar_uuid': self.guest_as.sodar_uuid,
+            },
+        ]
         self.assertEqual(
-            model_to_dict(response.context['members'][0]), expected
+            [model_to_dict(m) for m in response.context['roles']], expected
         )
+        # Assert other context data
+        self.assertNotIn('remote_role_url', response.context)
 
     def test_render_not_found(self):
         """Test rendering project roles view with invalid project UUID"""
         with self.login(self.user):
             response = self.client.get(
                 reverse(
                     'projectroles:roles',
@@ -2249,31 +2504,30 @@
 class TestRoleAssignmentCreateView(
     ProjectMixin, RoleAssignmentMixin, TestViewsBase
 ):
     """Tests for RoleAssignment creation view"""
 
     def setUp(self):
         super().setUp()
-
         # Set up category and project
         self.category = self.make_project(
             'TestCategory', PROJECT_TYPE_CATEGORY, None
         )
         self.user_owner_cat = self.make_user('owner_cat')
         self.owner_as_cat = self.make_assignment(
             self.category, self.user_owner_cat, self.role_owner
         )
         self.project = self.make_project(
             'TestProject', PROJECT_TYPE_PROJECT, self.category
         )
-        self.user_owner = self.make_user('owner')
+        self.user_owner = self.make_user('user_owner')
         self.owner_as = self.make_assignment(
             self.project, self.user_owner, self.role_owner
         )
-        self.user_new = self.make_user('guest')
+        self.user_new = self.make_user('user_new')
 
         app_alerts = get_backend_api('appalerts_backend')
         if app_alerts:
             self.app_alert_model = app_alerts.get_model()
 
     def test_render(self):
         """Test rendering of RoleAssignment creation form"""
@@ -2281,37 +2535,78 @@
             response = self.client.get(
                 reverse(
                     'projectroles:role_create',
                     kwargs={'project': self.project.sodar_uuid},
                 )
             )
         self.assertEqual(response.status_code, 200)
-
         form = response.context['form']
         self.assertIsNotNone(form)
         self.assertIsInstance(form.fields['project'].widget, HiddenInput)
         self.assertEqual(form.initial['project'], self.project.sodar_uuid)
         # Assert user with previously added role in project is not selectable
         self.assertNotIn(
             [
                 (
-                    self.owner_as.user.sodar_uuid,
-                    get_user_display_name(self.owner_as.user, True),
+                    self.user_owner.sodar_uuid,
+                    get_user_display_name(self.user_owner, True),
                 )
             ],
             form.fields['user'].choices,
         )
         # Assert owner role is not selectable
         self.assertNotIn(
-            [(self.role_owner.pk, self.role_owner.name)],
+            get_role_option(self.project, self.role_owner),
             form.fields['role'].choices,
         )
         # Assert delegate role is selectable
         self.assertIn(
-            (self.role_delegate.pk, self.role_delegate.name),
+            get_role_option(self.project, self.role_delegate),
+            form.fields['role'].choices,
+        )
+        # Assert finder role is not selectable
+        self.assertNotIn(
+            get_role_option(self.project, self.role_finder),
+            form.fields['role'].choices,
+        )
+
+    def test_render_category(self):
+        """Test rendering for category"""
+        with self.login(self.user):
+            response = self.client.get(
+                reverse(
+                    'projectroles:role_create',
+                    kwargs={'project': self.category.sodar_uuid},
+                )
+            )
+        self.assertEqual(response.status_code, 200)
+        form = response.context['form']
+        self.assertIsInstance(form.fields['project'].widget, HiddenInput)
+        self.assertEqual(form.initial['project'], self.category.sodar_uuid)
+        # Assert user with previously added role in project is not selectable
+        self.assertNotIn(
+            [
+                (
+                    self.user_owner_cat.sodar_uuid,
+                    get_user_display_name(self.user_owner_cat, True),
+                )
+            ],
+            form.fields['user'].choices,
+        )
+        self.assertNotIn(
+            get_role_option(self.category, self.role_owner),
+            form.fields['role'].choices,
+        )
+        self.assertIn(
+            get_role_option(self.category, self.role_delegate),
+            form.fields['role'].choices,
+        )
+        # Assert finder role is selectable
+        self.assertIn(
+            get_role_option(self.category, self.role_finder),
             form.fields['role'].choices,
         )
 
     def test_render_not_found(self):
         """Test rendering with invalid project UUID"""
         with self.login(self.user):
             response = self.client.get(
@@ -2360,28 +2655,26 @@
         self.assertEqual(model_to_dict(role_as), expected)
         self.assertEqual(
             self.app_alert_model.objects.filter(
                 alert_name='role_create'
             ).count(),
             1,
         )
-
         with self.login(self.user):
             self.assertRedirects(
                 response,
                 reverse(
                     'projectroles:roles',
                     kwargs={'project': self.project.sodar_uuid},
                 ),
             )
 
     def test_create_delegate(self):
         """Test RoleAssignment creation with project delegate role"""
         self.assertEqual(RoleAssignment.objects.all().count(), 2)
-
         values = {
             'project': self.project.sodar_uuid,
             'user': self.user_new.sodar_uuid,
             'role': self.role_delegate.pk,
         }
         with self.login(self.user):
             response = self.client.post(
@@ -2512,16 +2805,16 @@
                 data['redirect_url'],
                 reverse(
                     'projectroles:invite_create',
                     kwargs={'project': self.project.sodar_uuid},
                 ),
             )
 
-    def test_create_option(self):
-        """Test if new options are being displayed by SODARUserRedirectWidget"""
+    def test_display_options(self):
+        """Test test displaying options by SODARUserRedirectWidget"""
         values = {
             'project': self.project.sodar_uuid,
             'role': self.role_guest.pk,
             'q': 'test@example.com',
         }
         with self.login(self.user):
             response = self.client.get(
@@ -2532,16 +2825,16 @@
             'id': 'test@example.com',
             'text': 'Send an invite to "test@example.com"',
             'create_id': True,
         }
         data = json.loads(response.content)
         self.assertIn(new_option, data['results'])
 
-    def test_dont_create_option(self):
-        """Test for new options not displayed if not valid email addresses"""
+    def test_display_options_invalid_email(self):
+        """Test displaying options with invalid email"""
         values = {
             'project': self.project.sodar_uuid,
             'role': self.role_guest.pk,
             'q': 'test@example',
         }
         with self.login(self.user):
             response = self.client.get(
@@ -2552,45 +2845,190 @@
             'id': 'test@example.com',
             'text': 'Send an invite to "test@example"',
             'create_id': True,
         }
         data = json.loads(response.content)
         self.assertNotIn(new_option, data['results'])
 
+    def test_render_promote(self):
+        """Test rendering for inherited role promotion"""
+        # Assign category guest user for inherit/promote tests
+        guest_as_cat = self.make_assignment(
+            self.category, self.user_new, self.role_guest
+        )
+        with self.login(self.user):
+            response = self.client.get(
+                reverse(
+                    'projectroles:role_create_promote',
+                    kwargs={
+                        'project': self.project.sodar_uuid,
+                        'promote_as': guest_as_cat.sodar_uuid,
+                    },
+                )
+            )
+
+        self.assertEqual(response.status_code, 200)
+        self.assertEqual(response.context['promote_as'], guest_as_cat)
+        form = response.context['form']
+        self.assertIsInstance(form.fields['project'].widget, HiddenInput)
+        self.assertIsInstance(form.fields['user'].widget, HiddenInput)
+        self.assertEqual(form.initial['project'], self.project.sodar_uuid)
+        self.assertEqual(form.initial['user'], self.user_new)
+        self.assertEqual(
+            [c[0] for c in form.fields['role'].choices],
+            [self.role_delegate.pk, self.role_contributor.pk],
+        )
+
+    def test_render_promote_local_role(self):
+        """Test rendering for promotion with local role (should fail)"""
+        guest_as = self.make_assignment(
+            self.project, self.user_new, self.role_guest
+        )
+        with self.login(self.user):
+            response = self.client.get(
+                reverse(
+                    'projectroles:role_create_promote',
+                    kwargs={
+                        'project': self.project.sodar_uuid,
+                        'promote_as': guest_as.sodar_uuid,
+                    },
+                )
+            )
+            self.assertEqual(response.status_code, 302)
+            self.assertRedirects(
+                response,
+                reverse(
+                    'projectroles:roles',
+                    kwargs={'project': self.project.sodar_uuid},
+                ),
+            )
+
+    def test_render_promote_child_role(self):
+        """Test rendering for promotion with child role (should fail)"""
+        # Set up sub category and project with role
+        sub_category = self.make_project(
+            'SubCategory', PROJECT_TYPE_CATEGORY, self.category
+        )
+        sub_project = self.make_project(
+            'SubProject', PROJECT_TYPE_PROJECT, sub_category
+        )
+        sub_as = self.make_assignment(
+            sub_project, self.user_new, self.role_guest
+        )
+
+        with self.login(self.user):
+            response = self.client.get(
+                reverse(
+                    'projectroles:role_create_promote',
+                    kwargs={
+                        'project': self.project.sodar_uuid,
+                        'promote_as': sub_as.sodar_uuid,
+                    },
+                )
+            )
+        self.assertEqual(response.status_code, 302)
+
+    def test_render_promote_delegate(self):
+        """Test rendering for promotion with delegate role (should fail)"""
+        delegate_as_cat = self.make_assignment(
+            self.category, self.user_new, self.role_delegate
+        )
+        with self.login(self.user):
+            response = self.client.get(
+                reverse(
+                    'projectroles:role_create_promote',
+                    kwargs={
+                        'project': self.project.sodar_uuid,
+                        'promote_as': delegate_as_cat.sodar_uuid,
+                    },
+                )
+            )
+        self.assertEqual(response.status_code, 302)
+
+    def test_render_promote_owner(self):
+        """Test rendering for promotion with ownere role (should fail)"""
+        with self.login(self.user):
+            response = self.client.get(
+                reverse(
+                    'projectroles:role_create_promote',
+                    kwargs={
+                        'project': self.project.sodar_uuid,
+                        'promote_as': self.owner_as_cat.sodar_uuid,
+                    },
+                )
+            )
+        self.assertEqual(response.status_code, 302)
+
+    def test_post_promote(self):
+        """Test RoleAssignment creation for promoting inherited role"""
+        self.make_assignment(self.category, self.user_new, self.role_guest)
+        self.assertEqual(RoleAssignment.objects.all().count(), 3)
+        self.assertEqual(
+            self.app_alert_model.objects.filter(
+                alert_name='role_create'
+            ).count(),
+            0,
+        )
+
+        values = {
+            'project': self.project.sodar_uuid,
+            'user': self.user_new.sodar_uuid,
+            'role': self.role_contributor.pk,
+            'promote': True,
+        }
+        with self.login(self.user):
+            self.client.post(
+                reverse(
+                    'projectroles:role_create',
+                    kwargs={'project': self.project.sodar_uuid},
+                ),
+                values,
+            )
+
+        self.assertEqual(RoleAssignment.objects.all().count(), 4)
+        role_as = RoleAssignment.objects.get(
+            project=self.project, user=self.user_new
+        )
+        expected = {
+            'id': role_as.pk,
+            'project': self.project.pk,
+            'user': self.user_new.pk,
+            'role': self.role_contributor.pk,
+            'sodar_uuid': role_as.sodar_uuid,
+        }
+        self.assertEqual(model_to_dict(role_as), expected)
+
 
 class TestRoleAssignmentUpdateView(
     ProjectMixin, RoleAssignmentMixin, TestViewsBase
 ):
     """Tests for RoleAssignment update view"""
 
     def setUp(self):
         super().setUp()
-
         # Set up category and project
         self.category = self.make_project(
             'TestCategory', PROJECT_TYPE_CATEGORY, None
         )
         self.user_owner_cat = self.make_user('owner_cat')
         self.owner_as_cat = self.make_assignment(
             self.category, self.user_owner_cat, self.role_owner
         )
         self.project = self.make_project(
             'TestProject', PROJECT_TYPE_PROJECT, self.category
         )
-        self.user_owner = self.make_user('owner')
+        self.user_owner = self.make_user('user_owner')
         self.owner_as = self.make_assignment(
             self.project, self.user_owner, self.role_owner
         )
-
         # Create guest user and role
-        self.user_new = self.make_user('new_user')
+        self.user_guest = self.make_user('user_guest')
         self.role_as = self.make_assignment(
-            self.project, self.user_new, self.role_guest
+            self.project, self.user_guest, self.role_guest
         )
-
         app_alerts = get_backend_api('appalerts_backend')
         if app_alerts:
             self.app_alert_model = app_alerts.get_model()
 
     def test_render(self):
         """Test rendering of RoleAssignment updating form"""
         with self.login(self.user):
@@ -2603,24 +3041,60 @@
         self.assertEqual(response.status_code, 200)
 
         form = response.context['form']
         self.assertIsNotNone(form)
         self.assertIsInstance(form.fields['project'].widget, HiddenInput)
         self.assertEqual(form.initial['project'], self.project.sodar_uuid)
         self.assertIsInstance(form.fields['user'].widget, HiddenInput)
-        self.assertEqual(form.initial['user'], self.role_as.user.sodar_uuid)
-
-        # Assert owner role is not sectable
+        self.assertEqual(form.initial['user'], self.user_guest.sodar_uuid)
+        # Assert owner role is not selectable
         self.assertNotIn(
-            [(self.role_owner.pk, self.role_owner.name)],
+            get_role_option(self.project, self.role_owner),
             form.fields['role'].choices,
         )
         # Assert delegate role is selectable
         self.assertIn(
-            (self.role_delegate.pk, self.role_delegate.name),
+            get_role_option(self.project, self.role_delegate),
+            form.fields['role'].choices,
+        )
+        # Assert finder role is not selectable
+        self.assertNotIn(
+            get_role_option(self.project, self.role_finder),
+            form.fields['role'].choices,
+        )
+
+    def test_render_category(self):
+        """Test rendering for category"""
+        user_new = self.make_user('user_new')
+        new_as = self.make_assignment(self.category, user_new, self.role_guest)
+        with self.login(self.user):
+            response = self.client.get(
+                reverse(
+                    'projectroles:role_update',
+                    kwargs={'roleassignment': new_as.sodar_uuid},
+                )
+            )
+        self.assertEqual(response.status_code, 200)
+
+        form = response.context['form']
+        self.assertIsInstance(form.fields['project'].widget, HiddenInput)
+        self.assertEqual(form.initial['project'], self.category.sodar_uuid)
+        self.assertIsInstance(form.fields['user'].widget, HiddenInput)
+        self.assertEqual(form.initial['user'], user_new.sodar_uuid)
+        self.assertNotIn(
+            get_role_option(self.category, self.role_owner),
+            form.fields['role'].choices,
+        )
+        self.assertIn(
+            get_role_option(self.category, self.role_delegate),
+            form.fields['role'].choices,
+        )
+        # Assert finder role is selectable
+        self.assertIn(
+            get_role_option(self.category, self.role_finder),
             form.fields['role'].choices,
         )
 
     def test_render_not_found(self):
         """Test rendering with invalid assignment UUID"""
         with self.login(self.user):
             response = self.client.get(
@@ -2639,34 +3113,34 @@
                 alert_name='role_update'
             ).count(),
             0,
         )
 
         values = {
             'project': self.role_as.project.sodar_uuid,
-            'user': self.role_as.user.sodar_uuid,
+            'user': self.user_guest.sodar_uuid,
             'role': self.role_contributor.pk,
         }
         with self.login(self.user):
             response = self.client.post(
                 reverse(
                     'projectroles:role_update',
                     kwargs={'roleassignment': self.role_as.sodar_uuid},
                 ),
                 values,
             )
 
         self.assertEqual(RoleAssignment.objects.all().count(), 3)
         role_as = RoleAssignment.objects.get(
-            project=self.project, user=self.user_new
+            project=self.project, user=self.user_guest
         )
         expected = {
             'id': role_as.pk,
             'project': self.project.pk,
-            'user': self.user_new.pk,
+            'user': self.user_guest.pk,
             'role': self.role_contributor.pk,
             'sodar_uuid': role_as.sodar_uuid,
         }
         self.assertEqual(model_to_dict(role_as), expected)
         self.assertEqual(
             self.app_alert_model.objects.filter(
                 alert_name='role_update'
@@ -2681,52 +3155,51 @@
                     kwargs={'project': self.project.sodar_uuid},
                 ),
             )
 
     def test_update_delegate(self):
         """Test RoleAssignment updating to delegate"""
         self.assertEqual(RoleAssignment.objects.all().count(), 3)
-
         values = {
             'project': self.role_as.project.sodar_uuid,
-            'user': self.role_as.user.sodar_uuid,
+            'user': self.user_guest.sodar_uuid,
             'role': self.role_delegate.pk,
         }
         with self.login(self.user):
             response = self.client.post(
                 reverse(
                     'projectroles:role_update',
                     kwargs={'roleassignment': self.role_as.sodar_uuid},
                 ),
                 values,
             )
 
         self.assertEqual(response.status_code, 302)
         self.assertEqual(RoleAssignment.objects.all().count(), 3)
         role_as = RoleAssignment.objects.get(
-            project=self.project, user=self.user_new
+            project=self.project, user=self.user_guest
         )
         expected = {
             'id': role_as.pk,
             'project': self.project.pk,
-            'user': self.user_new.pk,
+            'user': self.user_guest.pk,
             'role': self.role_delegate.pk,
             'sodar_uuid': role_as.sodar_uuid,
         }
         self.assertEqual(model_to_dict(role_as), expected)
 
     def test_update_delegate_limit_reached(self):
         """Test RoleAssignment updating with exceeded delegate limit"""
         del_user = self.make_user('new_del_user')
         self.make_assignment(self.project, del_user, self.role_delegate)
         self.assertEqual(RoleAssignment.objects.all().count(), 4)
 
         values = {
             'project': self.project.sodar_uuid,
-            'user': self.user_new.sodar_uuid,
+            'user': self.user_guest.sodar_uuid,
             'role': self.role_delegate.pk,
         }
         with self.login(self.user):
             response = self.client.post(
                 reverse(
                     'projectroles:role_update',
                     kwargs={'roleassignment': self.role_as.sodar_uuid},
@@ -2734,15 +3207,15 @@
                 values,
             )
 
         self.assertEqual(response.status_code, 200)
         self.assertEqual(RoleAssignment.objects.all().count(), 4)
         self.assertEqual(
             RoleAssignment.objects.filter(
-                project=self.project, user=self.user_new
+                project=self.project, user=self.user_guest
             )
             .first()
             .role,
             self.role_guest,
         )
 
     @override_settings(PROJECTROLES_DELEGATE_LIMIT=2)
@@ -2755,15 +3228,15 @@
                 project=self.project, role=self.role_delegate
             ).count(),
             1,
         )
 
         values = {
             'project': self.project.sodar_uuid,
-            'user': self.user_new.sodar_uuid,
+            'user': self.user_guest.sodar_uuid,
             'role': self.role_delegate.pk,
         }
         with self.login(self.user):
             response = self.client.post(
                 reverse(
                     'projectroles:role_update',
                     kwargs={'roleassignment': self.role_as.sodar_uuid},
@@ -2789,15 +3262,15 @@
                 project=self.project, role=self.role_delegate
             ).count(),
             1,
         )
 
         values = {
             'project': self.project.sodar_uuid,
-            'user': self.user_new.sodar_uuid,
+            'user': self.user_guest.sodar_uuid,
             'role': self.role_delegate.pk,
         }
         with self.login(self.user):
             response = self.client.post(
                 reverse(
                     'projectroles:role_update',
                     kwargs={'roleassignment': self.role_as.sodar_uuid},
@@ -2810,235 +3283,705 @@
         self.assertEqual(
             RoleAssignment.objects.filter(
                 project=self.project, role=self.role_delegate
             ).count(),
             2,
         )
 
+    def test_render_inactive_local_role(self):
+        """Test rendering with inherited role overriding local inactive role"""
+        # Set user as category contributor
+        self.make_assignment(
+            self.category, self.user_guest, self.role_contributor
+        )
+        with self.login(self.user):
+            response = self.client.get(
+                reverse(
+                    'projectroles:role_update',
+                    kwargs={'roleassignment': self.role_as.sodar_uuid},
+                )
+            )
+        self.assertEqual(response.status_code, 200)
+        form = response.context['form']
+        # Assert only delegate role is selectable
+        self.assertEqual(len(form.fields['role'].choices), 1)
+        self.assertEqual(
+            form.fields['role'].choices[0],
+            get_role_option(self.project, self.role_delegate),
+        )
+
 
 class TestRoleAssignmentDeleteView(
     ProjectMixin, RoleAssignmentMixin, TestViewsBase
 ):
     """Tests for RoleAssignment delete view"""
 
     def setUp(self):
         super().setUp()
-
+        self.category = self.make_project(
+            'TestCategory', PROJECT_TYPE_CATEGORY, None
+        )
+        self.owner_as_cat = self.make_assignment(
+            self.category, self.user, self.role_owner
+        )
         self.project = self.make_project(
-            'TestProject', PROJECT_TYPE_PROJECT, None
+            'TestProject', PROJECT_TYPE_PROJECT, self.category
         )
         self.owner_as = self.make_assignment(
             self.project, self.user, self.role_owner
         )
         # Create guest user and role
-        self.user_new = self.make_user('guest')
-        self.role_as = self.make_assignment(
-            self.project, self.user_new, self.role_guest
+        self.user_contrib = self.make_user('user_contrib')
+        self.contrib_as = self.make_assignment(
+            self.project, self.user_contrib, self.role_contributor
+        )
+        self.user_new = self.make_user('user_new')
+        self.app_alerts = get_backend_api('appalerts_backend')
+        self.app_alert_model = self.app_alerts.get_model()
+
+    def test_render(self):
+        """Test rendering RoleAssignment deletion confirmation form"""
+        with self.login(self.user):
+            response = self.client.get(
+                reverse(
+                    'projectroles:role_delete',
+                    kwargs={'roleassignment': self.contrib_as.sodar_uuid},
+                )
+            )
+        self.assertEqual(response.status_code, 200)
+        self.assertIsNone(response.context['inherited_as'])
+        self.assertEqual(response.context['inherited_children'], [])
+
+    def test_render_inherit(self):
+        """Test rendering for user with inherited role"""
+        inh_as = self.make_assignment(
+            self.category, self.user_contrib, self.role_guest
         )
+        with self.login(self.user):
+            response = self.client.get(
+                reverse(
+                    'projectroles:role_delete',
+                    kwargs={'roleassignment': self.contrib_as.sodar_uuid},
+                )
+            )
+        self.assertEqual(response.status_code, 200)
+        self.assertEqual(response.context['inherited_as'], inh_as)
+        self.assertIsNone(response.context['inherited_children'])
 
-        app_alerts = get_backend_api('appalerts_backend')
-        if app_alerts:
-            self.app_alert_model = app_alerts.get_model()
+    def test_render_children(self):
+        """Test rendering for user with inherited child roles to be removed"""
+        inh_as = self.make_assignment(
+            self.category, self.user_new, self.role_guest
+        )
+        with self.login(self.user):
+            response = self.client.get(
+                reverse(
+                    'projectroles:role_delete',
+                    kwargs={'roleassignment': inh_as.sodar_uuid},
+                )
+            )
+        self.assertEqual(response.status_code, 200)
+        self.assertIsNone(response.context['inherited_as'])
+        self.assertEqual(response.context['inherited_children'], [self.project])
 
-    def test_render(self):
-        """Test rendering of the RoleAssignment deletion confirmation form"""
+    def test_render_children_finder(self):
+        """Test rendering for finder user with inherited child roles"""
+        inh_as = self.make_assignment(
+            self.category, self.user_new, self.role_finder
+        )
         with self.login(self.user):
             response = self.client.get(
                 reverse(
                     'projectroles:role_delete',
-                    kwargs={'roleassignment': self.role_as.sodar_uuid},
+                    kwargs={'roleassignment': inh_as.sodar_uuid},
                 )
             )
         self.assertEqual(response.status_code, 200)
+        self.assertIsNone(response.context['inherited_as'])
+        self.assertIsNone(response.context['inherited_children'])
 
     def test_render_not_found(self):
         """Test rendering with invalid assignment UUID"""
         with self.login(self.user):
             response = self.client.get(
                 reverse(
                     'projectroles:role_delete',
                     kwargs={'roleassignment': INVALID_UUID},
                 )
             )
         self.assertEqual(response.status_code, 404)
 
-    def test_delete_assignment(self):
+    def test_delete(self):
         """Test RoleAssignment deleting"""
-        self.assertEqual(RoleAssignment.objects.all().count(), 2)
+        alert = self.app_alerts.add_alert(
+            'projectroles',
+            'test_alert',
+            self.user_contrib,
+            'test',
+            project=self.project,
+        )
+        self.assertEqual(alert.active, True)
+        self.assertEqual(RoleAssignment.objects.all().count(), 3)
         self.assertEqual(
             self.app_alert_model.objects.filter(
                 alert_name='role_delete'
             ).count(),
             0,
         )
-
+        self.assertEqual(len(mail.outbox), 0)
         with self.login(self.user):
             response = self.client.post(
                 reverse(
                     'projectroles:role_delete',
-                    kwargs={'roleassignment': self.role_as.sodar_uuid},
+                    kwargs={'roleassignment': self.contrib_as.sodar_uuid},
                 )
             )
-
-        self.assertEqual(RoleAssignment.objects.all().count(), 1)
-        self.assertEqual(
-            self.app_alert_model.objects.filter(
-                alert_name='role_delete'
-            ).count(),
-            1,
-        )
-        with self.login(self.user):
             self.assertRedirects(
                 response,
                 reverse(
                     'projectroles:roles',
                     kwargs={'project': self.project.sodar_uuid},
                 ),
             )
+        self.assertEqual(RoleAssignment.objects.all().count(), 2)
+        self.assertEqual(
+            self.app_alert_model.objects.filter(
+                alert_name='role_delete'
+            ).count(),
+            1,
+        )
+        alert.refresh_from_db()
+        self.assertEqual(alert.active, False)
+        self.assertEqual(len(mail.outbox), 1)
 
     def test_delete_owner(self):
         """Test RoleAssignment owner deletion (should fail)"""
-        owner_user = self.make_user('owner_user')
-        self.owner_as.user = owner_user  # Not a superuser
+        user_owner = self.make_user('user_owner')
+        self.owner_as.user = user_owner  # Not a superuser
         self.owner_as.save()
-        self.assertEqual(RoleAssignment.objects.all().count(), 2)
-
-        with self.login(owner_user):
+        self.assertEqual(RoleAssignment.objects.all().count(), 3)
+        self.assertEqual(len(mail.outbox), 0)
+        with self.login(user_owner):
             response = self.client.post(
                 reverse(
                     'projectroles:role_delete',
                     kwargs={'roleassignment': self.owner_as.sodar_uuid},
                 )
             )
         self.assertEqual(response.status_code, 302)
-        self.assertEqual(RoleAssignment.objects.all().count(), 2)
+        self.assertEqual(RoleAssignment.objects.all().count(), 3)
+        self.assertEqual(len(mail.outbox), 0)
 
     def test_delete_delegate(self):
         """Test RoleAssignment delegate deleting by contributor (should fail)"""
-        contrib_user = self.make_user('contrib_user')
-        self.make_assignment(self.project, contrib_user, self.role_contributor)
         self.assertEqual(RoleAssignment.objects.all().count(), 3)
-
-        with self.login(contrib_user):
+        with self.login(self.user_contrib):
             response = self.client.post(
                 reverse(
                     'projectroles:role_delete',
-                    kwargs={'roleassignment': self.role_as.sodar_uuid},
+                    kwargs={'roleassignment': self.contrib_as.sodar_uuid},
                 )
             )
         self.assertEqual(response.status_code, 302)
         self.assertEqual(RoleAssignment.objects.all().count(), 3)
 
+    def test_delete_inherit(self):
+        """Test RoleAssignment deleting with remaining inherited role"""
+        self.make_assignment(self.category, self.user_contrib, self.role_guest)
+        self.assertEqual(RoleAssignment.objects.all().count(), 4)
+        alert = self.app_alerts.add_alert(
+            'projectroles',
+            'test_alert',
+            self.user_contrib,
+            'test',
+            project=self.project,
+        )
+        self.assertEqual(alert.active, True)
+        with self.login(self.user):
+            self.client.post(
+                reverse(
+                    'projectroles:role_delete',
+                    kwargs={'roleassignment': self.contrib_as.sodar_uuid},
+                )
+            )
+        self.assertEqual(RoleAssignment.objects.all().count(), 3)
+        self.assertEqual(
+            self.app_alert_model.objects.filter(
+                alert_name='role_update'
+            ).count(),
+            1,
+        )
+        self.assertEqual(
+            self.app_alert_model.objects.filter(
+                alert_name='role_delete'
+            ).count(),
+            0,
+        )
+        alert.refresh_from_db()
+        self.assertEqual(alert.active, True)
+
+    def test_delete_children(self):
+        """Test RoleAssignment deleting with child categories or projects"""
+        new_as = self.make_assignment(
+            self.category, self.user_new, self.role_guest
+        )
+        self.assertEqual(RoleAssignment.objects.all().count(), 4)
+        alert = self.app_alerts.add_alert(
+            'projectroles',
+            'test_alert',
+            self.user_new,
+            'test',
+            project=self.project,  # NOTE: Setting for child project
+        )
+        self.assertEqual(alert.active, True)
+        with self.login(self.user):
+            self.client.post(
+                reverse(
+                    'projectroles:role_delete',
+                    kwargs={'roleassignment': new_as.sodar_uuid},
+                )
+            )
+        self.assertEqual(RoleAssignment.objects.all().count(), 3)
+        self.assertEqual(
+            self.app_alert_model.objects.filter(
+                alert_name='role_update'
+            ).count(),
+            0,
+        )
+        self.assertEqual(
+            self.app_alert_model.objects.filter(
+                alert_name='role_delete'
+            ).count(),
+            1,
+        )
+        alert.refresh_from_db()
+        self.assertEqual(alert.active, False)
+
+    def test_delete_app_settings_contributor(self):
+        """Test deletion of project-user app settings after RoleAssignment contributor deletion"""
+        self.assertEqual(RoleAssignment.objects.all().count(), 3)
+        app_settings.set(
+            app_name=EXAMPLE_APP_NAME,
+            setting_name='project_user_bool_setting',
+            project=self.project,
+            user=self.user,
+            value=True,
+        )
+        self.assertIsNotNone(
+            app_settings.get(
+                EXAMPLE_APP_NAME,
+                'project_user_bool_setting',
+                self.project,
+                self.user_contrib,
+            )
+        )
+        with self.login(self.user):
+            self.client.post(
+                reverse(
+                    'projectroles:role_delete',
+                    kwargs={'roleassignment': self.contrib_as.sodar_uuid},
+                )
+            )
+        self.assertEqual(RoleAssignment.objects.all().count(), 2)
+        self.assertEqual(
+            app_settings.get(
+                EXAMPLE_APP_NAME,
+                'project_user_bool_setting',
+                self.project,
+                self.user_contrib,
+            ),
+            False,
+        )
+
+    def test_delete_app_settings_inherit(self):
+        """Test deleting project-user app setting after role delete with inherited role"""
+        self.make_assignment(self.category, self.user_contrib, self.role_guest)
+        self.assertEqual(RoleAssignment.objects.all().count(), 4)
+        app_settings.set(
+            app_name=EXAMPLE_APP_NAME,
+            setting_name='project_user_bool_setting',
+            project=self.project,
+            user=self.user,
+            value=True,
+        )
+        self.assertIsNotNone(
+            app_settings.get(
+                EXAMPLE_APP_NAME,
+                'project_user_bool_setting',
+                self.project,
+                self.user_contrib,
+            )
+        )
+        with self.login(self.user):
+            self.client.post(
+                reverse(
+                    'projectroles:role_delete',
+                    kwargs={'roleassignment': self.contrib_as.sodar_uuid},
+                )
+            )
+        self.assertEqual(RoleAssignment.objects.all().count(), 3)
+        self.assertEqual(
+            app_settings.get(
+                EXAMPLE_APP_NAME,
+                'project_user_bool_setting',
+                self.project,
+                self.user_contrib,
+            ),
+            False,
+        )
+
+    def test_delete_app_settings_children(self):
+        """Test deleting project-user app setting after role delete with child categories or projects"""
+        new_as = self.make_assignment(
+            self.category, self.user_new, self.role_guest
+        )
+        self.assertEqual(RoleAssignment.objects.all().count(), 4)
+        app_settings.set(
+            app_name=EXAMPLE_APP_NAME,
+            setting_name='project_user_bool_setting',
+            project=self.project,
+            user=self.user,
+            value=True,
+        )
+        self.assertIsNotNone(
+            app_settings.get(
+                EXAMPLE_APP_NAME,
+                'project_user_bool_setting',
+                self.project,
+                self.user_new,
+            )
+        )
+        with self.login(self.user):
+            self.client.post(
+                reverse(
+                    'projectroles:role_delete',
+                    kwargs={'roleassignment': new_as.sodar_uuid},
+                )
+            )
+        self.assertEqual(RoleAssignment.objects.all().count(), 3)
+        self.assertEqual(
+            app_settings.get(
+                EXAMPLE_APP_NAME,
+                'project_user_bool_setting',
+                self.project,
+                self.user_new,
+            ),
+            False,
+        )
+
 
 class TestRoleAssignmentOwnerTransferView(
     ProjectMixin, RoleAssignmentMixin, TestViewsBase
 ):
     def setUp(self):
         super().setUp()
-
         # Set up category and project
         self.category = self.make_project(
             'TestCategory', PROJECT_TYPE_CATEGORY, None
         )
-        self.user_owner_cat = self.make_user('owner_cat')
+        self.user_owner_cat = self.make_user('user_owner_cat')
         self.owner_as_cat = self.make_assignment(
             self.category, self.user_owner_cat, self.role_owner
         )
         self.project = self.make_project(
             'TestProject', PROJECT_TYPE_PROJECT, self.category
         )
-        self.user_owner = self.make_user('owner')
+        self.user_owner = self.make_user('user_owner')
         self.owner_as = self.make_assignment(
             self.project, self.user_owner, self.role_owner
         )
         # Create guest user and role
-        self.user_new = self.make_user('guest')
+        self.user_guest = self.make_user('user_guest')
         self.role_as = self.make_assignment(
-            self.project, self.user_new, self.role_guest
+            self.project, self.user_guest, self.role_guest
         )
-
+        # User without roles
+        self.user_new = self.make_user('user_new')
         app_alerts = get_backend_api('appalerts_backend')
-        if app_alerts:
-            self.app_alert_model = app_alerts.get_model()
+        self.app_alert_model = app_alerts.get_model()
+
+    def test_render(self):
+        """Test rendering ownership transfer form"""
+        self.assertEqual(self.app_alert_model.objects.count(), 0)
+        self.assertEqual(len(mail.outbox), 0)
+        with self.login(self.user):
+            response = self.client.get(
+                reverse(
+                    'projectroles:role_owner_transfer',
+                    kwargs={'project': self.project.sodar_uuid},
+                )
+            )
+        self.assertEqual(response.status_code, 200)
+        form = response.context['form']
+        self.assertIsNotNone(form.fields.get('old_owner_role'))
+        self.assertEqual(len(form.fields['old_owner_role'].choices), 3)
+        # Assert finder role is not selectable
+        self.assertNotIn(
+            self.role_finder.pk,
+            [c[0] for c in form.fields['old_owner_role'].choices],
+        )
+
+    def test_render_old_inherited_member(self):
+        """Test rendering with inherited non-owner role for old owner"""
+        self.make_assignment(
+            self.category, self.user_owner, self.role_contributor
+        )
+        self.assertEqual(self.project.get_role(self.user_owner), self.owner_as)
+        with self.login(self.user):
+            response = self.client.get(
+                reverse(
+                    'projectroles:role_owner_transfer',
+                    kwargs={'project': self.project.sodar_uuid},
+                )
+            )
+        self.assertEqual(response.status_code, 200)
+        form = response.context['form']
+        # Only delegate and contributor roles allowed
+        self.assertEqual(
+            [c[0] for c in form.fields['old_owner_role'].choices],
+            [self.role_delegate.pk, self.role_contributor.pk],
+        )
+        self.assertEqual(form.fields['old_owner_role'].disabled, False)
+
+    def test_render_old_inherited_owner(self):
+        """Test rendering with inherited owner role for old owner"""
+        self.owner_as_cat.user = self.user_owner
+        self.owner_as_cat.save()
+        self.assertEqual(self.project.get_role(self.user_owner), self.owner_as)
+        with self.login(self.user):
+            response = self.client.get(
+                reverse(
+                    'projectroles:role_owner_transfer',
+                    kwargs={'project': self.project.sodar_uuid},
+                )
+            )
+        self.assertEqual(response.status_code, 200)
+        form = response.context['form']
+        # Only owner role included
+        self.assertEqual(len(form.fields['old_owner_role'].choices), 1)
+        self.assertEqual(
+            form.fields['old_owner_role'].choices[0][0], self.role_owner.pk
+        )
+        self.assertEqual(form.fields['old_owner_role'].disabled, True)
+
+    def test_render_category(self):
+        """Test rendering for category"""
+        self.make_assignment(self.category, self.user_new, self.role_guest)
+        with self.login(self.user):
+            response = self.client.get(
+                reverse(
+                    'projectroles:role_owner_transfer',
+                    kwargs={'project': self.category.sodar_uuid},
+                )
+            )
+        self.assertEqual(response.status_code, 200)
+        form = response.context['form']
+        self.assertIsNotNone(form.fields.get('old_owner_role'))
+        self.assertEqual(len(form.fields['old_owner_role'].choices), 4)
+        # Assert finder role is selectable
+        self.assertIn(
+            self.role_finder.pk,
+            [c[0] for c in form.fields['old_owner_role'].choices],
+        )
 
-    def test_transfer_ownership(self):
+    def test_transfer(self):
         """Test ownership transfer"""
+        self.assertEqual(self.app_alert_model.objects.count(), 0)
+        self.assertEqual(len(mail.outbox), 0)
         with self.login(self.user):
             response = self.client.post(
                 reverse(
                     'projectroles:role_owner_transfer',
                     kwargs={'project': self.project.sodar_uuid},
                 ),
                 data={
                     'project': self.project.sodar_uuid,
+                    'new_owner': self.user_guest.sodar_uuid,
                     'old_owner_role': self.role_guest.pk,
-                    'new_owner': self.user_new.sodar_uuid,
                 },
             )
-
         self.assertEqual(response.status_code, 302)
-        self.assertEqual(self.project.get_owner().user, self.user_new)
+        self.assertEqual(self.project.get_owner().user, self.user_guest)
         self.assertEqual(
             RoleAssignment.objects.get(
                 project=self.project, user=self.user_owner
             ).role,
             self.role_guest,
         )
         self.assertEqual(self.app_alert_model.objects.count(), 2)
         self.assertEqual(len(mail.outbox), 2)
 
     def test_transfer_as_old_owner(self):
-        """Test ownership transfer as old owner (should only create one mail)"""
+        """Test ownership transfer as old owner"""
         with self.login(self.user_owner):
             response = self.client.post(
                 reverse(
                     'projectroles:role_owner_transfer',
                     kwargs={'project': self.project.sodar_uuid},
                 ),
                 data={
                     'project': self.project.sodar_uuid,
+                    'new_owner': self.user_guest.sodar_uuid,
                     'old_owner_role': self.role_guest.pk,
-                    'new_owner': self.user_new.sodar_uuid,
                 },
             )
-
         self.assertEqual(response.status_code, 302)
-        self.assertEqual(self.project.get_owner().user, self.user_new)
+        self.assertEqual(self.project.get_owner().user, self.user_guest)
         self.assertEqual(
             RoleAssignment.objects.get(
                 project=self.project, user=self.user_owner
             ).role,
             self.role_guest,
         )
+        # Should only create one alert/mail for new owner
         self.assertEqual(self.app_alert_model.objects.count(), 1)
         self.assertEqual(len(mail.outbox), 1)
 
-    def test_transfer_ownership_inherited(self):
-        """Test ownership transfer to an inherited owner"""
+    def test_transfer_old_inherited_member(self):
+        """Test transfer from old owner with inherited non-owner role"""
+        self.make_assignment(
+            self.category, self.user_owner, self.role_contributor
+        )
+        self.assertEqual(self.project.get_role(self.user_owner), self.owner_as)
         with self.login(self.user):
             response = self.client.post(
                 reverse(
                     'projectroles:role_owner_transfer',
                     kwargs={'project': self.project.sodar_uuid},
                 ),
                 data={
                     'project': self.project.sodar_uuid,
-                    'old_owner_role': self.role_guest.pk,
-                    'new_owner': self.user_owner_cat.sodar_uuid,
+                    'new_owner': self.user_guest.sodar_uuid,
+                    'old_owner_role': self.role_contributor.pk,
+                },
+            )
+        self.assertEqual(response.status_code, 302)
+        self.assertEqual(self.project.get_owner().user, self.user_guest)
+        self.owner_as.refresh_from_db()
+        self.assertEqual(self.project.get_role(self.user_owner), self.owner_as)
+        self.assertEqual(self.owner_as.role, self.role_contributor)
+        self.assertEqual(self.app_alert_model.objects.count(), 2)
+        self.assertEqual(len(mail.outbox), 2)
+
+    def test_transfer_old_inherited_owner(self):
+        """Test transfer from old owner with inherited owner role"""
+        self.owner_as_cat.user = self.user_owner
+        self.owner_as_cat.save()
+        self.assertEqual(self.project.get_role(self.user_owner), self.owner_as)
+        with self.login(self.user):
+            response = self.client.post(
+                reverse(
+                    'projectroles:role_owner_transfer',
+                    kwargs={'project': self.project.sodar_uuid},
+                ),
+                data={
+                    'project': self.project.sodar_uuid,
+                    'new_owner': self.user_guest.sodar_uuid,
+                    'old_owner_role': self.role_owner.pk,
+                },
+            )
+        self.assertEqual(response.status_code, 302)
+        self.assertEqual(self.project.get_owner().user, self.user_guest)
+        self.assertIsNone(
+            RoleAssignment.objects.filter(
+                project=self.project, user=self.user_owner
+            ).first()
+        )
+        self.assertEqual(
+            self.project.get_role(self.user_owner), self.owner_as_cat
+        )
+        self.assertEqual(self.owner_as.role, self.role_owner)
+        # No alert or message for old owner as they are still owner
+        self.assertEqual(self.app_alert_model.objects.count(), 1)
+        self.assertEqual(len(mail.outbox), 1)
+
+    def test_transfer_new_inherited_member(self):
+        """Test transfer to new owner with inherited non-owner role"""
+        self.make_assignment(
+            self.category, self.user_new, self.role_contributor
+        )
+        self.assertEqual(self.project.get_role(self.user_owner), self.owner_as)
+        with self.login(self.user):
+            response = self.client.post(
+                reverse(
+                    'projectroles:role_owner_transfer',
+                    kwargs={'project': self.project.sodar_uuid},
+                ),
+                data={
+                    'project': self.project.sodar_uuid,
+                    'new_owner': self.user_new.sodar_uuid,
+                    'old_owner_role': self.role_contributor.pk,
                 },
             )
+        self.assertEqual(response.status_code, 302)
+        self.assertEqual(self.project.get_owner().user, self.user_new)
+        self.owner_as.refresh_from_db()
+        self.assertEqual(self.project.get_role(self.user_owner), self.owner_as)
+        self.assertEqual(self.owner_as.role, self.role_contributor)
+        self.assertEqual(self.app_alert_model.objects.count(), 2)
+        self.assertEqual(len(mail.outbox), 2)
 
+    def test_transfer_new_inherited_owner(self):
+        """Test transfer to new owner with inherited owner role"""
+        self.assertEqual(
+            self.project.get_role(self.user_owner_cat), self.owner_as_cat
+        )
+        self.assertEqual(self.project.get_role(self.user_owner), self.owner_as)
+        with self.login(self.user):
+            response = self.client.post(
+                reverse(
+                    'projectroles:role_owner_transfer',
+                    kwargs={'project': self.project.sodar_uuid},
+                ),
+                data={
+                    'project': self.project.sodar_uuid,
+                    'new_owner': self.user_owner_cat.sodar_uuid,
+                    'old_owner_role': self.role_contributor.pk,
+                },
+            )
         self.assertEqual(response.status_code, 302)
         self.assertEqual(self.project.get_owner().user, self.user_owner_cat)
+        self.owner_as.refresh_from_db()
+        self.assertEqual(self.project.get_role(self.user_owner), self.owner_as)
+        self.assertEqual(self.owner_as.role, self.role_contributor)
         self.assertEqual(
+            self.project.get_role(self.user_owner_cat),
             RoleAssignment.objects.get(
-                project=self.project, user=self.user_owner
-            ).role,
-            self.role_guest,
+                project=self.project,
+                user=self.user_owner_cat,
+                role=self.role_owner,
+            ),
         )
+        self.assertEqual(self.app_alert_model.objects.count(), 1)
+        self.assertEqual(len(mail.outbox), 1)
+
+    def test_transfer_new_local_role(self):
+        """Test transfer to new owner with overridden local role"""
+        new_as = self.make_assignment(
+            self.project, self.user_new, self.role_contributor
+        )
+        self.assertEqual(self.project.get_role(self.user_owner), self.owner_as)
+        with self.login(self.user):
+            response = self.client.post(
+                reverse(
+                    'projectroles:role_owner_transfer',
+                    kwargs={'project': self.project.sodar_uuid},
+                ),
+                data={
+                    'project': self.project.sodar_uuid,
+                    'new_owner': self.user_new.sodar_uuid,
+                    'old_owner_role': self.role_contributor.pk,
+                },
+            )
+        self.assertEqual(response.status_code, 302)
+        self.assertEqual(self.project.get_owner().user, self.user_new)
+        self.assertEqual(self.project.get_owner(), new_as)
+        self.owner_as.refresh_from_db()
+        self.assertEqual(self.project.get_role(self.user_owner), self.owner_as)
+        self.assertEqual(self.owner_as.role, self.role_contributor)
         self.assertEqual(self.app_alert_model.objects.count(), 2)
         self.assertEqual(len(mail.outbox), 2)
 
 
 class TestProjectInviteCreateView(
     ProjectMixin, RoleAssignmentMixin, ProjectInviteMixin, TestViewsBase
 ):
@@ -3048,79 +3991,179 @@
         super().setUp()
         self.project = self.make_project(
             'TestProject', PROJECT_TYPE_PROJECT, None
         )
         self.owner_as = self.make_assignment(
             self.project, self.user, self.role_owner
         )
-        self.new_user = self.make_user('new_user')
+        self.user_new = self.make_user('user_new')
 
     def test_render(self):
         """Test rendering ProjectInvite creation form"""
-        with self.login(self.owner_as.user):
+        with self.login(self.user):
             response = self.client.get(
                 reverse(
                     'projectroles:invite_create',
                     kwargs={'project': self.project.sodar_uuid},
                 )
             )
         self.assertEqual(response.status_code, 200)
 
         form = response.context['form']
         self.assertIsNotNone(form)
         # Assert owner role is not selectable
         self.assertNotIn(
-            [(self.role_owner.pk, self.role_owner.name)],
+            get_role_option(self.project, self.role_owner),
             form.fields['role'].choices,
         )
 
     def test_render_from_roleassignment(self):
         """Test rendering with forwarded values from RoleAssignment Form"""
         values = {
             'e': 'test@example.com',
             'r': self.role_contributor.pk,
         }
-        with self.login(self.owner_as.user):
+        with self.login(self.user):
             response = self.client.get(
                 reverse(
                     'projectroles:invite_create',
                     kwargs={'project': self.project.sodar_uuid},
                 ),
                 values,
             )
         self.assertEqual(response.status_code, 200)
 
         form = response.context['form']
         self.assertIsNotNone(form)
         # Assert owner role is not selectable
         self.assertNotIn(
-            [(self.role_owner.pk, self.role_owner.name)],
+            get_role_option(self.project, self.role_owner),
             form.fields['role'].choices,
         )
         # Assert forwarded mail address and role have been set in the form
         self.assertEqual(
             form.fields['role'].initial, str(self.role_contributor.pk)
         )
         self.assertEqual(form.fields['email'].initial, 'test@example.com')
 
     def test_render_not_found(self):
         """Test rendering with invalid project UUID"""
-        with self.login(self.owner_as.user):
+        with self.login(self.user):
             response = self.client.get(
                 reverse(
                     'projectroles:invite_create',
                     kwargs={'project': INVALID_UUID},
                 )
             )
         self.assertEqual(response.status_code, 404)
 
+    @override_settings(
+        PROJECTROLES_ALLOW_LOCAL_USERS=False,
+        ENABLE_SAML=False,
+    )
+    def test_local_users_not_allowed(self):
+        """Test creation for local user with local users not allowed"""
+        values = {
+            'email': INVITE_EMAIL,
+            'project': self.project.pk,
+            'role': self.role_contributor.pk,
+        }
+        with self.login(self.user):
+            response = self.client.post(
+                reverse(
+                    'projectroles:invite_create',
+                    kwargs={'project': self.project.sodar_uuid},
+                ),
+                values,
+            )
+        self.assertEqual(response.status_code, 200)
+        self.assertEqual(ProjectInvite.objects.all().count(), 0)
+
+    @override_settings(
+        PROJECTROLES_ALLOW_LOCAL_USERS=True,
+        ENABLE_SAML=False,
+    )
+    def test_local_users_allowed(self):
+        """Test creation for local user with local users allowed"""
+        values = {
+            'email': INVITE_EMAIL,
+            'project': self.project.pk,
+            'role': self.role_contributor.pk,
+        }
+        with self.login(self.user):
+            response = self.client.post(
+                reverse(
+                    'projectroles:invite_create',
+                    kwargs={'project': self.project.sodar_uuid},
+                ),
+                values,
+            )
+        self.assertEqual(response.status_code, 302)
+        invite = ProjectInvite.objects.get(
+            project=self.project, email=INVITE_EMAIL, active=True
+        )
+        self.assertIsNotNone(invite)
+
+    @override_settings(
+        PROJECTROLES_ALLOW_LOCAL_USERS=False,
+        ENABLE_SAML=False,
+        ENABLE_LDAP=True,
+        AUTH_LDAP_USERNAME_DOMAIN='EXAMPLE',
+    )
+    def test_local_users_email_domain(self):
+        """Test creation for local user with email domain in AUTH_LDAP_USERNAME_DOMAIN"""
+        values = {
+            'email': INVITE_EMAIL,
+            'project': self.project.pk,
+            'role': self.role_contributor.pk,
+        }
+        with self.login(self.user):
+            response = self.client.post(
+                reverse(
+                    'projectroles:invite_create',
+                    kwargs={'project': self.project.sodar_uuid},
+                ),
+                values,
+            )
+        self.assertEqual(response.status_code, 302)
+        invite = ProjectInvite.objects.get(
+            project=self.project, email=INVITE_EMAIL, active=True
+        )
+        self.assertIsNotNone(invite)
+
+    @override_settings(
+        PROJECTROLES_ALLOW_LOCAL_USERS=False,
+        ENABLE_SAML=False,
+        ENABLE_LDAP=True,
+        LDAP_ALT_DOMAINS=['example.com'],
+    )
+    def test_local_users_email_domain_ldap(self):
+        """Test creation for local user with email domain in LDAP_ALT_DOMAINS"""
+        values = {
+            'email': INVITE_EMAIL,
+            'project': self.project.pk,
+            'role': self.role_contributor.pk,
+        }
+        with self.login(self.user):
+            response = self.client.post(
+                reverse(
+                    'projectroles:invite_create',
+                    kwargs={'project': self.project.sodar_uuid},
+                ),
+                values,
+            )
+        self.assertEqual(response.status_code, 302)
+        invite = ProjectInvite.objects.get(
+            project=self.project, email=INVITE_EMAIL, active=True
+        )
+        self.assertIsNotNone(invite)
+
     def test_create_invite(self):
         """Test ProjectInvite creation"""
         self.assertEqual(ProjectInvite.objects.all().count(), 0)
-
         values = {
             'email': INVITE_EMAIL,
             'project': self.project.pk,
             'role': self.role_contributor.pk,
         }
         with self.login(self.user):
             response = self.client.post(
@@ -3132,29 +4175,27 @@
             )
 
         self.assertEqual(ProjectInvite.objects.all().count(), 1)
         invite = ProjectInvite.objects.get(
             project=self.project, email=INVITE_EMAIL, active=True
         )
         self.assertIsNotNone(invite)
-
         expected = {
             'id': invite.pk,
             'project': self.project.pk,
             'email': INVITE_EMAIL,
             'role': self.role_contributor.pk,
             'issuer': self.user.pk,
             'message': '',
             'date_expire': invite.date_expire,
             'secret': invite.secret,
             'active': True,
             'sodar_uuid': invite.sodar_uuid,
         }
         self.assertEqual(model_to_dict(invite), expected)
-
         # Assert redirect
         with self.login(self.user):
             self.assertRedirects(
                 response,
                 reverse(
                     'projectroles:invites',
                     kwargs={'project': self.project.sodar_uuid},
@@ -3171,38 +4212,37 @@
         super().setUp()
         self.project = self.make_project(
             'TestProject', PROJECT_TYPE_PROJECT, None
         )
         self.owner_as = self.make_assignment(
             self.project, self.user, self.role_owner
         )
-        self.new_user = self.make_user('new_user')
+        self.user_new = self.make_user('user_new')
 
-    @override_settings(AUTH_LDAP_USERNAME_DOMAIN='EXAMPLE')
-    @override_settings(ENABLE_LDAP=True)
+    @override_settings(ENABLE_LDAP=True, AUTH_LDAP_USERNAME_DOMAIN='EXAMPLE')
     def test_accept_ldap(self):
-        """Test accepting an LDAP invite"""
+        """Test accepting LDAP invite"""
         invite = self.make_invite(
             email=INVITE_EMAIL,
             project=self.project,
             role=self.role_contributor,
             issuer=self.user,
             message='',
         )
         self.assertEqual(ProjectInvite.objects.filter(active=True).count(), 1)
         self.assertEqual(
             RoleAssignment.objects.filter(
                 project=self.project,
-                user=self.new_user,
+                user=self.user_new,
                 role=self.role_contributor,
             ).count(),
             0,
         )
 
-        with self.login(self.new_user):
+        with self.login(self.user_new):
             response = self.client.get(
                 reverse(
                     'projectroles:invite_accept',
                     kwargs={'secret': invite.secret},
                 ),
                 follow=True,
             )
@@ -3226,43 +4266,47 @@
                 ),
             ],
         )
         self.assertEqual(ProjectInvite.objects.filter(active=True).count(), 0)
         self.assertEqual(
             RoleAssignment.objects.filter(
                 project=self.project,
-                user=self.new_user,
+                user=self.user_new,
                 role=self.role_contributor,
             ).count(),
             1,
         )
 
-    @override_settings(AUTH_LDAP_USERNAME_DOMAIN='EXAMPLE')
-    @override_settings(ENABLE_LDAP=True)
-    def test_accept_ldap_expired(self):
-        """Test accepting an expired LDAP invite"""
+    @override_settings(
+        AUTH_LDAP_USERNAME_DOMAIN='EXAMPLE',
+        ENABLE_LDAP=True,
+        LDAP_ALT_DOMAINS=['alt.org'],
+        PROJECTROLES_ALLOW_LOCAL_USERS=False,
+    )
+    def test_accept_ldap_alt(self):
+        """Test accepting LDAP invite with email in LDAP_ALT_DOMAINS"""
+        alt_email = 'user@alt.org'
         invite = self.make_invite(
-            email=INVITE_EMAIL,
+            email=alt_email,
             project=self.project,
             role=self.role_contributor,
             issuer=self.user,
             message='',
-            date_expire=timezone.now(),
         )
         self.assertEqual(ProjectInvite.objects.filter(active=True).count(), 1)
         self.assertEqual(
             RoleAssignment.objects.filter(
                 project=self.project,
-                user=self.new_user,
+                user=self.user_new,
                 role=self.role_contributor,
             ).count(),
             0,
         )
 
-        with self.login(self.new_user):
+        with self.login(self.user_new):
             response = self.client.get(
                 reverse(
                     'projectroles:invite_accept',
                     kwargs={'secret': invite.secret},
                 ),
                 follow=True,
             )
@@ -3274,32 +4318,134 @@
                     reverse(
                         'projectroles:invite_process_ldap',
                         kwargs={'secret': invite.secret},
                     ),
                     302,
                 ),
                 (
-                    reverse('home'),
+                    reverse(
+                        'projectroles:detail',
+                        kwargs={'project': self.project.sodar_uuid},
+                    ),
+                    302,
+                ),
+            ],
+        )
+        self.assertEqual(ProjectInvite.objects.filter(active=True).count(), 0)
+        self.assertEqual(
+            RoleAssignment.objects.filter(
+                project=self.project,
+                user=self.user_new,
+                role=self.role_contributor,
+            ).count(),
+            1,
+        )
+
+    @override_settings(
+        AUTH_LDAP_USERNAME_DOMAIN='EXAMPLE',
+        ENABLE_LDAP=True,
+        LDAP_ALT_DOMAINS=[],
+        PROJECTROLES_ALLOW_LOCAL_USERS=False,
+    )
+    def test_accept_ldap_alt_not_listed(self):
+        """Test accepting LDAP invite with alt email not in LDAP_ALT_DOMAINS"""
+        alt_email = 'user@alt.org'
+        invite = self.make_invite(
+            email=alt_email,
+            project=self.project,
+            role=self.role_contributor,
+            issuer=self.user,
+            message='',
+        )
+        self.assertEqual(ProjectInvite.objects.filter(active=True).count(), 1)
+        self.assertEqual(
+            RoleAssignment.objects.filter(
+                project=self.project,
+                user=self.user_new,
+                role=self.role_contributor,
+            ).count(),
+            0,
+        )
+
+        with self.login(self.user_new):
+            response = self.client.get(
+                reverse(
+                    'projectroles:invite_accept',
+                    kwargs={'secret': invite.secret},
+                ),
+                follow=True,
+            )
+
+        self.assertListEqual(response.redirect_chain, [(reverse('home'), 302)])
+        self.assertEqual(ProjectInvite.objects.filter(active=True).count(), 1)
+        self.assertEqual(
+            RoleAssignment.objects.filter(
+                project=self.project,
+                user=self.user_new,
+                role=self.role_contributor,
+            ).count(),
+            0,
+        )
+
+    @override_settings(AUTH_LDAP_USERNAME_DOMAIN='EXAMPLE', ENABLE_LDAP=True)
+    def test_accept_ldap_expired(self):
+        """Test accepting expired LDAP invite"""
+        invite = self.make_invite(
+            email=INVITE_EMAIL,
+            project=self.project,
+            role=self.role_contributor,
+            issuer=self.user,
+            message='',
+            date_expire=timezone.now(),
+        )
+        self.assertEqual(ProjectInvite.objects.filter(active=True).count(), 1)
+        self.assertEqual(
+            RoleAssignment.objects.filter(
+                project=self.project,
+                user=self.user_new,
+                role=self.role_contributor,
+            ).count(),
+            0,
+        )
+
+        with self.login(self.user_new):
+            response = self.client.get(
+                reverse(
+                    'projectroles:invite_accept',
+                    kwargs={'secret': invite.secret},
+                ),
+                follow=True,
+            )
+
+        self.assertListEqual(
+            response.redirect_chain,
+            [
+                (
+                    reverse(
+                        'projectroles:invite_process_ldap',
+                        kwargs={'secret': invite.secret},
+                    ),
                     302,
                 ),
+                (reverse('home'), 302),
             ],
         )
         self.assertEqual(ProjectInvite.objects.filter(active=True).count(), 0)
         self.assertEqual(
             RoleAssignment.objects.filter(
                 project=self.project,
-                user=self.new_user,
+                user=self.user_new,
                 role=self.role_contributor,
             ).count(),
             0,
         )
 
     @override_settings(PROJECTROLES_ALLOW_LOCAL_USERS=True)
     def test_accept_local(self):
-        """Test accepting local invite (user doesn't exist and no user is logged in)"""
+        """Test accepting local invite with nonexistent user and no user logged in"""
         # Init invite
         invite = self.make_invite(
             email=INVITE_EMAIL,
             project=self.project,
             role=self.role_contributor,
             issuer=self.user,
             message='',
@@ -3387,28 +4533,28 @@
                     kwargs={'project': self.project.sodar_uuid},
                 ),
             )
         self.assertEqual(response.status_code, 200)
 
     @override_settings(PROJECTROLES_ALLOW_LOCAL_USERS=True)
     def test_accept_expired_local(self):
-        """Test user accepting an expired local invite"""
+        """Test accepting expired local invite"""
         invite = self.make_invite(
             email=INVITE_EMAIL,
             project=self.project,
             role=self.role_contributor,
             issuer=self.user,
             message='',
             date_expire=timezone.now(),
         )
         self.assertEqual(ProjectInvite.objects.filter(active=True).count(), 1)
         self.assertEqual(
             RoleAssignment.objects.filter(
                 project=self.project,
-                user=self.new_user,
+                user=self.user_new,
                 role=self.role_contributor,
             ).count(),
             0,
         )
 
         response = self.client.get(
             reverse(
@@ -3424,45 +4570,43 @@
                     reverse(
                         'projectroles:invite_process_local',
                         kwargs={'secret': invite.secret},
                     ),
                     302,
                 ),
                 (reverse('home'), 302),
-                (
-                    reverse('login') + '?next=/',
-                    302,
-                ),
+                (reverse('login') + '?next=/', 302),
             ],
         )
         self.assertEqual(ProjectInvite.objects.filter(active=True).count(), 0)
         self.assertEqual(
             RoleAssignment.objects.filter(
                 project=self.project,
-                user=self.new_user,
+                user=self.user_new,
                 role=self.role_contributor,
             ).count(),
             0,
         )
 
-    @override_settings(PROJECTROLES_ALLOW_LOCAL_USERS=True)
-    @override_settings(AUTH_LDAP_USERNAME_DOMAIN='EXAMPLE')
-    @override_settings(AUTH_LDAP_DOMAIN_PRINTABLE='EXAMPLE')
-    @override_settings(ENABLE_LDAP=True)
+    @override_settings(
+        ENABLE_LDAP=True,
+        PROJECTROLES_ALLOW_LOCAL_USERS=True,
+        AUTH_LDAP_USERNAME_DOMAIN='EXAMPLE',
+        AUTH_LDAP_DOMAIN_PRINTABLE='EXAMPLE',
+    )
     def test_accept_wrong_type_local(self):
-        """Test accepting a local invite in the view processing LDAP invites"""
+        """Test accepting local invite in LDAP processing view"""
         invite = self.make_invite(
             email='test@different.com',
             project=self.project,
             role=self.role_contributor,
             issuer=self.user,
             message='',
         )
         self.assertEqual(ProjectInvite.objects.filter(active=True).count(), 1)
-
         response = self.client.get(
             reverse(
                 'projectroles:invite_process_ldap',
                 kwargs={'secret': invite.secret},
             ),
         )
         # LDAP expects user to be logged in
@@ -3472,29 +4616,30 @@
             + '?next='
             + reverse(
                 'projectroles:invite_process_ldap',
                 kwargs={'secret': invite.secret},
             ),
         )
 
-    @override_settings(PROJECTROLES_ALLOW_LOCAL_USERS=True)
-    @override_settings(AUTH_LDAP_USERNAME_DOMAIN='EXAMPLE')
-    @override_settings(AUTH_LDAP_DOMAIN_PRINTABLE='EXAMPLE')
-    @override_settings(ENABLE_LDAP=True)
+    @override_settings(
+        ENABLE_LDAP=True,
+        PROJECTROLES_ALLOW_LOCAL_USERS=True,
+        AUTH_LDAP_USERNAME_DOMAIN='EXAMPLE',
+        AUTH_LDAP_DOMAIN_PRINTABLE='EXAMPLE',
+    )
     def test_accept_wrong_type_ldap(self):
-        """Test accepting a LDAP invite in the view processing local invites"""
+        """Test accepting LDAP invite in local invite processing view"""
         invite = self.make_invite(
             email=INVITE_EMAIL,
             project=self.project,
             role=self.role_contributor,
             issuer=self.user,
             message='',
         )
         self.assertEqual(ProjectInvite.objects.filter(active=True).count(), 1)
-
         response = self.client.get(
             reverse(
                 'projectroles:invite_process_local',
                 kwargs={'secret': invite.secret},
             ),
             follow=True,
         )
@@ -3504,15 +4649,15 @@
         self.assertEqual(
             list(get_messages(response.wsgi_request))[0].message,
             MSG_INVITE_LDAP_LOCAL_VIEW,
         )
 
     @override_settings(PROJECTROLES_ALLOW_LOCAL_USERS=False)
     def test_accept_local_user_not_allowed(self):
-        """Test accepting a local invite while local users are disabled"""
+        """Test accepting local invite with local users disabled"""
         invite = self.make_invite(
             email=INVITE_EMAIL,
             project=self.project,
             role=self.role_contributor,
             issuer=self.user,
             message='',
         )
@@ -3523,38 +4668,28 @@
                 'projectroles:invite_accept',
                 kwargs={'secret': invite.secret},
             ),
             follow=True,
         )
         self.assertListEqual(
             response.redirect_chain,
-            [
-                (
-                    reverse('home'),
-                    302,
-                ),
-                (
-                    reverse('login') + '?next=/',
-                    302,
-                ),
-            ],
+            [(reverse('home'), 302), (reverse('login') + '?next=/', 302)],
         )
 
     @override_settings(PROJECTROLES_ALLOW_LOCAL_USERS=False)
     def test_process_local_user_not_allowed(self):
-        """Test processing local invite while local users are disabled"""
+        """Test processing local invite with local users disabled"""
         invite = self.make_invite(
             email=INVITE_EMAIL,
             project=self.project,
             role=self.role_contributor,
             issuer=self.user,
             message='',
         )
         self.assertEqual(ProjectInvite.objects.filter(active=True).count(), 1)
-
         response = self.client.get(
             reverse(
                 'projectroles:invite_process_local',
                 kwargs={'secret': invite.secret},
             ),
             follow=True,
         )
@@ -3564,24 +4699,23 @@
         self.assertEqual(
             list(get_messages(response.wsgi_request))[0].message,
             MSG_INVITE_LOCAL_NOT_ALLOWED,
         )
 
     @override_settings(PROJECTROLES_ALLOW_LOCAL_USERS=True)
     def test_accept_no_local_user_different_user_logged_in(self):
-        """Test processing local invite while invited user doesn't exist and different user is logged in"""
+        """Test processing local invite with nonexistent user and different user logged in"""
         invite = self.make_invite(
             email=INVITE_EMAIL,
             project=self.project,
             role=self.role_contributor,
             issuer=self.user,
             message='',
         )
         self.assertEqual(ProjectInvite.objects.filter(active=True).count(), 1)
-
         with self.login(self.user):
             response = self.client.get(
                 reverse(
                     'projectroles:invite_process_local',
                     kwargs={'secret': invite.secret},
                 ),
                 follow=True,
@@ -3590,27 +4724,26 @@
         self.assertEqual(
             list(get_messages(response.wsgi_request))[0].message,
             MSG_INVITE_LOGGED_IN_ACCEPT,
         )
 
     @override_settings(PROJECTROLES_ALLOW_LOCAL_USERS=True)
     def test_accept_local_user_exists_different_user_logged_in(self):
-        """Test processing local invite while invited user exists but different user is logged in"""
+        """Test processing local invite with existing user and different user logged in"""
         invited_user = self.make_user(INVITE_EMAIL.split('@')[0])
         invited_user.email = INVITE_EMAIL
         invited_user.save()
         invite = self.make_invite(
             email=INVITE_EMAIL,
             project=self.project,
             role=self.role_contributor,
             issuer=self.user,
             message='',
         )
         self.assertEqual(ProjectInvite.objects.filter(active=True).count(), 1)
-
         with self.login(self.user):
             response = self.client.get(
                 reverse(
                     'projectroles:invite_process_local',
                     kwargs={'secret': invite.secret},
                 ),
                 follow=True,
@@ -3619,27 +4752,26 @@
         self.assertEqual(
             list(get_messages(response.wsgi_request))[0].message,
             MSG_INVITE_USER_NOT_EQUAL,
         )
 
     @override_settings(PROJECTROLES_ALLOW_LOCAL_USERS=True)
     def test_accept_local_user_exists_is_logged_in(self):
-        """Test processing local invite while invited user exists and is logged in"""
+        """Test processing local invite with existing and logged in user"""
         invited_user = self.make_user(INVITE_EMAIL.split('@')[0])
         invited_user.email = INVITE_EMAIL
         invited_user.save()
         invite = self.make_invite(
             email=INVITE_EMAIL,
             project=self.project,
             role=self.role_contributor,
             issuer=self.user,
             message='',
         )
         self.assertEqual(ProjectInvite.objects.filter(active=True).count(), 1)
-
         with self.login(invited_user):
             response = self.client.get(
                 reverse(
                     'projectroles:invite_process_local',
                     kwargs={'secret': invite.secret},
                 ),
                 follow=True,
@@ -3658,27 +4790,26 @@
                 project_title='TestProject',
                 role='project contributor',
             ),
         )
 
     @override_settings(PROJECTROLES_ALLOW_LOCAL_USERS=True)
     def test_accept_local_user_exists_not_logged_in(self):
-        """Test processing local invite while invited user exists but no user is logged in"""
+        """Test processing local invite with existing user exists and no user logged in"""
         invited_user = self.make_user(INVITE_EMAIL.split('@')[0])
         invited_user.email = INVITE_EMAIL
         invited_user.save()
         invite = self.make_invite(
             email=INVITE_EMAIL,
             project=self.project,
             role=self.role_contributor,
             issuer=self.user,
             message='',
         )
         self.assertEqual(ProjectInvite.objects.filter(active=True).count(), 1)
-
         response = self.client.get(
             reverse(
                 'projectroles:invite_process_local',
                 kwargs={'secret': invite.secret},
             ),
             follow=True,
         )
@@ -3695,15 +4826,15 @@
         )
         self.assertEqual(
             list(get_messages(response.wsgi_request))[0].message,
             MSG_INVITE_USER_EXISTS,
         )
 
     def test_accept_role_exists(self):
-        """Test accepting an invite for user with roles in project"""
+        """Test accepting invite for user with roles in project"""
         invited_user = self.make_user(INVITE_EMAIL.split('@')[0])
         invited_user.email = INVITE_EMAIL
         invited_user.save()
         invite = self.make_invite(
             email=INVITE_EMAIL,
             project=self.project,
             role=self.role_contributor,
@@ -3717,18 +4848,15 @@
             response = self.client.get(
                 reverse(
                     'projectroles:invite_accept',
                     kwargs={'secret': invite.secret},
                 ),
                 follow=True,
             )
-        self.assertRedirects(
-            response,
-            reverse('home'),
-        )
+        self.assertRedirects(response, reverse('home'))
         invite.refresh_from_db()
         self.assertFalse(invite.active)
 
 
 class TestProjectInviteListView(
     ProjectMixin, RoleAssignmentMixin, ProjectInviteMixin, TestViewsBase
 ):
@@ -3748,26 +4876,26 @@
             role=self.role_contributor,
             issuer=self.user,
             message='',
         )
 
     def test_render(self):
         """Test rendering ProjectInvite list form"""
-        with self.login(self.owner_as.user):
+        with self.login(self.user):
             response = self.client.get(
                 reverse(
                     'projectroles:invites',
                     kwargs={'project': self.project.sodar_uuid},
                 )
             )
         self.assertEqual(response.status_code, 200)
 
     def test_render_not_found(self):
         """Test rendering ProjectInvite list form with invalid project UUID"""
-        with self.login(self.owner_as.user):
+        with self.login(self.user):
             response = self.client.get(
                 reverse(
                     'projectroles:invites',
                     kwargs={'project': INVALID_UUID},
                 )
             )
         self.assertEqual(response.status_code, 404)
@@ -3792,39 +4920,38 @@
             role=self.role_contributor,
             issuer=self.user,
             message='',
         )
 
     def test_render(self):
         """Test rendering ProjectInvite revocation form"""
-        with self.login(self.owner_as.user):
+        with self.login(self.user):
             response = self.client.get(
                 reverse(
                     'projectroles:invite_revoke',
                     kwargs={'projectinvite': self.invite.sodar_uuid},
                 )
             )
         self.assertEqual(response.status_code, 200)
 
     def test_render_not_found(self):
         """Test rendering with invalid invite UUID"""
-        with self.login(self.owner_as.user):
+        with self.login(self.user):
             response = self.client.get(
                 reverse(
                     'projectroles:invite_revoke',
                     kwargs={'projectinvite': INVALID_UUID},
                 )
             )
         self.assertEqual(response.status_code, 404)
 
     def test_revoke_invite(self):
         """Test invite revocation"""
         self.assertEqual(ProjectInvite.objects.all().count(), 1)
         self.assertEqual(ProjectInvite.objects.filter(active=True).count(), 1)
-
         with self.login(self.user):
             self.client.post(
                 reverse(
                     'projectroles:invite_revoke',
                     kwargs={'projectinvite': self.invite.sodar_uuid},
                 )
             )
@@ -3832,33 +4959,31 @@
         self.assertEqual(ProjectInvite.objects.filter(active=True).count(), 0)
 
     def test_revoke_delegate(self):
         """Test invite revocation for a delegate role"""
         self.invite.role = self.role_delegate
         self.invite.save()
         self.assertEqual(ProjectInvite.objects.filter(active=True).count(), 1)
-
         with self.login(self.user):
             self.client.post(
                 reverse(
                     'projectroles:invite_revoke',
                     kwargs={'projectinvite': self.invite.sodar_uuid},
                 )
             )
         self.assertEqual(ProjectInvite.objects.filter(active=True).count(), 0)
 
     def test_revoke_delegate_no_perms(self):
         """Test delegate revocation with insufficient perms (should fail)"""
         self.invite.role = self.role_delegate
         self.invite.save()
-        delegate = self.make_user('delegate')
-        self.make_assignment(self.project, delegate, self.role_delegate)
+        user_delegate = self.make_user('user_delegate')
+        self.make_assignment(self.project, user_delegate, self.role_delegate)
         self.assertEqual(ProjectInvite.objects.filter(active=True).count(), 1)
-
-        with self.login(delegate):
+        with self.login(user_delegate):
             self.client.post(
                 reverse(
                     'projectroles:invite_revoke',
                     kwargs={'projectinvite': self.invite.sodar_uuid},
                 )
             )
         self.assertEqual(ProjectInvite.objects.filter(active=True).count(), 1)
@@ -3904,17 +5029,14 @@
             response = self.client.get(reverse('projectroles:remote_sites'))
             self.assertRedirects(response, reverse('home'))
 
 
 class TestRemoteSiteCreateView(RemoteSiteMixin, TestViewsBase):
     """Tests for remote site create view"""
 
-    def setUp(self):
-        super().setUp()
-
     def test_render_as_source(self):
         """Test rendering remote site create view as source"""
         with self.login(self.user):
             response = self.client.get(
                 reverse('projectroles:remote_site_create')
             )
         self.assertEqual(response.status_code, 200)
@@ -3943,25 +5065,29 @@
         self.source_site = self.make_site(
             name=REMOTE_SITE_NAME,
             url=REMOTE_SITE_URL,
             mode=SITE_MODE_SOURCE,
             description='',
             secret=REMOTE_SITE_SECRET,
         )
-
         with self.login(self.user):
             response = self.client.get(
                 reverse('projectroles:remote_site_create')
             )
             self.assertRedirects(response, reverse('projectroles:remote_sites'))
 
     def test_create_target(self):
         """Test creating a target site"""
+        self.assertEqual(
+            0,
+            ProjectEvent.objects.filter(
+                event_name='target_site_create'
+            ).count(),
+        )
         self.assertEqual(RemoteSite.objects.all().count(), 0)
-
         values = {
             'name': REMOTE_SITE_NAME,
             'url': REMOTE_SITE_URL,
             'description': REMOTE_SITE_DESC,
             'secret': REMOTE_SITE_SECRET,
             'user_display': REMOTE_SITE_USER_DISPLAY,
         }
@@ -3980,22 +5106,30 @@
             'description': REMOTE_SITE_DESC,
             'secret': REMOTE_SITE_SECRET,
             'sodar_uuid': site.sodar_uuid,
             'user_display': REMOTE_SITE_USER_DISPLAY,
         }
         model_dict = model_to_dict(site)
         self.assertEqual(model_dict, expected)
+
+        tl_event = ProjectEvent.objects.filter(
+            event_name='target_site_create'
+        ).first()
+        self.assertEqual(tl_event.event_name, 'target_site_create')
         with self.login(self.user):
             self.assertRedirects(response, reverse('projectroles:remote_sites'))
 
     @override_settings(PROJECTROLES_SITE_MODE=SITE_MODE_TARGET)
     def test_create_source(self):
         """Test creating a source site as target"""
+        self.assertEqual(
+            0,
+            ProjectEvent.objects.filter(event_name='source_site_set').count(),
+        )
         self.assertEqual(RemoteSite.objects.all().count(), 0)
-
         values = {
             'name': REMOTE_SITE_NAME,
             'url': REMOTE_SITE_URL,
             'description': REMOTE_SITE_DESC,
             'secret': REMOTE_SITE_SECRET,
             'user_display': REMOTE_SITE_USER_DISPLAY,
         }
@@ -4014,14 +5148,19 @@
             'description': REMOTE_SITE_DESC,
             'secret': REMOTE_SITE_SECRET,
             'sodar_uuid': site.sodar_uuid,
             'user_display': REMOTE_SITE_USER_DISPLAY,
         }
         model_dict = model_to_dict(site)
         self.assertEqual(model_dict, expected)
+
+        tl_event = ProjectEvent.objects.filter(
+            event_name='source_site_set'
+        ).first()
+        self.assertEqual(tl_event.event_name, 'source_site_set')
         with self.login(self.user):
             self.assertRedirects(response, reverse('projectroles:remote_sites'))
 
     def test_create_target_existing_name(self):
         """Test creating a target site with an existing name"""
         self.target_site = self.make_site(
             name=REMOTE_SITE_NAME,
@@ -4089,16 +5228,21 @@
                     kwargs={'remotesite': INVALID_UUID},
                 )
             )
         self.assertEqual(response.status_code, 404)
 
     def test_update(self):
         """Test updating target site as source"""
+        self.assertEqual(
+            0,
+            ProjectEvent.objects.filter(
+                event_name='target_site_update'
+            ).count(),
+        )
         self.assertEqual(RemoteSite.objects.all().count(), 1)
-
         values = {
             'name': REMOTE_SITE_NEW_NAME,
             'url': REMOTE_SITE_NEW_URL,
             'description': REMOTE_SITE_NEW_DESC,
             'secret': REMOTE_SITE_SECRET,
             'user_display': REMOTE_SITE_USER_DISPLAY,
         }
@@ -4121,14 +5265,19 @@
             'description': REMOTE_SITE_NEW_DESC,
             'secret': REMOTE_SITE_SECRET,
             'sodar_uuid': site.sodar_uuid,
             'user_display': REMOTE_SITE_USER_DISPLAY,
         }
         model_dict = model_to_dict(site)
         self.assertEqual(model_dict, expected)
+
+        tl_event = ProjectEvent.objects.filter(
+            event_name='target_site_update'
+        ).first()
+        self.assertEqual(tl_event.event_name, 'target_site_update')
         with self.login(self.user):
             self.assertRedirects(response, reverse('projectroles:remote_sites'))
 
     def test_update_existing_name(self):
         """Test creating target site with an existing name as source (should fail)"""
         new_target_site = self.make_site(
             name=REMOTE_SITE_NEW_NAME,
@@ -4192,49 +5341,58 @@
                     kwargs={'remotesite': INVALID_UUID},
                 )
             )
         self.assertEqual(response.status_code, 404)
 
     def test_delete(self):
         """Test deleting the remote site"""
+        self.assertEqual(
+            0,
+            ProjectEvent.objects.filter(
+                event_name='target_site_delete'
+            ).count(),
+        )
         self.assertEqual(RemoteSite.objects.all().count(), 1)
         with self.login(self.user):
             response = self.client.post(
                 reverse(
                     'projectroles:remote_site_delete',
                     kwargs={'remotesite': self.target_site.sodar_uuid},
                 )
             )
             self.assertRedirects(response, reverse('projectroles:remote_sites'))
+
+        tl_event = ProjectEvent.objects.filter(
+            event_name='target_site_delete'
+        ).first()
+        self.assertEqual(tl_event.event_name, 'target_site_delete')
         self.assertEqual(RemoteSite.objects.all().count(), 0)
 
 
 class TestRemoteProjectBatchUpdateView(
     ProjectMixin,
     RoleAssignmentMixin,
     RemoteSiteMixin,
     RemoteProjectMixin,
     TestViewsBase,
 ):
     """Tests for remote project batch update view"""
 
     def setUp(self):
         super().setUp()
-
         # Set up project
         self.category = self.make_project(
             'TestCategory', PROJECT_TYPE_CATEGORY, None
         )
         self.project = self.make_project(
             'TestProject', PROJECT_TYPE_PROJECT, self.category
         )
         self.owner_as = self.make_assignment(
             self.project, self.user, self.role_owner
         )
-
         # Set up target site
         self.target_site = self.make_site(
             name=REMOTE_SITE_NAME,
             url=REMOTE_SITE_URL,
             mode=SITE_MODE_TARGET,
             description=REMOTE_SITE_DESC,
             secret=REMOTE_SITE_SECRET,
@@ -4248,14 +5406,21 @@
             response = self.client.post(
                 reverse(
                     'projectroles:remote_projects_update',
                     kwargs={'remotesite': self.target_site.sodar_uuid},
                 ),
                 values,
             )
+
+        self.assertEqual(
+            0,
+            ProjectEvent.objects.filter(
+                event_name='remote_access_update'
+            ).count(),
+        )
         self.assertEqual(response.status_code, 200)
         self.assertEqual(response.context['site'], self.target_site)
         self.assertIsNotNone(response.context['modifying_access'])
 
     def test_render_confirm_no_change(self):
         """Test rendering without changes (should redirect)"""
         access_field = 'remote_access_{}'.format(self.project.sodar_uuid)
@@ -4272,18 +5437,30 @@
                 response,
                 reverse(
                     'projectroles:remote_projects',
                     kwargs={'remotesite': self.target_site.sodar_uuid},
                 ),
             )
 
+        self.assertEqual(
+            0,
+            ProjectEvent.objects.filter(
+                event_name='remote_access_update'
+            ).count(),
+        )
+
     def test_post_create(self):
         """Test updating remote project access by adding a new RemoteProject"""
+        self.assertEqual(
+            0,
+            ProjectEvent.objects.filter(
+                event_name='batch_update_remote'
+            ).count(),
+        )
         self.assertEqual(RemoteProject.objects.all().count(), 0)
-
         access_field = 'remote_access_{}'.format(self.project.sodar_uuid)
         values = {
             access_field: SODAR_CONSTANTS['REMOTE_LEVEL_READ_INFO'],
             'update-confirmed': 1,
         }
         with self.login(self.user):
             response = self.client.post(
@@ -4302,16 +5479,27 @@
             )
 
         self.assertEqual(RemoteProject.objects.all().count(), 1)
         rp = RemoteProject.objects.first()
         self.assertEqual(rp.project_uuid, self.project.sodar_uuid)
         self.assertEqual(rp.level, SODAR_CONSTANTS['REMOTE_LEVEL_READ_INFO'])
 
+        tl_event = ProjectEvent.objects.filter(
+            event_name='batch_update_remote'
+        ).first()
+        self.assertEqual(tl_event.event_name, 'batch_update_remote')
+
     def test_post_update(self):
         """Test updating by modifying an existing RemoteProject"""
+        self.assertEqual(
+            0,
+            ProjectEvent.objects.filter(
+                event_name='batch_update_remote'
+            ).count(),
+        )
         rp = self.make_remote_project(
             project_uuid=self.project.sodar_uuid,
             site=self.target_site,
             level=SODAR_CONSTANTS['REMOTE_LEVEL_VIEW_AVAIL'],
         )
         self.assertEqual(RemoteProject.objects.all().count(), 1)
 
@@ -4337,14 +5525,22 @@
             )
 
         self.assertEqual(RemoteProject.objects.all().count(), 1)
         rp.refresh_from_db()
         self.assertEqual(rp.project_uuid, self.project.sodar_uuid)
         self.assertEqual(rp.level, SODAR_CONSTANTS['REMOTE_LEVEL_READ_INFO'])
 
+        tl_event = ProjectEvent.objects.filter(
+            event_name='batch_update_remote'
+        ).first()
+        self.assertEqual(tl_event.event_name, 'batch_update_remote')
+
+
+# SODAR User view tests --------------------------------------------------------
+
 
 class TestUserUpdateView(TestViewsBase):
     """Tests for the user update view"""
 
     # NOTE: This assumes an example app is available
     def setUp(self):
         # Init user & role
@@ -4365,15 +5561,15 @@
         self.assertEqual(
             list(get_messages(response.wsgi_request))[0].message,
             MSG_USER_PROFILE_LDAP,
         )
 
     def test_submit_local_user(self):
         self.assertEqual(User.objects.count(), 2)
-        user = User.objects.get(id=self.user_local.id)
+        user = User.objects.get(pk=self.user_local.pk)
         self.assertEqual(user.first_name, '')
         self.assertEqual(user.last_name, '')
 
         with self.login(self.user_local):
             response = self.client.post(
                 reverse('projectroles:user_update'),
                 {
@@ -4393,10 +5589,10 @@
                 (
                     reverse('login') + '?next=' + reverse('home'),
                     302,
                 ),
             ],
         )
         self.assertEqual(User.objects.count(), 2)
-        user = User.objects.get(id=self.user_local.id)
+        user = User.objects.get(pk=self.user_local.pk)
         self.assertEqual(user.first_name, 'Local')
         self.assertEqual(user.last_name, 'User')
```

### Comparing `django-sodar-core-0.12.0/projectroles/tests/test_views_ajax.py` & `django-sodar-core-0.13.0/projectroles/tests/test_views_ajax.py`

 * *Files 16% similar despite different names*

```diff
@@ -1,48 +1,55 @@
 """Ajax API view tests for the projectroles app"""
 
 import json
 
-from django.forms import model_to_dict
 from django.test import override_settings
 from django.urls import reverse
 
 from test_plus.test import TestCase
 
-from projectroles.models import ProjectUserTag, PROJECT_TAG_STARRED
+from projectroles.app_settings import AppSettingAPI
 from projectroles.tests.test_models import (
     ProjectMixin,
     RoleAssignmentMixin,
-    ProjectUserTagMixin,
 )
 from projectroles.tests.test_views import (
     TestViewsBase,
     PROJECT_TYPE_CATEGORY,
     PROJECT_TYPE_PROJECT,
 )
 from projectroles.tests.test_views_api import SerializedObjectMixin
-from projectroles.views_ajax import INHERITED_OWNER_INFO
+
+
+app_settings = AppSettingAPI()
 
 
 class TestProjectListAjaxView(ProjectMixin, RoleAssignmentMixin, TestViewsBase):
     """Tests for ProjectListAjaxView"""
 
     def setUp(self):
         super().setUp()
+        self.user_owner_cat = self.make_user('user_owner_cat')
+        self.user_contributor_cat = self.make_user('user_contributor_cat')
+        self.user_owner = self.make_user('user_owner')
+        self.user_no_roles = self.make_user('user_no_roles')
         self.category = self.make_project(
             'TestCategory', PROJECT_TYPE_CATEGORY, None
         )
         self.owner_as_cat = self.make_assignment(
-            self.category, self.user, self.role_owner
+            self.category, self.user_owner_cat, self.role_owner
         )
         self.project = self.make_project(
             'TestProject', PROJECT_TYPE_PROJECT, self.category
         )
         self.owner_as = self.make_assignment(
-            self.project, self.user, self.role_owner
+            self.project, self.user_owner, self.role_owner
+        )
+        self.cat_contributor_as = self.make_assignment(
+            self.project, self.user_contributor_cat, self.role_contributor
         )
 
     def test_get(self):
         """Test project list retrieval"""
         with self.login(self.user):
             response = self.client.get(
                 reverse('projectroles:ajax_project_list'),
@@ -56,37 +63,41 @@
                     'full_title': self.category.full_title,
                     'public_guest_access': self.category.public_guest_access,
                     'archive': False,
                     'remote': False,
                     'revoked': False,
                     'starred': False,
                     'depth': 0,
+                    'access': True,
+                    'finder_url': None,
                     'uuid': str(self.category.sodar_uuid),
                 },
                 {
                     'title': self.project.title,
                     'type': self.project.type,
                     'full_title': self.project.full_title,
                     'public_guest_access': self.project.public_guest_access,
                     'archive': False,
                     'remote': False,
                     'revoked': False,
                     'starred': False,
                     'depth': 1,
+                    'access': True,
+                    'finder_url': None,
                     'uuid': str(self.project.sodar_uuid),
                 },
             ],
             'parent_depth': 0,
             'messages': {},
             'user': {'superuser': True},
         }
         self.assertEqual(response.data, expected)
 
     def test_get_parent(self):
-        """Test project list retrieval with a parent project"""
+        """Test project list with parent project"""
         with self.login(self.user):
             response = self.client.get(
                 reverse('projectroles:ajax_project_list')
                 + '?parent='
                 + str(self.category.sodar_uuid),
             )
         self.assertEqual(response.status_code, 200)
@@ -98,59 +109,129 @@
                     'full_title': self.project.title,  # Not full_title
                     'public_guest_access': self.project.public_guest_access,
                     'archive': False,
                     'remote': False,
                     'revoked': False,
                     'starred': False,
                     'depth': 1,
+                    'access': True,
+                    'finder_url': None,
                     'uuid': str(self.project.sodar_uuid),
                 },
             ],
             'parent_depth': 1,
             'messages': {},
             'user': {'superuser': True},
         }
         self.assertEqual(response.data, expected)
 
     def test_get_inherited_owner(self):
-        """Test project list retrieval for inherited owner"""
-        cat_owner = self.make_user('cat_owner')
-        self.owner_as_cat.user = cat_owner
-        self.owner_as_cat.save()
-        pro_owner = self.make_user('pro_owner')
-        self.owner_as.user = pro_owner
-        self.owner_as.save()
-        with self.login(cat_owner):
+        """Test project list for inherited owner"""
+        with self.login(self.user_owner_cat):
+            response = self.client.get(
+                reverse('projectroles:ajax_project_list'),
+            )
+        self.assertEqual(response.status_code, 200)
+        self.assertEqual(len(response.data['projects']), 2)
+
+    def test_get_inherited_contrib(self):
+        """Test project list for inherited contributor"""
+        with self.login(self.user_contributor_cat):
             response = self.client.get(
                 reverse('projectroles:ajax_project_list'),
             )
         self.assertEqual(response.status_code, 200)
         self.assertEqual(len(response.data['projects']), 2)
 
     def test_get_no_results(self):
-        """Test project list retrieval with no results"""
-        new_user = self.make_user('new_user')  # User with no roles
-        with self.login(new_user):
+        """Test project list with no results"""
+        with self.login(self.user_no_roles):
             response = self.client.get(
                 reverse('projectroles:ajax_project_list'),
             )
         self.assertEqual(response.status_code, 200)
         self.assertEqual(response.data['projects'], [])
         self.assertIsNotNone(response.data['messages'].get('no_projects'))
 
     def test_get_project_parent(self):
-        """Test project list retrieval with project as parent (should fail)"""
+        """Test project list with project as parent (should fail)"""
         with self.login(self.user):
             response = self.client.get(
                 reverse('projectroles:ajax_project_list')
                 + '?parent='
                 + str(self.project.sodar_uuid),
             )
         self.assertEqual(response.status_code, 400)
 
+    def test_get_finder(self):
+        """Test project list with finder role"""
+        user_finder = self.make_user('user_finder')
+        self.make_assignment(self.category, user_finder, self.role_finder)
+        with self.login(user_finder):
+            response = self.client.get(
+                reverse('projectroles:ajax_project_list')
+            )
+        self.assertEqual(response.status_code, 200)
+        res_data = response.data['projects']
+        self.assertEqual(len(res_data), 2)
+        self.assertEqual(res_data[0]['title'], self.category.title)
+        self.assertEqual(res_data[0]['access'], True)
+        self.assertEqual(res_data[0]['finder_url'], None)
+        self.assertEqual(res_data[1]['title'], self.project.title)
+        self.assertEqual(res_data[1]['access'], False)
+        self.assertEqual(
+            res_data[1]['finder_url'],
+            reverse(
+                'projectroles:roles',
+                kwargs={'project': self.category.sodar_uuid},
+            ),
+        )
+
+    def test_get_finder_parent(self):
+        """Test project list with finder role inside parent"""
+        user_finder = self.make_user('user_finder')
+        self.make_assignment(self.category, user_finder, self.role_finder)
+        with self.login(user_finder):
+            response = self.client.get(
+                reverse('projectroles:ajax_project_list')
+                + '?parent='
+                + str(self.category.sodar_uuid),
+            )
+        self.assertEqual(response.status_code, 200)
+        res_data = response.data['projects']
+        self.assertEqual(len(res_data), 1)
+        self.assertEqual(res_data[0]['title'], self.project.title)
+        self.assertEqual(res_data[0]['access'], False)
+
+    def test_get_finder_nested(self):
+        """Test project list with finder role and nested access"""
+        sub_cat = self.make_project(
+            'SubCategory', PROJECT_TYPE_CATEGORY, self.category
+        )
+        self.make_assignment(sub_cat, self.user_owner, self.role_owner)
+        sub_project = self.make_project(
+            'SubProject', PROJECT_TYPE_PROJECT, sub_cat
+        )
+        self.make_assignment(sub_project, self.user_owner, self.role_owner)
+        user_finder = self.make_user('user_finder')
+        self.make_assignment(sub_cat, user_finder, self.role_finder)
+        with self.login(user_finder):
+            response = self.client.get(
+                reverse('projectroles:ajax_project_list')
+            )
+        self.assertEqual(response.status_code, 200)
+        res_data = response.data['projects']
+        self.assertEqual(len(res_data), 3)
+        self.assertEqual(res_data[0]['title'], self.category.title)
+        self.assertEqual(res_data[0]['access'], True)
+        self.assertEqual(res_data[1]['title'], sub_cat.title)
+        self.assertEqual(res_data[1]['access'], True)
+        self.assertEqual(res_data[2]['title'], sub_project.title)
+        self.assertEqual(res_data[2]['access'], False)
+
 
 class TestProjectListColumnAjaxView(
     ProjectMixin, RoleAssignmentMixin, TestViewsBase
 ):
     """Tests for ProjectListColumnAjaxView"""
 
     def setUp(self):
@@ -262,24 +343,16 @@
                         ]
                     }
                 ),
                 content_type='application/json',
             )
         self.assertEqual(response.status_code, 200)
         expected = {
-            str(self.category.sodar_uuid): {
-                'name': 'Owner',
-                'class': None,
-                'info': None,
-            },
-            str(self.project.sodar_uuid): {
-                'name': 'Owner',
-                'class': 'text-muted',
-                'info': INHERITED_OWNER_INFO,
-            },
+            str(self.category.sodar_uuid): {'name': 'Owner', 'class': None},
+            str(self.project.sodar_uuid): {'name': 'Owner', 'class': None},
         }
         self.assertEqual(response.data, expected)
 
     def test_post_project_owner(self):
         """Test POST for role retrieval as project owner"""
         with self.login(self.user_pro_owner):
             response = self.client.post(
@@ -295,21 +368,16 @@
                 content_type='application/json',
             )
         self.assertEqual(response.status_code, 200)
         expected = {
             str(self.category.sodar_uuid): {
                 'name': 'N/A',
                 'class': 'text-muted',
-                'info': None,
-            },
-            str(self.project.sodar_uuid): {
-                'name': 'Owner',
-                'class': None,
-                'info': None,
             },
+            str(self.project.sodar_uuid): {'name': 'Owner', 'class': None},
         }
         self.assertEqual(response.data, expected)
 
     def test_post_no_access(self):
         """Test POST for role retrieval with no access to project"""
         new_user = self.make_user('new_user')  # User with no roles
         with self.login(new_user):
@@ -326,69 +394,54 @@
                 content_type='application/json',
             )
         self.assertEqual(response.status_code, 200)
         self.assertEqual(response.data, {})
 
 
 class TestProjectStarringAjaxView(
-    ProjectMixin, RoleAssignmentMixin, ProjectUserTagMixin, TestViewsBase
+    ProjectMixin, RoleAssignmentMixin, TestViewsBase
 ):
     """Tests for ProjectStarringAjaxView"""
 
     def setUp(self):
         super().setUp()
         self.project = self.make_project(
             'TestProject', PROJECT_TYPE_PROJECT, None
         )
         self.owner_as = self.make_assignment(
             self.project, self.user, self.role_owner
         )
 
-    def test_star_project(self):
-        """Test project starring"""
-        self.assertEqual(ProjectUserTag.objects.all().count(), 0)
-
+    def test_project_star(self):
+        """Test Starring a Project"""
         with self.login(self.user):
             response = self.client.post(
                 reverse(
                     'projectroles:ajax_star',
                     kwargs={'project': self.project.sodar_uuid},
                 )
             )
-
-        self.assertEqual(ProjectUserTag.objects.all().count(), 1)
-        tag = ProjectUserTag.objects.get(
-            project=self.project, user=self.user, name=PROJECT_TAG_STARRED
-        )
-        self.assertIsNotNone(tag)
-        expected = {
-            'id': tag.pk,
-            'project': self.project.pk,
-            'user': self.user.pk,
-            'name': PROJECT_TAG_STARRED,
-            'sodar_uuid': tag.sodar_uuid,
-        }
-        self.assertEqual(model_to_dict(tag), expected)
         self.assertEqual(response.status_code, 200)
-
-    def test_unstar_project(self):
-        """Test project unstarring"""
-        self.make_tag(self.project, self.user, name=PROJECT_TAG_STARRED)
-        self.assertEqual(ProjectUserTag.objects.all().count(), 1)
+        star = app_settings.get(
+            'projectroles', 'project_star', self.project, self.user
+        )
+        self.assertEqual(star, True)
 
         with self.login(self.user):
             response = self.client.post(
                 reverse(
                     'projectroles:ajax_star',
                     kwargs={'project': self.project.sodar_uuid},
                 )
             )
-
-        self.assertEqual(ProjectUserTag.objects.all().count(), 0)
         self.assertEqual(response.status_code, 200)
+        star = app_settings.get(
+            'projectroles', 'project_star', self.project, self.user
+        )
+        self.assertEqual(star, False)
 
 
 class TestCurrentUserRetrieveAjaxView(SerializedObjectMixin, TestCase):
     """Tests for CurrentUserRetrieveAjaxView"""
 
     def setUp(self):
         self.user = self.make_user('user')
```

### Comparing `django-sodar-core-0.12.0/projectroles/tests/test_views_api.py` & `django-sodar-core-0.13.0/projectroles/tests/test_views_api.py`

 * *Files 12% similar despite different names*

```diff
@@ -1,66 +1,73 @@
 """REST API view tests for the projectroles app"""
+
 import base64
 import json
 import pytz
 
+from knox.models import AuthToken
+
 from django.conf import settings
 from django.core import mail
 from django.forms.models import model_to_dict
 from django.test import override_settings
 from django.urls import reverse
 from django.utils import timezone
 
-from knox.models import AuthToken
 from test_plus.test import APITestCase
 
 # Timeline dependency
 from timeline.models import ProjectEvent
 
 from projectroles import views_api
 from projectroles.app_settings import AppSettingAPI
 from projectroles.models import (
     Project,
-    Role,
     RoleAssignment,
     ProjectInvite,
     AppSetting,
     SODAR_CONSTANTS,
+    CAT_DELIMITER,
 )
 from projectroles.remote_projects import RemoteProjectAPI
 from projectroles.tests.test_app_settings import AppSettingInitMixin
 from projectroles.tests.test_models import (
     ProjectMixin,
+    RoleMixin,
     RoleAssignmentMixin,
     ProjectInviteMixin,
     RemoteSiteMixin,
     RemoteProjectMixin,
     AppSettingMixin,
 )
 from projectroles.tests.test_views import (
     TestViewsBase,
-    PROJECT_TYPE_CATEGORY,
-    PROJECT_TYPE_PROJECT,
-    PROJECT_ROLE_OWNER,
-    PROJECT_ROLE_DELEGATE,
-    PROJECT_ROLE_CONTRIBUTOR,
-    PROJECT_ROLE_GUEST,
     REMOTE_SITE_NAME,
     REMOTE_SITE_URL,
-    SITE_MODE_SOURCE,
-    SITE_MODE_TARGET,
     REMOTE_SITE_DESC,
     REMOTE_SITE_SECRET,
 )
 from projectroles.utils import build_secret
 
 
 app_settings = AppSettingAPI()
 
 
+# SODAR constants
+PROJECT_ROLE_OWNER = SODAR_CONSTANTS['PROJECT_ROLE_OWNER']
+PROJECT_ROLE_CONTRIBUTOR = SODAR_CONSTANTS['PROJECT_ROLE_CONTRIBUTOR']
+PROJECT_ROLE_DELEGATE = SODAR_CONSTANTS['PROJECT_ROLE_DELEGATE']
+PROJECT_ROLE_GUEST = SODAR_CONSTANTS['PROJECT_ROLE_GUEST']
+PROJECT_ROLE_FINDER = SODAR_CONSTANTS['PROJECT_ROLE_FINDER']
+PROJECT_TYPE_CATEGORY = SODAR_CONSTANTS['PROJECT_TYPE_CATEGORY']
+PROJECT_TYPE_PROJECT = SODAR_CONSTANTS['PROJECT_TYPE_PROJECT']
+SITE_MODE_SOURCE = SODAR_CONSTANTS['SITE_MODE_SOURCE']
+SITE_MODE_TARGET = SODAR_CONSTANTS['SITE_MODE_TARGET']
+
+# Local constants
 CORE_API_MEDIA_TYPE_INVALID = 'application/vnd.bihealth.invalid'
 CORE_API_VERSION_INVALID = '9.9.9'
 
 INVALID_UUID = '11111111-1111-1111-1111-111111111111'
 NEW_CATEGORY_TITLE = 'New Category'
 NEW_PROJECT_TITLE = 'New Project'
 UPDATED_TITLE = 'Updated Title'
@@ -219,52 +226,50 @@
         req_method = getattr(self.client, method.lower(), None)
         if not req_method:
             raise ValueError('Unsupported method "{}"'.format(method))
         return req_method(url, **req_kwargs)
 
 
 class TestAPIViewsBase(
-    ProjectMixin, RoleAssignmentMixin, SODARAPIViewTestMixin, APITestCase
+    ProjectMixin,
+    RoleMixin,
+    RoleAssignmentMixin,
+    SODARAPIViewTestMixin,
+    APITestCase,
 ):
     """Base API test view with knox authentication"""
 
     def setUp(self):
         # Show complete diff in case of failure
         self.maxDiff = None
-
         # Init roles
-        self.role_owner = Role.objects.get_or_create(name=PROJECT_ROLE_OWNER)[0]
-        self.role_delegate = Role.objects.get_or_create(
-            name=PROJECT_ROLE_DELEGATE
-        )[0]
-        self.role_contributor = Role.objects.get_or_create(
-            name=PROJECT_ROLE_CONTRIBUTOR
-        )[0]
-        self.role_guest = Role.objects.get_or_create(name=PROJECT_ROLE_GUEST)[0]
+        self.init_roles()
 
         # Init superuser
         self.user = self.make_user('superuser')
         self.user.is_staff = True
         self.user.is_superuser = True
         self.user.save()
+        # Init project users
+        self.user_owner_cat = self.make_user('user_owner_cat')
+        self.user_owner = self.make_user('user_owner')
 
         # Set up category and project with owner role assignments
         self.category = self.make_project(
             'TestCategory', PROJECT_TYPE_CATEGORY, None
         )
-        self.cat_owner_as = self.make_assignment(
-            self.category, self.user, self.role_owner
+        self.owner_as_cat = self.make_assignment(
+            self.category, self.user_owner_cat, self.role_owner
         )
         self.project = self.make_project(
             'TestProject', PROJECT_TYPE_PROJECT, self.category
         )
         self.owner_as = self.make_assignment(
-            self.project, self.user, self.role_owner
+            self.project, self.user_owner, self.role_owner
         )
-
         # Get knox token for self.user
         self.knox_token = self.get_token(self.user)
 
 
 class TestCoreAPIViewsBase(TestAPIViewsBase):
     """Override of TestAPIViewsBase to be used with SODAR Core API views"""
 
@@ -275,15 +280,15 @@
 # Tests ------------------------------------------------------------------------
 
 
 class TestProjectListAPIView(TestCoreAPIViewsBase):
     """Tests for ProjectListAPIView"""
 
     def test_get(self):
-        """Test ProjectListAPIView get() as project owner"""
+        """Test ProjectListAPIView get() as superuser"""
         url = reverse('projectroles:api_project_list')
         response = self.request_knox(url)
 
         # Assert response
         self.assertEqual(response.status_code, 200)
         response_data = json.loads(response.content)
         self.assertEqual(len(response_data), 2)
@@ -293,74 +298,147 @@
                 'type': self.category.type,
                 'parent': None,
                 'description': self.category.description,
                 'readme': '',
                 'public_guest_access': False,
                 'archive': False,
                 'roles': {
-                    str(self.cat_owner_as.sodar_uuid): {
-                        'user': {
-                            'username': self.user.username,
-                            'name': self.user.name,
-                            'email': self.user.email,
-                            'is_superuser': True,
-                            'sodar_uuid': str(self.user.sodar_uuid),
-                        },
+                    str(self.owner_as_cat.sodar_uuid): {
+                        'user': self.get_serialized_user(self.user_owner_cat),
                         'role': PROJECT_ROLE_OWNER,
-                        'sodar_uuid': str(self.cat_owner_as.sodar_uuid),
+                        'inherited': False,
+                        'sodar_uuid': str(self.owner_as_cat.sodar_uuid),
                     }
                 },
                 'sodar_uuid': str(self.category.sodar_uuid),
             },
             {
                 'title': self.project.title,
                 'type': self.project.type,
                 'parent': str(self.category.sodar_uuid),
                 'description': self.project.description,
                 'readme': '',
                 'public_guest_access': False,
                 'archive': False,
                 'roles': {
+                    str(self.owner_as_cat.sodar_uuid): {
+                        'user': self.get_serialized_user(self.user_owner_cat),
+                        'role': PROJECT_ROLE_OWNER,
+                        'inherited': True,
+                        'sodar_uuid': str(self.owner_as_cat.sodar_uuid),
+                    },
                     str(self.owner_as.sodar_uuid): {
-                        'user': {
-                            'username': self.user.username,
-                            'name': self.user.name,
-                            'email': self.user.email,
-                            'is_superuser': True,
-                            'sodar_uuid': str(self.user.sodar_uuid),
-                        },
+                        'user': self.get_serialized_user(self.user_owner),
                         'role': PROJECT_ROLE_OWNER,
+                        'inherited': False,
                         'sodar_uuid': str(self.owner_as.sodar_uuid),
-                    }
+                    },
                 },
                 'sodar_uuid': str(self.project.sodar_uuid),
             },
         ]
         self.assertEqual(response_data, expected)
 
+    def test_get_cat_owner(self):
+        """Test ProjectListAPIView get() as category owner"""
+        url = reverse('projectroles:api_project_list')
+        response = self.request_knox(
+            url, token=self.get_token(self.user_owner_cat)
+        )
+        self.assertEqual(response.status_code, 200)
+        response_data = json.loads(response.content)
+        self.assertEqual(len(response_data), 2)
+
+    def test_get_owner(self):
+        """Test ProjectListAPIView get() as project owner"""
+        url = reverse('projectroles:api_project_list')
+        response = self.request_knox(url, token=self.get_token(self.user_owner))
+        self.assertEqual(response.status_code, 200)
+        response_data = json.loads(response.content)
+        self.assertEqual(len(response_data), 1)
+        self.assertEqual(
+            response_data[0]['sodar_uuid'], str(self.project.sodar_uuid)
+        )
+
     def test_get_no_roles(self):
         """Test ProjectListAPIView get() without roles"""
-        user_no_roles = self.make_user('user_no_roles')
+        user_new = self.make_user('user_new')
         url = reverse('projectroles:api_project_list')
-        response = self.request_knox(url, token=self.get_token(user_no_roles))
-
+        response = self.request_knox(url, token=self.get_token(user_new))
         self.assertEqual(response.status_code, 200)
         response_data = json.loads(response.content)
         self.assertEqual(len(response_data), 0)
 
-    def test_get_limited_roles(self):
-        """Test ProjectListAPIView get() with only one role"""
-        user_no_roles = self.make_user('user_no_roles')
-        self.make_assignment(self.project, user_no_roles, self.role_contributor)
+    def test_get_member(self):
+        """Test ProjectListAPIView get() with only local role"""
+        user_new = self.make_user('user_new')
+        self.make_assignment(self.project, user_new, self.role_contributor)
+        url = reverse('projectroles:api_project_list')
+        response = self.request_knox(url, token=self.get_token(user_new))
+        self.assertEqual(response.status_code, 200)
+        response_data = json.loads(response.content)
+        self.assertEqual(len(response_data), 1)
+        self.assertEqual(
+            response_data[0]['sodar_uuid'], str(self.project.sodar_uuid)
+        )
+
+    def test_get_inherited_member(self):
+        """Test ProjectListAPIView get() with inherited member role"""
+        sub_category = self.make_project(
+            'SubCategory', PROJECT_TYPE_CATEGORY, self.category
+        )
+        self.make_assignment(sub_category, self.user_owner, self.role_owner)
+        sub_project = self.make_project(
+            'SubProject', PROJECT_TYPE_PROJECT, sub_category
+        )
+        self.make_assignment(sub_project, self.user_owner, self.role_owner)
+        user_new = self.make_user('user_new')
+        self.make_assignment(self.category, user_new, self.role_contributor)
         url = reverse('projectroles:api_project_list')
-        response = self.request_knox(url, token=self.get_token(user_no_roles))
+        response = self.request_knox(url, token=self.get_token(user_new))
+        self.assertEqual(response.status_code, 200)
+        response_data = json.loads(response.content)
+        self.assertEqual(len(response_data), 4)
 
+    def test_get_finder(self):
+        """Test ProjectListAPIView get() with finder"""
+        user_new = self.make_user('user_new')
+        self.make_assignment(self.category, user_new, self.role_finder)
+        url = reverse('projectroles:api_project_list')
+        response = self.request_knox(url, token=self.get_token(user_new))
+        self.assertEqual(response.status_code, 200)
+        response_data = json.loads(response.content)
+        self.assertEqual(len(response_data), 2)
+        self.assertEqual(
+            response_data[0]['sodar_uuid'], str(self.category.sodar_uuid)
+        )
+        self.assertEqual(
+            response_data[1]['sodar_uuid'], str(self.project.sodar_uuid)
+        )
+        self.assertEqual(
+            response_data[1],
+            {
+                'title': self.project.title,
+                'sodar_uuid': str(self.project.sodar_uuid),
+            },
+        )
+
+    def test_get_public_guest_access(self):
+        """Test ProjectListAPIView get() with public guest access"""
+        self.project.public_guest_access = True
+        self.project.save()
+        user_new = self.make_user('user_new')
+        url = reverse('projectroles:api_project_list')
+        response = self.request_knox(url, token=self.get_token(user_new))
         self.assertEqual(response.status_code, 200)
         response_data = json.loads(response.content)
         self.assertEqual(len(response_data), 1)
+        self.assertEqual(
+            response_data[0]['sodar_uuid'], str(self.project.sodar_uuid)
+        )
 
 
 class TestProjectRetrieveAPIView(AppSettingMixin, TestCoreAPIViewsBase):
     """Tests for ProjectRetrieveAPIView"""
 
     def test_get_category(self):
         """Test ProjectRetrieveAPIView get() with a category"""
@@ -377,26 +455,27 @@
             'type': self.category.type,
             'parent': None,
             'description': self.category.description,
             'readme': '',
             'public_guest_access': False,
             'archive': False,
             'roles': {
-                str(self.cat_owner_as.sodar_uuid): {
-                    'user': self.get_serialized_user(self.user),
+                str(self.owner_as_cat.sodar_uuid): {
+                    'user': self.get_serialized_user(self.user_owner_cat),
                     'role': PROJECT_ROLE_OWNER,
-                    'sodar_uuid': str(self.cat_owner_as.sodar_uuid),
+                    'inherited': False,
+                    'sodar_uuid': str(self.owner_as_cat.sodar_uuid),
                 }
             },
             'sodar_uuid': str(self.category.sodar_uuid),
         }
         self.assertEqual(response_data, expected)
 
     def test_get_project(self):
-        """Test ProjectRetrieveAPIView get() with a project"""
+        """Test ProjectRetrieveAPIView get() with project"""
         url = reverse(
             'projectroles:api_project_retrieve',
             kwargs={'project': self.project.sodar_uuid},
         )
         response = self.request_knox(url)
 
         self.assertEqual(response.status_code, 200)
@@ -406,41 +485,61 @@
             'type': self.project.type,
             'parent': str(self.category.sodar_uuid),
             'description': self.project.description,
             'readme': '',
             'public_guest_access': False,
             'archive': False,
             'roles': {
+                str(self.owner_as_cat.sodar_uuid): {
+                    'user': self.get_serialized_user(self.user_owner_cat),
+                    'role': PROJECT_ROLE_OWNER,
+                    'inherited': True,
+                    'sodar_uuid': str(self.owner_as_cat.sodar_uuid),
+                },
                 str(self.owner_as.sodar_uuid): {
-                    'user': self.get_serialized_user(self.user),
+                    'user': self.get_serialized_user(self.user_owner),
                     'role': PROJECT_ROLE_OWNER,
+                    'inherited': False,
                     'sodar_uuid': str(self.owner_as.sodar_uuid),
-                }
+                },
             },
             'sodar_uuid': str(self.project.sodar_uuid),
         }
         self.assertEqual(response_data, expected)
 
     def test_get_not_found(self):
-        """Test ProjectRetrieveAPIView get() with an invalid UUID"""
+        """Test ProjectRetrieveAPIView get() with invalid UUID"""
         url = reverse(
             'projectroles:api_project_retrieve',
             kwargs={'project': INVALID_UUID},
         )
         response = self.request_knox(url)
         self.assertEqual(response.status_code, 404)
 
+    def test_get_inherited_member(self):
+        """Test ProjectRetrieveAPIView get() with inherited member"""
+        user_new = self.make_user('user_new')
+        self.make_assignment(self.category, user_new, self.role_contributor)
+        url = reverse(
+            'projectroles:api_project_retrieve',
+            kwargs={'project': self.project.sodar_uuid},
+        )
+        response = self.request_knox(url)
+        self.assertEqual(response.status_code, 200)
+        response_data = json.loads(response.content)
+        self.assertEqual(len(response_data['roles']), 3)
+
 
 class TestProjectCreateAPIView(
     RemoteSiteMixin, RemoteProjectMixin, TestCoreAPIViewsBase
 ):
     """Tests for ProjectCreateAPIView"""
 
     def test_create_category(self):
-        """Test creating a root category"""
+        """Test creating root category"""
         self.assertEqual(Project.objects.count(), 2)
 
         url = reverse('projectroles:api_project_create')
         post_data = {
             'title': NEW_CATEGORY_TITLE,
             'type': PROJECT_TYPE_CATEGORY,
             'parent': '',
@@ -449,15 +548,14 @@
             'public_guest_access': False,
             'owner': str(self.user.sodar_uuid),
         }
         response = self.request_knox(url, method='POST', data=post_data)
 
         self.assertEqual(response.status_code, 201, msg=response.content)
         self.assertEqual(Project.objects.count(), 3)
-
         # Assert object content
         new_category = Project.objects.get(title=NEW_CATEGORY_TITLE)
         model_dict = model_to_dict(new_category)
         model_dict['readme'] = model_dict['readme'].raw
         expected = {
             'id': new_category.pk,
             'title': new_category.title,
@@ -488,15 +586,15 @@
             'readme': new_category.readme.raw,
             'public_guest_access': False,
             'sodar_uuid': str(new_category.sodar_uuid),
         }
         self.assertEqual(json.loads(response.content), expected)
 
     def test_create_category_nested(self):
-        """Test creating a category under an existing category"""
+        """Test creating category under existing category"""
         self.assertEqual(Project.objects.count(), 2)
 
         url = reverse('projectroles:api_project_create')
         post_data = {
             'title': NEW_CATEGORY_TITLE,
             'type': PROJECT_TYPE_CATEGORY,
             'parent': str(self.category.sodar_uuid),
@@ -505,15 +603,14 @@
             'public_guest_access': False,
             'owner': str(self.user.sodar_uuid),
         }
         response = self.request_knox(url, method='POST', data=post_data)
 
         self.assertEqual(response.status_code, 201, msg=response.content)
         self.assertEqual(Project.objects.count(), 3)
-
         new_category = Project.objects.get(title=NEW_CATEGORY_TITLE)
         model_dict = model_to_dict(new_category)
         model_dict['readme'] = model_dict['readme'].raw
         expected = {
             'id': new_category.pk,
             'title': new_category.title,
             'type': new_category.type,
@@ -529,28 +626,27 @@
         self.assertEqual(model_dict, expected)
         self.assertEqual(
             RoleAssignment.objects.filter(
                 project=new_category, user=self.user, role=self.role_owner
             ).count(),
             1,
         )
-
         expected = {
             'title': NEW_CATEGORY_TITLE,
             'type': PROJECT_TYPE_CATEGORY,
             'parent': str(self.category.sodar_uuid),
             'description': new_category.description,
             'readme': new_category.readme.raw,
             'public_guest_access': False,
             'sodar_uuid': str(new_category.sodar_uuid),
         }
         self.assertEqual(json.loads(response.content), expected)
 
     def test_create_project(self):
-        """Test creating a project under an existing category"""
+        """Test creating project under existing category"""
         self.assertEqual(Project.objects.count(), 2)
 
         url = reverse('projectroles:api_project_create')
         post_data = {
             'title': NEW_PROJECT_TITLE,
             'type': PROJECT_TYPE_PROJECT,
             'parent': str(self.category.sodar_uuid),
@@ -559,15 +655,14 @@
             'public_guest_access': False,
             'owner': str(self.user.sodar_uuid),
         }
         response = self.request_knox(url, method='POST', data=post_data)
 
         self.assertEqual(response.status_code, 201, msg=response.content)
         self.assertEqual(Project.objects.count(), 3)
-
         new_project = Project.objects.get(title=NEW_PROJECT_TITLE)
         model_dict = model_to_dict(new_project)
         model_dict['readme'] = model_dict['readme'].raw
         expected = {
             'id': new_project.pk,
             'title': new_project.title,
             'type': new_project.type,
@@ -583,164 +678,166 @@
         self.assertEqual(model_dict, expected)
         self.assertEqual(
             RoleAssignment.objects.filter(
                 project=new_project, user=self.user, role=self.role_owner
             ).count(),
             1,
         )
-
         expected = {
             'title': NEW_PROJECT_TITLE,
             'type': PROJECT_TYPE_PROJECT,
             'parent': str(self.category.sodar_uuid),
             'description': new_project.description,
             'readme': new_project.readme.raw,
             'public_guest_access': False,
             'sodar_uuid': str(new_project.sodar_uuid),
         }
         self.assertEqual(json.loads(response.content), expected)
 
     def test_create_project_root(self):
-        """Test creating a project in root (should fail)"""
+        """Test creating project in root (should fail)"""
         self.assertEqual(Project.objects.count(), 2)
-
         url = reverse('projectroles:api_project_create')
         post_data = {
             'title': NEW_PROJECT_TITLE,
             'type': PROJECT_TYPE_PROJECT,
             'parent': None,
             'description': 'description',
             'readme': 'readme',
             'public_guest_access': False,
             'owner': str(self.user.sodar_uuid),
         }
         response = self.request_knox(url, method='POST', data=post_data)
-
         self.assertEqual(response.status_code, 400)
         self.assertEqual(Project.objects.count(), 2)
 
     @override_settings(PROJECTROLES_DISABLE_CATEGORIES=True)
     def test_create_project_disable_categories(self):
-        """Test creating a project in root with disabled categories"""
+        """Test creating project in root with disabled categories"""
         self.assertEqual(Project.objects.count(), 2)
-
         url = reverse('projectroles:api_project_create')
         post_data = {
             'title': NEW_PROJECT_TITLE,
             'type': PROJECT_TYPE_PROJECT,
             'parent': '',
             'description': 'description',
             'readme': 'readme',
             'public_guest_access': False,
             'owner': str(self.user.sodar_uuid),
         }
         response = self.request_knox(url, method='POST', data=post_data)
-
         self.assertEqual(response.status_code, 201, msg=response.content)
         self.assertEqual(Project.objects.count(), 3)
 
     def test_create_project_duplicate_title(self):
-        """Test creating a project with a title already in category (should fail)"""
+        """Test creating project with title already in category (should fail)"""
         self.assertEqual(Project.objects.count(), 2)
-
         url = reverse('projectroles:api_project_create')
         post_data = {
             'title': self.project.title,
             'type': PROJECT_TYPE_PROJECT,
             'parent': str(self.category.sodar_uuid),
             'description': 'description',
             'readme': 'readme',
             'public_guest_access': False,
             'owner': str(self.user.sodar_uuid),
         }
         response = self.request_knox(url, method='POST', data=post_data)
+        self.assertEqual(response.status_code, 400)
+        self.assertEqual(Project.objects.count(), 2)
 
+    def test_create_project_title_delimiter(self):
+        """Test creating project with category delimiter in title (should fail)"""
+        self.assertEqual(Project.objects.count(), 2)
+        url = reverse('projectroles:api_project_create')
+        post_data = {
+            'title': 'New{}Project'.format(CAT_DELIMITER),
+            'type': PROJECT_TYPE_PROJECT,
+            'parent': str(self.category.sodar_uuid),
+            'description': 'description',
+            'readme': 'readme',
+            'public_guest_access': False,
+            'owner': str(self.user.sodar_uuid),
+        }
+        response = self.request_knox(url, method='POST', data=post_data)
         self.assertEqual(response.status_code, 400)
         self.assertEqual(Project.objects.count(), 2)
 
     def test_create_project_unknown_user(self):
-        """Test creating a project with a non-existent user (should fail)"""
+        """Test creating project with non-existent user (should fail)"""
         self.assertEqual(Project.objects.count(), 2)
-
         url = reverse('projectroles:api_project_create')
         post_data = {
             'title': NEW_PROJECT_TITLE,
             'type': PROJECT_TYPE_PROJECT,
             'parent': str(self.category.sodar_uuid),
             'description': 'description',
             'readme': 'readme',
             'public_guest_access': False,
             'owner': INVALID_UUID,
         }
         response = self.request_knox(url, method='POST', data=post_data)
-
         self.assertEqual(response.status_code, 400)
         self.assertEqual(Project.objects.count(), 2)
 
     def test_create_project_unknown_parent(self):
-        """Test creating a project with a non-existent parent category (should fail)"""
+        """Test creating project with non-existent parent (should fail)"""
         self.assertEqual(Project.objects.count(), 2)
-
         url = reverse('projectroles:api_project_create')
         post_data = {
             'title': NEW_PROJECT_TITLE,
             'type': PROJECT_TYPE_PROJECT,
             'parent': INVALID_UUID,
             'description': 'description',
             'readme': 'readme',
             'public_guest_access': False,
             'owner': str(self.user.sodar_uuid),
         }
         response = self.request_knox(url, method='POST', data=post_data)
-
         self.assertEqual(response.status_code, 400)
         self.assertEqual(Project.objects.count(), 2)
 
     def test_create_project_invalid_parent(self):
-        """Test creating a project with a project as parent (should fail)"""
+        """Test creating project with project as parent (should fail)"""
         self.assertEqual(Project.objects.count(), 2)
-
         url = reverse('projectroles:api_project_create')
         post_data = {
             'title': NEW_PROJECT_TITLE,
             'type': PROJECT_TYPE_PROJECT,
             'parent': str(self.project.sodar_uuid),
             'description': 'description',
             'readme': 'readme',
             'public_guest_access': False,
             'owner': str(self.user.sodar_uuid),
         }
         response = self.request_knox(url, method='POST', data=post_data)
-
         self.assertEqual(response.status_code, 400)
         self.assertEqual(Project.objects.count(), 2)
 
     @override_settings(PROJECTROLES_SITE_MODE=SITE_MODE_TARGET)
     def test_create_project_target_enabled(self):
-        """Test creating a project as TARGET with target creation allowed"""
+        """Test creating project as TARGET with target creation allowed"""
         self.assertEqual(Project.objects.count(), 2)
-
         url = reverse('projectroles:api_project_create')
         post_data = {
             'title': NEW_PROJECT_TITLE,
             'type': PROJECT_TYPE_PROJECT,
             'parent': str(self.category.sodar_uuid),
             'description': 'description',
             'readme': 'readme',
             'public_guest_access': False,
             'owner': str(self.user.sodar_uuid),
         }
         response = self.request_knox(url, method='POST', data=post_data)
-
         self.assertEqual(response.status_code, 201, msg=response.content)
         self.assertEqual(Project.objects.count(), 3)
 
     @override_settings(PROJECTROLES_SITE_MODE=SITE_MODE_TARGET)
     def test_create_project_target_remote(self):
-        """Test creating a project as TARGET under a remote category (should fail)"""
+        """Test creating project as TARGET under remote category (should fail)"""
         # Create source site
         source_site = self.make_site(
             name=REMOTE_SITE_NAME,
             url=REMOTE_SITE_URL,
             mode=SITE_MODE_SOURCE,
             description=REMOTE_SITE_DESC,
             secret=REMOTE_SITE_SECRET,
@@ -770,29 +867,27 @@
         self.assertEqual(Project.objects.count(), 2)
 
     @override_settings(
         PROJECTROLES_SITE_MODE=SITE_MODE_TARGET,
         PROJECTROLES_TARGET_CREATE=False,
     )
     def test_create_project_target_disabled(self):
-        """Test creating a project as TARGET with target creation disallowed (should fail)"""
+        """Test creating project as TARGET with target creation disallowed (should fail)"""
         self.assertEqual(Project.objects.count(), 2)
-
         url = reverse('projectroles:api_project_create')
         post_data = {
             'title': NEW_PROJECT_TITLE,
             'type': PROJECT_TYPE_PROJECT,
             'parent': str(self.category.sodar_uuid),
             'description': 'description',
             'readme': 'readme',
             'public_guest_access': False,
             'owner': str(self.user.sodar_uuid),
         }
         response = self.request_knox(url, method='POST', data=post_data)
-
         self.assertEqual(response.status_code, 403, msg=response.content)
         self.assertEqual(Project.objects.count(), 2)
 
 
 class TestProjectUpdateAPIView(
     RemoteSiteMixin, RemoteProjectMixin, TestCoreAPIViewsBase
 ):
@@ -808,15 +903,15 @@
         )
         put_data = {
             'title': UPDATED_TITLE,
             'type': PROJECT_TYPE_CATEGORY,
             'parent': '',
             'description': UPDATED_DESC,
             'readme': UPDATED_README,
-            'public_guest_access': True,
+            'public_guest_access': False,
         }
         response = self.request_knox(url, method='PUT', data=put_data)
 
         self.assertEqual(response.status_code, 200, msg=response.content)
         self.assertEqual(Project.objects.count(), 2)
 
         self.category.refresh_from_db()
@@ -825,41 +920,59 @@
         expected = {
             'id': self.category.pk,
             'title': UPDATED_TITLE,
             'type': PROJECT_TYPE_CATEGORY,
             'parent': None,
             'description': UPDATED_DESC,
             'readme': UPDATED_README,
-            'public_guest_access': True,
+            'public_guest_access': False,
             'archive': False,
             'full_title': UPDATED_TITLE,
             'has_public_children': False,
             'sodar_uuid': self.category.sodar_uuid,
         }
         self.assertEqual(model_dict, expected)
 
         expected = {
             'title': UPDATED_TITLE,
             'type': PROJECT_TYPE_CATEGORY,
             'parent': None,
             'description': UPDATED_DESC,
             'readme': UPDATED_README,
-            'public_guest_access': True,
+            'public_guest_access': False,
             'archive': False,
             'roles': {
                 str(self.category.get_owner().sodar_uuid): {
                     'role': PROJECT_ROLE_OWNER,
-                    'user': self.get_serialized_user(self.user),
+                    'user': self.get_serialized_user(self.user_owner_cat),
+                    'inherited': False,
                     'sodar_uuid': str(self.category.get_owner().sodar_uuid),
                 }
             },
             'sodar_uuid': str(self.category.sodar_uuid),
         }
         self.assertEqual(json.loads(response.content), expected)
 
+    def test_put_public_guest_access_category(self):
+        """Test setting public guest access for category"""
+        url = reverse(
+            'projectroles:api_project_update',
+            kwargs={'project': self.category.sodar_uuid},
+        )
+        put_data = {
+            'title': UPDATED_TITLE,
+            'type': PROJECT_TYPE_CATEGORY,
+            'parent': '',
+            'description': UPDATED_DESC,
+            'readme': UPDATED_README,
+            'public_guest_access': True,
+        }
+        response = self.request_knox(url, method='PUT', data=put_data)
+        self.assertEqual(response.status_code, 400, msg=response.content)
+
     def test_put_project(self):
         """Test put() for project updating"""
         self.assertEqual(Project.objects.count(), 2)
 
         url = reverse(
             'projectroles:api_project_update',
             kwargs={'project': self.project.sodar_uuid},
@@ -900,19 +1013,26 @@
             'type': PROJECT_TYPE_PROJECT,
             'parent': str(self.category.sodar_uuid),
             'description': UPDATED_DESC,
             'readme': UPDATED_README,
             'public_guest_access': True,
             'archive': False,
             'roles': {
+                str(self.category.get_owner().sodar_uuid): {
+                    'role': PROJECT_ROLE_OWNER,
+                    'user': self.get_serialized_user(self.user_owner_cat),
+                    'inherited': True,
+                    'sodar_uuid': str(self.category.get_owner().sodar_uuid),
+                },
                 str(self.project.get_owner().sodar_uuid): {
                     'role': PROJECT_ROLE_OWNER,
-                    'user': self.get_serialized_user(self.user),
+                    'user': self.get_serialized_user(self.user_owner),
+                    'inherited': False,
                     'sodar_uuid': str(self.project.get_owner().sodar_uuid),
-                }
+                },
             },
             'sodar_uuid': str(self.project.sodar_uuid),
         }
         self.assertEqual(json.loads(response.content), expected)
 
     def test_patch_category(self):
         """Test patch() for updating category metadata"""
@@ -945,28 +1065,29 @@
             'public_guest_access': False,
             'archive': False,
             'full_title': UPDATED_TITLE,
             'has_public_children': False,
             'sodar_uuid': self.category.sodar_uuid,
         }
         self.assertEqual(model_dict, expected)
-        self.assertEqual(self.category.get_owner().user, self.user)
+        self.assertEqual(self.category.get_owner().user, self.user_owner_cat)
 
         expected = {
             'title': UPDATED_TITLE,
             'type': PROJECT_TYPE_CATEGORY,
             'parent': None,
             'description': UPDATED_DESC,
             'readme': UPDATED_README,
             'public_guest_access': False,
             'archive': False,
             'roles': {
                 str(self.category.get_owner().sodar_uuid): {
                     'role': PROJECT_ROLE_OWNER,
-                    'user': self.get_serialized_user(self.user),
+                    'user': self.get_serialized_user(self.user_owner_cat),
+                    'inherited': False,
                     'sodar_uuid': str(self.category.get_owner().sodar_uuid),
                 }
             },
             'sodar_uuid': str(self.category.sodar_uuid),
         }
         self.assertEqual(json.loads(response.content), expected)
 
@@ -1002,69 +1123,88 @@
             'public_guest_access': True,
             'archive': False,
             'full_title': self.category.title + ' / ' + UPDATED_TITLE,
             'has_public_children': False,
             'sodar_uuid': self.project.sodar_uuid,
         }
         self.assertEqual(model_dict, expected)
-        self.assertEqual(self.project.get_owner().user, self.user)
+        self.assertEqual(self.project.get_owner().user, self.user_owner)
 
         expected = {
             'title': UPDATED_TITLE,
             'type': PROJECT_TYPE_PROJECT,
             'parent': str(self.category.sodar_uuid),
             'description': UPDATED_DESC,
             'readme': UPDATED_README,
             'public_guest_access': True,
             'archive': False,
             'roles': {
+                str(self.category.get_owner().sodar_uuid): {
+                    'role': PROJECT_ROLE_OWNER,
+                    'user': self.get_serialized_user(self.user_owner_cat),
+                    'inherited': True,
+                    'sodar_uuid': str(self.category.get_owner().sodar_uuid),
+                },
                 str(self.project.get_owner().sodar_uuid): {
                     'role': PROJECT_ROLE_OWNER,
-                    'user': self.get_serialized_user(self.user),
+                    'user': self.get_serialized_user(self.user_owner),
+                    'inherited': False,
                     'sodar_uuid': str(self.project.get_owner().sodar_uuid),
-                }
+                },
             },
             'sodar_uuid': str(self.project.sodar_uuid),
         }
         self.assertEqual(json.loads(response.content), expected)
 
+    def test_patch_project_title_delimiter(self):
+        """Test patch() with category delimiter in title (should fail)"""
+        url = reverse(
+            'projectroles:api_project_update',
+            kwargs={'project': self.project.sodar_uuid},
+        )
+        patch_data = {'title': 'New{}Project'.format(CAT_DELIMITER)}
+        response = self.request_knox(url, method='PATCH', data=patch_data)
+        self.assertEqual(response.status_code, 400, msg=response.content)
+
     def test_patch_project_owner(self):
         """Test patch() for updating project owner (should fail)"""
         new_owner = self.make_user('new_owner')
         url = reverse(
             'projectroles:api_project_update',
             kwargs={'project': self.project.sodar_uuid},
         )
         patch_data = {'owner': str(new_owner.sodar_uuid)}
         response = self.request_knox(url, method='PATCH', data=patch_data)
         self.assertEqual(response.status_code, 400, msg=response.content)
 
     def test_patch_project_move(self):
-        """Test patch() for moving project under a different category"""
+        """Test patch() for moving project under different category"""
         self.assertEqual(
             self.project.full_title,
             self.category.title + ' / ' + self.project.title,
         )
 
         new_category = self.make_project(
             'NewCategory', PROJECT_TYPE_CATEGORY, None
         )
-        self.make_assignment(new_category, self.user, self.role_owner)
+        self.make_assignment(new_category, self.user_owner_cat, self.role_owner)
         url = reverse(
             'projectroles:api_project_update',
             kwargs={'project': self.project.sodar_uuid},
         )
         patch_data = {'parent': str(new_category.sodar_uuid)}
         response = self.request_knox(url, method='PATCH', data=patch_data)
 
         self.assertEqual(response.status_code, 200, msg=response.content)
         self.project.refresh_from_db()
         model_dict = model_to_dict(self.project)
         self.assertEqual(model_dict['parent'], new_category.pk)
-        self.assertEqual(self.project.get_owner().user, self.user)
+        owners = [a.user for a in self.project.get_owners()]
+        self.assertIn(self.user_owner_cat, owners)
+        self.assertIn(self.user_owner, owners)
 
         # Assert child project full title update
         self.assertEqual(
             self.project.full_title,
             new_category.title + ' / ' + self.project.title,
         )
         self.assertEqual(
@@ -1083,15 +1223,14 @@
             kwargs={'project': self.project.sodar_uuid},
         )
         patch_data = {'parent': str(new_category.sodar_uuid)}
         # Disable superuser status from self.user and perform request
         self.user.is_superuser = False
         self.user.save()
         response = self.request_knox(url, method='PATCH', data=patch_data)
-
         self.assertEqual(response.status_code, 403, msg=response.content)
 
     def test_patch_project_move_root(self):
         """Test patch() for moving project without permissions (should fail)"""
         new_category = self.make_project(
             'NewCategory', PROJECT_TYPE_CATEGORY, None
         )
@@ -1099,15 +1238,14 @@
         self.make_assignment(new_category, new_owner, self.role_owner)
         url = reverse(
             'projectroles:api_project_update',
             kwargs={'project': self.project.sodar_uuid},
         )
         patch_data = {'parent': ''}
         response = self.request_knox(url, method='PATCH', data=patch_data)
-
         self.assertEqual(response.status_code, 200, msg=response.content)
 
     def test_patch_project_move_root_unallowed(self):
         """Test patch() for moving project to root without permissions (should fail)"""
         new_category = self.make_project(
             'NewCategory', PROJECT_TYPE_CATEGORY, None
         )
@@ -1118,41 +1256,38 @@
             kwargs={'project': self.project.sodar_uuid},
         )
         patch_data = {'parent': ''}
         # Disable superuser status from self.user and perform request
         self.user.is_superuser = False
         self.user.save()
         response = self.request_knox(url, method='PATCH', data=patch_data)
-
         self.assertEqual(response.status_code, 403, msg=response.content)
 
     def test_patch_project_move_child(self):
-        """Test patch() for moving a category inside its child (should fail)"""
+        """Test patch() for moving category inside its child (should fail)"""
         new_category = self.make_project(
             'NewCategory', PROJECT_TYPE_CATEGORY, self.category
         )
         self.make_assignment(new_category, self.user, self.role_owner)
         url = reverse(
             'projectroles:api_project_update',
             kwargs={'project': self.category.sodar_uuid},
         )
         patch_data = {'parent': str(new_category.sodar_uuid)}
         response = self.request_knox(url, method='PATCH', data=patch_data)
-
         self.assertEqual(response.status_code, 400, msg=response.content)
 
     def test_patch_project_type_change(self):
-        """Test patch() with a changed project type (should fail)"""
+        """Test patch() with changed project type (should fail)"""
         url = reverse(
             'projectroles:api_project_update',
             kwargs={'project': self.project.sodar_uuid},
         )
         patch_data = {'type': PROJECT_TYPE_CATEGORY}
         response = self.request_knox(url, method='PATCH', data=patch_data)
-
         self.assertEqual(response.status_code, 400, msg=response.content)
 
     def test_patch_project_public(self):
         """Test patch() with changed public guest access"""
         self.assertEqual(self.project.public_guest_access, False)
         self.assertEqual(self.category.has_public_children, False)
 
@@ -1183,15 +1318,14 @@
         )
         self.make_remote_project(
             project_uuid=self.project.sodar_uuid,
             project=self.project,
             site=source_site,
             level=SODAR_CONSTANTS['REMOTE_LEVEL_READ_ROLES'],
         )
-
         url = reverse(
             'projectroles:api_project_update',
             kwargs={'project': self.project.sodar_uuid},
         )
         patch_data = {
             'title': UPDATED_TITLE,
             'description': UPDATED_DESC,
@@ -1207,19 +1341,18 @@
     """Tests for RoleAssignmentCreateAPIView"""
 
     def setUp(self):
         super().setUp()
         self.assign_user = self.make_user('assign_user')
 
     def test_create_contributor(self):
-        """Test creating a contributor role for user"""
+        """Test creating contributor role for user"""
         self.assertEqual(
             RoleAssignment.objects.filter(project=self.project).count(), 1
         )
-
         url = reverse(
             'projectroles:api_role_create',
             kwargs={'project': self.project.sodar_uuid},
         )
         post_data = {
             'role': PROJECT_ROLE_CONTRIBUTOR,
             'user': str(self.assign_user.sodar_uuid),
@@ -1241,97 +1374,96 @@
             'role': PROJECT_ROLE_CONTRIBUTOR,
             'user': str(self.assign_user.sodar_uuid),
             'sodar_uuid': str(role_as.sodar_uuid),
         }
         self.assertEqual(json.loads(response.content), expected)
 
     def test_create_owner(self):
-        """Test creating an owner role (should fail)"""
+        """Test creating owner role (should fail)"""
         url = reverse(
             'projectroles:api_role_create',
             kwargs={'project': self.project.sodar_uuid},
         )
         post_data = {
             'role': PROJECT_ROLE_OWNER,
             'user': str(self.assign_user.sodar_uuid),
         }
         response = self.request_knox(url, method='POST', data=post_data)
         self.assertEqual(response.status_code, 400, msg=response.content)
 
     def test_create_delegate(self):
-        """Test creating a delegate role for user as owner"""
-        # Disable superuser status from self.user
-        self.user.is_superuser = False
-        self.user.save()
+        """Test creating delegate role for user as owner"""
         self.assertEqual(
             RoleAssignment.objects.filter(project=self.project).count(), 1
         )
-
         url = reverse(
             'projectroles:api_role_create',
             kwargs={'project': self.project.sodar_uuid},
         )
         post_data = {
             'role': PROJECT_ROLE_DELEGATE,
             'user': str(self.assign_user.sodar_uuid),
         }
-        response = self.request_knox(url, method='POST', data=post_data)
+        response = self.request_knox(
+            url,
+            method='POST',
+            data=post_data,
+            token=self.get_token(self.user_owner),
+        )
 
         self.assertEqual(response.status_code, 201, msg=response.content)
         self.assertEqual(
             RoleAssignment.objects.filter(project=self.project).count(), 2
         )
         role_as = RoleAssignment.objects.filter(
             project=self.project, role=self.role_delegate, user=self.assign_user
         ).first()
         self.assertIsNotNone(role_as)
 
     def test_create_delegate_unauthorized(self):
-        """Test creating a delegate role without authorization (should fail)"""
+        """Test creating delegate role without authorization (should fail)"""
         # Create new user and grant delegate role
         new_user = self.make_user('new_user')
         self.make_assignment(self.project, new_user, self.role_contributor)
         new_user_token = self.get_token(new_user)
-
         url = reverse(
             'projectroles:api_role_create',
             kwargs={'project': self.project.sodar_uuid},
         )
         post_data = {
             'role': PROJECT_ROLE_DELEGATE,
             'user': str(self.assign_user.sodar_uuid),
         }
         response = self.request_knox(
             url, method='POST', data=post_data, token=new_user_token
         )
         self.assertEqual(response.status_code, 403, msg=response.content)
 
     def test_create_delegate_limit(self):
-        """Test creating a delegate role with limit reached (should fail)"""
+        """Test creating delegate role with limit reached (should fail)"""
         # Create new user and grant delegate role
         new_user = self.make_user('new_user')
         self.make_assignment(self.project, new_user, self.role_delegate)
-
         url = reverse(
             'projectroles:api_role_create',
             kwargs={'project': self.project.sodar_uuid},
         )
         post_data = {
             'role': PROJECT_ROLE_DELEGATE,
             'user': str(self.assign_user.sodar_uuid),
         }
         # NOTE: Post as owner
         response = self.request_knox(url, method='POST', data=post_data)
         self.assertEqual(response.status_code, 400, msg=response.content)
 
     def test_create_delegate_limit_inherit(self):
-        """Test creating a delegate role existing role for inherited owner"""
+        """Test creating delegate role existing role for inherited owner"""
         # Set up category owner
         new_user = self.make_user('new_user')
-        self.cat_owner_as.user = new_user
+        self.owner_as_cat.user = new_user
 
         url = reverse(
             'projectroles:api_role_create',
             kwargs={'project': self.project.sodar_uuid},
         )
         post_data = {
             'role': PROJECT_ROLE_DELEGATE,
@@ -1346,28 +1478,80 @@
         )
         role_as = RoleAssignment.objects.filter(
             project=self.project, role=self.role_delegate, user=self.assign_user
         ).first()
         self.assertIsNotNone(role_as)
 
     def test_create_delegate_category(self):
-        """Test creating a non-owner role for category"""
+        """Test creating non-owner role for category"""
         url = reverse(
             'projectroles:api_role_create',
             kwargs={'project': self.category.sodar_uuid},
         )
         post_data = {
             'role': PROJECT_ROLE_DELEGATE,
             'user': str(self.assign_user.sodar_uuid),
         }
         response = self.request_knox(url, method='POST', data=post_data)
         self.assertEqual(response.status_code, 201, msg=response.content)
 
+    def test_create_finder_project(self):
+        """Test creating finder role for project (should fail)"""
+        self.assertEqual(
+            RoleAssignment.objects.filter(project=self.project).count(), 1
+        )
+        url = reverse(
+            'projectroles:api_role_create',
+            kwargs={'project': self.project.sodar_uuid},
+        )
+        post_data = {
+            'role': PROJECT_ROLE_FINDER,
+            'user': str(self.assign_user.sodar_uuid),
+        }
+        response = self.request_knox(
+            url,
+            method='POST',
+            data=post_data,
+            token=self.get_token(self.user_owner),
+        )
+        self.assertEqual(response.status_code, 400, msg=response.content)
+        self.assertEqual(
+            RoleAssignment.objects.filter(project=self.project).count(), 1
+        )
+
+    def test_create_finder_category(self):
+        """Test creating finder role for category"""
+        self.assertEqual(
+            RoleAssignment.objects.filter(project=self.category).count(), 1
+        )
+        url = reverse(
+            'projectroles:api_role_create',
+            kwargs={'project': self.category.sodar_uuid},
+        )
+        post_data = {
+            'role': PROJECT_ROLE_FINDER,
+            'user': str(self.assign_user.sodar_uuid),
+        }
+        response = self.request_knox(
+            url,
+            method='POST',
+            data=post_data,
+            token=self.get_token(self.user_owner_cat),
+        )
+        self.assertEqual(response.status_code, 201, msg=response.content)
+        self.assertEqual(
+            RoleAssignment.objects.filter(project=self.category).count(), 2
+        )
+        role_as = RoleAssignment.objects.filter(
+            project=self.category, role=self.role_finder, user=self.assign_user
+        ).first()
+        self.assertIsNotNone(role_as)
+
     def test_create_role_existing(self):
-        """Test creating a role for user already in the project"""
+        """Test creating role for user already in the project"""
         self.assertEqual(
             RoleAssignment.objects.filter(project=self.project).count(), 1
         )
 
         url = reverse(
             'projectroles:api_role_create',
             kwargs={'project': self.project.sodar_uuid},
@@ -1378,29 +1562,129 @@
         }
         response = self.request_knox(url, method='POST', data=post_data)
 
         self.assertEqual(response.status_code, 201, msg=response.content)
         self.assertEqual(
             RoleAssignment.objects.filter(project=self.project).count(), 2
         )
-
         post_data = {
             'role': PROJECT_ROLE_GUEST,
             'user': str(self.assign_user.sodar_uuid),
         }
         response = self.request_knox(url, method='POST', data=post_data)
 
         self.assertEqual(response.status_code, 400, msg=response.content)
         self.assertEqual(
             RoleAssignment.objects.filter(project=self.project).count(), 2
         )
 
+    def test_create_inherited_promote(self):
+        """Test creating promoted role for user with inherited role"""
+        # Create category role for user
+        self.make_assignment(self.category, self.assign_user, self.role_guest)
+        self.assertEqual(
+            RoleAssignment.objects.filter(project=self.category).count(), 2
+        )
+        self.assertEqual(
+            RoleAssignment.objects.filter(project=self.project).count(), 1
+        )
+
+        url = reverse(
+            'projectroles:api_role_create',
+            kwargs={'project': self.project.sodar_uuid},
+        )
+        post_data = {
+            'role': PROJECT_ROLE_CONTRIBUTOR,
+            'user': str(self.assign_user.sodar_uuid),
+        }
+        response = self.request_knox(url, method='POST', data=post_data)
+
+        self.assertEqual(response.status_code, 201, msg=response.content)
+        self.assertEqual(
+            RoleAssignment.objects.filter(project=self.category).count(), 2
+        )
+        self.assertEqual(
+            RoleAssignment.objects.filter(project=self.project).count(), 2
+        )
+        role_as = RoleAssignment.objects.filter(
+            project=self.project,
+            role=self.role_contributor,
+            user=self.assign_user,
+        ).first()
+        self.assertIsNotNone(role_as)
+
+    def test_create_inherited_equal(self):
+        """Test creating equal role for user with inherited role"""
+        self.make_assignment(
+            self.category, self.assign_user, self.role_contributor
+        )
+        self.assertEqual(
+            RoleAssignment.objects.filter(project=self.category).count(), 2
+        )
+        self.assertEqual(
+            RoleAssignment.objects.filter(project=self.project).count(), 1
+        )
+
+        url = reverse(
+            'projectroles:api_role_create',
+            kwargs={'project': self.project.sodar_uuid},
+        )
+        post_data = {
+            'role': PROJECT_ROLE_CONTRIBUTOR,
+            'user': str(self.assign_user.sodar_uuid),
+        }
+        response = self.request_knox(url, method='POST', data=post_data)
+
+        self.assertEqual(response.status_code, 201, msg=response.content)
+        self.assertEqual(
+            RoleAssignment.objects.filter(project=self.category).count(), 2
+        )
+        self.assertEqual(
+            RoleAssignment.objects.filter(project=self.project).count(), 2
+        )
+        role_as = RoleAssignment.objects.filter(
+            project=self.project,
+            role=self.role_contributor,
+            user=self.assign_user,
+        ).first()
+        self.assertIsNotNone(role_as)
+
+    def test_create_inherited_demote(self):
+        """Test creating demoted role for user with inherited role (should fail)"""
+        self.make_assignment(
+            self.category, self.assign_user, self.role_delegate
+        )
+        self.assertEqual(
+            RoleAssignment.objects.filter(project=self.category).count(), 2
+        )
+        self.assertEqual(
+            RoleAssignment.objects.filter(project=self.project).count(), 1
+        )
+
+        url = reverse(
+            'projectroles:api_role_create',
+            kwargs={'project': self.project.sodar_uuid},
+        )
+        post_data = {
+            'role': PROJECT_ROLE_CONTRIBUTOR,
+            'user': str(self.assign_user.sodar_uuid),
+        }
+        response = self.request_knox(url, method='POST', data=post_data)
+
+        self.assertEqual(response.status_code, 400, msg=response.content)
+        self.assertEqual(
+            RoleAssignment.objects.filter(project=self.category).count(), 2
+        )
+        self.assertEqual(
+            RoleAssignment.objects.filter(project=self.project).count(), 1
+        )
+
     @override_settings(PROJECTROLES_SITE_MODE=SITE_MODE_TARGET)
     def test_create_remote(self):
-        """Test creating a role for a remote project (should fail)"""
+        """Test creating role for remote project (should fail)"""
         # Create source site and remote project
         source_site = self.make_site(
             name=REMOTE_SITE_NAME,
             url=REMOTE_SITE_URL,
             mode=SITE_MODE_SOURCE,
             description=REMOTE_SITE_DESC,
             secret=REMOTE_SITE_SECRET,
@@ -1522,15 +1806,15 @@
             'role': PROJECT_ROLE_OWNER,
             'user': str(self.assign_user.sodar_uuid),
         }
         response = self.request_knox(url, method='PUT', data=put_data)
         self.assertEqual(response.status_code, 400, msg=response.content)
 
     def test_put_change_user(self):
-        """Test put() with a different user (should fail)"""
+        """Test put() with different user (should fail)"""
         new_user = self.make_user('new_user')
         url = reverse(
             'projectroles:api_role_update',
             kwargs={'roleassignment': self.update_as.sodar_uuid},
         )
         put_data = {
             'role': PROJECT_ROLE_GUEST,
@@ -1566,51 +1850,144 @@
             'project': str(self.project.sodar_uuid),
             'role': PROJECT_ROLE_GUEST,
             'user': str(self.assign_user.sodar_uuid),
             'sodar_uuid': str(self.update_as.sodar_uuid),
         }
         self.assertEqual(json.loads(response.content), expected)
 
-    def test_patch_change_user(self):
-        """Test patch() with a different user (should fail)"""
-        new_user = self.make_user('new_user')
+    def test_patch_role_finder_project(self):
+        """Test patch() for finder role updating in project (should fail)"""
+        self.assertEqual(RoleAssignment.objects.count(), 3)
         url = reverse(
             'projectroles:api_role_update',
             kwargs={'roleassignment': self.update_as.sodar_uuid},
         )
-        patch_data = {'user': str(new_user.sodar_uuid)}
+        patch_data = {'role': PROJECT_ROLE_FINDER}
+        response = self.request_knox(url, method='PATCH', data=patch_data)
+        self.assertEqual(response.status_code, 400, msg=response.content)
+
+    def test_patch_role_finder_category(self):
+        """Test patch() for finder role updating in categody"""
+        user_new = self.make_user('user_new')
+        new_as = self.make_assignment(self.category, user_new, self.role_finder)
+        self.assertEqual(RoleAssignment.objects.count(), 4)
+        url = reverse(
+            'projectroles:api_role_update',
+            kwargs={'roleassignment': new_as.sodar_uuid},
+        )
+        patch_data = {'role': PROJECT_ROLE_FINDER}
+        response = self.request_knox(url, method='PATCH', data=patch_data)
+        self.assertEqual(response.status_code, 200, msg=response.content)
+        self.assertEqual(RoleAssignment.objects.count(), 4)
+        new_as.refresh_from_db()
+        self.assertEqual(new_as.role, self.role_finder)
+
+    def test_patch_role_inherited_promote(self):
+        """Test patch() with promoted role for inherited user"""
+        self.make_assignment(
+            self.category, self.assign_user, self.role_contributor
+        )
+        self.assertEqual(RoleAssignment.objects.count(), 4)
+
+        url = reverse(
+            'projectroles:api_role_update',
+            kwargs={'roleassignment': self.update_as.sodar_uuid},
+        )
+        patch_data = {'role': PROJECT_ROLE_DELEGATE}
+        response = self.request_knox(url, method='PATCH', data=patch_data)
+
+        self.assertEqual(response.status_code, 200, msg=response.content)
+        self.assertEqual(RoleAssignment.objects.count(), 4)
+        expected = {
+            'project': str(self.project.sodar_uuid),
+            'role': PROJECT_ROLE_DELEGATE,
+            'user': str(self.assign_user.sodar_uuid),
+            'sodar_uuid': str(self.update_as.sodar_uuid),
+        }
+        self.assertEqual(json.loads(response.content), expected)
+
+    def test_patch_role_inherited_equal(self):
+        """Test patch() with equal role for inherited user"""
+        self.make_assignment(
+            self.category, self.assign_user, self.role_contributor
+        )
+        self.assertEqual(RoleAssignment.objects.count(), 4)
+
+        url = reverse(
+            'projectroles:api_role_update',
+            kwargs={'roleassignment': self.update_as.sodar_uuid},
+        )
+        patch_data = {'role': PROJECT_ROLE_CONTRIBUTOR}
+        response = self.request_knox(url, method='PATCH', data=patch_data)
+
+        self.assertEqual(response.status_code, 200, msg=response.content)
+        self.assertEqual(RoleAssignment.objects.count(), 4)
+        expected = {
+            'project': str(self.project.sodar_uuid),
+            'role': PROJECT_ROLE_CONTRIBUTOR,
+            'user': str(self.assign_user.sodar_uuid),
+            'sodar_uuid': str(self.update_as.sodar_uuid),
+        }
+        self.assertEqual(json.loads(response.content), expected)
+
+    def test_patch_role_inherited_demote(self):
+        """Test patch() with demoted role for inherited user (should fail)"""
+        self.make_assignment(
+            self.category, self.assign_user, self.role_contributor
+        )
+        self.assertEqual(RoleAssignment.objects.count(), 4)
+
+        url = reverse(
+            'projectroles:api_role_update',
+            kwargs={'roleassignment': self.update_as.sodar_uuid},
+        )
+        patch_data = {'role': PROJECT_ROLE_GUEST}
         response = self.request_knox(url, method='PATCH', data=patch_data)
+
         self.assertEqual(response.status_code, 400, msg=response.content)
+        self.assertEqual(RoleAssignment.objects.count(), 4)
+        self.update_as.refresh_from_db()
+        self.assertEqual(self.update_as.role, self.role_contributor)
 
     @override_settings(PROJECTROLES_SITE_MODE=SITE_MODE_TARGET)
     def test_patch_role_remote(self):
-        """Test patch() for updating a role in a remote project (should fail)"""
+        """Test patch() for updating role in remote project (should fail)"""
         # Create source site and remote project
         source_site = self.make_site(
             name=REMOTE_SITE_NAME,
             url=REMOTE_SITE_URL,
             mode=SITE_MODE_SOURCE,
             description=REMOTE_SITE_DESC,
             secret=REMOTE_SITE_SECRET,
         )
         self.make_remote_project(
             project_uuid=self.project.sodar_uuid,
             project=self.project,
             site=source_site,
             level=SODAR_CONSTANTS['REMOTE_LEVEL_READ_ROLES'],
         )
-
         url = reverse(
             'projectroles:api_role_update',
             kwargs={'roleassignment': self.update_as.sodar_uuid},
         )
         patch_data = {'role': PROJECT_ROLE_GUEST}
         response = self.request_knox(url, method='PATCH', data=patch_data)
         self.assertEqual(response.status_code, 400, msg=response.content)
 
+    def test_patch_user(self):
+        """Test patch() with different user (should fail)"""
+        new_user = self.make_user('new_user')
+        url = reverse(
+            'projectroles:api_role_update',
+            kwargs={'roleassignment': self.update_as.sodar_uuid},
+        )
+        patch_data = {'user': str(new_user.sodar_uuid)}
+        response = self.request_knox(url, method='PATCH', data=patch_data)
+        self.assertEqual(response.status_code, 400, msg=response.content)
+
 
 class TestRoleAssignmentDestroyAPIView(
     RemoteSiteMixin, RemoteProjectMixin, TestCoreAPIViewsBase
 ):
     """Tests for RoleAssignmentDestroyAPIView"""
 
     def setUp(self):
@@ -1663,15 +2040,15 @@
         )
         response = self.request_knox(url, method='DELETE')
         self.assertEqual(response.status_code, 400, msg=response.content)
         self.assertEqual(RoleAssignment.objects.count(), 3)
 
     @override_settings(PROJECTROLES_SITE_MODE=SITE_MODE_TARGET)
     def test_delete_remote(self):
-        """Test delete for a remote project (should fail)"""
+        """Test delete for remote project (should fail)"""
         # Create source site and remote project
         source_site = self.make_site(
             name=REMOTE_SITE_NAME,
             url=REMOTE_SITE_URL,
             mode=SITE_MODE_SOURCE,
             description=REMOTE_SITE_DESC,
             secret=REMOTE_SITE_SECRET,
@@ -1695,101 +2072,313 @@
 class TestRoleAssignmentOwnerTransferAPIView(
     RemoteSiteMixin, RemoteProjectMixin, TestCoreAPIViewsBase
 ):
     """Tests for RoleAssignmentOwnerTransferAPIView"""
 
     def setUp(self):
         super().setUp()
-        self.assign_user = self.make_user('assign_user')
+        self.user_guest = self.make_user('user_guest')
+        self.guest_as = self.make_assignment(
+            self.project, self.user_guest, self.role_guest
+        )
+        self.user_new = self.make_user('user_new')
 
-    def test_transfer_owner(self):
-        """Test transferring ownership for a project"""
+    def test_transfer(self):
+        """Test transferring ownership for project"""
         # Assign role to new user
+        self.make_assignment(self.project, self.user_new, self.role_contributor)
+        self.assertEqual(self.project.get_owner().user, self.user_owner)
+        url = reverse(
+            'projectroles:api_role_owner_transfer',
+            kwargs={'project': self.project.sodar_uuid},
+        )
+        post_data = {
+            'new_owner': self.user_new.username,
+            'old_owner_role': PROJECT_ROLE_CONTRIBUTOR,
+        }
+        response = self.request_knox(url, method='POST', data=post_data)
+        self.assertEqual(response.status_code, 200, msg=response.content)
+        self.assertEqual(self.project.get_owner().user, self.user_new)
+
+    def test_transfer_category(self):
+        """Test transferring ownership for category"""
         self.make_assignment(
-            self.project, self.assign_user, self.role_contributor
+            self.category, self.user_new, self.role_contributor
         )
-        self.assertEqual(self.project.get_owner().user, self.user)
+        self.assertEqual(self.category.get_owner().user, self.user_owner_cat)
         url = reverse(
             'projectroles:api_role_owner_transfer',
-            kwargs={'project': self.project.sodar_uuid},
+            kwargs={'project': self.category.sodar_uuid},
         )
         post_data = {
-            'new_owner': self.assign_user.username,
-            'old_owner_role': self.role_contributor.name,
+            'new_owner': self.user_new.username,
+            'old_owner_role': PROJECT_ROLE_CONTRIBUTOR,
         }
         response = self.request_knox(url, method='POST', data=post_data)
         self.assertEqual(response.status_code, 200, msg=response.content)
-        self.assertEqual(self.project.get_owner().user, self.assign_user)
+        self.assertEqual(self.category.get_owner().user, self.user_new)
 
-    def test_transfer_owner_category(self):
-        """Test transferring ownership for a category"""
+    def test_transfer_finder_project(self):
+        """Test transfer with finder role in project (should fail)"""
+        self.make_assignment(self.project, self.user_new, self.role_contributor)
+        self.assertEqual(self.project.get_owner().user, self.user_owner)
+        url = reverse(
+            'projectroles:api_role_owner_transfer',
+            kwargs={'project': self.project.sodar_uuid},
+        )
+        post_data = {
+            'new_owner': self.user_new.username,
+            'old_owner_role': PROJECT_ROLE_FINDER,
+        }
+        response = self.request_knox(url, method='POST', data=post_data)
+        self.assertEqual(response.status_code, 400, msg=response.content)
+        self.assertEqual(self.project.get_owner().user, self.user_owner)
+
+    def test_transfer_finder_category(self):
+        """Test transfer with finder role in category"""
         self.make_assignment(
-            self.category, self.assign_user, self.role_contributor
+            self.category, self.user_new, self.role_contributor
         )
-        self.assertEqual(self.category.get_owner().user, self.user)
+        self.assertEqual(self.category.get_owner().user, self.user_owner_cat)
         url = reverse(
             'projectroles:api_role_owner_transfer',
             kwargs={'project': self.category.sodar_uuid},
         )
         post_data = {
-            'new_owner': self.assign_user.username,
-            'old_owner_role': self.role_contributor.name,
+            'new_owner': self.user_new.username,
+            'old_owner_role': PROJECT_ROLE_FINDER,
         }
         response = self.request_knox(url, method='POST', data=post_data)
         self.assertEqual(response.status_code, 200, msg=response.content)
-        self.assertEqual(self.category.get_owner().user, self.assign_user)
+        self.assertEqual(self.category.get_owner().user, self.user_new)
 
-    def test_transfer_owner_inherit(self):
-        """Test transferring ownership to an inherited owner"""
+    def test_transfer_old_inherited_member(self):
+        """Test transfer from old owner with inherited non-owner role"""
         self.make_assignment(
-            self.project, self.assign_user, self.role_contributor
+            self.category, self.user_owner, self.role_contributor
         )
-        # Set alt owner to current project, make self.user inherited owner
-        alt_owner = self.make_user('alt_owner')
-        self.owner_as.user = alt_owner
-        self.owner_as.save()
-        self.assertEqual(self.project.get_owner().user, alt_owner)
+        self.assertEqual(self.project.get_role(self.user_owner), self.owner_as)
+        url = reverse(
+            'projectroles:api_role_owner_transfer',
+            kwargs={'project': self.project.sodar_uuid},
+        )
+        post_data = {
+            'new_owner': self.user_guest.username,
+            'old_owner_role': PROJECT_ROLE_CONTRIBUTOR,
+        }
+        response = self.request_knox(url, method='POST', data=post_data)
+        self.assertEqual(response.status_code, 200, msg=response.content)
+        self.assertEqual(self.project.get_owner().user, self.user_guest)
+        self.owner_as.refresh_from_db()
+        self.assertEqual(self.project.get_role(self.user_owner), self.owner_as)
+        self.assertEqual(self.owner_as.role, self.role_contributor)
+
+    def test_transfer_old_inherited_member_demote(self):
+        """Test transfer demoting inherited non-owner (should fail)"""
+        self.make_assignment(
+            self.category, self.user_owner, self.role_contributor
+        )
+        self.assertEqual(self.project.get_role(self.user_owner), self.owner_as)
+        url = reverse(
+            'projectroles:api_role_owner_transfer',
+            kwargs={'project': self.project.sodar_uuid},
+        )
+        post_data = {
+            'new_owner': self.user_guest.username,
+            'old_owner_role': PROJECT_ROLE_GUEST,
+        }
+        response = self.request_knox(url, method='POST', data=post_data)
+        self.assertEqual(response.status_code, 400, msg=response.content)
+        self.assertEqual(self.project.get_owner().user, self.user_owner)
+        self.assertEqual(
+            self.project.get_role(self.user_guest).role, self.role_guest
+        )
+
+    def test_transfer_old_inherited_owner(self):
+        """Test transfer from old owner with inherited owner role"""
+        self.owner_as_cat.user = self.user_owner
+        self.owner_as_cat.save()
+        self.assertEqual(self.project.get_role(self.user_owner), self.owner_as)
+        url = reverse(
+            'projectroles:api_role_owner_transfer',
+            kwargs={'project': self.project.sodar_uuid},
+        )
+        post_data = {
+            'new_owner': self.user_guest.username,
+            'old_owner_role': PROJECT_ROLE_OWNER,
+        }
+        response = self.request_knox(url, method='POST', data=post_data)
+        self.assertEqual(response.status_code, 200, msg=response.content)
+        self.assertEqual(self.project.get_owner().user, self.user_guest)
+        self.assertIsNone(
+            RoleAssignment.objects.filter(
+                project=self.project, user=self.user_owner
+            ).first()
+        )
+        self.assertEqual(
+            self.project.get_role(self.user_owner), self.owner_as_cat
+        )
+        self.assertEqual(self.owner_as.role, self.role_owner)
+
+    def test_transfer_old_inherited_owner_demote(self):
+        """Test transfer demoting inherited owner (should fail)"""
+        self.owner_as_cat.user = self.user_owner
+        self.owner_as_cat.save()
+        self.assertEqual(self.project.get_role(self.user_owner), self.owner_as)
+        url = reverse(
+            'projectroles:api_role_owner_transfer',
+            kwargs={'project': self.project.sodar_uuid},
+        )
+        post_data = {
+            'new_owner': self.user_guest.username,
+            'old_owner_role': PROJECT_ROLE_DELEGATE,
+        }
+        response = self.request_knox(url, method='POST', data=post_data)
+        self.assertEqual(response.status_code, 400, msg=response.content)
+        self.assertEqual(self.project.get_owner().user, self.user_owner)
         self.assertEqual(
-            self.project.get_owners(inherited_only=True)[0].user, self.user
+            self.project.get_role(self.user_guest).role, self.role_guest
         )
 
+    def test_transfer_new_inherited_member(self):
+        """Test transfer to new owner with inherited non-owner role"""
+        self.make_assignment(
+            self.category, self.user_new, self.role_contributor
+        )
+        self.assertEqual(
+            self.project.get_owners(inherited_only=True)[0].user,
+            self.user_owner_cat,
+        )
         url = reverse(
             'projectroles:api_role_owner_transfer',
             kwargs={'project': self.project.sodar_uuid},
         )
         post_data = {
-            'new_owner': self.user.username,
-            'old_owner_role': self.role_contributor.name,
+            'new_owner': self.user_new.username,
+            'old_owner_role': PROJECT_ROLE_CONTRIBUTOR,
         }
         response = self.request_knox(url, method='POST', data=post_data)
+        self.assertEqual(response.status_code, 200, msg=response.content)
+        self.assertEqual(self.project.get_owner().user, self.user_new)
+        self.owner_as.refresh_from_db()
+        self.assertEqual(self.project.get_role(self.user_owner), self.owner_as)
+        self.assertEqual(self.owner_as.role, self.role_contributor)
 
+    def test_transfer_new_inherited_owner(self):
+        """Test transfer to new owner with inherited owner role"""
+        self.assertEqual(self.project.get_owner().user, self.user_owner)
+        self.assertEqual(
+            self.project.get_owners(inherited_only=True)[0].user,
+            self.user_owner_cat,
+        )
+        url = reverse(
+            'projectroles:api_role_owner_transfer',
+            kwargs={'project': self.project.sodar_uuid},
+        )
+        post_data = {
+            'new_owner': self.user_owner_cat.username,
+            'old_owner_role': PROJECT_ROLE_CONTRIBUTOR,
+        }
+        response = self.request_knox(url, method='POST', data=post_data)
         self.assertEqual(response.status_code, 200, msg=response.content)
-        self.assertEqual(self.project.get_owner().user, self.user)
-        old_owner_as = RoleAssignment.objects.get(
-            project=self.project, user=alt_owner
+        self.assertEqual(self.project.get_owner().user, self.user_owner_cat)
+        self.owner_as.refresh_from_db()
+        self.assertEqual(self.project.get_role(self.user_owner), self.owner_as)
+        self.assertEqual(self.owner_as.role, self.role_contributor)
+        self.assertEqual(
+            self.project.get_role(self.user_owner_cat),
+            RoleAssignment.objects.get(
+                project=self.project,
+                user=self.user_owner_cat,
+                role=self.role_owner,
+            ),
         )
-        self.assertEqual(old_owner_as.role, self.role_contributor)
 
-    def test_transfer_owner_no_roles(self):
-        """Test transferring ownership to user with no existing roles (should fail)"""
+    def test_transfer_no_roles(self):
+        """Test transfer to user with no existing roles (should fail)"""
         # NOTE: No role given to user
         url = reverse(
             'projectroles:api_role_owner_transfer',
             kwargs={'project': self.project.sodar_uuid},
         )
         post_data = {
-            'new_owner': self.assign_user.username,
-            'old_owner_role': self.role_contributor.name,
+            'new_owner': self.user_new.username,
+            'old_owner_role': PROJECT_ROLE_CONTRIBUTOR,
         }
         response = self.request_knox(url, method='POST', data=post_data)
         self.assertEqual(response.status_code, 400, msg=response.content)
 
+    def test_transfer_inherit_promote(self):
+        """Test transfer with promoted inherited role for old owner"""
+        self.make_assignment(self.project, self.user_new, self.role_contributor)
+        # Set category role for project owner
+        self.make_assignment(self.category, self.user_owner, self.role_guest)
+        self.assertEqual(self.project.get_owner().user, self.user_owner)
+        url = reverse(
+            'projectroles:api_role_owner_transfer',
+            kwargs={'project': self.project.sodar_uuid},
+        )
+        post_data = {
+            'new_owner': self.user_new.username,
+            'old_owner_role': PROJECT_ROLE_CONTRIBUTOR,
+        }
+        response = self.request_knox(url, method='POST', data=post_data)
+        self.assertEqual(response.status_code, 200, msg=response.content)
+        self.assertEqual(self.project.get_owner().user, self.user_new)
+        self.assertEqual(
+            self.project.get_role(self.user_owner).role, self.role_contributor
+        )
+
+    def test_transfer_inherit_equal(self):
+        """Test transfer with equal inherited role for old owner"""
+        self.make_assignment(self.project, self.user_new, self.role_contributor)
+        # Set category role for project owner
+        self.make_assignment(
+            self.category, self.user_owner, self.role_contributor
+        )
+        self.assertEqual(self.project.get_owner().user, self.user_owner)
+        url = reverse(
+            'projectroles:api_role_owner_transfer',
+            kwargs={'project': self.project.sodar_uuid},
+        )
+        post_data = {
+            'new_owner': self.user_new.username,
+            'old_owner_role': PROJECT_ROLE_CONTRIBUTOR,
+        }
+        response = self.request_knox(url, method='POST', data=post_data)
+        self.assertEqual(response.status_code, 200, msg=response.content)
+        self.assertEqual(self.project.get_owner().user, self.user_new)
+        self.assertEqual(
+            self.project.get_role(self.user_owner).role, self.role_contributor
+        )
+
+    def test_transfer_inherit_demote(self):
+        """Test transfer with demoted role for old owner (should fail)"""
+        self.make_assignment(self.project, self.user_new, self.role_contributor)
+        # Set category role for project owner
+        self.make_assignment(self.category, self.user_owner, self.role_delegate)
+        self.assertEqual(self.project.get_owner().user, self.user_owner)
+        url = reverse(
+            'projectroles:api_role_owner_transfer',
+            kwargs={'project': self.project.sodar_uuid},
+        )
+        post_data = {
+            'new_owner': self.user_new.username,
+            'old_owner_role': PROJECT_ROLE_CONTRIBUTOR,
+        }
+        response = self.request_knox(url, method='POST', data=post_data)
+        self.assertEqual(response.status_code, 400, msg=response.content)
+        self.assertEqual(self.project.get_owner().user, self.user_owner)
+        self.assertEqual(
+            self.project.get_role(self.user_new).role, self.role_contributor
+        )
+
     @override_settings(PROJECTROLES_SITE_MODE=SITE_MODE_TARGET)
     def test_transfer_remote(self):
-        """Test transferring ownership for a remote project (should fail)"""
+        """Test transferring ownership for remote project (should fail)"""
         # Create source site and remote project
         source_site = self.make_site(
             name=REMOTE_SITE_NAME,
             url=REMOTE_SITE_URL,
             mode=SITE_MODE_SOURCE,
             description=REMOTE_SITE_DESC,
             secret=REMOTE_SITE_SECRET,
@@ -1797,30 +2386,28 @@
         self.make_remote_project(
             project_uuid=self.project.sodar_uuid,
             project=self.project,
             site=source_site,
             level=SODAR_CONSTANTS['REMOTE_LEVEL_READ_ROLES'],
         )
         # Assign role to new user
-        self.make_assignment(
-            self.project, self.assign_user, self.role_contributor
-        )
-        self.assertEqual(self.project.get_owner().user, self.user)
+        self.make_assignment(self.project, self.user_new, self.role_contributor)
+        self.assertEqual(self.project.get_owner().user, self.user_owner)
 
         url = reverse(
             'projectroles:api_role_owner_transfer',
             kwargs={'project': self.project.sodar_uuid},
         )
         post_data = {
-            'new_owner': self.assign_user.username,
-            'old_owner_role': self.role_contributor.name,
+            'new_owner': self.user_new.username,
+            'old_owner_role': PROJECT_ROLE_CONTRIBUTOR,
         }
         response = self.request_knox(url, method='POST', data=post_data)
         self.assertEqual(response.status_code, 400, msg=response.content)
-        self.assertEqual(self.project.get_owner().user, self.user)
+        self.assertEqual(self.project.get_owner().user, self.user_owner)
 
 
 class TestProjectInviteListAPIView(ProjectInviteMixin, TestCoreAPIViewsBase):
     """Tests for ProjectInviteListAPIView"""
 
     def setUp(self):
         super().setUp()
@@ -1853,38 +2440,38 @@
         self.assertEqual(response.status_code, 200)
         response_data = json.loads(response.content)
         self.assertEqual(len(response_data), 2)
         expected = [
             {
                 'email': INVITE_USER_EMAIL,
                 'project': str(self.project.sodar_uuid),
-                'role': self.role_guest.name,
+                'role': PROJECT_ROLE_GUEST,
                 'issuer': self.get_serialized_user(self.user),
                 'date_created': self.get_drf_datetime(self.invite.date_created),
                 'date_expire': self.get_drf_datetime(self.invite.date_expire),
                 'message': '',
                 'sodar_uuid': str(self.invite.sodar_uuid),
             },
             {
                 'email': INVITE_USER2_EMAIL,
                 'project': str(self.project.sodar_uuid),
-                'role': self.role_contributor.name,
+                'role': PROJECT_ROLE_CONTRIBUTOR,
                 'issuer': self.get_serialized_user(self.user),
                 'date_created': self.get_drf_datetime(
                     self.invite2.date_created
                 ),
                 'date_expire': self.get_drf_datetime(self.invite2.date_expire),
                 'message': INVITE_MESSAGE,
                 'sodar_uuid': str(self.invite2.sodar_uuid),
             },
         ]
         self.assertEqual(response_data, expected)
 
     def test_get_inactive(self):
-        """Test get() with an inactive invite"""
+        """Test get() with inactive invite"""
         self.invite.active = False
         self.invite.save()
 
         url = reverse(
             'projectroles:api_invite_list',
             kwargs={'project': self.project.sodar_uuid},
         )
@@ -1893,15 +2480,15 @@
         self.assertEqual(response.status_code, 200)
         response_data = json.loads(response.content)
         self.assertEqual(len(response_data), 1)
         expected = [
             {
                 'email': INVITE_USER2_EMAIL,
                 'project': str(self.project.sodar_uuid),
-                'role': self.role_contributor.name,
+                'role': PROJECT_ROLE_CONTRIBUTOR,
                 'issuer': self.get_serialized_user(self.user),
                 'date_created': self.get_drf_datetime(
                     self.invite2.date_created
                 ),
                 'date_expire': self.get_drf_datetime(self.invite2.date_expire),
                 'message': INVITE_MESSAGE,
                 'sodar_uuid': str(self.invite2.sodar_uuid),
@@ -1912,15 +2499,15 @@
 
 class TestProjectInviteCreateAPIView(
     RemoteSiteMixin, RemoteProjectMixin, TestCoreAPIViewsBase
 ):
     """Tests for ProjectInviteCreateAPIView"""
 
     def test_create(self):
-        """Test creating a contributor invite for user"""
+        """Test creating contributor invite for user"""
         self.assertEqual(
             ProjectInvite.objects.filter(project=self.project).count(), 0
         )
 
         url = reverse(
             'projectroles:api_invite_create',
             kwargs={'project': self.project.sodar_uuid},
@@ -1952,15 +2539,15 @@
             'message': invite.message,
             'sodar_uuid': str(invite.sodar_uuid),
         }
         self.assertEqual(json.loads(response.content), expected)
         self.assertEqual(len(mail.outbox), 1)
 
     def test_create_owner(self):
-        """Test creating an invite for an owner role (should fail)"""
+        """Test creating invite for owner role (should fail)"""
         self.assertEqual(
             ProjectInvite.objects.filter(project=self.project).count(), 0
         )
 
         url = reverse(
             'projectroles:api_invite_create',
             kwargs={'project': self.project.sodar_uuid},
@@ -1975,15 +2562,15 @@
         self.assertEqual(response.status_code, 400, msg=response.content)
         self.assertEqual(
             ProjectInvite.objects.filter(project=self.project).count(), 0
         )
         self.assertEqual(len(mail.outbox), 0)
 
     def test_create_delegate(self):
-        """Test creating an invite for an delegate role"""
+        """Test creating invite for delegate role"""
         self.assertEqual(
             ProjectInvite.objects.filter(project=self.project).count(), 0
         )
 
         url = reverse(
             'projectroles:api_invite_create',
             kwargs={'project': self.project.sodar_uuid},
@@ -2001,15 +2588,15 @@
         )
         invite = ProjectInvite.objects.first()
         self.assertEqual(invite.role, self.role_delegate)
         self.assertEqual(len(mail.outbox), 1)
 
     @override_settings(PROJECTROLES_DELEGATE_LIMIT=2)
     def test_create_delegate_no_perms(self):
-        """Test creating an delegate invite without perms (should fail)"""
+        """Test creating delegate invite without perms (should fail)"""
         del_user = self.make_user('delegate')
         self.make_assignment(self.project, del_user, self.role_delegate)
         self.assertEqual(
             ProjectInvite.objects.filter(project=self.project).count(), 0
         )
 
         url = reverse(
@@ -2028,15 +2615,15 @@
         self.assertEqual(response.status_code, 403, msg=response.content)
         self.assertEqual(
             ProjectInvite.objects.filter(project=self.project).count(), 0
         )
         self.assertEqual(len(mail.outbox), 0)
 
     def test_create_delegate_limit(self):
-        """Test creating an delegate invite with exceeded limit (should fail)"""
+        """Test creating delegate invite with exceeded limit (should fail)"""
         del_user = self.make_user('delegate')
         self.make_assignment(self.project, del_user, self.role_delegate)
         self.assertEqual(
             ProjectInvite.objects.filter(project=self.project).count(), 0
         )
 
         url = reverse(
@@ -2053,15 +2640,15 @@
         self.assertEqual(response.status_code, 400, msg=response.content)
         self.assertEqual(
             ProjectInvite.objects.filter(project=self.project).count(), 0
         )
         self.assertEqual(len(mail.outbox), 0)
 
     def test_create_invalid_email(self):
-        """Test creating an invite with invalid email (should fail)"""
+        """Test creating invite with invalid email (should fail)"""
         self.assertEqual(
             ProjectInvite.objects.filter(project=self.project).count(), 0
         )
 
         url = reverse(
             'projectroles:api_invite_create',
             kwargs={'project': self.project.sodar_uuid},
@@ -2076,15 +2663,15 @@
         self.assertEqual(response.status_code, 400, msg=response.content)
         self.assertEqual(
             ProjectInvite.objects.filter(project=self.project).count(), 0
         )
         self.assertEqual(len(mail.outbox), 0)
 
     def test_create_existing_user(self):
-        """Test creating an invite for an existing user (should fail)"""
+        """Test creating invite for existing user (should fail)"""
         user = self.make_user('new_user')
         user.email = INVITE_USER_EMAIL
         user.save()
         self.assertEqual(
             ProjectInvite.objects.filter(project=self.project).count(), 0
         )
 
@@ -2103,15 +2690,15 @@
         self.assertEqual(
             ProjectInvite.objects.filter(project=self.project).count(), 0
         )
         self.assertEqual(len(mail.outbox), 0)
 
     @override_settings(PROJECTROLES_SITE_MODE=SITE_MODE_TARGET)
     def test_create_remote(self):
-        """Test creating an invite for a remote project (should fail)"""
+        """Test creating invite for remote project (should fail)"""
         # Set up remote site and project
         source_site = self.make_site(
             name=REMOTE_SITE_NAME,
             url=REMOTE_SITE_URL,
             mode=SITE_MODE_SOURCE,
             description=REMOTE_SITE_DESC,
             secret=REMOTE_SITE_SECRET,
@@ -2145,74 +2732,71 @@
 
 
 class TestProjectInviteRevokeAPIView(ProjectInviteMixin, TestCoreAPIViewsBase):
     """Tests for ProjectInviteRevokeAPIView"""
 
     def setUp(self):
         super().setUp()
-
         # Create invite
         self.invite = self.make_invite(
             email=INVITE_USER_EMAIL,
             project=self.project,
             role=self.role_contributor,
             issuer=self.user,
         )
 
     def test_revoke(self):
-        """Test revoking an invite"""
+        """Test revoking invite"""
         self.assertEqual(self.invite.active, True)
         url = reverse(
             'projectroles:api_invite_revoke',
             kwargs={'projectinvite': self.invite.sodar_uuid},
         )
         response = self.request_knox(url, method='POST')
         self.assertEqual(response.status_code, 200, msg=response.content)
         self.invite.refresh_from_db()
         self.assertEqual(self.invite.active, False)
 
     def test_revoke_inactive(self):
-        """Test revoking an already inactive invite (should fail)"""
+        """Test revoking already inactive invite (should fail)"""
         self.invite.active = False
         self.invite.save()
         url = reverse(
             'projectroles:api_invite_revoke',
             kwargs={'projectinvite': self.invite.sodar_uuid},
         )
         response = self.request_knox(url, method='POST')
         self.assertEqual(response.status_code, 400, msg=response.content)
 
     def test_revoke_delegate(self):
-        """Test revoking a delegate invite with sufficient perms"""
+        """Test revoking delegate invite with sufficient perms"""
         self.invite.role = self.role_delegate
         self.invite.save()
         url = reverse(
             'projectroles:api_invite_revoke',
             kwargs={'projectinvite': self.invite.sodar_uuid},
         )
         response = self.request_knox(url, method='POST')
         self.assertEqual(response.status_code, 200, msg=response.content)
         self.invite.refresh_from_db()
         self.assertEqual(self.invite.active, False)
 
     def test_revoke_delegate_no_perms(self):
-        """Test revoking a delegate invite without perms (should fail)"""
+        """Test revoking delegate invite without perms (should fail)"""
         self.invite.role = self.role_delegate
         self.invite.save()
         delegate = self.make_user('delegate')
         self.make_assignment(self.project, delegate, self.role_delegate)
-
         url = reverse(
             'projectroles:api_invite_revoke',
             kwargs={'projectinvite': self.invite.sodar_uuid},
         )
         response = self.request_knox(
             url, method='POST', token=self.get_token(delegate)
         )
-
         self.assertEqual(response.status_code, 403, msg=response.content)
         self.invite.refresh_from_db()
         self.assertEqual(self.invite.active, True)
 
     def test_revoke_not_found(self):
         """Test revoking invite with invalid UUID"""
         url = reverse(
@@ -2233,50 +2817,50 @@
             email=INVITE_USER_EMAIL,
             project=self.project,
             role=self.role_contributor,
             issuer=self.user,
         )
 
     def test_resend(self):
-        """Test resending an invite"""
+        """Test resending invite"""
         self.assertEqual(len(mail.outbox), 0)
         url = reverse(
             'projectroles:api_invite_resend',
             kwargs={'projectinvite': self.invite.sodar_uuid},
         )
         response = self.request_knox(url, method='POST')
         self.assertEqual(response.status_code, 200, msg=response.content)
         self.assertEqual(len(mail.outbox), 1)
 
     def test_resend_inactive(self):
-        """Test resending an inactive invite (should fail)"""
+        """Test resending inactive invite (should fail)"""
         self.invite.active = False
         self.invite.save()
         url = reverse(
             'projectroles:api_invite_resend',
             kwargs={'projectinvite': self.invite.sodar_uuid},
         )
         response = self.request_knox(url, method='POST')
         self.assertEqual(response.status_code, 400, msg=response.content)
         self.assertEqual(len(mail.outbox), 0)
 
     def test_resend_delegate(self):
-        """Test resending a delegate invite with sufficient perms"""
+        """Test resending delegate invite with sufficient perms"""
         self.invite.role = self.role_delegate
         self.invite.save()
         url = reverse(
             'projectroles:api_invite_resend',
             kwargs={'projectinvite': self.invite.sodar_uuid},
         )
         response = self.request_knox(url, method='POST')
         self.assertEqual(response.status_code, 200, msg=response.content)
         self.assertEqual(len(mail.outbox), 1)
 
     def test_resend_delegate_no_perms(self):
-        """Test resending a delegate invite without perms (should fail)"""
+        """Test resending delegate invite without perms (should fail)"""
         self.invite.role = self.role_delegate
         self.invite.save()
         delegate = self.make_user('delegate')
         self.make_assignment(self.project, delegate, self.role_delegate)
 
         url = reverse(
             'projectroles:api_invite_resend',
@@ -2434,15 +3018,15 @@
             kwargs={'project': self.project.sodar_uuid},
         )
         get_data = {'app_name': EX_APP_NAME, 'setting_name': setting_name}
         response = self.request_knox(url, data=get_data)
         self.assertEqual(response.status_code, 400, msg=response.content)
 
     def test_retrieve_json(self):
-        """Test retrieving a JSON app setting"""
+        """Test retrieving JSON app setting"""
         setting_name = 'project_json_setting'
         url = reverse(
             'projectroles:api_project_setting_retrieve',
             kwargs={'project': self.project.sodar_uuid},
         )
         get_data = {'app_name': EX_APP_NAME, 'setting_name': setting_name}
         response = self.request_knox(url, data=get_data)
@@ -2457,15 +3041,15 @@
             'type': 'JSON',
             'value': self.project_json_setting['value'],
             'user_modifiable': True,
         }
         self.assertEqual(response_data, expected)
 
     def test_retrieve_non_modifiable(self):
-        """Test retrieving a non-modifiable app setting"""
+        """Test retrieving non-modifiable app setting"""
         setting_name = 'project_hidden_setting'
         url = reverse(
             'projectroles:api_project_setting_retrieve',
             kwargs={'project': self.project.sodar_uuid},
         )
         get_data = {'app_name': EX_APP_NAME, 'setting_name': setting_name}
         response = self.request_knox(url, data=get_data)
@@ -2511,14 +3095,19 @@
         response = self.request_knox(url, data=get_data)
         self.assertEqual(response.status_code, 400, msg=response.content)
 
 
 class TestProjectSettingSetAPIView(TestCoreAPIViewsBase):
     """Tests for ProjectSettingSetAPIView"""
 
+    def setUp(self):
+        super().setUp()
+        # Set project owner token as default token
+        self.knox_token = self.get_token(self.user_owner)
+
     def test_set_project(self):
         """Test setting app setting value with PROJECT scope"""
         self.assertEqual(AppSetting.objects.count(), 0)
         self.assertIsNone(
             ProjectEvent.objects.filter(
                 event_name='app_setting_set_api'
             ).first()
@@ -2555,15 +3144,15 @@
             'projectroles:api_project_setting_set',
             kwargs={'project': self.project.sodar_uuid},
         )
         post_data = {
             'app_name': EX_APP_NAME,
             'setting_name': setting_name,
             'value': 'value',
-            'user': str(self.user.sodar_uuid),
+            'user': str(self.user_owner.sodar_uuid),
         }
         response = self.request_knox(url, method='POST', data=post_data)
         self.assertEqual(response.status_code, 200, msg=response.content)
         self.assertEqual(AppSetting.objects.count(), 1)
         obj = AppSetting.objects.get(name=setting_name, project=self.project)
         self.assertEqual(obj.get_value(), 'value')
 
@@ -2627,16 +3216,32 @@
             'setting_name': setting_name,
             'value': 'value',
         }
         response = self.request_knox(url, method='POST', data=post_data)
         self.assertEqual(response.status_code, 400, msg=response.content)
         self.assertEqual(AppSetting.objects.count(), 0)
 
+    def test_set_invalid_project_type(self):
+        """Test setting app setting with the wrong project type (should fail)"""
+        setting_name = 'project_category_bool_setting'
+        url = reverse(
+            'projectroles:api_project_setting_set',
+            kwargs={'project': self.project.sodar_uuid},
+        )
+        post_data = {
+            'app_name': EX_APP_NAME,
+            'setting_name': setting_name,
+            'value': True,
+        }
+        response = self.request_knox(url, method='POST', data=post_data)
+        self.assertEqual(response.status_code, 400, msg=response.content)
+        self.assertEqual(AppSetting.objects.count(), 0)
+
     def test_set_no_value(self):
-        """Test setting without a value (should fail)"""
+        """Test setting without value (should fail)"""
         self.assertEqual(AppSetting.objects.count(), 0)
         setting_name = 'project_str_setting'
         url = reverse(
             'projectroles:api_project_setting_set',
             kwargs={'project': self.project.sodar_uuid},
         )
         post_data = {
@@ -2644,15 +3249,15 @@
             'setting_name': setting_name,
         }
         response = self.request_knox(url, method='POST', data=post_data)
         self.assertEqual(response.status_code, 400, msg=response.content)
         self.assertEqual(AppSetting.objects.count(), 0)
 
     def test_set_integer(self):
-        """Test setting an integer value"""
+        """Test setting integer value"""
         setting_name = 'project_int_setting'
         url = reverse(
             'projectroles:api_project_setting_set',
             kwargs={'project': self.project.sodar_uuid},
         )
         post_data = {
             'app_name': EX_APP_NAME,
@@ -2661,15 +3266,15 @@
         }
         response = self.request_knox(url, method='POST', data=post_data)
         self.assertEqual(response.status_code, 200, msg=response.content)
         obj = AppSetting.objects.get(name=setting_name, project=self.project)
         self.assertEqual(obj.get_value(), 170)
 
     def test_set_boolean(self):
-        """Test setting a boolean value"""
+        """Test setting boolean value"""
         setting_name = 'project_bool_setting'
         url = reverse(
             'projectroles:api_project_setting_set',
             kwargs={'project': self.project.sodar_uuid},
         )
         post_data = {
             'app_name': EX_APP_NAME,
@@ -2678,15 +3283,15 @@
         }
         response = self.request_knox(url, method='POST', data=post_data)
         self.assertEqual(response.status_code, 200, msg=response.content)
         obj = AppSetting.objects.get(name=setting_name, project=self.project)
         self.assertEqual(obj.get_value(), True)
 
     def test_set_json(self):
-        """Test setting a JSON value"""
+        """Test setting JSON value"""
         setting_name = 'project_json_setting'
         value = {'key': 'value'}
         url = reverse(
             'projectroles:api_project_setting_set',
             kwargs={'project': self.project.sodar_uuid},
         )
         post_data = {
@@ -2758,15 +3363,15 @@
             'value': default_value,
             'user_modifiable': True,
         }
         self.assertEqual(response_data, expected)
         self.assertIsInstance(AppSetting.objects.get(**q_kwargs), AppSetting)
 
     def test_retrieve_non_modifiable(self):
-        """Test retrieving a non-modifiable USER app setting"""
+        """Test retrieving non-modifiable USER app setting"""
         setting_name = 'user_hidden_setting'
         url = reverse('projectroles:api_user_setting_retrieve')
         get_data = {'app_name': EX_APP_NAME, 'setting_name': setting_name}
         response = self.request_knox(url, data=get_data)
 
         self.assertEqual(response.status_code, 200, msg=response.content)
         response_data = json.loads(response.content)
@@ -2871,15 +3476,15 @@
             'value': 'value',
         }
         response = self.request_knox(url, method='POST', data=post_data)
         self.assertEqual(response.status_code, 400, msg=response.content)
         self.assertEqual(AppSetting.objects.count(), 0)
 
     def test_set_no_value(self):
-        """Test setting without a value (should fail)"""
+        """Test setting without value (should fail)"""
         self.assertEqual(AppSetting.objects.count(), 0)
         setting_name = 'user_str_setting'
         url = reverse('projectroles:api_user_setting_set')
         post_data = {
             'app_name': EX_APP_NAME,
             'setting_name': setting_name,
         }
@@ -2893,49 +3498,51 @@
 
     def setUp(self):
         super().setUp()
         # Create additional users
         self.domain_user = self.make_user('domain_user@domain')
 
     def test_get(self):
-        """Test UserListAPIView get() as a regular user"""
+        """Test UserListAPIView get() as regular user"""
         url = reverse('projectroles:api_user_list')
         response = self.request_knox(
             url, token=self.get_token(self.domain_user)
         )
         self.assertEqual(response.status_code, 200)
         response_data = json.loads(response.content)
         self.assertEqual(len(response_data), 1)  # System users not returned
         expected = [self.get_serialized_user(self.domain_user)]
         self.assertEqual(response_data, expected)
 
     def test_get_superuser(self):
-        """Test UserListAPIView get() as a superuser"""
+        """Test UserListAPIView get() as superuser"""
         url = reverse('projectroles:api_user_list')
         response = self.request_knox(url)  # Default token is for superuser
         self.assertEqual(response.status_code, 200)
         response_data = json.loads(response.content)
-        self.assertEqual(len(response_data), 2)
+        self.assertEqual(len(response_data), 4)
         expected = [
             self.get_serialized_user(self.user),
+            self.get_serialized_user(self.user_owner_cat),
+            self.get_serialized_user(self.user_owner),
             self.get_serialized_user(self.domain_user),
         ]
         self.assertEqual(response_data, expected)
 
 
 class TestCurrentUserRetrieveAPIView(TestCoreAPIViewsBase):
     """Tests for CurrentUserRetrieveAPIView"""
 
     def setUp(self):
         super().setUp()
         # Create additional users
         self.domain_user = self.make_user('domain_user@domain')
 
     def test_get(self):
-        """Test CurrentUserRetrieveAPIView get() as a regular user"""
+        """Test CurrentUserRetrieveAPIView get() as regular user"""
         url = reverse('projectroles:api_user_current')
         response = self.request_knox(
             url, token=self.get_token(self.domain_user)
         )
         self.assertEqual(response.status_code, 200)
         response_data = json.loads(response.content)
         expected = {
@@ -3045,28 +3652,28 @@
             project_uuid=self.project.sodar_uuid,
             project=self.project,
             level=SODAR_CONSTANTS['REMOTE_LEVEL_READ_INFO'],
         )
         self.remote_api = RemoteProjectAPI()
 
     def test_get(self):
-        """Test retrieving project data to the target site"""
+        """Test retrieving project data to target site"""
         response = self.client.get(
             reverse(
                 'projectroles:api_remote_get',
                 kwargs={'secret': REMOTE_SITE_SECRET},
             )
         )
         self.assertEqual(response.status_code, 200)
         expected = self.remote_api.get_source_data(self.target_site)
         response_dict = json.loads(response.content.decode('utf-8'))
         self.assertEqual(response_dict, expected)
 
     def test_get_invalid_secret(self):
-        """Test retrieving project data with an invalid secret (should fail)"""
+        """Test retrieving project data with invalid secret (should fail)"""
         response = self.client.get(
             reverse(
                 'projectroles:api_remote_get', kwargs={'secret': build_secret()}
             )
         )
         self.assertEqual(response.status_code, 401)
 
@@ -3077,33 +3684,25 @@
 class TestIPAllowing(AppSettingMixin, TestCoreAPIViewsBase):
     """Tests for IP allowing settings using ProjectRetrieveAPIView"""
 
     def _setup_ip_allowing(self, ip_list, role_suffix):
         """Setup users and roles for IP allowing test"""
         # Create new user
         user = self.make_user(role_suffix)
-        # Remove previously assigned owner role for superuser.
-        superuser_as_owner_role = RoleAssignment.objects.get(
-            project=self.project, user=self.user, role=self.role_owner
-        )
-        superuser_as_owner_role.delete()
-        # Assign requested role to user
-        user_as = self.make_assignment(
-            self.project, user, getattr(self, 'role_' + role_suffix)
-        )
-
-        user_cat_as = RoleAssignment.objects.get(
-            project=self.category, user=self.user, role=self.role_owner
-        )
+        # Set user access
         if role_suffix == 'owner':
-            user_cat_as.delete()
-            user_cat_as = self.make_assignment(
-                self.category, user, getattr(self, 'role_' + role_suffix)
+            self.owner_as.user = user
+            self.owner_as.save()
+            # user_as = self.owner_as
+            self.owner_as_cat.user = user
+            self.owner_as_cat.save()
+        else:
+            self.make_assignment(
+                self.project, user, getattr(self, 'role_' + role_suffix)
             )
-
         # Init IP restrict setting
         self.make_setting(
             app_name='projectroles',
             name='ip_restrict',
             setting_type='BOOLEAN',
             value=True,
             project=self.project,
@@ -3113,66 +3712,35 @@
             app_name='projectroles',
             name='ip_allowlist',
             setting_type='JSON',
             value=None,
             value_json=ip_list,
             project=self.project,
         )
-        return user, user_as, user_cat_as
+        return user  # , user_as, self.cat_owner_as
 
     def _get_project_ip_allowing(
         self, username, http_attribute, ip_list, blocked=None
     ):
         """Helper for IP allowing tests"""
         if blocked is None:
             raise Exception('Please set "blocked" argument (True/False)')
-
-        user, user_as, user_cat_as = self._setup_ip_allowing(ip_list, username)
+        user = self._setup_ip_allowing(ip_list, username)
         url = reverse(
             'projectroles:api_project_retrieve',
             kwargs={'project': self.project.sodar_uuid},
         )
         header = {http_attribute: '192.168.1.1'}
         response = self.request_knox(
             url, token=self.get_token(user), header=header
         )
-
-        if username == 'owner':
-            role = PROJECT_ROLE_OWNER
-        elif username == 'delegate':
-            role = PROJECT_ROLE_DELEGATE
-        elif username == 'contributor':
-            role = PROJECT_ROLE_CONTRIBUTOR
-        else:
-            role = PROJECT_ROLE_GUEST
-
         if blocked:
             self.assertEqual(response.status_code, 403)
         else:
-            expected = {
-                'title': self.project.title,
-                'type': self.project.type,
-                'parent': str(self.category.sodar_uuid),
-                'description': self.project.description,
-                'readme': '',
-                'public_guest_access': False,
-                'archive': False,
-                'roles': {
-                    str(user_as.sodar_uuid): {
-                        'user': self.get_serialized_user(user),
-                        'role': role,
-                        'sodar_uuid': str(user_as.sodar_uuid),
-                    }
-                },
-                'sodar_uuid': str(self.project.sodar_uuid),
-            }
-            # Assert response
             self.assertEqual(response.status_code, 200)
-            response_data = json.loads(response.content)
-            self.assertEqual(response_data, expected)
 
     def test_http_x_forwarded_for_block_all_owner(self):
         self._get_project_ip_allowing(
             'owner', 'HTTP_X_FORWARDED_FOR', [], blocked=False
         )
 
     def test_http_x_forwarded_for_allow_ip_owner(self):
```

### Comparing `django-sodar-core-0.12.0/projectroles/utils.py` & `django-sodar-core-0.13.0/projectroles/utils.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/projectroles/views.py` & `django-sodar-core-0.13.0/projectroles/views.py`

 * *Files 5% similar despite different names*

```diff
@@ -1,14 +1,12 @@
 """UI views for the projectroles app"""
 
 import json
 import logging
 import re
-import ssl
-import urllib.request
 
 from ipaddress import ip_address, ip_network
 from urllib.parse import unquote_plus
 
 from django.apps import apps
 from django.conf import settings
 from django.contrib import auth, messages
@@ -48,22 +46,21 @@
     Project,
     Role,
     RoleAssignment,
     ProjectInvite,
     RemoteSite,
     RemoteProject,
     SODAR_CONSTANTS,
-    PROJECT_TAG_STARRED,
+    ROLE_RANKING,
 )
 from projectroles.plugins import (
     get_active_plugins,
     get_app_plugin,
     get_backend_api,
 )
-from projectroles.project_tags import get_tag_state, remove_tag
 from projectroles.remote_projects import RemoteProjectAPI
 from projectroles.utils import get_expiry_date, get_display_name
 
 
 app_settings = AppSettingAPI()
 logger = logging.getLogger(__name__)
 User = auth.get_user_model()
@@ -71,22 +68,26 @@
 
 # SODAR constants
 PROJECT_TYPE_PROJECT = SODAR_CONSTANTS['PROJECT_TYPE_PROJECT']
 PROJECT_TYPE_CATEGORY = SODAR_CONSTANTS['PROJECT_TYPE_CATEGORY']
 PROJECT_ROLE_OWNER = SODAR_CONSTANTS['PROJECT_ROLE_OWNER']
 PROJECT_ROLE_DELEGATE = SODAR_CONSTANTS['PROJECT_ROLE_DELEGATE']
 PROJECT_ROLE_GUEST = SODAR_CONSTANTS['PROJECT_ROLE_GUEST']
+PROJECT_ROLE_FINDER = SODAR_CONSTANTS['PROJECT_ROLE_FINDER']
 SITE_MODE_TARGET = SODAR_CONSTANTS['SITE_MODE_TARGET']
 SITE_MODE_SOURCE = SODAR_CONSTANTS['SITE_MODE_SOURCE']
 SITE_MODE_PEER = SODAR_CONSTANTS['SITE_MODE_PEER']
 REMOTE_LEVEL_NONE = SODAR_CONSTANTS['REMOTE_LEVEL_NONE']
 REMOTE_LEVEL_VIEW_AVAIL = SODAR_CONSTANTS['REMOTE_LEVEL_VIEW_AVAIL']
 REMOTE_LEVEL_READ_INFO = SODAR_CONSTANTS['REMOTE_LEVEL_READ_INFO']
 REMOTE_LEVEL_READ_ROLES = SODAR_CONSTANTS['REMOTE_LEVEL_READ_ROLES']
 APP_SETTING_SCOPE_PROJECT = SODAR_CONSTANTS['APP_SETTING_SCOPE_PROJECT']
+APP_SETTING_SCOPE_PROJECT_USER = SODAR_CONSTANTS[
+    'APP_SETTING_SCOPE_PROJECT_USER'
+]
 PROJECT_ACTION_CREATE = SODAR_CONSTANTS['PROJECT_ACTION_CREATE']
 PROJECT_ACTION_UPDATE = SODAR_CONSTANTS['PROJECT_ACTION_UPDATE']
 
 # Local constants
 APP_NAME = 'projectroles'
 SEND_EMAIL = settings.PROJECTROLES_SEND_EMAIL
 PROJECT_COLUMN_COUNT = 2  # Default columns
@@ -426,29 +427,30 @@
     """
     Mixin for adding context data to Project base view and other views
     extending it. Includes HTTPRefererMixin for correct referer URL.
     """
 
     def get_context_data(self, *args, **kwargs):
         context = super().get_context_data(*args, **kwargs)
-
         # Project
         if hasattr(self, 'object') and isinstance(self.object, Project):
             context['project'] = self.get_object()
         elif hasattr(self, 'object') and hasattr(self.object, 'project'):
             context['project'] = self.object.project
         else:
             context['project'] = self.get_project()
-
         # Project tagging/starring
         if 'project' in context and not getattr(
             settings, 'PROJECTROLES_KIOSK_MODE', False
         ):
-            context['project_starred'] = get_tag_state(
-                context['project'], self.request.user, PROJECT_TAG_STARRED
+            context['project_starred'] = app_settings.get(
+                'projectroles',
+                'project_star',
+                context['project'],
+                self.request.user,
             )
         return context
 
 
 class CurrentUserFormMixin:
     """Mixin for passing current user to form as current_user"""
 
@@ -558,58 +560,44 @@
             ).order_by('site__name')
         return context
 
 
 class ProjectSearchMixin:
     """Common functionalities for search views"""
 
-    def dispatch(self, request, *args, **kwargs):
-        if not getattr(settings, 'PROJECTROLES_ENABLE_SEARCH', False):
-            messages.error(request, 'Search is not enabled.')
-            return redirect('home')
-        return super().dispatch(request, *args, **kwargs)
-
-
-class ProjectSearchResultsView(
-    LoginRequiredMixin, ProjectSearchMixin, TemplateView
-):
-    """View for displaying results of search within projects"""
-
-    template_name = 'projectroles/search_results.html'
-
-    def _get_app_results(self, search_terms, search_type, search_keywords):
+    def _get_app_results(
+        self, user, search_terms, search_type, search_keywords
+    ):
         """
         Return app plugin search results.
 
         :param search_terms: Search terms (list of strings)
         :param search_type: Optional type keyword for search (string or None)
         :param search_keywords: Optional keywords (list of strings or None)
         :return: List
         """
         plugins = get_active_plugins(plugin_type='project_app')
         ret = []
+        omit_apps_list = getattr(settings, 'PROJECTROLES_SEARCH_OMIT_APPS', [])
 
+        search_apps = sorted(
+            [
+                p
+                for p in plugins
+                if (p.search_enable and p.name not in omit_apps_list)
+            ],
+            key=lambda x: x.plugin_ordering,
+        )
         if search_type:
-            search_apps = sorted(
-                [
-                    p
-                    for p in plugins
-                    if (p.search_enable and search_type in p.search_types)
-                ],
-                key=lambda x: x.plugin_ordering,
-            )
-        else:
-            search_apps = sorted(
-                [p for p in plugins if p.search_enable],
-                key=lambda x: x.plugin_ordering,
-            )
-
+            search_apps = [
+                p for p in search_apps if search_type in p.search_types
+            ]
         for plugin in search_apps:
             search_kwargs = {
-                'user': self.request.user,
+                'user': user,
                 'search_type': search_type,
                 'search_terms': search_terms,
                 'keywords': search_keywords,
             }
             search_res = {
                 'plugin': plugin,
                 'results': None,
@@ -641,16 +629,15 @@
                             ]
                         ),
                     )
                 )
             ret.append(search_res)
         return ret
 
-    @classmethod
-    def _get_not_found(cls, search_type, project_results, app_results):
+    def _get_not_found(self, search_type, project_results, app_results):
         """
         Return list of apps for which objects were search for but not returned.
 
         :param search_type: Type keyword for search if set
         :param project_results: Results for projectroles search
         :param app_results: Results for app plugin search
         :return: List
@@ -671,42 +658,57 @@
                     and search_type in result['search_types']
                 ):
                     type_match = True
                 if (type_match or not search_type) and (not result['items']):
                     ret.append(result['title'])
         return ret
 
+    def dispatch(self, request, *args, **kwargs):
+        if not getattr(settings, 'PROJECTROLES_ENABLE_SEARCH', False):
+            messages.error(request, 'Search is not enabled.')
+            return redirect('home')
+        return super().dispatch(request, *args, **kwargs)
+
+
+class ProjectSearchResultsView(
+    LoginRequiredMixin, ProjectSearchMixin, TemplateView
+):
+    """View for displaying results of search within projects"""
+
+    template_name = 'projectroles/search_results.html'
+
     def get_context_data(self, *args, **kwargs):
         context = super().get_context_data(**kwargs)
+        search_input = ''
         search_terms = []
         search_type = None
         keyword_input = []
         search_keywords = {}
 
-        if self.request.GET.get('m'):  # Multi search
+        if self.request.POST.get('m'):  # Multi search
             search_terms = [
                 t.strip()
-                for t in self.request.GET['m'].strip().split('\r\n')
+                for t in self.request.POST['m'].strip().split('\r\n')
                 if len(t.strip()) >= 3
             ]
-            if self.request.GET.get('k'):
-                keyword_input = self.request.GET['k'].strip().split(' ')
-            search_input = ''  # Clears input for basic search
-        else:  # Single term search
+            if self.request.POST.get('k'):
+                keyword_input = self.request.POST['k'].strip().split(' ')
+        elif self.request.GET.get('s'):  # Single search
             search_input = self.request.GET.get('s').strip()
             search_split = search_input.split(' ')
             search_term = search_split[0].strip()
             for i in range(1, len(search_split)):
                 s = search_split[i].strip()
                 if ':' in s:
                     keyword_input.append(s)
                 elif s != '':
                     search_term += ' ' + s.lower()
             if search_term:
                 search_terms = [search_term]
+
         search_terms = list(dict.fromkeys(search_terms))  # Remove dupes
 
         for s in keyword_input:
             kw = s.split(':')[0].lower().strip()
             val = s.split(':')[1].lower().strip()
             if kw == 'type':
                 search_type = val
@@ -715,24 +717,31 @@
 
         context['search_input'] = search_input
         context['search_terms'] = search_terms
         context['search_type'] = search_type
         context['search_keywords'] = search_keywords
         # Get project results
         if not search_type or search_type == 'project':
-            context['project_results'] = [
-                p
-                for p in Project.objects.find(
-                    search_terms, project_type='PROJECT'
-                )
-                if self.request.user.has_perm('projectroles.view_project', p)
-            ]
+            context['project_results'] = []
+            for p in Project.objects.find(search_terms, project_type='PROJECT'):
+                if p.public_guest_access or self.request.user.has_perm(
+                    'projectroles.view_project', p
+                ):
+                    context['project_results'].append(p)
+                elif self.request.user.is_authenticated and p.parent:
+                    parent_as = p.parent.get_role(self.request.user)
+                    if (
+                        parent_as
+                        and parent_as.role.rank
+                        >= ROLE_RANKING[PROJECT_ROLE_FINDER]
+                    ):
+                        context['project_results'].append(p)
         # Get app results
         context['app_results'] = self._get_app_results(
-            search_terms, search_type, search_keywords
+            self.request.user, search_terms, search_type, search_keywords
         )
         # List apps for which no results were found
         context['not_found'] = self._get_not_found(
             search_type,
             context.get('project_results') or [],
             context['app_results'],
         )
@@ -741,22 +750,32 @@
     def get(self, request, *args, **kwargs):
         context = self.get_context_data(*args, **kwargs)
         if not context['search_terms']:
             messages.error(request, 'No search terms provided.')
             return redirect(reverse('home'))
         return super().render_to_response(context)
 
+    def post(self, request, *args, **kwargs):
+        context = self.get_context_data(*args, **kwargs)
+        if not context['search_terms']:
+            messages.error(request, 'No search terms provided.')
+            return redirect(reverse('home'))
+        return super().render_to_response(context)
+
 
 class ProjectAdvancedSearchView(
     LoginRequiredMixin, ProjectSearchMixin, TemplateView
 ):
     """View for displaying advanced search form"""
 
     template_name = 'projectroles/search_advanced.html'
 
+    def post(self, request, *args, **kwargs):
+        return ProjectSearchResultsView.as_view()(request)
+
 
 # Project Editing Views --------------------------------------------------------
 
 
 class ProjectModifyPluginViewMixin:
     """Helpers for project modify API"""
 
@@ -827,15 +846,15 @@
             'description': project.description,
             'readme': project.readme.raw,
             'owner': project.get_owner().user,
             'public_guest_access': project.public_guest_access,
         }
 
     @staticmethod
-    def _get_app_settings(data, instance):
+    def _get_app_settings(data, instance, project=None):
         """
         Return a dictionary of project app settings and their values.
 
         :param data: Cleaned data from a form or serializer
         :param instance: Existing Project object or None
         :return: Dict
         """
@@ -853,16 +872,27 @@
                 p_settings = app_settings.get_definitions(
                     APP_SETTING_SCOPE_PROJECT, app_name=name
                 )
 
             for s_key, s_val in p_settings.items():
                 s_name = 'settings.{}.{}'.format(name, s_key)
                 s_data = data.get(s_name)
+
+                if (
+                    not s_val.get('project_types', None)
+                    and not instance.type == PROJECT_TYPE_PROJECT
+                    or s_val.get('project_types', None)
+                    and instance.type not in s_val['project_types']
+                ):
+                    continue
+
                 if s_data is None and not instance:
-                    s_data = app_settings.get_default(name, s_key)
+                    s_data = app_settings.get_default(
+                        name, s_key, project=project
+                    )
                 if s_val['type'] == 'JSON':
                     if s_data is None:
                         s_data = {}
                     project_settings[s_name] = json.dumps(s_data)
                 elif s_data is not None:
                     project_settings[s_name] = s_data
         return project_settings
@@ -953,28 +983,30 @@
         """Update project settings"""
         for k, v in project_settings.items():
             app_settings.set(
                 app_name=k.split('.')[1],
                 setting_name=k.split('.')[2],
                 value=v,
                 project=project,
-                validate=False,
-            )  # Already validated in form
+                validate=True,
+            )
 
     @classmethod
     def _notify_users(
         cls, project, action, owner, old_data, old_parent, request
     ):
         """
         Notify users about project creation and update. Displays app alerts
         and/or sends emails depending on the site configuration.
         """
         app_alerts = get_backend_api('appalerts_backend')
         # Create alerts and send emails
-        owner_as = RoleAssignment.objects.get_assignment(owner, project)
+        owner_as = RoleAssignment.objects.filter(
+            project=project, user=owner
+        ).first()
         # Owner change notification
         if request.user != owner and action == PROJECT_ACTION_CREATE:
             if app_alerts:
                 app_alerts.add_alert(
                     app_name=APP_NAME,
                     alert_name='role_create',
                     user=owner,
@@ -1089,15 +1121,15 @@
             project.save()
 
         owner = data.get('owner')
         if not owner and old_project:  # In case of a PATCH request
             owner = old_project.get_owner().user
 
         # Get settings
-        project_settings = self._get_app_settings(data, instance)
+        project_settings = self._get_app_settings(data, project)
         old_settings = None
         if action == PROJECT_ACTION_UPDATE:
             old_settings = json.loads(json.dumps(project_settings))  # Copy
 
         # Create timeline event
         tl_event = self._create_timeline_event(
             project, action, owner, old_data, project_settings, request
@@ -1260,15 +1292,14 @@
                     get_display_name(PROJECT_TYPE_PROJECT, plural=True)
                 ),
             )
             return redirect(reverse('home'))
 
         if 'project' in self.kwargs:
             project = Project.objects.get(sodar_uuid=self.kwargs['project'])
-
             if project.type != PROJECT_TYPE_CATEGORY:
                 messages.error(
                     self.request,
                     'Creating nested {} is not allowed.'.format(
                         get_display_name(PROJECT_TYPE_PROJECT, plural=True)
                     ),
                 )
@@ -1323,23 +1354,23 @@
         if not app_alerts:
             return
         alert_p = get_display_name(PROJECT_TYPE_PROJECT, title=True)
         if action == 'archive':
             alert_msg = '{} data is now read-only.'.format(alert_p)
         else:
             alert_msg = '{} data can be modified.'.format(alert_p)
-        users = [a.user for a in project.get_all_roles() if a.user != user]
+        users = [a.user for a in project.get_roles() if a.user != user]
         users = list(set(users))  # Remove possible dupes (see issue #710)
         if not users:
             return
-        for u in users:
-            app_alerts.add_alert(
+        else:
+            app_alerts.add_alerts(
                 app_name=APP_NAME,
                 alert_name='project_{}'.format(action),
-                user=u,
+                users=users,
                 message='{} {}d by {}. {}'.format(
                     alert_p, action, user.get_full_name(), alert_msg
                 ),
                 url=reverse(
                     'projectroles:detail',
                     kwargs={'project': project.sodar_uuid},
                 ),
@@ -1445,50 +1476,48 @@
     permission_required = 'projectroles.view_project_roles'
     template_name = 'projectroles/project_roles.html'
     model = Project
 
     def get_context_data(self, *args, **kwargs):
         project = self.get_project()
         context = super().get_context_data(*args, **kwargs)
-        context['owner'] = project.get_owner()
-        inherited_owners = project.get_owners(inherited_only=True)
-        context['inherited_owners'] = [
-            a for a in inherited_owners if a.user != context['owner'].user
-        ]
-        inherited_users = [a.user for a in inherited_owners]
-        context['delegates'] = [
-            a for a in project.get_delegates() if a.user not in inherited_users
-        ]
-        context['members'] = [
-            a for a in project.get_members() if a.user not in inherited_users
-        ]
+        context['roles'] = sorted(
+            project.get_roles(), key=lambda x: [x.role.rank, x.user.username]
+        )
+        owner_rank = ROLE_RANKING[PROJECT_ROLE_OWNER]
+        context['enable_owner_transfer'] = any(
+            [r.role.rank >= owner_rank for r in context['roles']]
+        )
         if project.is_remote():
             context[
                 'remote_roles_url'
             ] = project.get_source_site().url + reverse(
                 'projectroles:roles', kwargs={'project': project.sodar_uuid}
             )
         return context
 
 
 class RoleAssignmentModifyMixin(ProjectModifyPluginViewMixin):
     """Mixin for RoleAssignment creation/updating in UI and API views"""
 
     @transaction.atomic
-    def modify_assignment(self, data, request, project, instance=None):
+    def modify_assignment(
+        self, data, request, project, instance=None, promote=False
+    ):
         """
         Create or update a RoleAssignment. This method should be called either
         in form_valid() in a Django form view or save() in a DRF serializer.
         The method calls related ProjectModifyPluginAPIMixin methods if enabled
         in your plugin.
 
         :param data: Cleaned data from a form or serializer
         :param request: Request initiating the action
         :param project: Project object
         :param instance: Existing RoleAssignment object or None
+        :param promote: Promoting an inherited user (boolean, default=False)
         :return: Created or updated RoleAssignment object
         """
         app_alerts = get_backend_api('appalerts_backend')
         timeline = get_backend_api('timeline_backend')
         tl_event = None
         action = PROJECT_ACTION_UPDATE if instance else PROJECT_ACTION_CREATE
         user = data.get('user')
@@ -1547,25 +1576,32 @@
                         'projectroles:detail',
                         kwargs={'project': project.sodar_uuid},
                     ),
                     project=project,
                 )
             if SEND_EMAIL:
                 email.send_role_change_mail(
-                    action.lower(), project, user, role, request
+                    'update' if promote else action.lower(),
+                    project,
+                    user,
+                    role,
+                    request,
                 )
         return role_as
 
 
 class RoleAssignmentModifyFormMixin(RoleAssignmentModifyMixin, ModelFormMixin):
     """Mixin for RoleAssignment creation and updating in Django form views"""
 
     def get_context_data(self, *args, **kwargs):
         context = super().get_context_data(*args, **kwargs)
-        change_type = self.request.resolver_match.url_name.split('_')[1]
+        if self.kwargs.get('promote_as'):
+            change_type = 'update'  # If promoting inherited role
+        else:
+            change_type = self.request.resolver_match.url_name.split('_')[1]
         project = self.get_project()
         if change_type != 'delete':
             context['preview_subject'] = email.get_role_change_subject(
                 change_type, project
             )
             context['preview_body'] = email.get_role_change_body(
                 change_type=change_type,
@@ -1583,46 +1619,89 @@
         return context
 
     def form_valid(self, form):
         """Handle RoleAssignment updating if form is valid"""
         instance = form.instance if form.instance.pk else None
         action = 'update' if instance else 'create'
         project = self.get_project()
-
         try:
             self.object = self.modify_assignment(
                 data=form.cleaned_data,
                 request=self.request,
                 project=project,
                 instance=form.instance if instance else None,
+                promote=True if form.cleaned_data.get('promote') else False,
             )
             messages.success(
                 self.request,
                 'Membership {} for {} with the role of {}.'.format(
                     'added' if action == 'create' else 'updated',
                     self.object.user.username,
                     self.object.role.name,
                 ),
             )
         except Exception as ex:
             messages.error(
                 self.request, 'Membership updating failed: {}'.format(ex)
             )
-
         return redirect(
             reverse(
                 'projectroles:roles',
                 kwargs={'project': project.sodar_uuid},
             )
         )
 
 
 class RoleAssignmentDeleteMixin(ProjectModifyPluginViewMixin):
     """Mixin for RoleAssignment deletion/destroying in UI and API views"""
 
+    @transaction.atomic
+    def _update_app_alerts(self, app_alerts, project, user, inh_as):
+        """
+        Update app alerts for user on role assignment deletion. Creates a new
+        alert as appropriate and dismisses alerts in projects the user can no
+        longer access.
+
+        :param app_alerts: AppAlertAPI object
+        :param project: Project object
+        :param user: SODARUser object
+        :param inh_as: RoleAssignment object for inherited assignment or None
+        """
+        if inh_as:
+            message = ALERT_MSG_ROLE_UPDATE.format(
+                project=project.title, role=inh_as.role.name
+            )
+        else:
+            message = 'Your membership in this {} has been removed.'.format(
+                get_display_name(project.type)
+            )
+            # Dismiss existing alerts
+            AppAlert = app_alerts.get_model()
+            dis_projects = [project]
+            if project.type == PROJECT_TYPE_CATEGORY:
+                for c in project.get_children(flat=True):
+                    c_role_as = RoleAssignment.objects.filter(
+                        project=c, user=user
+                    ).first()
+                    if not c.public_guest_access and not c_role_as:
+                        dis_projects.append(c)
+            for a in AppAlert.objects.filter(
+                user=user, project__in=dis_projects, active=True
+            ):
+                a.active = False
+                a.save()
+
+        app_alerts.add_alert(
+            app_name=APP_NAME,
+            alert_name='role_{}'.format('update' if inh_as else 'delete'),
+            user=user,
+            message=message,
+            project=project,
+        )
+
     def delete_assignment(self, request, instance):
         app_alerts = get_backend_api('appalerts_backend')
         timeline = get_backend_api('timeline_backend')
         tl_event = None
         project = instance.project
         user = instance.user
         role = instance.role
@@ -1643,30 +1722,37 @@
         # Call the project plugin modify API for additional actions
         if getattr(settings, 'PROJECTROLES_ENABLE_MODIFY_API', False):
             self.call_project_modify_api(
                 'perform_role_delete', 'revert_role_delete', [instance, request]
             )
         # Delete object itself
         instance.delete()
-        # Remove project star from user if it exists
-        remove_tag(project=project, user=user)
 
+        # Delete corresponding PROJECT_USER settings
+        if (
+            not project.get_role(user)
+            and project.type == PROJECT_TYPE_CATEGORY
+            and not RoleAssignment.objects.filter(
+                project__in=project.get_children(flat=True), user=user
+            ).exists()
+        ):
+            app_settings.delete_by_scope(
+                APP_SETTING_SCOPE_PROJECT_USER, project, user
+            )
+
+        inh_as = project.get_role(user, inherited_only=True)
         if tl_event:
             tl_event.set_status('OK')
         if app_alerts:
-            app_alerts.add_alert(
-                app_name=APP_NAME,
-                alert_name='role_delete',
-                user=user,
-                message='Your membership in this {} has been removed.'.format(
-                    get_display_name(project.type)
-                ),
-                project=project,
+            self._update_app_alerts(app_alerts, project, user, inh_as)
+        if SEND_EMAIL and inh_as:
+            email.send_role_change_mail(
+                'update', project, user, inh_as.role, request
             )
-        if SEND_EMAIL:
+        elif SEND_EMAIL:
             email.send_role_change_mail('delete', project, user, None, request)
         return instance
 
 
 class RoleAssignmentCreateView(
     LoginRequiredMixin,
     ProjectModifyPermissionMixin,
@@ -1677,20 +1763,53 @@
 ):
     """RoleAssignment creation view"""
 
     permission_required = 'projectroles.update_project_members'
     model = RoleAssignment
     form_class = RoleAssignmentForm
 
+    #: Promote assignment
+    promote_as = None
+
     def get_form_kwargs(self):
         """Pass URL arguments and current user to form"""
         kwargs = super().get_form_kwargs()
         kwargs.update(self.kwargs)
         return kwargs
 
+    def get_context_data(self, **kwargs):
+        context = super().get_context_data()
+        context['promote_as'] = self.promote_as  # Queried in get()
+        return context
+
+    def get(self, request, *args, **kwargs):
+        # Validate inherited role promotion if set
+        if self.kwargs.get('promote_as'):
+            project = self.get_project()
+            self.promote_as = RoleAssignment.objects.filter(
+                sodar_uuid=self.kwargs['promote_as']
+            ).first()
+            if (
+                not self.promote_as
+                or self.promote_as.role.rank
+                <= ROLE_RANKING[PROJECT_ROLE_DELEGATE]
+                or self.promote_as.project == project
+                or self.promote_as.project not in project.get_parents()
+            ):
+                messages.error(
+                    request, 'Invalid role assignment for promotion.'
+                )
+                return redirect(
+                    reverse(
+                        'projectroles:roles',
+                        kwargs={'project': project.sodar_uuid},
+                    )
+                )
+        return super().get(request, *args, **kwargs)
+
 
 class RoleAssignmentUpdateView(
     LoginRequiredMixin,
     RolePermissionMixin,
     ProjectContextMixin,
     RoleAssignmentModifyFormMixin,
     CurrentUserFormMixin,
@@ -1717,14 +1836,38 @@
     """RoleAssignment deletion view"""
 
     permission_required = 'projectroles.update_project_members'
     model = RoleAssignment
     slug_url_kwarg = 'roleassignment'
     slug_field = 'sodar_uuid'
 
+    def _get_inherited_children(self, project, user, ret):
+        for child in project.get_children():
+            if not RoleAssignment.objects.filter(project=child, user=user):
+                ret.append(child)
+            else:
+                ret = self._get_inherited_children(child, user, ret)
+        return ret
+
+    def get_context_data(self, *args, **kwargs):
+        context = super().get_context_data(*args, **kwargs)
+        project = self.get_project()
+        user = self.object.user
+        context['inherited_as'] = project.get_role(user, inherited_only=True)
+        context['inherited_children'] = None
+        if (
+            not context['inherited_as']
+            and self.object.role.rank < ROLE_RANKING[PROJECT_ROLE_FINDER]
+        ):
+            context['inherited_children'] = sorted(
+                self._get_inherited_children(project, user, []),
+                key=lambda x: x.full_title,
+            )
+        return context
+
     def post(self, *args, **kwargs):
         self.object = self.get_object()
         user = self.object.user
         project = self.object.project
 
         # Override perms for owner/delegate
         if self.object.role.name == PROJECT_ROLE_OWNER or (
@@ -1750,31 +1893,32 @@
             except Exception as ex:
                 messages.error(
                     self.request,
                     'Failed to remove membership of {}: {}'.format(
                         user.username, ex
                     ),
                 )
-
         return redirect(
             reverse(
                 'projectroles:roles', kwargs={'project': project.sodar_uuid}
             )
         )
 
 
 class RoleAssignmentOwnerTransferMixin(ProjectModifyPluginViewMixin):
     """Mixin for owner RoleAssignment transfer in UI and API views"""
 
+    #: Owner role object
+    role_owner = None
+
     def _create_timeline_event(self, old_owner, new_owner, project):
         timeline = get_backend_api('timeline_backend')
         # Init Timeline event
         if not timeline:
             return None
-
         tl_desc = 'transfer ownership from {{{}}} to {{{}}}'.format(
             'prev_owner', 'new_owner'
         )
         tl_event = timeline.add_event(
             project=project,
             app_name=APP_NAME,
             user=self.request.user,
@@ -1787,37 +1931,48 @@
         )
         tl_event.add_object(old_owner, 'prev_owner', old_owner.username)
         tl_event.add_object(new_owner, 'new_owner', new_owner.username)
         return tl_event
 
     @transaction.atomic
     def _handle_transfer(
-        self, project, old_owner_as, new_owner, old_owner_role
+        self,
+        project,
+        old_owner_as,
+        new_owner,
+        old_owner_role,
+        old_inh_owner,
     ):
-        # Update roles
-        old_owner_as.role = old_owner_role
-        old_owner_as.save()
-        role_as = RoleAssignment.objects.get_assignment(new_owner, project)
-        role_owner = Role.objects.get(name=PROJECT_ROLE_OWNER)
-
-        if role_as:
-            role_as.role = role_owner
-            role_as.save()
-        elif new_owner in [
-            a.user for a in project.get_owners(inherited_only=True)
-        ]:
-            RoleAssignment.objects.create(
-                project=project, user=new_owner, role=role_owner
-            )
+        """
+        Handle ownership transfer with atomic rollback.
+
+        :param project: Project object
+        :param old_owner_as: RoleAssignment object for old owner
+        :param new_owner: User object for new user
+        :param old_owner_role: Role object to set for old owner
+        :param old_inh_owner: Whether old owner is inherited owner (boolean)
+        """
+        # Inherited owner, delete local role
+        if old_inh_owner:
+            old_owner_as.delete()
+        # Update old owner role
         else:
-            # We should already catch this earlier, but just in case..
-            raise Exception(
-                'New owner must have direct or inherited role in project'
+            old_owner_as.role = old_owner_role
+            old_owner_as.save()
+        # Update or create new owner role
+        new_role_as = RoleAssignment.objects.filter(
+            project=project, user=new_owner
+        ).first()
+        if new_role_as:
+            new_role_as.role = self.role_owner
+            new_role_as.save()
+        else:
+            RoleAssignment.objects.create(
+                project=project, user=new_owner, role=self.role_owner
             )
-
         # Call for additional actions for role creation/update in plugins
         if getattr(settings, 'PROJECTROLES_ENABLE_MODIFY_API', False):
             args = [
                 project,
                 new_owner,
                 old_owner_as.user,
                 old_owner_role,
@@ -1836,31 +1991,40 @@
         :param project: Project object
         :param new_owner: User object
         :param old_owner_as: RoleAssignment object
         :param old_owner_role: Role object for the previous owner's new role
         :return:
         """
         app_alerts = get_backend_api('appalerts_backend')
+        self.role_owner = Role.objects.get(name=PROJECT_ROLE_OWNER)
         old_owner = old_owner_as.user
-        owner_role = Role.objects.get(name=PROJECT_ROLE_OWNER)
+        # Old owner inheritance
+        old_inh_as = project.get_role(old_owner, inherited_only=True)
+        old_inh_owner = (
+            True if old_inh_as and old_inh_as.role == self.role_owner else False
+        )
+        # New owner inheritance
+        new_inh_as = project.get_role(new_owner, inherited_only=True)
+        new_inh_owner = (
+            True if new_inh_as and new_inh_as.role == self.role_owner else False
+        )
         tl_event = self._create_timeline_event(old_owner, new_owner, project)
 
         try:
             self._handle_transfer(
-                project, old_owner_as, new_owner, old_owner_role
+                project, old_owner_as, new_owner, old_owner_role, old_inh_owner
             )
         except Exception as ex:
             if tl_event:
                 tl_event.set_status('FAILED', str(ex))
             raise ex
 
         if tl_event:
             tl_event.set_status('OK')
-
-        if self.request.user != old_owner:
+        if not old_inh_owner and self.request.user != old_owner:
             if app_alerts:
                 app_alerts.add_alert(
                     app_name=APP_NAME,
                     alert_name='role_update',
                     user=old_owner,
                     message=ALERT_MSG_ROLE_UPDATE.format(
                         project=project.title, role=old_owner_role.name
@@ -1871,36 +2035,35 @@
                     ),
                     project=project,
                 )
             if SEND_EMAIL:
                 email.send_role_change_mail(
                     'update', project, old_owner, old_owner_role, self.request
                 )
-
-        if self.request.user != new_owner:
+        if not new_inh_owner and self.request.user != new_owner:
             if app_alerts:
                 app_alerts.add_alert(
                     app_name=APP_NAME,
                     alert_name='role_update',
                     user=new_owner,
                     message=ALERT_MSG_ROLE_UPDATE.format(
-                        project=project.title, role=owner_role.name
+                        project=project.title, role=self.role_owner.name
                     ),
                     url=reverse(
                         'projectroles:detail',
                         kwargs={'project': project.sodar_uuid},
                     ),
                     project=project,
                 )
             if SEND_EMAIL:
                 email.send_role_change_mail(
                     'update',
                     project,
                     new_owner,
-                    owner_role,
+                    self.role_owner,
                     self.request,
                 )
 
 
 class RoleAssignmentOwnerTransferView(
     LoginRequiredMixin,
     ProjectModifyPermissionMixin,
@@ -1937,32 +2100,34 @@
         old_owner = form.current_owner
         old_owner_as = project.get_owner()
         new_owner = form.cleaned_data['new_owner']
         old_owner_role = form.cleaned_data['old_owner_role']
         redirect_url = reverse(
             'projectroles:roles', kwargs={'project': project.sodar_uuid}
         )
-
         try:
             self.transfer_owner(
                 project, new_owner, old_owner_as, old_owner_role
             )
         except Exception as ex:
             # TODO: Add logging
             messages.error(
                 self.request, 'Unable to transfer ownership: {}'.format(ex)
             )
-
-        success_msg = (
-            'Successfully transferred ownership from '
-            '{} to {}.'.format(old_owner.username, new_owner.username)
-        )
-        if SEND_EMAIL:
-            success_msg += ' Notification(s) have been sent by email.'
-        messages.success(self.request, success_msg)
+            if settings.DEBUG:
+                raise ex
+            return redirect(redirect_url)
+        if old_owner.username != new_owner.username:
+            success_msg = (
+                'Successfully transferred ownership from '
+                '{} to {}.'.format(old_owner.username, new_owner.username)
+            )
+            if SEND_EMAIL:
+                success_msg += ' Notification(s) have been sent by email.'
+            messages.success(self.request, success_msg)
         return redirect(redirect_url)
 
 
 # ProjectInvite Views ----------------------------------------------------------
 
 
 class ProjectInviteMixin:
@@ -2124,19 +2289,25 @@
 class ProjectInviteProcessMixin(ProjectModifyPluginViewMixin):
     """Mixin for accepting and processing project invites"""
 
     @classmethod
     def get_invite_type(cls, invite):
         """Return invite type ("ldap", "local" or "error")"""
         # Check if domain is associated with LDAP
-        domain = invite.email.split('@')[1].split('.')[0].lower()
-        if settings.ENABLE_LDAP and domain in (
+        domain = invite.email.split('@')[1].lower()
+        domain_no_tld = domain.split('.')[0].lower()
+        ldap_domains = [
             getattr(settings, 'AUTH_LDAP_USERNAME_DOMAIN', '').lower(),
             getattr(settings, 'AUTH_LDAP2_USERNAME_DOMAIN', '').lower(),
-            *[a.lower() for a in getattr(settings, 'LDAP_ALT_DOMAINS', [])],
+        ]
+        alt_domains = [
+            a.lower() for a in getattr(settings, 'LDAP_ALT_DOMAINS', [])
+        ]
+        if settings.ENABLE_LDAP and (
+            domain_no_tld in ldap_domains or domain in alt_domains
         ):
             return 'ldap'
         elif settings.PROJECTROLES_ALLOW_LOCAL_USERS:
             return 'local'
         return 'error'
 
     @classmethod
@@ -2369,28 +2540,25 @@
     template_name = 'projectroles/user_form.html'
 
     def get(self, *args, **kwargs):
         invite = self.get_invite(self.kwargs['secret'])
         if not invite:
             return redirect(reverse('home'))
         timeline = get_backend_api('timeline_backend')
-
         # Check if local users are enabled
         if not settings.PROJECTROLES_ALLOW_LOCAL_USERS:
             messages.error(self.request, MSG_INVITE_LOCAL_NOT_ALLOWED)
             return redirect(reverse('home'))
-
         # Check invite for correct type
         if self.get_invite_type(invite) == 'ldap':
             messages.error(self.request, MSG_INVITE_LDAP_LOCAL_VIEW)
             return redirect(reverse('home'))
 
         # Check if invited user exists
         user = User.objects.filter(email=invite.email).first()
-
         # Check if invite has expired
         if self.is_invite_expired(invite, user):
             return redirect(reverse('home'))
 
         # A user is not logged in
         if self.request.user.is_anonymous:
             # Redirect to login if user exists and
@@ -2405,36 +2573,32 @@
                     + reverse(
                         'projectroles:invite_process_local',
                         kwargs={'secret': invite.secret},
                     )
                 )
             # Show form if user doesn't exists and no user is logged in
             return super().get(*args, **kwargs)
-
         # Logged in but the invited user does not exist yet
         if not user:
             messages.error(
                 self.request,
                 MSG_INVITE_LOGGED_IN_ACCEPT,
             )
             return redirect(reverse('home'))
-
         # Logged in user is not invited user
         if not self.request.user == user:
             messages.error(
                 self.request,
                 MSG_INVITE_USER_NOT_EQUAL,
             )
             return redirect(reverse('home'))
-
         # User exists but is not local
         if not user.is_local():
             messages.error(self.request, 'User exists, but is not local.')
             return redirect(reverse('home'))
-
         # Create role if user exists
         if not self.create_assignment(invite, user, timeline=timeline):
             return redirect(reverse('home'))
 
         return redirect(
             reverse(
                 'projectroles:detail',
@@ -2445,25 +2609,23 @@
     def get_initial(self):
         """Returns the initial data for the form."""
         initial = super().get_initial()
         try:
             invite = ProjectInvite.objects.get(secret=self.kwargs['secret'])
         except ProjectInvite.DoesNotExist:
             return initial
-
         username_base = invite.email.split('@')[0]
         i = 0
         while True:
             username = username_base + str(i if i else '')
             try:
                 User.objects.get(username=username)
                 i += 1
             except User.DoesNotExist:
                 break
-
         initial.update({'email': invite.email, 'username': username})
         return initial
 
     def form_valid(self, form):
         invite = self.get_invite(self.kwargs['secret'])
         if not invite:
             return redirect(reverse('home'))
@@ -2577,15 +2739,14 @@
 
     def post(self, request, **kwargs):
         """Override post() to handle POST from confirmation template"""
         project = self.get_project()
         invite = ProjectInvite.objects.filter(
             sodar_uuid=kwargs['projectinvite']
         ).first()
-
         if (
             invite
             and invite.role.name == PROJECT_ROLE_DELEGATE
             and not request.user.has_perm(
                 'projectroles.update_project_delegate', project
             )
         ):
@@ -2594,15 +2755,14 @@
             messages.error(
                 self.request, 'No permissions for updating delegate invite.'
             )
         elif invite:
             messages.success(self.request, 'Invite revoked.')
         else:
             messages.error(self.request, 'Invite not found.')
-
         self.revoke_invite(invite, project, request)
         return redirect(
             reverse(
                 'projectroles:invites', kwargs={'project': project.sodar_uuid}
             )
         )
 
@@ -2672,29 +2832,71 @@
             )
             return redirect('home')
         return super().get(request, *args, **kwargs)
 
 
 class RemoteSiteModifyMixin(ModelFormMixin):
     def form_valid(self, form):
+        timeline = get_backend_api('timeline_backend')
         if self.object:
             form_action = 'updated'
         elif settings.PROJECTROLES_SITE_MODE == 'TARGET':
             form_action = 'set'
         else:
             form_action = 'created'
         self.object = form.save()
+        # Create timeline event
+        if timeline:
+            self.create_timeline_event(
+                self.object, self.request.user, form_action, timeline=timeline
+            )
         messages.success(
             self.request,
             '{} site "{}" {}.'.format(
                 self.object.mode.capitalize(), self.object.name, form_action
             ),
         )
         return redirect(reverse('projectroles:remote_sites'))
 
+    def create_timeline_event(
+        self, remote_site, user, form_action, timeline=None
+    ):
+        """Create timeline event for remote site creation/update"""
+        status = form_action if form_action == 'set' else form_action[0:-1]
+        if remote_site.mode == SITE_MODE_SOURCE:
+            event_name = 'source_site_{}'.format(status)
+        else:
+            event_name = 'target_site_{}'.format(status)
+
+        tl_desc = '{} remote {} site "{{{}}}"'.format(
+            status,
+            remote_site.mode.lower(),
+            'remote_site',
+        )
+        tl_event = timeline.add_event(
+            project=None,
+            app_name=APP_NAME,
+            user=user,
+            event_name=event_name,
+            description=tl_desc,
+            classified=True,
+            extra_data={
+                'name': remote_site.name,
+                'url': remote_site.url,
+                'description': remote_site.description,
+                'mode': remote_site.mode,
+                'user display': remote_site.user_display,
+                'secret': remote_site.secret,
+            },
+            status_type='OK',
+        )
+        tl_event.add_object(
+            obj=remote_site, label='remote_site', name=remote_site.name
+        )
+
 
 class RemoteSiteCreateView(
     LoginRequiredMixin,
     LoggedInPermissionMixin,
     RemoteSiteModifyMixin,
     HTTPRefererMixin,
     CurrentUserFormMixin,
@@ -2750,14 +2952,33 @@
     model = RemoteSite
     form_class = RemoteSiteForm
     permission_required = 'projectroles.update_remote'
     slug_url_kwarg = 'remotesite'
     slug_field = 'sodar_uuid'
 
     def get_success_url(self):
+        """Override get_success_url() to add message"""
+        timeline = get_backend_api('timeline_backend')
+        if timeline:
+            event_name = '{}_site_delete'.format(
+                'source' if self.object.mode == SITE_MODE_SOURCE else 'target'
+            )
+            tl_desc = 'delete remote site "{remote_site}"'
+            tl_event = timeline.add_event(
+                project=None,
+                app_name=APP_NAME,
+                user=self.request.user,
+                event_name=event_name,
+                description=tl_desc,
+                classified=True,
+                status_type='OK',
+            )
+            tl_event.add_object(
+                obj=self.object, label='remote_site', name=self.object.name
+            )
         messages.success(
             self.request,
             '{} site "{}" deleted'.format(
                 self.object.mode.capitalize(), self.object.name
             ),
         )
         return reverse('projectroles:remote_sites')
@@ -2771,25 +2992,23 @@
     permission_required = 'projectroles.update_remote'
     template_name = 'projectroles/remote_projects.html'
 
     def get_context_data(self, *args, **kwargs):
         context = super().get_context_data(*args, **kwargs)
         site = RemoteSite.objects.get(sodar_uuid=self.kwargs['remotesite'])
         context['site'] = site
-
         # Projects in SOURCE mode: all local projects of type PROJECT
         if settings.PROJECTROLES_SITE_MODE == SITE_MODE_SOURCE:
             projects = Project.objects.filter(type=PROJECT_TYPE_PROJECT)
         # Projects in TARGET mode: retrieve from source
         else:  # SITE_MODE_TARGET
             remote_uuids = [p.project_uuid for p in site.projects.all()]
             projects = Project.objects.filter(
                 type=PROJECT_TYPE_PROJECT, sodar_uuid__in=remote_uuids
             )
-
         if projects:
             context['projects'] = projects.order_by('full_title')
         return context
 
 
 class RemoteProjectBatchUpdateView(
     LoginRequiredMixin, LoggedInPermissionMixin, TemplateView
@@ -2816,37 +3035,31 @@
         context = self.get_context_data(*args, **kwargs)
         site = context['site']
         confirmed = True if 'update-confirmed' in post_data else False
         redirect_url = reverse(
             'projectroles:remote_projects',
             kwargs={'remotesite': site.sodar_uuid},
         )
-
         # Ensure site is in SOURCE mode
         if settings.PROJECTROLES_SITE_MODE != SITE_MODE_SOURCE:
             messages.error(
                 request,
                 'Site in TARGET mode, cannot update {} access'.format(
                     get_display_name(PROJECT_TYPE_PROJECT)
                 ),
             )
             return redirect(redirect_url)
-
         access_fields = {
             k: v for k, v in post_data.items() if k.startswith('remote_access')
         }
 
-        ######################
         # Confirmation needed
-        ######################
-
         if not confirmed:
             # Pass on (only) changed projects to confirmation form
             modifying_access = []
-
             for k, v in access_fields.items():
                 project_uuid = k.split('_')[2]
                 remote_obj = RemoteProject.objects.filter(
                     site=site, project_uuid=project_uuid
                 ).first()
                 if (not remote_obj and v != REMOTE_LEVEL_NONE) or (
                     remote_obj and remote_obj.level != v
@@ -2858,64 +3071,87 @@
                             ),
                             'old_level': REMOTE_LEVEL_NONE
                             if not remote_obj
                             else remote_obj.level,
                             'new_level': v,
                         }
                     )
-
             if not modifying_access:
                 messages.warning(
                     request,
                     'No changes to {} access detected'.format(
                         get_display_name(PROJECT_TYPE_PROJECT)
                     ),
                 )
                 return redirect(redirect_url)
-
             context['modifying_access'] = modifying_access
             return super().render_to_response(context)
 
-        ############
         # Confirmed
-        ############
+        modifying_access = []
+        old_level = REMOTE_LEVEL_NONE
 
         for k, v in access_fields.items():
             project_uuid = k.split('_')[2]
             project = Project.objects.filter(sodar_uuid=project_uuid).first()
             # Update or create a RemoteProject object
             try:
                 rp = RemoteProject.objects.get(
                     site=site, project_uuid=project_uuid
                 )
+                old_level = rp.level
                 rp.level = v
             except RemoteProject.DoesNotExist:
                 rp = RemoteProject(
                     site=site,
                     project_uuid=project_uuid,
                     project=project,
                     level=v,
                 )
             rp.save()
 
+            modifying_access.append(
+                {
+                    'project': project.get_log_title(),
+                    'old_level': REMOTE_LEVEL_NONE
+                    if not old_level
+                    else old_level,
+                    'new_level': v,
+                }
+            )
+
             if timeline and project:
                 tl_desc = 'update remote access for site {{{}}} to "{}"'.format(
-                    'site',
                     SODAR_CONSTANTS['REMOTE_ACCESS_LEVELS'][v].lower(),
+                    'remote_site',
                 )
                 tl_event = timeline.add_event(
                     project=project,
                     app_name=APP_NAME,
                     user=request.user,
                     event_name='update_remote',
                     description=tl_desc,
                     classified=True,
                     status_type='OK',
                 )
-                tl_event.add_object(site, 'site', site.name)
+                tl_event.add_object(site, 'remote_site', site.name)
+
+        if timeline:
+            tl_desc = 'update remote site "{remote_site}"'
+            tl_event = timeline.add_event(
+                project=None,
+                app_name=APP_NAME,
+                user=request.user,
+                event_name='batch_update_remote',
+                description=tl_desc,
+                extra_data={'modifying_access': modifying_access},
+                classified=True,
+                status_type='OK',
+            )
+            tl_event.add_object(obj=site, label='remote_site', name=site.name)
 
         # All OK
         messages.success(
             request,
             'Access level updated for {} {} in site "{}"'.format(
                 len(access_fields.items()),
                 get_display_name(
@@ -2948,58 +3184,34 @@
         redirect_url = reverse('projectroles:remote_sites')
         if settings.PROJECTROLES_SITE_MODE == SITE_MODE_SOURCE:
             messages.error(
                 request, 'Site in SOURCE mode, remote sync not allowed'
             )
             return redirect(redirect_url)
 
-        from projectroles.views_api import (
-            CORE_API_MEDIA_TYPE,
-            CORE_API_DEFAULT_VERSION,
-        )
-
+        timeline = get_backend_api('timeline_backend')
         remote_api = RemoteProjectAPI()
         context = self.get_context_data(*args, **kwargs)
-        site = context['site']
-        api_url = site.get_url() + reverse(
-            'projectroles:api_remote_get', kwargs={'secret': site.secret}
-        )
+        source_site = context['site']
 
         try:
-            api_req = urllib.request.Request(api_url)
-            api_req.add_header(
-                'accept',
-                '{}; version={}'.format(
-                    CORE_API_MEDIA_TYPE, CORE_API_DEFAULT_VERSION
-                ),
-            )
-            response = urllib.request.urlopen(api_req)
-            remote_data = json.loads(response.read().decode('utf-8'))
+            remote_data = remote_api.get_remote_data(source_site)
         except Exception as ex:
-            ex_str = str(ex)
-            if (
-                isinstance(ex, urllib.error.URLError)
-                and isinstance(ex.reason, ssl.SSLError)
-                and ex.reason.reason == 'WRONG_VERSION_NUMBER'
-            ):
-                ex_str = 'Most likely server cannot handle HTTPS requests.'
-            if len(ex_str) >= 255:
-                ex_str = ex_str[:255]
             messages.error(
                 request,
                 'Unable to synchronize {}: {}'.format(
-                    get_display_name(PROJECT_TYPE_PROJECT, plural=True), ex_str
+                    get_display_name(PROJECT_TYPE_PROJECT, plural=True), ex
                 ),
             )
             return redirect(redirect_url)
 
         # Sync data
         try:
             update_data = remote_api.sync_remote_data(
-                site, remote_data, request
+                source_site, remote_data, request
             )
         except Exception as ex:
             messages.error(
                 request, 'Remote sync cancelled with exception: {}'.format(ex)
             )
             if settings.DEBUG:
                 raise ex
@@ -3016,15 +3228,14 @@
             [
                 v
                 for v in update_data['app_settings'].values()
                 if 'status' in v and v['status'] != 'skipped'
             ]
         )
         role_count = 0
-
         for p in [p for p in update_data['projects'].values() if 'roles' in p]:
             for _ in [r for r in p['roles'].values() if 'status' in r]:
                 role_count += 1
 
         # Redirect if no changes were detected
         if (
             user_count == 0
@@ -3039,14 +3250,31 @@
             return redirect(redirect_url)
 
         context['update_data'] = update_data
         context['user_count'] = user_count
         context['project_count'] = project_count
         context['role_count'] = role_count
         context['app_settings_count'] = app_settings_count
+
+        # Create timeline events for projects
+        if timeline:
+            tl_desc = 'synchronize remote site "{remote_site}"'
+            tl_event = timeline.add_event(
+                project=None,
+                app_name=APP_NAME,
+                user=request.user,
+                event_name='remote_project_sync',
+                description=tl_desc,
+                classified=True,
+                status_type='OK',
+            )
+            tl_event.add_object(
+                obj=source_site, label='remote_site', name=source_site.name
+            )
+
         messages.success(
             request,
             '{} data updated according to source site.'.format(
                 get_display_name(PROJECT_TYPE_PROJECT, title=True)
             ),
         )
         return super().render_to_response(context)
```

### Comparing `django-sodar-core-0.12.0/projectroles/views_ajax.py` & `django-sodar-core-0.13.0/projectroles/views_ajax.py`

 * *Files 11% similar despite different names*

```diff
@@ -14,49 +14,46 @@
 from rest_framework.authentication import SessionAuthentication
 from rest_framework.permissions import AllowAny, IsAuthenticated
 from rest_framework.renderers import JSONRenderer
 from rest_framework.response import Response
 from rest_framework.views import APIView
 from rules.contrib.views import PermissionRequiredMixin
 
+from projectroles.app_settings import AppSettingAPI
 from projectroles.models import (
     Project,
-    Role,
     RoleAssignment,
-    ProjectUserTag,
-    PROJECT_TAG_STARRED,
     SODAR_CONSTANTS,
     CAT_DELIMITER,
+    ROLE_RANKING,
 )
 from projectroles.plugins import get_active_plugins, get_backend_api
-from projectroles.project_tags import get_tag_state, set_tag_state
 from projectroles.utils import get_display_name
 from projectroles.views import (
     ProjectAccessMixin,
     APP_NAME,
     User,
 )
 from projectroles.views_api import (
     SODARAPIProjectPermission,
     CurrentUserRetrieveAPIView,
 )
 
 
 logger = logging.getLogger(__name__)
+app_settings = AppSettingAPI()
 
 
 # SODAR consants
 PROJECT_TYPE_PROJECT = SODAR_CONSTANTS['PROJECT_TYPE_PROJECT']
 PROJECT_TYPE_CATEGORY = SODAR_CONSTANTS['PROJECT_TYPE_CATEGORY']
 PROJECT_ROLE_OWNER = SODAR_CONSTANTS['PROJECT_ROLE_OWNER']
+PROJECT_ROLE_FINDER = SODAR_CONSTANTS['PROJECT_ROLE_FINDER']
 SYSTEM_USER_GROUP = SODAR_CONSTANTS['SYSTEM_USER_GROUP']
 
-# Local constants
-INHERITED_OWNER_INFO = 'Ownership inherited from parent category'
-
 
 # Base Classes and Mixins ------------------------------------------------------
 
 
 class SODARBaseAjaxMixin:
     """
     Base Ajax mixin with permission class retrieval. To be used if another base
@@ -114,44 +111,44 @@
 
 class ProjectListAjaxView(SODARBaseAjaxView):
     """View to retrieve project list entries from the client"""
 
     allow_anonymous = True
 
     @classmethod
-    def _get_project_list(cls, user, parent=None):
+    def _get_projects(cls, user, parent=None):
         """
-        Return a flat list of categories and projects.
+        Return a flat list of categories and projects the user can view.
 
         :param user: User for which the projects are visible
         :param parent: Project object of type CATEGORY or None
         """
         project_list = Project.objects.all()
         if user.is_anonymous:
             project_list = project_list.filter(
                 Q(public_guest_access=True) | Q(has_public_children=True)
             )
         elif not user.is_superuser:
             # Quick and dirty filtering for inheritance using full_title
-            role_owner = Role.objects.filter(name=PROJECT_ROLE_OWNER).first()
-            owned_cats = [
+            # role_owner = Role.objects.filter(name=PROJECT_ROLE_OWNER).first()
+            role_cats = [
                 r.project.full_title + CAT_DELIMITER
                 for r in RoleAssignment.objects.filter(
                     project__type=PROJECT_TYPE_CATEGORY,
                     user=user,
-                    role=role_owner,
                 )
             ]
+            # NOTE: Not using get_role() here as that would exclude finder role
             project_list = [
                 p
                 for p in project_list
                 if p.public_guest_access
                 or p.has_public_children
-                or any(p.full_title.startswith(c) for c in owned_cats)
-                or p.roles.filter(user=user).count() > 0
+                or any(p.full_title.startswith(c) for c in role_cats)
+                or p.local_roles.filter(user=user).count() > 0
             ]
 
         # Populate final list
         ret = []
         parent_prefix = parent.full_title + CAT_DELIMITER if parent else None
         for p in project_list:
             if (
@@ -166,55 +163,114 @@
                 while p_parent and p_parent != parent:
                     if p_parent not in ret:
                         ret.append(p_parent)
                     p_parent = p_parent.parent
         # Sort by full title
         return sorted(ret, key=lambda x: x.full_title.lower())
 
+    @classmethod
+    def _get_access(cls, project, user, finder_cats, depth):
+        """
+        Return whether user has access to a project for the project list.
+
+        :param project: Project object
+        :param user: SODARUser object
+        :param finder_cats: List of category names where user has finder role
+        :param depth: Project depth in category structure (int)
+        :return: Boolean
+        """
+        # Disable categories for anonymous users if anonymous access is enabled
+        if not user.is_authenticated and project.type == PROJECT_TYPE_CATEGORY:
+            return False
+        # Cases which are always true if we get this far
+        if (
+            user.is_superuser
+            or (user.is_authenticated and project.type == PROJECT_TYPE_CATEGORY)
+            or project.public_guest_access
+        ):
+            return True
+        # If user has finder role in a parent category, we need to check role
+        if finder_cats and depth > 0:
+            for i in range(0, depth + 1):
+                c = ' / '.join(project.full_title.split(' / ')[:i])
+                if c in finder_cats:
+                    role_as = project.get_role(user)
+                    if (
+                        role_as
+                        and role_as.role.rank
+                        < ROLE_RANKING[PROJECT_ROLE_FINDER]
+                    ):
+                        return True
+            return False
+        return True
+
     def get(self, request, *args, **kwargs):
         parent_uuid = request.GET.get('parent', None)
         parent = (
             Project.objects.get(sodar_uuid=parent_uuid) if parent_uuid else None
         )
         if parent and parent.type != PROJECT_TYPE_CATEGORY:
             return Response(
                 {
                     'detail': 'Querying for a project list under a project is '
                     'not allowed'
                 },
                 status=400,
             )
 
-        project_list = self._get_project_list(request.user, parent)
+        projects = self._get_projects(request.user, parent)
         starred_projects = []
         if request.user.is_authenticated:
             starred_projects = [
-                t.project
-                for t in ProjectUserTag.objects.filter(
-                    user=request.user, name=PROJECT_TAG_STARRED
+                project
+                for project in Project.objects.all()
+                if app_settings.get(
+                    'projectroles', 'project_star', project, request.user
+                )
+            ]
+        finder_cats = []
+        if request.user.is_authenticated:
+            finder_cats = [
+                a.project.full_title
+                for a in RoleAssignment.objects.filter(
+                    project__type=PROJECT_TYPE_CATEGORY,
+                    role__rank=ROLE_RANKING[PROJECT_ROLE_FINDER],
+                    user=request.user,
                 )
             ]
         full_title_idx = len(parent.full_title) + 3 if parent else 0
 
+        ret_projects = []
+        for p in projects:
+            p_depth = p.get_depth()
+            p_access = self._get_access(p, request.user, finder_cats, p_depth)
+            p_finder_url = None
+            if not p_access and p.parent:
+                p_finder_url = reverse(
+                    'projectroles:roles',
+                    kwargs={'project': p.parent.sodar_uuid},
+                )
+
+            rp = {
+                'title': p.title,
+                'type': p.type,
+                'full_title': p.full_title[full_title_idx:],
+                'public_guest_access': p.public_guest_access,
+                'archive': p.archive,
+                'remote': p.is_remote(),
+                'revoked': p.is_revoked(),
+                'starred': p in starred_projects,
+                'depth': p_depth,
+                'access': p_access,
+                'finder_url': p_finder_url,
+                'uuid': str(p.sodar_uuid),
+            }
+            ret_projects.append(rp)
         ret = {
-            'projects': [
-                {
-                    'title': p.title,
-                    'type': p.type,
-                    'full_title': p.full_title[full_title_idx:],
-                    'public_guest_access': p.public_guest_access,
-                    'archive': p.archive,
-                    'remote': p.is_remote(),
-                    'revoked': p.is_revoked(),
-                    'starred': p in starred_projects,
-                    'depth': p.get_depth(),
-                    'uuid': str(p.sodar_uuid),
-                }
-                for p in project_list
-            ],
+            'projects': ret_projects,
             'parent_depth': parent.get_depth() + 1 if parent else 0,
             'messages': {},
             'user': {'superuser': request.user.is_superuser},
         }
 
         if len(ret['projects']) == 0:
             np_prefix = 'No {} '.format(
@@ -310,27 +366,20 @@
     """View to retrieve project list role data from the client"""
 
     allow_anonymous = True
 
     @classmethod
     def _get_user_role(cls, project, user):
         """Return user role for project"""
-        ret = {'name': None, 'class': None, 'info': None}
+        ret = {'name': None, 'class': None}
         role_as = None
         if user.is_authenticated:
-            role_as = RoleAssignment.objects.filter(
-                project=project, user=user
-            ).first()
+            role_as = project.get_role(user)
             if role_as:
                 ret['name'] = role_as.role.name.split(' ')[1].capitalize()
-            elif project.is_owner(user):
-                ret['name'] = 'Owner'
-                if not role_as or role_as.role.name != PROJECT_ROLE_OWNER:
-                    ret['class'] = 'text-muted'
-                    ret['info'] = INHERITED_OWNER_INFO
         if project.public_guest_access and not role_as:
             ret['name'] = 'Guest'
         if not ret['name']:
             ret['name'] = 'N/A'
             ret['class'] = 'text-muted'
         return ret
 
@@ -364,30 +413,42 @@
         # HACK: Manually refuse access to anonymous as this view is an exception
         if request.user.is_anonymous:
             return Response({'detail': 'Anonymous access denied'}, status=401)
 
         project = self.get_project()
         user = request.user
         timeline = get_backend_api('timeline_backend')
-        tag_state = get_tag_state(project, user)
-        action_str = '{}star'.format('un' if tag_state else '')
-        set_tag_state(project, user, PROJECT_TAG_STARRED)
+        project_star = app_settings.get(
+            'projectroles', 'project_star', project, user
+        )
+        action_str = '{}star'.format('un' if project_star else '')
+        if project_star:
+            app_settings.delete('projectroles', 'project_star', project, user)
+        else:
+            app_settings.set(
+                app_name='projectroles',
+                setting_name='project_star',
+                value=True,
+                project=project,
+                user=user,
+                validate=False,
+            )
 
         # Add event in Timeline
         if timeline:
             timeline.add_event(
                 project=project,
                 app_name=APP_NAME,
                 user=user,
                 event_name='project_{}'.format(action_str),
                 description='{} project'.format(action_str),
                 classified=True,
                 status_type='INFO',
             )
-        return Response(0 if tag_state else 1, status=200)
+        return Response(0 if project_star else 1, status=200)
 
 
 class CurrentUserRetrieveAjaxView(
     SODARBaseAjaxMixin, CurrentUserRetrieveAPIView
 ):
     """
     Return information of the requesting user for Ajax requests.
@@ -418,15 +479,15 @@
         ]:
             project = Project.objects.filter(sodar_uuid=project_uuid).first()
             # If user has no permission for the project, return None
             if not self.request.user.has_perm(
                 'projectroles.view_project', project
             ):
                 return User.objects.none()
-            project_users = [a.user.pk for a in project.get_all_roles()]
+            project_users = [a.user.pk for a in project.get_roles()]
             if scope == 'project':  # Limit choices to current project users
                 qs = User.objects.filter(pk__in=project_users)
             elif scope == 'project_exclude':  # Exclude project users
                 qs = User.objects.exclude(pk__in=project_users)
         # Else include all users
         else:
             qs = User.objects.all()
@@ -449,15 +510,15 @@
                 | Q(name__icontains=self.q)
                 | Q(email__icontains=self.q)
             )
         return qs.order_by('name')
 
     def get_result_label(self, user):
         """Display options with name, username and email address"""
-        return user.get_form_label()
+        return user.get_form_label(email=True)
 
     def get_result_value(self, user):
         """Use sodar_uuid in the User model instead of pk"""
         return str(user.sodar_uuid)
 
     def get(self, request, *args, **kwargs):
         if not request.user.is_authenticated:
```

### Comparing `django-sodar-core-0.12.0/projectroles/views_api.py` & `django-sodar-core-0.13.0/projectroles/views_api.py`

 * *Files 2% similar despite different names*

```diff
@@ -39,14 +39,16 @@
     Project,
     Role,
     RoleAssignment,
     ProjectInvite,
     RemoteSite,
     AppSetting,
     SODAR_CONSTANTS,
+    CAT_DELIMITER,
+    ROLE_PROJECT_TYPE_ERROR_MSG,
 )
 from projectroles.plugins import get_backend_api
 from projectroles.remote_projects import RemoteProjectAPI
 from projectroles.serializers import (
     ProjectSerializer,
     RoleAssignmentSerializer,
     ProjectInviteSerializer,
@@ -71,14 +73,15 @@
 # SODAR constants
 PROJECT_TYPE_PROJECT = SODAR_CONSTANTS['PROJECT_TYPE_PROJECT']
 PROJECT_TYPE_CATEGORY = SODAR_CONSTANTS['PROJECT_TYPE_CATEGORY']
 PROJECT_ROLE_OWNER = SODAR_CONSTANTS['PROJECT_ROLE_OWNER']
 PROJECT_ROLE_DELEGATE = SODAR_CONSTANTS['PROJECT_ROLE_DELEGATE']
 PROJECT_ROLE_CONTRIBUTOR = SODAR_CONSTANTS['PROJECT_ROLE_CONTRIBUTOR']
 PROJECT_ROLE_GUEST = SODAR_CONSTANTS['PROJECT_ROLE_GUEST']
+PROJECT_ROLE_FINDER = SODAR_CONSTANTS['PROJECT_ROLE_FINDER']
 APP_SETTING_SCOPE_PROJECT = SODAR_CONSTANTS['APP_SETTING_SCOPE_PROJECT']
 APP_SETTING_SCOPE_USER = SODAR_CONSTANTS['APP_SETTING_SCOPE_USER']
 APP_SETTING_SCOPE_PROJECT_USER = SODAR_CONSTANTS[
     'APP_SETTING_SCOPE_PROJECT_USER'
 ]
 
 # API constants for external SODAR Core sites
@@ -91,15 +94,15 @@
 SODAR_API_ALLOWED_VERSIONS = getattr(
     settings, 'SODAR_API_ALLOWED_VERSIONS', [SODAR_API_DEFAULT_VERSION]
 )
 CORE_API_MEDIA_TYPE = 'application/vnd.bihealth.sodar-core+json'
 CORE_API_DEFAULT_VERSION = re.match(
     r'^([0-9.]+)(?:[+|\-][\S]+)?$', core_version
 )[1]
-CORE_API_ALLOWED_VERSIONS = ['0.11.0', '0.11.1', '0.12.0']
+CORE_API_ALLOWED_VERSIONS = ['0.13.0']
 
 # Local constants
 INVALID_PROJECT_TYPE_MSG = (
     'Project type "{project_type}" not allowed for this API view'
 )
 USER_MODIFIABLE_MSG = 'Updating non-user modifiable settings is not allowed'
 ANON_ACCESS_MSG = 'Anonymous access not allowed'
@@ -354,41 +357,55 @@
             return False
         return request.user.has_perm('projectroles.create_project', parent)
 
 
 # API Views --------------------------------------------------------------------
 
 
-class ProjectListAPIView(ListAPIView):
+class ProjectListAPIView(APIView):
     """
     List all projects and categories for which the requesting user has access.
 
     **URL:** ``/project/api/list``
 
     **Methods:** ``GET``
 
-    **Returns:** List of project details (see ``ProjectRetrieveAPIView``)
+    **Returns:** List of project details (see ``ProjectRetrieveAPIView``). For
+    project finder role, only lists title and UUID of projects.
     """
 
     permission_classes = [IsAuthenticated]
     renderer_classes = [CoreAPIRenderer]
-    serializer_class = ProjectSerializer
     versioning_class = CoreAPIVersioning
 
-    def get_queryset(self):
-        """
-        Override get_queryset() to return projects of type PROJECT for which the
-        requesting user has access.
-        """
-        qs = Project.objects.all().order_by('pk')
-        if self.request.user.is_superuser:
-            return qs
-        return qs.filter(
-            roles__in=RoleAssignment.objects.filter(user=self.request.user)
+    def get(self, request, *args, **kwargs):
+        projects_all = Project.objects.all().order_by('full_title')
+        if request.user.is_superuser:
+            ret = projects_all
+        else:
+            ret = []
+            role_cats = []
+            projects_local = [
+                a.project
+                for a in RoleAssignment.objects.filter(user=request.user)
+            ]
+            for p in projects_all:
+                local_role = p in projects_local
+                if (
+                    local_role
+                    or p.public_guest_access
+                    or any(p.full_title.startswith(c) for c in role_cats)
+                ):
+                    ret.append(p)
+                if local_role and p.type == PROJECT_TYPE_CATEGORY:
+                    role_cats.append(p.full_title + CAT_DELIMITER)
+        serializer = ProjectSerializer(
+            ret, many=True, context={'request': request}
         )
+        return Response(serializer.data, status=200)
 
 
 class ProjectRetrieveAPIView(
     ProjectQuerysetMixin, CoreAPIGenericProjectMixin, RetrieveAPIView
 ):
     """
     Retrieve a project or category by its UUID.
@@ -587,38 +604,56 @@
         new_owner = User.objects.filter(
             username=request.data.get('new_owner')
         ).first()
         old_owner_role = Role.objects.filter(
             name=request.data.get('old_owner_role')
         ).first()
         old_owner_as = project.get_owner()
+        old_owner = old_owner_as.user
 
         # Validate input
         if not new_owner or not old_owner_role:
             raise serializers.ValidationError(
                 'Fields "new_owner" and "old_owner_role" must be present'
             )
         if not old_owner_role:
             raise serializers.ValidationError(
                 'Unknown role "{}"'.format(request.data.get('old_owner_role'))
             )
+        if project.type not in old_owner_role.project_types:
+            raise serializers.ValidationError(
+                ROLE_PROJECT_TYPE_ERROR_MSG.format(
+                    project_type=project.type, role_name=old_owner_role.name
+                )
+            )
         if not old_owner_as:
             raise serializers.ValidationError('Existing owner role not found')
         if not new_owner:
             raise serializers.ValidationError(
                 'User "{}" not found'.format(request.data.get('new_owner'))
             )
-        if new_owner == old_owner_as.user:
+        if new_owner == old_owner:
             raise serializers.ValidationError('Owner role already set for user')
         if not project.has_role(new_owner):
             raise serializers.ValidationError(
                 'User {} is not a member of the project'.format(
                     new_owner.username
                 )
             )
+        # Validate existing inherited role for old owner, do not allow demoting
+        inh_roles = RoleAssignment.objects.filter(
+            user=old_owner, project__in=project.get_parents()
+        ).order_by('role__rank')
+        if inh_roles and old_owner_role.rank > inh_roles.first().role.rank:
+            raise serializers.ValidationError(
+                'User {} has inherited role "{}", demoting is not '
+                'allowed'.format(
+                    old_owner.username, inh_roles.first().role.name
+                )
+            )
 
         # All OK, transfer owner
         try:
             self.transfer_owner(
                 project, new_owner, old_owner_as, old_owner_role
             )
         except Exception as ex:
@@ -865,15 +900,17 @@
         try:
             return cls._get_setting_obj(app_name, setting_name, project, user)
         except AppSetting.DoesNotExist:
             try:
                 app_settings.set(
                     app_name=app_name,
                     setting_name=setting_name,
-                    value=app_settings.get_default(app_name, setting_name),
+                    value=app_settings.get_default(
+                        app_name, setting_name, project=project, user=user
+                    ),
                     project=project,
                     user=user,
                 )
                 return cls._get_setting_obj(
                     app_name, setting_name, project, user
                 )
             except Exception as ex:
```

### Comparing `django-sodar-core-0.12.0/requirements/base.txt` & `django-sodar-core-0.13.0/requirements/base.txt`

 * *Files 14% similar despite different names*

```diff
@@ -1,78 +1,86 @@
 # Wheel
-wheel>=0.38.4, <0.39
+wheel>=0.40.0, <0.41
 
 # Setuptools
-setuptools>=65.6.3, <65.7
+setuptools>=67.6.0, <67.7
+
+# Packaging
+packaging>=23.0, <24.0
 
 # Django
-django>=3.2.17, <3.3
+django>=3.2.19, <3.3
 
 # Configuration
-django-environ>=0.9.0, <0.10
+django-environ>=0.10.0, <0.11
 
 # Forms
-django-crispy-forms>=1.14.0, <1.15
+django-crispy-forms>=2.0, <2.1
+crispy-bootstrap4==2022.1
 
 # Models
-django-model-utils>=4.2.0, <4.3
+django-model-utils>=4.3.1, <4.4
 
 # Password storage
 argon2-cffi>=21.3.0, <21.4
 
 # Python-PostgreSQL Database Adapter
-psycopg2-binary>=2.9.3, <2.10
+psycopg2-binary>=2.9.5, <2.10
 
 # Unicode slugification
 awesome-slugify>=1.6.5, <1.7
 
 # Time zones support
-pytz>=2022.2.1
+pytz>=2022.7.1
 
 # SVG icon support
 django-iconify==0.1.1  # NOTE: v0.3 crashes, see issue
 
 # Online documentation via django-docs
-docutils==0.17.1
-Sphinx==5.1.1
-django-docs==0.3.1
-sphinx-rtd-theme==1.0.0
+docutils==0.18.1  # NOTE: sphinx-rtd-theme 1.2 requires <0.19
+Sphinx==6.1.3
+django-docs==0.3.3
+sphinx-rtd-theme==1.2.0
 
 # Versioning
-versioneer==0.23
+versioneer==0.28
 
 ######################
 # Project app imports
 ######################
 
 # Django-plugins (with Django v3.0+ support)
 -e git+https://github.com/mikkonie/django-plugins.git@42e86e7904e5c09f1da32173862b26843eda5dd8#egg=django-plugins
 
 # Rules for permissions
 rules>=3.3, <3.4
 
 # REST framework
-djangorestframework>=3.13.1, <3.14
+djangorestframework>=3.14.0, <3.15
 
 # Keyed list addon for DRF
 -e git+https://github.com/mikkonie/drf-keyed-list.git@b03607b866c5706b0e1ea46a7eeaab6527030734#egg=drf-keyed-list
 
 # Token authentication
 django-rest-knox>=4.2.0, <4.3
 
 # Markdown field support
 markdown==3.4.1
 django-markupfield>=2.0.1, <2.1
 django-pagedown>=2.2.1, <2.3
-mistune>=2.0.4, <2.1
+mistune>=2.0.5, <2.1
 
 # Database file storage for filesfolders
 django-db-file-storage==0.5.5
 
+# Celery dependency
+redis>=4.4.4
+
 # Backround Jobs requirements
 celery>=5.2.7, <5.3
 
 # Django autocomplete light (DAL)
-django-autocomplete-light>=3.9.4, <3.10
+# NOTE: 3.9.5 causes crash with Whitenoise (see issue #1224)
+django-autocomplete-light==3.9.4
 
 # SAML2 support for SSO
 django-saml2-auth-ai>=2.1.6, <2.2
```

### Comparing `django-sodar-core-0.12.0/setup.cfg` & `django-sodar-core-0.13.0/setup.cfg`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/setup.py` & `django-sodar-core-0.13.0/setup.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/siteinfo/plugins.py` & `django-sodar-core-0.13.0/siteinfo/plugins.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/siteinfo/templates/siteinfo/_app_stats.html` & `django-sodar-core-0.13.0/siteinfo/templates/siteinfo/_app_stats.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/siteinfo/templates/siteinfo/_plugin_settings.html` & `django-sodar-core-0.13.0/siteinfo/templates/siteinfo/_plugin_settings.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/siteinfo/templates/siteinfo/site_info.html` & `django-sodar-core-0.13.0/siteinfo/templates/siteinfo/site_info.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/siteinfo/tests/test_permissions.py` & `django-sodar-core-0.13.0/siteinfo/tests/test_permissions.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/siteinfo/tests/test_views.py` & `django-sodar-core-0.13.0/siteinfo/tests/test_views.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/siteinfo/views.py` & `django-sodar-core-0.13.0/siteinfo/views.py`

 * *Files 2% similar despite different names*

```diff
@@ -31,14 +31,15 @@
     'EMAIL_SENDER',
     'ENABLE_LDAP',
     'ENABLE_SAML',
     'ENABLED_BACKEND_PLUGINS',
     'ICONIFY_JSON_ROOT',
     'INSTALLED_APPS',
     'LANGUAGE_CODE',
+    'LDAP_ALT_DOMAINS',
     'LOGGING_APPS',
     'LOGGING_FILE_PATH',
     'LOGGING_LEVEL',
     'MANAGERS',
     'MIDDLEWARE',
     'PROJECTROLES_ALLOW_ANONYMOUS',
     'PROJECTROLES_ALLOW_LOCAL_USERS',
@@ -49,24 +50,28 @@
     'PROJECTROLES_DELEGATE_LIMIT',
     'PROJECTROLES_DISABLE_CATEGORIES',
     'PROJECTROLES_DISABLE_CDN_INCLUDES',
     'PROJECTROLES_EMAIL_SENDER_REPLY',
     'PROJECTROLES_ENABLE_PROFILING',
     'PROJECTROLES_ENABLE_SEARCH',
     'PROJECTROLES_HELP_HIGHLIGHT_DAYS',
-    'PROJECTROLES_HIDE_APP_LINKS',
+    'PROJECTROLES_HIDE_APP_LINKS',  # TODO: Remove in v0.14 (see issue #1143)
+    'PROJECTROLES_HIDE_PROJECT_APPS',
     'PROJECTROLES_INLINE_HEAD_INCLUDE',
     'PROJECTROLES_INVITE_EXPIRY_DAYS',
     'PROJECTROLES_KIOSK_MODE',
     'PROJECTROLES_SEARCH_PAGINATION',
     'PROJECTROLES_SECRET_LENGTH',
     'PROJECTROLES_SEND_EMAIL',
     'PROJECTROLES_SIDEBAR_ICON_SIZE',
     'PROJECTROLES_SITE_MODE',
+    'PROJECTROLES_TEMPLATE_INCLUDE_PATH',
     'PROJECTROLES_TARGET_CREATE',
+    'PROJECTROLES_TARGET_SYNC_ENABLE',
+    'PROJECTROLES_TARGET_SYNC_INTERVAL',
     'ROOT_DIR',
     'SITE_PACKAGE',
     'SITE_TITLE',
     'SITE_SUBTITLE',
     'SITE_INSTANCE_TITLE',
     'SODAR_API_ALLOWED_VERSIONS',
     'SODAR_API_DEFAULT_VERSION',
```

### Comparing `django-sodar-core-0.12.0/sodarcache/api.py` & `django-sodar-core-0.13.0/sodarcache/api.py`

 * *Files 2% similar despite different names*

```diff
@@ -172,14 +172,30 @@
             item.user = user
             log_msg += ' by user "{}"'.format(user.username)
         item.save()
         logger.info(log_msg)
         return item
 
     @classmethod
+    def delete_cache_item(cls, app_name, name, project=None):
+        """
+        Method for deleting a cache item.
+
+        :param app_name: Name of the app which sets the item (string)
+        :param name: Item name (string)
+        :param project: Project object (optional)
+        """
+        item = cls.get_cache_item(app_name, name, project)
+        if item:
+            item.delete()
+            logger.info(
+                'Deleted item "{}:{}" from cache'.format(app_name, name)
+            )
+
+    @classmethod
     def get_update_time(cls, app_name, name, project=None):
         """
         Return the time of the last update of a cache object as seconds since
         epoch.
 
         :param name: Item name (string)
         :param app_name: Name of the app which sets the item (string)
```

### Comparing `django-sodar-core-0.12.0/sodarcache/management/commands/deletecache.py` & `django-sodar-core-0.13.0/sodarcache/management/commands/deletecache.py`

 * *Files 6% similar despite different names*

```diff
@@ -1,7 +1,9 @@
+"""Deletecache management command for deleting SODARCache data"""
+
 import sys
 
 from django.conf import settings
 from django.core.management.base import BaseCommand  # , CommandError
 
 # Projectroles dependency
 from projectroles.management.logging import ManagementCommandLogger
```

### Comparing `django-sodar-core-0.12.0/sodarcache/management/commands/synccache.py` & `django-sodar-core-0.13.0/sodarcache/management/commands/synccache.py`

 * *Files 4% similar despite different names*

```diff
@@ -1,7 +1,9 @@
+"""Synccache management command for synchronizing SODARCache items"""
+
 import sys
 
 from django.conf import settings
 from django.core.exceptions import ValidationError
 from django.core.management.base import BaseCommand
 
 # Projectroles dependency
```

### Comparing `django-sodar-core-0.12.0/sodarcache/migrations/0001_initial.py` & `django-sodar-core-0.13.0/sodarcache/migrations/0001_initial.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/sodarcache/migrations/0002_make_user_optional.py` & `django-sodar-core-0.13.0/sodarcache/migrations/0002_make_user_optional.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/sodarcache/models.py` & `django-sodar-core-0.13.0/sodarcache/models.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/sodarcache/plugins.py` & `django-sodar-core-0.13.0/sodarcache/plugins.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/sodarcache/rules.py` & `django-sodar-core-0.13.0/sodarcache/rules.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/sodarcache/tests/test_api.py` & `django-sodar-core-0.13.0/sodarcache/tests/test_api.py`

 * *Files 6% similar despite different names*

```diff
@@ -161,14 +161,39 @@
             'user': self.user_owner.pk,
             'name': 'test_item',
             'data': {'test_key': 'test_val'},
             'sodar_uuid': item.sodar_uuid,
         }
         self.assertEqual(model_to_dict(get_item), expected)
 
+    def delete_cache_item(self):
+        """Test for deleting a cache item"""
+        self.cache_backend.set_cache_item(
+            project=self.project,
+            app_name=TEST_APP_NAME,
+            user=self.user_owner,
+            name='test_item',
+            data={'test_key': 'test_val'},
+        )
+        item = self.cache_backend.get_cache_item(
+            app_name=TEST_APP_NAME, name='test_item', project=self.project
+        )
+        self.assertIsNotNone(item)
+        self.cache_backend.delete_cache_item(
+            app_name=TEST_APP_NAME, name='test_item', project=self.project
+        )
+        item = self.cache_backend.get_cache_item(
+            app_name=TEST_APP_NAME, name='test_item', project=self.project
+        )
+        self.assertIsNone(item)
+        # Test for deleting a non-existing item
+        self.cache_backend.delete_cache_item(
+            app_name=TEST_APP_NAME, name='test_item', project=self.project
+        )
+
     def test_get_project_cache(self):
         """Test getting all cache item of a project"""
         first_item = self.cache_backend.set_cache_item(
             project=self.project,
             app_name=TEST_APP_NAME,
             user=self.user_owner,
             name='test_item1',
```

### Comparing `django-sodar-core-0.12.0/sodarcache/tests/test_models.py` & `django-sodar-core-0.13.0/sodarcache/tests/test_models.py`

 * *Files 11% similar despite different names*

```diff
@@ -1,15 +1,19 @@
 """Tests for models in the sodarcache app"""
 
 from test_plus.test import TestCase
 from django.forms.models import model_to_dict
 
 # Projectroles dependency
-from projectroles.models import Role, SODAR_CONSTANTS
-from projectroles.tests.test_models import ProjectMixin, RoleAssignmentMixin
+from projectroles.models import SODAR_CONSTANTS
+from projectroles.tests.test_models import (
+    ProjectMixin,
+    RoleMixin,
+    RoleAssignmentMixin,
+)
 
 from sodarcache.models import JSONCacheItem
 
 
 # SODAR constants
 PROJECT_ROLE_OWNER = SODAR_CONSTANTS['PROJECT_ROLE_OWNER']
 PROJECT_ROLE_DELEGATE = SODAR_CONSTANTS['PROJECT_ROLE_DELEGATE']
@@ -35,26 +39,26 @@
             'data': data,
         }
         result = JSONCacheItem(**values)
         result.save()
         return result
 
 
-class TestJsonCacheItemBase(ProjectMixin, RoleAssignmentMixin, TestCase):
+class TestJsonCacheItemBase(
+    ProjectMixin, RoleMixin, RoleAssignmentMixin, TestCase
+):
     def setUp(self):
         # Make owner user
         self.user_owner = self.make_user('owner')
-        # Init project, role and assignment
+        # Init roles
+        self.init_roles()
+        # Init project and assignment
         self.project = self.make_project(
             'TestProject', PROJECT_TYPE_PROJECT, None
         )
-        self.role_owner = Role.objects.get_or_create(name=PROJECT_ROLE_OWNER)[0]
-        self.role_delegate = Role.objects.get_or_create(
-            name=PROJECT_ROLE_DELEGATE
-        )[0]
         self.assignment_owner = self.make_assignment(
             self.project, self.user_owner, self.role_owner
         )
 
 
 class TestJsonCacheItem(JsonCacheItemMixin, TestJsonCacheItemBase):
     def setUp(self):
```

### Comparing `django-sodar-core-0.12.0/sodarcache/tests/test_views_api.py` & `django-sodar-core-0.13.0/sodarcache/tests/test_views_api.py`

 * *Files 11% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 
 import json
 
 from django.urls import reverse
 from django.forms.models import model_to_dict
 
 # Projectroles dependency
-from projectroles.models import Role, SODAR_CONSTANTS
+from projectroles.models import SODAR_CONSTANTS
 from projectroles.plugins import get_backend_api
 
 from sodarcache.models import JSONCacheItem
 from sodarcache.tests.test_models import (
     TestJsonCacheItemBase,
     JsonCacheItemMixin,
 )
@@ -30,39 +30,26 @@
 
 class TestViewsBase(JsonCacheItemMixin, TestJsonCacheItemBase):
     """Base class for sodarcache view testing"""
 
     def setUp(self):
         super().setUp()
         self.cache_backend = get_backend_api('sodar_cache')
-
-        # Init roles
-        self.role_owner = Role.objects.get_or_create(name=PROJECT_ROLE_OWNER)[0]
-        self.role_delegate = Role.objects.get_or_create(
-            name=PROJECT_ROLE_DELEGATE
-        )[0]
-        self.role_contributor = Role.objects.get_or_create(
-            name=PROJECT_ROLE_CONTRIBUTOR
-        )[0]
-        self.role_guest = Role.objects.get_or_create(name=PROJECT_ROLE_GUEST)[0]
-
         # Init superuser
         self.user = self.make_user('superuser')
         self.user.is_staff = True
         self.user.is_superuser = True
         self.user.save()
-
         # Init project
         self.project = self.make_project(
             'TestProject', PROJECT_TYPE_PROJECT, None
         )
         self.owner_as = self.make_assignment(
             self.project, self.user, self.role_owner
         )
-
         # Init cache item
         self.item = self.cache_backend.set_cache_item(
             project=self.project,
             app_name=TEST_APP_NAME,
             user=self.user_owner,
             name='test_item',
             data={'test_key': 'test_val'},
```

### Comparing `django-sodar-core-0.12.0/sodarcache/views_api.py` & `django-sodar-core-0.13.0/sodarcache/views_api.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/timeline/api.py` & `django-sodar-core-0.13.0/timeline/api.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/timeline/migrations/0001_initial.py` & `django-sodar-core-0.13.0/timeline/migrations/0001_initial.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/timeline/migrations/0002_projectevent_user.py` & `django-sodar-core-0.13.0/timeline/migrations/0002_projectevent_user.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/timeline/migrations/0004_update_uuid.py` & `django-sodar-core-0.13.0/timeline/migrations/0004_update_uuid.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/timeline/migrations/0005_update_jsonfield.py` & `django-sodar-core-0.13.0/timeline/migrations/0005_update_jsonfield.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/timeline/migrations/0006_update_user_optional.py` & `django-sodar-core-0.13.0/timeline/migrations/0006_update_user_optional.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/timeline/migrations/0007_allow_null_project.py` & `django-sodar-core-0.13.0/timeline/migrations/0007_allow_null_project.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/timeline/migrations/0008_projectevent_plugin.py` & `django-sodar-core-0.13.0/timeline/migrations/0008_projectevent_plugin.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/timeline/migrations/0010_populate_uuid.py` & `django-sodar-core-0.13.0/timeline/migrations/0010_populate_uuid.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/timeline/models.py` & `django-sodar-core-0.13.0/timeline/models.py`

 * *Files 5% similar despite different names*

```diff
@@ -51,21 +51,27 @@
         """
         Return events matching the query.
 
         :param search_terms: Search terms (list of strings)
         :param keywords: Optional search keywords as key/value pairs (dict)
         :return: QuerySet of ProjectEvent objects
         """
-        objects = super().get_queryset().order_by('event_name')
+        search_limit = getattr(settings, 'TIMELINE_SEARCH_LIMIT', 250)
         term_query = Q()
         for t in search_terms:
             term_query.add(Q(event_name__icontains=t), Q.OR)
             term_query.add(Q(description__icontains=t), Q.OR)
             term_query.add(Q(event_objects__name__icontains=t), Q.OR)
-        return objects.filter(term_query)
+        items = (
+            super()
+            .get_queryset()
+            .filter(term_query)
+            .order_by('-status_changes__timestamp')
+        )
+        return items[:search_limit]
 
 
 class ProjectEvent(models.Model):
     """
     Class representing a Project event. Can also be a site-wide event not linked
     to a specific project.
     """
```

### Comparing `django-sodar-core-0.12.0/timeline/plugins.py` & `django-sodar-core-0.13.0/timeline/plugins.py`

 * *Files 6% similar despite different names*

```diff
@@ -1,9 +1,8 @@
 """Plugins for the Timeline app"""
-from django.utils.timezone import localtime
 
 # Projectroles dependency
 from projectroles.models import SODAR_CONSTANTS
 from projectroles.plugins import (
     ProjectAppPluginPoint,
     BackendPluginPoint,
     SiteAppPluginPoint,
@@ -63,15 +62,15 @@
     #: Position in plugin ordering
     plugin_ordering = 40
 
     #: Display application for categories in addition to projects
     category_enable = True
 
     #: Names of plugin specific Django settings to display in siteinfo
-    info_settings = ['TIMELINE_PAGINATION']
+    info_settings = ['TIMELINE_PAGINATION', 'TIMELINE_SEARCH_LIMIT']
 
     def get_statistics(self):
         return {
             'event_count': {
                 'label': 'Events',
                 'value': ProjectEvent.objects.all().count(),
             }
@@ -101,35 +100,21 @@
                              (list of strings)
         :param user: User object for user initiating the search
         :param search_type: String
         :param keywords: List (optional)
         :return: Dict
         """
         items = []
-        if not search_type:
+        if not search_type or search_type == 'timeline':
             events = ProjectEvent.objects.find(search_terms, keywords)
-            items = list(events)
-            items.sort(
-                key=lambda x: localtime(x.get_timestamp()).strftime(
-                    '%Y-%m-%d %H:%M:%S'
-                ),
-                reverse=False,
-            )
-        elif search_type == 'timeline':
-            events = ProjectEvent.objects.find(search_terms, keywords)
-            items = list(events)
-            items.sort(
-                key=lambda x: localtime(x.get_timestamp()).strftime(
-                    '%Y-%m-%d %H:%M:%S'
-                ),
-                reverse=False,
-            )
-        if items:
+        if events:
             items = [
-                event for event in items if self.check_permission(user, event)
+                event
+                for event in list(events)
+                if self.check_permission(user, event)
             ]
         return {
             'all': {
                 'title': 'Timeline Events',
                 'search_types': ['timeline'],
                 'items': items,
             }
```

### Comparing `django-sodar-core-0.12.0/timeline/rules.py` & `django-sodar-core-0.13.0/timeline/rules.py`

 * *Files 7% similar despite different names*

```diff
@@ -40,7 +40,13 @@
 rules.add_perm(
     'timeline.view_classified_event',
     pr_rules.is_project_owner | pr_rules.is_project_delegate,
 )
 
 # Allow viewing classified site-wide event
 rules.add_perm('timeline.view_classified_site_event', rules.is_superuser)
+
+# Allow viewing extra data of project event
+rules.add_perm(
+    'timeline.view_event_extra_data',
+    pr_rules.is_project_owner | pr_rules.is_project_delegate,
+)
```

### Comparing `django-sodar-core-0.12.0/timeline/static/timeline/css/timeline.css` & `django-sodar-core-0.13.0/timeline/static/timeline/css/timeline.css`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/timeline/static/timeline/js/timeline.js` & `django-sodar-core-0.13.0/timeline/static/timeline/js/timeline.js`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/timeline/templates/timeline/_details_card.html` & `django-sodar-core-0.13.0/timeline/templates/timeline/_details_card.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/timeline/templates/timeline/_list_item.html` & `django-sodar-core-0.13.0/timeline/templates/timeline/_list_item.html`

 * *Files 15% similar despite different names*

```diff
@@ -1,13 +1,15 @@
+{% load rules %}
 {% load timeline_tags %}
 {# Projectroles dependency #}
 {% load projectroles_common_tags %}
 
 <tr id="sodar-tl-list-event-{{ event.sodar_uuid }}">
   <td>
+    {% has_perm 'timeline.view_event_extra_data' request.user event.project as can_view_extra_data %}
     {% get_timestamp event as event_time %}
     {% if event.project %}
       <a class="sodar-tl-link-detail text-primary"
          data-url="{% url 'timeline:ajax_detail_project' projectevent=event.sodar_uuid %}">
         {{ event_time }}
       </a>
     {% else %}
@@ -33,20 +35,29 @@
   <td>
     {% if event.project and user.is_superuser and timeline_mode == 'admin' %}
       {% include 'timeline/_project_badge.html' %}
     {% endif %}
     {% get_event_description event plugin_lookup request as event_desc %}
     {{ event_desc|safe }}
     {% if not details_card_mode and event.extra_data %}
-      <a class="sodar-tl-link-extra-data text-primary pull-right"
-         data-url="{% url 'timeline:ajax_extra_project' projectevent=event.sodar_uuid %}">
-        <i class="iconify" data-icon="mdi:text-box" title="Extra Data"
-           data-toggle="tooltip" data-placement="right">
-        </i>
-      </a>
+      {% if event.project and can_view_extra_data %}
+        <a class="sodar-tl-link-extra-data text-primary pull-right"
+           data-url="{% url 'timeline:ajax_extra_project' projectevent=event.sodar_uuid %}">
+          <i class="iconify" data-icon="mdi:text-box" title="Extra Data"
+             data-toggle="tooltip" data-placement="right">
+          </i>
+        </a>
+      {% elif not event.project and user.is_superuser %}
+        <a class="sodar-tl-link-extra-data text-primary pull-right"
+           data-url="{% url 'timeline:ajax_extra_site' projectevent=event.sodar_uuid %}">
+          <i class="iconify" data-icon="mdi:text-box" title="Extra Data"
+             data-toggle="tooltip" data-placement="right">
+          </i>
+        </a>
+      {% endif %}
     {% endif %}
     {% if event.classified %}
       <span class="pull-right text-muted">
         <i class="iconify" data-icon="mdi:lock" title="Classified"
            data-toggle="tooltip" data-placement="left">
         </i>
       </span>
```

### Comparing `django-sodar-core-0.12.0/timeline/templates/timeline/_search_item.html` & `django-sodar-core-0.13.0/timeline/templates/timeline/_search_item.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/timeline/templates/timeline/_search_results.html` & `django-sodar-core-0.13.0/timeline/templates/timeline/_search_results.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/timeline/templates/timeline/timeline.html` & `django-sodar-core-0.13.0/timeline/templates/timeline/timeline.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/timeline/templates/timeline/timeline_site.html` & `django-sodar-core-0.13.0/timeline/templates/timeline/timeline_site.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/timeline/templatetags/timeline_tags.py` & `django-sodar-core-0.13.0/timeline/templatetags/timeline_tags.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/timeline/tests/test_api.py` & `django-sodar-core-0.13.0/timeline/tests/test_api.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/timeline/tests/test_models.py` & `django-sodar-core-0.13.0/timeline/tests/test_models.py`

 * *Files 1% similar despite different names*

```diff
@@ -1,16 +1,20 @@
 """Model tests for the timeline app"""
 
 from test_plus.test import TestCase
 
 from django.forms.models import model_to_dict
 
 # Projectroles dependency
-from projectroles.models import Role, SODAR_CONSTANTS
-from projectroles.tests.test_models import ProjectMixin, RoleAssignmentMixin
+from projectroles.models import SODAR_CONSTANTS
+from projectroles.tests.test_models import (
+    ProjectMixin,
+    RoleMixin,
+    RoleAssignmentMixin,
+)
 
 from timeline.models import (
     ProjectEvent,
     ProjectEventObjectRef,
     ProjectEventStatus,
 )
 
@@ -86,27 +90,26 @@
             'extra_data': extra_data or {'test': 'test'},
         }
         result = ProjectEventStatus(**values)
         result.save()
         return result
 
 
-class TestProjectEventBase(ProjectMixin, RoleAssignmentMixin, TestCase):
+class TestProjectEventBase(
+    ProjectMixin, RoleMixin, RoleAssignmentMixin, TestCase
+):
     def setUp(self):
         # Make owner user
         self.user_owner = self.make_user('owner')
-
-        # Init project, role and assignment
+        # Init roles
+        self.init_roles()
+        # Init project and assignment
         self.project = self.make_project(
             'TestProject', PROJECT_TYPE_PROJECT, None
         )
-        self.role_owner = Role.objects.get_or_create(name=PROJECT_ROLE_OWNER)[0]
-        self.role_delegate = Role.objects.get_or_create(
-            name=PROJECT_ROLE_DELEGATE
-        )[0]
         self.assignment_owner = self.make_assignment(
             self.project, self.user_owner, self.role_owner
         )
 
 
 class TestProjectEvent(
     ProjectEventMixin,
```

### Comparing `django-sodar-core-0.12.0/timeline/tests/test_permissions.py` & `django-sodar-core-0.13.0/timeline/tests/test_permissions.py`

 * *Files 24% similar despite different names*

```diff
@@ -13,20 +13,24 @@
     def test_project_list(self):
         """Test project event list"""
         url = reverse(
             'timeline:list_project', kwargs={'project': self.project.sodar_uuid}
         )
         good_users = [
             self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
         ]
-        bad_users = [self.user_no_roles, self.anonymous]
+        bad_users = [self.user_finder_cat, self.user_no_roles, self.anonymous]
         self.assert_response(url, good_users, 200)
         self.assert_response(url, bad_users, 302)
         # Test public project
         self.project.set_public()
         self.assert_response(url, self.user_no_roles, 200)
         self.assert_response(url, self.anonymous, 302)
 
@@ -40,18 +44,23 @@
         self.assert_response(url, self.anonymous, 200)
 
     def test_site_list(self):
         """Test site event list"""
         url = reverse('timeline:list_site')
         good_users = [
             self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
             self.user_no_roles,
         ]
         self.assert_response(url, good_users, 200)
         self.assert_response(url, self.anonymous, 302)
 
     @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
     def test_stite_list_anon(self):
@@ -62,20 +71,25 @@
     def test_admin_list(self):
         """Test admin event list"""
         url = reverse('timeline:timeline_site_admin')
         good_users = [
             self.superuser,
         ]
         bad_users = [
-            self.anonymous,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
             self.user_no_roles,
+            self.anonymous,
         ]
         self.assert_response(url, good_users, 200)
         self.assert_response(url, bad_users, 302)
 
     @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
     def test_admin_list_anon(self):
         """Test admin list with anonymous access"""
@@ -90,20 +104,24 @@
                 'project': self.project.sodar_uuid,
                 'object_model': 'User',
                 'object_uuid': self.user_owner.sodar_uuid,
             },
         )
         good_users = [
             self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
         ]
-        bad_users = [self.user_no_roles, self.anonymous]
+        bad_users = [self.user_finder_cat, self.user_no_roles, self.anonymous]
         self.assert_response(url, good_users, 200)
         self.assert_response(url, bad_users, 302)
         # Test public project
         self.project.set_public()
         self.assert_response(url, self.user_no_roles, 200)
         self.assert_response(url, self.anonymous, 302)
 
@@ -128,18 +146,23 @@
             kwargs={
                 'object_model': 'User',
                 'object_uuid': self.user_owner.sodar_uuid,
             },
         )
         good_users = [
             self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
             self.user_no_roles,
         ]
         self.assert_response(url, good_users, 200)
         self.assert_response(url, self.anonymous, 302)
         # Test public project
         self.project.set_public()
         self.assert_response(url, self.user_no_roles, 200)
```

### Comparing `django-sodar-core-0.12.0/timeline/tests/test_permissions_ajax.py` & `django-sodar-core-0.13.0/timeline/tests/test_permissions_ajax.py`

 * *Files 9% similar despite different names*

```diff
@@ -33,29 +33,33 @@
             'OK',
             extra_data={'example_data': 'example_extra_data'},
         )
         self.regular_user = self.make_user('regular_user')
 
     def test_detail_project(self):
         """Test ProjectEventDetailAjaxView permissions"""
-        """Test ProjectEventDetailAjaxView permissions"""
         url = reverse(
             'timeline:ajax_detail_project',
             kwargs={
                 'projectevent': self.event.sodar_uuid,
             },
         )
         good_users = [
             self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_owner,
+            self.user_delegate,
+            self.user_contributor,
+            self.user_guest,
         ]
         bad_users = [
+            self.user_finder_cat,
             self.user_no_roles,
             self.anonymous,
         ]
         self.assert_response(url, good_users, 200)
         self.assert_response(url, bad_users, 403)
         self.project.set_public()
         self.assert_response(url, self.anonymous, 403)
@@ -77,31 +81,36 @@
         self.event.save()
         url = reverse(
             'timeline:ajax_detail_project',
             kwargs={'projectevent': self.event.sodar_uuid},
         )
         good_users = [
             self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_owner,
+            self.user_delegate,
         ]
         bad_users = [
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_contributor,
+            self.user_guest,
             self.user_no_roles,
             self.anonymous,
         ]
         self.assert_response(url, good_users, 200)
         self.assert_response(url, bad_users, 403)
         self.project.set_public()
         self.assert_response(url, self.anonymous, 403)
 
     @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
     def test_detail_project_classified_anon(self):
-        """Test ProjectEventDetailAjaxView permissions with classified event and anonymous access"""
+        """Test ProjectEventDetailAjaxView with classified event and anonymous access"""
         self.event.classified = True
         self.event.save()
         url = reverse(
             'timeline:ajax_detail_project',
             kwargs={'projectevent': self.event.sodar_uuid},
         )
         self.assert_response(url, self.anonymous, 403)
@@ -160,20 +169,25 @@
         """Test ProjectEventExtraDataAjaxView permissions"""
         url = reverse(
             'timeline:ajax_extra_project',
             kwargs={'projectevent': self.event.sodar_uuid},
         )
         good_users = [
             self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_owner,
+            self.user_delegate,
         ]
         bad_users = [
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_contributor,
+            self.user_guest,
             self.user_no_roles,
             self.anonymous,
         ]
         self.assert_response(url, good_users, 200)
         self.assert_response(url, bad_users, 403)
         self.project.set_public()
         self.assert_response(url, self.anonymous, 403)
@@ -184,40 +198,45 @@
         url = reverse(
             'timeline:ajax_extra_site',
             kwargs={'projectevent': self.site_event.sodar_uuid},
         )
         self.assert_response(url, self.anonymous, 403)
 
     def test_extra_data_project_classified(self):
-        """Test ProjectEventExtraDataAjaxView permissions with classified event"""
+        """Test ProjectEventExtraDataAjaxView with classified event"""
         self.event.classified = True
         self.event.save()
         url = reverse(
             'timeline:ajax_extra_project',
             kwargs={'projectevent': self.event.sodar_uuid},
         )
         good_users = [
             self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_owner,
+            self.user_delegate,
         ]
         bad_users = [
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_contributor,
+            self.user_guest,
             self.user_no_roles,
             self.anonymous,
         ]
         self.assert_response(url, good_users, 200)
         self.assert_response(url, bad_users, 403)
         self.project.set_public()
         self.assert_response(url, self.anonymous, 403)
 
     @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
     def test_extra_data_project_classified_anon(self):
-        """Test ProjectEventExtraDataAjaxView permissions with classified event and anonymous access"""
+        """Test ProjectEventExtraDataAjaxView with classified event and anonymous access"""
         self.event.classified = True
         self.event.save()
         url = reverse(
             'timeline:ajax_extra_project',
             kwargs={'projectevent': self.event.sodar_uuid},
         )
         self.assert_response(url, self.anonymous, 403)
@@ -226,19 +245,15 @@
 
     def test_extra_data_site(self):
         """Test SiteEventExtraDataAjaxView permissions"""
         url = reverse(
             'timeline:ajax_extra_site',
             kwargs={'projectevent': self.site_event.sodar_uuid},
         )
-        good_users = [
-            self.superuser,
-            self.regular_user,
-        ]
-        self.assert_response(url, good_users, 200)
+        self.assert_response(url, self.superuser, 200)
         self.assert_response(url, self.anonymous, 403)
 
     @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
     def test_extra_data_site_anon(self):
         """Test SiteEventDetailAjaxView permissions with anonymous access"""
         url = reverse(
             'timeline:ajax_extra_site',
@@ -250,48 +265,50 @@
         """Test SiteEventExtraDataAjaxView permissions with classified event"""
         self.event.classified = True
         self.event.save()
         url = reverse(
             'timeline:ajax_extra_site',
             kwargs={'projectevent': self.site_event.sodar_uuid},
         )
-        good_users = [
-            self.superuser,
-            self.regular_user,
-        ]
-        self.assert_response(url, good_users, 200)
+        self.assert_response(url, self.superuser, 200)
         self.assert_response(url, self.anonymous, 403)
 
     @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
     def test_extra_data_site_classified_anon(self):
-        """Test SiteEventExtraDataAjaxView permissions with classified event and anonymous access"""
+        """Test SiteEventExtraDataAjaxView with classified event and anonymous access"""
         self.event.classified = True
         self.event.save()
         url = reverse(
             'timeline:ajax_extra_site',
             kwargs={'projectevent': self.site_event.sodar_uuid},
         )
+        self.assert_response(url, self.superuser, 200)
         self.assert_response(url, self.anonymous, 403)
 
     def test_status_extra_data_project(self):
         """Test ProjectEventExtraDataAjaxView permissions"""
         url = reverse(
             'timeline:ajax_extra_status',
             kwargs={
                 'eventstatus': self.event_status.sodar_uuid,
             },
         )
         good_users = [
             self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_owner,
+            self.user_delegate,
         ]
         bad_users = [
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_contributor,
+            self.user_guest,
             self.user_no_roles,
             self.anonymous,
         ]
         self.assert_response(url, good_users, 200)
         self.assert_response(url, bad_users, 403)
         self.project.set_public()
         self.assert_response(url, self.anonymous, 403)
@@ -304,42 +321,47 @@
             kwargs={
                 'eventstatus': self.site_event_status.sodar_uuid,
             },
         )
         self.assert_response(url, self.anonymous, 403)
 
     def test_status_extra_data_project_classified(self):
-        """Test ProjectEventExtraDataAjaxView permissions with classified event"""
+        """Test ProjectEventExtraDataAjaxView with classified event"""
         self.event.classified = True
         self.event.save()
         url = reverse(
             'timeline:ajax_extra_status',
             kwargs={
                 'eventstatus': self.event_status.sodar_uuid,
             },
         )
         good_users = [
             self.superuser,
-            self.owner_as.user,
-            self.delegate_as.user,
+            self.user_owner_cat,
+            self.user_delegate_cat,
+            self.user_owner,
+            self.user_delegate,
         ]
         bad_users = [
-            self.contributor_as.user,
-            self.guest_as.user,
+            self.user_contributor_cat,
+            self.user_guest_cat,
+            self.user_finder_cat,
+            self.user_contributor,
+            self.user_guest,
             self.user_no_roles,
             self.anonymous,
         ]
         self.assert_response(url, good_users, 200)
         self.assert_response(url, bad_users, 403)
         self.project.set_public()
         self.assert_response(url, self.anonymous, 403)
 
     @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
     def test_status_extra_data_project_classified_anon(self):
-        """Test ProjectEventExtraDataAjaxView permissions with classified event and anonymous access"""
+        """Test ProjectEventExtraDataAjaxView with classified event and anonymous access"""
         self.event.classified = True
         self.event.save()
         url = reverse(
             'timeline:ajax_extra_status',
             kwargs={
                 'eventstatus': self.event_status.sodar_uuid,
             },
@@ -352,19 +374,15 @@
         """Test SiteEventExtraDataAjaxView permissions"""
         url = reverse(
             'timeline:ajax_extra_status',
             kwargs={
                 'eventstatus': self.site_event_status.sodar_uuid,
             },
         )
-        good_users = [
-            self.superuser,
-            self.regular_user,
-        ]
-        self.assert_response(url, good_users, 200)
+        self.assert_response(url, self.superuser, 200)
         self.assert_response(url, self.anonymous, 403)
 
     @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
     def test_status_extra_data_site_anon(self):
         """Test SiteEventDetailAjaxView permissions with anonymous access"""
         url = reverse(
             'timeline:ajax_extra_status',
@@ -380,24 +398,20 @@
         self.event.save()
         url = reverse(
             'timeline:ajax_extra_status',
             kwargs={
                 'eventstatus': self.site_event_status.sodar_uuid,
             },
         )
-        good_users = [
-            self.superuser,
-            self.regular_user,
-        ]
-        self.assert_response(url, good_users, 200)
+        self.assert_response(url, self.superuser, 200)
         self.assert_response(url, self.anonymous, 403)
 
     @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
     def test_status_extra_data_site_classified_anon(self):
-        """Test SiteEventExtraDataAjaxView permissions with classified event and anonymous access"""
+        """Test SiteEventExtraDataAjaxView with classified event and anonymous access"""
         self.event.classified = True
         self.event.save()
         url = reverse(
             'timeline:ajax_extra_status',
             kwargs={
                 'eventstatus': self.site_event_status.sodar_uuid,
             },
```

### Comparing `django-sodar-core-0.12.0/timeline/tests/test_templatetags.py` & `django-sodar-core-0.13.0/timeline/tests/test_templatetags.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/timeline/tests/test_ui.py` & `django-sodar-core-0.13.0/timeline/tests/test_ui.py`

 * *Files 6% similar despite different names*

```diff
@@ -1,11 +1,12 @@
 """UI tests for the timeline app"""
 import json
 
 from django.urls import reverse
+from django.test import override_settings
 from urllib.parse import urlencode
 
 from selenium.webdriver.common.by import By
 from selenium.webdriver.support.wait import WebDriverWait
 from selenium.webdriver.support import expected_conditions as EC
 
 # Projectroles dependency
@@ -59,33 +60,41 @@
             classified=True,
         )
 
     def test_render(self):
         """Test visibility of events in project event list"""
         expected = [
             (self.superuser, 2),
-            (self.owner_as.user, 2),
-            (self.delegate_as.user, 2),
-            (self.contributor_as.user, 1),
-            (self.guest_as.user, 1),
+            (self.user_owner_cat, 2),
+            (self.user_delegate_cat, 2),
+            (self.user_contributor_cat, 1),
+            (self.user_guest_cat, 1),
+            (self.user_owner, 2),
+            (self.user_delegate, 2),
+            (self.user_contributor, 1),
+            (self.user_guest, 1),
         ]
         url = reverse(
             'timeline:list_project', kwargs={'project': self.project.sodar_uuid}
         )
         self.assert_element_count(expected, url, 'sodar-tl-list-event')
 
     def test_render_no_user(self):
         """Test rendering with an event without user"""
         self.event.user = None
         expected = [
             (self.superuser, 2),
-            (self.owner_as.user, 2),
-            (self.delegate_as.user, 2),
-            (self.contributor_as.user, 1),
-            (self.guest_as.user, 1),
+            (self.user_owner_cat, 2),
+            (self.user_delegate_cat, 2),
+            (self.user_contributor_cat, 1),
+            (self.user_guest_cat, 1),
+            (self.user_owner, 2),
+            (self.user_delegate, 2),
+            (self.user_contributor, 1),
+            (self.user_guest, 1),
         ]
         url = reverse(
             'timeline:list_project', kwargs={'project': self.project.sodar_uuid}
         )
         self.assert_element_count(expected, url, 'sodar-tl-list-event')
 
     def test_render_object(self):
@@ -95,18 +104,22 @@
             obj=self.superuser, label='user', name=self.superuser.username
         )
         self.classified_ref_obj = self.classified_event.add_object(
             obj=self.superuser, label='user', name=self.superuser.username
         )
         expected = [
             (self.superuser, 2),
-            (self.owner_as.user, 2),
-            (self.delegate_as.user, 2),
-            (self.contributor_as.user, 1),
-            (self.guest_as.user, 1),
+            (self.user_owner_cat, 2),
+            (self.user_delegate_cat, 2),
+            (self.user_contributor_cat, 1),
+            (self.user_guest_cat, 1),
+            (self.user_owner, 2),
+            (self.user_delegate, 2),
+            (self.user_contributor, 1),
+            (self.user_guest, 1),
         ]
         url = reverse(
             'timeline:list_object',
             kwargs={
                 'project': self.project.sodar_uuid,
                 'object_model': self.ref_obj.object_model,
                 'object_uuid': self.ref_obj.object_uuid,
@@ -114,18 +127,22 @@
         )
         self.assert_element_count(expected, url, 'sodar-tl-list-event')
 
     def test_render_details(self):
         """Test visibility of events on the project details page"""
         expected = [
             (self.superuser, 2),
-            (self.owner_as.user, 2),
-            (self.delegate_as.user, 2),
-            (self.contributor_as.user, 1),
-            (self.guest_as.user, 1),
+            (self.user_owner_cat, 2),
+            (self.user_delegate_cat, 2),
+            (self.user_contributor_cat, 1),
+            (self.user_guest_cat, 1),
+            (self.user_owner, 2),
+            (self.user_delegate, 2),
+            (self.user_contributor, 1),
+            (self.user_guest, 1),
         ]
         url = reverse(
             'projectroles:detail', kwargs={'project': self.project.sodar_uuid}
         )
         self.assert_element_count(expected, url, 'sodar-tl-list-event')
 
 
@@ -158,18 +175,22 @@
             classified=True,
         )
 
     def test_render(self):
         """Test visibility of events in the site-wide event list"""
         expected = [
             (self.superuser, 2),
-            (self.owner_as.user, 1),
-            (self.delegate_as.user, 1),
-            (self.contributor_as.user, 1),
-            (self.guest_as.user, 1),
+            (self.user_owner_cat, 1),
+            (self.user_delegate_cat, 1),
+            (self.user_contributor_cat, 1),
+            (self.user_guest_cat, 1),
+            (self.user_owner, 1),
+            (self.user_delegate, 1),
+            (self.user_contributor, 1),
+            (self.user_guest, 1),
         ]
         url = reverse('timeline:list_site')
         self.assert_element_count(expected, url, 'sodar-tl-list-event')
 
     def test_render_object(self):
         """Test visibility of object related events in site-wide event list"""
         # Add user as an object reference
@@ -177,18 +198,22 @@
             obj=self.superuser, label='user', name=self.superuser.username
         )
         self.classified_ref_obj = self.classified_event.add_object(
             obj=self.superuser, label='user', name=self.superuser.username
         )
         expected = [
             (self.superuser, 2),
-            (self.owner_as.user, 1),
-            (self.delegate_as.user, 1),
-            (self.contributor_as.user, 1),
-            (self.guest_as.user, 1),
+            (self.user_owner_cat, 1),
+            (self.user_delegate_cat, 1),
+            (self.user_contributor_cat, 1),
+            (self.user_guest_cat, 1),
+            (self.user_owner, 1),
+            (self.user_delegate, 1),
+            (self.user_contributor, 1),
+            (self.user_guest, 1),
         ]
         url = reverse(
             'timeline:list_object_site',
             kwargs={
                 'object_model': self.ref_obj.object_model,
                 'object_uuid': self.ref_obj.object_uuid,
             },
@@ -406,15 +431,15 @@
         WebDriverWait(self.selenium, 10).until(
             EC.presence_of_element_located((By.CLASS_NAME, 'sodar-tl-copy-btn'))
         )
         btn = self.selenium.find_element(By.CLASS_NAME, 'sodar-tl-copy-btn')
         btn.click()
 
 
-class TestSearch(ProjectEventMixin, TestUIBase):
+class TestSearch(ProjectEventMixin, ProjectEventStatusMixin, TestUIBase):
     """Tests for the project search UI functionalities"""
 
     def setUp(self):
         super().setUp()
         self.timeline = get_backend_api('timeline_backend')
 
         # Init default event
@@ -424,60 +449,107 @@
             user=self.superuser,
             event_name='test_event',
             description='description',
             extra_data={'test_key': 'test_val'},
             status_type='OK',
         )
 
+        self.make_event_status(
+            event=self.event,
+            status_type='SUBMIT',
+            description='SUBMIT',
+            extra_data={'test_key': 'test_val'},
+        )
+
         # Init default site event
         self.site_event = self.timeline.add_event(
             project=None,
             app_name='projectroles',
             user=self.superuser,
             event_name='test_site_event',
             description='description',
             extra_data={'test_key': 'test_val'},
             status_type='OK',
         )
 
+        self.make_event_status(
+            event=self.site_event,
+            status_type='SUBMIT',
+            description='SUBMIT',
+            extra_data={'test_key': 'test_val'},
+        )
+
         # Init classified event
         self.classified_event = self.timeline.add_event(
             project=None,
             app_name='projectroles',
             user=self.superuser,
             event_name='classified_event',
             description='description',
             extra_data={'test_key': 'test_val'},
             classified=True,
         )
 
+        self.make_event_status(
+            event=self.classified_event,
+            status_type='SUBMIT',
+            description='SUBMIT',
+            extra_data={'test_key': 'test_val'},
+        )
+
         self.classified_site_event = self.timeline.add_event(
             project=None,
             app_name='projectroles',
             user=self.superuser,
             event_name='classified_site_event',
             description='description',
             extra_data={'test_key': 'test_val'},
             classified=True,
         )
 
+        self.make_event_status(
+            event=self.classified_site_event,
+            status_type='SUBMIT',
+            description='SUBMIT',
+            extra_data={'test_key': 'test_val'},
+        )
+
     def test_search_results(self):
         """Test search results"""
         expected = [
             (self.superuser, 4),
-            (self.owner_as.user, 2),
-            (self.delegate_as.user, 2),
-            (self.contributor_as.user, 2),
-            (self.guest_as.user, 2),
+            (self.user_owner_cat, 2),
+            (self.user_delegate_cat, 2),
+            (self.user_contributor_cat, 2),
+            (self.user_guest_cat, 2),
+            (self.user_owner, 2),
+            (self.user_delegate, 2),
+            (self.user_contributor, 2),
+            (self.user_guest, 2),
             (self.user_no_roles, 1),
         ]
         url = (
             reverse('projectroles:search')
             + '?'
             + urlencode({'s': 'description'})
         )
         for user, count in expected:
             self.login_and_redirect(user, url, wait_elem=None, wait_loc='ID')
             elements = self.selenium.find_elements(
                 By.CLASS_NAME, 'sodar-pr-project-list-item'
             )
-            self.assertEqual(len(elements), count)
+            elem_set = set()
+            for elem in elements:
+                elem_set.add(elem.get_attribute('id'))
+            self.assertEqual(len(elem_set), count)
+
+    @override_settings(TIMELINE_SEARCH_LIMIT=2)
+    def test_search_limit(self):
+        """Test search limit"""
+        url = reverse('projectroles:search') + '?' + urlencode({'s': 'event'})
+        self.login_and_redirect(
+            self.superuser, url, wait_elem=None, wait_loc='ID'
+        )
+        elements = self.selenium.find_elements(
+            By.CLASS_NAME, 'sodar-pr-project-list-item'
+        )
+        self.assertEqual(len(elements), 2)
```

### Comparing `django-sodar-core-0.12.0/timeline/tests/test_views.py` & `django-sodar-core-0.13.0/timeline/tests/test_views.py`

 * *Files 7% similar despite different names*

```diff
@@ -1,13 +1,13 @@
 """View tests for the timeline app"""
 
 from django.urls import reverse
 
 # Projectroles dependency
-from projectroles.models import Role, SODAR_CONSTANTS
+from projectroles.models import SODAR_CONSTANTS
 from projectroles.plugins import get_backend_api
 
 from timeline.tests.test_models import (
     TestProjectEventBase,
     ProjectEventMixin,
     ProjectEventStatusMixin,
 )
@@ -27,30 +27,19 @@
 ):
     """Base class for timeline view testing"""
 
     def setUp(self):
         super().setUp()
         self.timeline = get_backend_api('timeline_backend')
 
-        # Init roles
-        self.role_owner = Role.objects.get_or_create(name=PROJECT_ROLE_OWNER)[0]
-        self.role_delegate = Role.objects.get_or_create(
-            name=PROJECT_ROLE_DELEGATE
-        )[0]
-        self.role_contributor = Role.objects.get_or_create(
-            name=PROJECT_ROLE_CONTRIBUTOR
-        )[0]
-        self.role_guest = Role.objects.get_or_create(name=PROJECT_ROLE_GUEST)[0]
-
         # Init superuser
         self.user = self.make_user('superuser')
         self.user.is_staff = True
         self.user.is_superuser = True
         self.user.save()
-
         # Init category and project
         self.category = self.make_project(
             'TestCategory', PROJECT_TYPE_CATEGORY, None
         )
         self.cat_owner_as = self.make_assignment(
             self.category, self.user, self.role_owner
         )
```

### Comparing `django-sodar-core-0.12.0/timeline/tests/test_views_ajax.py` & `django-sodar-core-0.13.0/timeline/tests/test_views_ajax.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/timeline/urls.py` & `django-sodar-core-0.13.0/timeline/urls.py`

 * *Files 16% similar despite different names*

```diff
@@ -1,69 +1,64 @@
 """URLs for the timeline app"""
 
-from django.conf.urls import url
+from django.urls import path
 
 from timeline import views, views_ajax
 
 
 app_name = 'timeline'
 
 # UI views
 urls_ui = [
-    url(
-        regex=r'^(?P<project>[0-9a-f-]+)$',
+    path(
+        route='<uuid:project>',
         view=views.ProjectTimelineView.as_view(),
         name='list_project',
     ),
-    url(
-        regex=r'^site$',
-        view=views.SiteTimelineView.as_view(),
-        name='list_site',
-    ),
-    url(
-        regex=r'^site/all$',
+    path(route='site', view=views.SiteTimelineView.as_view(), name='list_site'),
+    path(
+        route='site/all',
         view=views.AdminTimelineView.as_view(),
         name='timeline_site_admin',
     ),
-    url(
-        regex=r'^(?P<project>[0-9a-f-]+)/(?P<object_model>[\w-]+)/'
-        r'(?P<object_uuid>[0-9a-f-]+)$',
+    path(
+        route='<uuid:project>/<str:object_model>/<uuid:object_uuid>',
         view=views.ProjectObjectTimelineView.as_view(),
         name='list_object',
     ),
-    url(
-        regex=r'^site/(?P<object_model>[\w-]+)/(?P<object_uuid>[0-9a-f-]+)$',
+    path(
+        route='site/<str:object_model>/<uuid:object_uuid>',
         view=views.SiteObjectTimelineView.as_view(),
         name='list_object_site',
     ),
 ]
 
 # Ajax API views
 urls_ajax = [
-    url(
-        regex=r'^ajax/detail/(?P<projectevent>[0-9a-f-]+)$',
+    path(
+        route='ajax/detail/<uuid:projectevent>',
         view=views_ajax.ProjectEventDetailAjaxView.as_view(),
         name='ajax_detail_project',
     ),
-    url(
-        regex=r'^ajax/detail/site/(?P<projectevent>[0-9a-f-]+)$',
+    path(
+        route='ajax/detail/site/<uuid:projectevent>',
         view=views_ajax.SiteEventDetailAjaxView.as_view(),
         name='ajax_detail_site',
     ),
-    url(
-        regex=r'^ajax/extra/(?P<projectevent>[0-9a-f-]+)$',
+    path(
+        route='ajax/extra/<uuid:projectevent>',
         view=views_ajax.ProjectEventExtraAjaxView.as_view(),
         name='ajax_extra_project',
     ),
-    url(
-        regex=r'^ajax/extra/site/(?P<projectevent>[0-9a-f-]+)$',
+    path(
+        route='ajax/extra/site/<uuid:projectevent>',
         view=views_ajax.SiteEventExtraAjaxView.as_view(),
         name='ajax_extra_site',
     ),
-    url(
-        regex=r'^ajax/extra/status/(?P<eventstatus>[0-9-a-f-]+)$',
+    path(
+        route='ajax/extra/status/<uuid:eventstatus>',
         view=views_ajax.EventStatusExtraAjaxView.as_view(),
         name='ajax_extra_status',
     ),
 ]
 
 urlpatterns = urls_ui + urls_ajax
```

### Comparing `django-sodar-core-0.12.0/timeline/views.py` & `django-sodar-core-0.13.0/timeline/views.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/timeline/views_ajax.py` & `django-sodar-core-0.13.0/timeline/views_ajax.py`

 * *Files 5% similar despite different names*

```diff
@@ -17,31 +17,34 @@
 from timeline.models import ProjectEvent, ProjectEventStatus
 from timeline.templatetags.timeline_tags import get_status_style
 
 
 class EventDetailMixin:
     """Mixin for event detail retrieval helpers"""
 
-    def form_status_extra_url(self, status):
+    def form_status_extra_url(self, status, request):
         """Return URL for extra status data"""
-        if status.extra_data == {}:
+        if status.extra_data == {} or not request.user.has_perm(
+            'timeline.view_event_extra_data', status.event.project
+        ):
             return None
         else:
             return reverse(
                 'timeline:ajax_extra_status',
                 kwargs={
                     'eventstatus': status.sodar_uuid,
                 },
             )
 
-    def get_event_details(self, event):
+    def get_event_details(self, event, request):
         """
         Return event details.
 
         :param event: ProjectEvent object
+        :param request: Django request object
         :return: Dict
         """
         ret = {
             'app': event.app,
             'name': event.event_name,
             'user': event.user.username if event.user else 'N/A',
             'timestamp': localtime(event.get_timestamp()).strftime(
@@ -55,15 +58,15 @@
                 {
                     'timestamp': localtime(s.timestamp).strftime(
                         '%Y-%m-%d %H:%M:%S'
                     ),
                     'description': s.description,
                     'type': s.status_type,
                     'class': get_status_style(s),
-                    'extra_status_link': self.form_status_extra_url(s),
+                    'extra_status_link': self.form_status_extra_url(s, request),
                 }
             )
         return ret
 
 
 class EventExtraDataMixin:
     """Mixin for event extra data retrieval helpers"""
@@ -147,14 +150,15 @@
         str_list.append('&nbsp;&nbsp;' * (indent - 1))
         str_list.append('<span class="json-close-bracket">]</span>')
 
     def get_event_extra(self, event, status=None):
         """
         Return event extra data.
         :param event: ProjectEvent object
+        :param status: ProjectEventStatus object
         :return: JSON-serializable dict
         """
         extra = status.extra_data if status else event.extra_data
         extra_data = self._json_to_html(extra)
         ret = {
             'app': event.app,
             'name': event.event_name,
@@ -176,21 +180,21 @@
         event = ProjectEvent.objects.filter(
             sodar_uuid=self.kwargs['projectevent']
         ).first()
         if event.classified and not request.user.has_perm(
             'timeline.view_classified_event', event.project
         ):
             return HttpResponseForbidden()
-        return Response(self.get_event_details(event), status=200)
+        return Response(self.get_event_details(event, request), status=200)
 
 
 class ProjectEventExtraAjaxView(EventExtraDataMixin, SODARBaseProjectAjaxView):
     """Ajax view for retrieving event extra data for projects"""
 
-    permission_required = 'timeline.view_timeline'
+    permission_required = 'timeline.view_event_extra_data'
 
     def get(self, request, *args, **kwargs):
         event = ProjectEvent.objects.filter(
             sodar_uuid=self.kwargs['projectevent']
         ).first()
         if event.classified and not request.user.has_perm(
             'timeline.view_classified_event', event.project
@@ -209,21 +213,21 @@
         event = ProjectEvent.objects.filter(
             sodar_uuid=self.kwargs['projectevent']
         ).first()
         if event.classified and not request.user.has_perm(
             'timeline.view_classified_site_event'
         ):
             return HttpResponseForbidden()
-        return Response(self.get_event_details(event), status=200)
+        return Response(self.get_event_details(event, request), status=200)
 
 
 class SiteEventExtraAjaxView(EventExtraDataMixin, SODARBasePermissionAjaxView):
     """Ajax view for retrieving event extra data for site-wide events"""
 
-    permission_required = 'timeline.view_site_timeline'
+    permission_required = 'timeline.view_event_extra_data'
 
     def get(self, request, *args, **kwargs):
         event = ProjectEvent.objects.filter(
             sodar_uuid=self.kwargs['projectevent']
         ).first()
         if event.classified and not request.user.has_perm(
             'timeline.view_classified_site_event'
@@ -240,26 +244,26 @@
             sodar_uuid=self.kwargs['eventstatus']
         ).first()
         event = status.event
         if event.project:
             if (
                 not event.classified
                 and not request.user.has_perm(
-                    'timeline.view_timeline', event.project
+                    'timeline.view_event_extra_data', event.project
                 )
                 or event.classified
                 and not request.user.has_perm(
                     'timeline.view_classified_event', event.project
                 )
             ):
                 return HttpResponseForbidden()
         else:
             if (
                 not event.classified
-                and not request.user.has_perm('timeline.view_site_timeline')
+                and not request.user.has_perm('timeline.view_event_extra_data')
                 or event.classified
                 and not request.user.has_perm(
                     'timeline.view_classified_site_event'
                 )
             ):
                 return HttpResponseForbidden()
         return Response(
```

### Comparing `django-sodar-core-0.12.0/tokens/templates/tokens/token_confirm_delete.html` & `django-sodar-core-0.13.0/tokens/templates/tokens/token_confirm_delete.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/tokens/templates/tokens/token_create.html` & `django-sodar-core-0.13.0/tokens/templates/tokens/token_create.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/tokens/templates/tokens/token_list.html` & `django-sodar-core-0.13.0/tokens/templates/tokens/token_list.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/tokens/tests/test_permissions.py` & `django-sodar-core-0.13.0/tokens/tests/test_permissions.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/tokens/tests/test_ui.py` & `django-sodar-core-0.13.0/tokens/tests/test_ui.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/tokens/tests/test_views.py` & `django-sodar-core-0.13.0/tokens/tests/test_views.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/tokens/views.py` & `django-sodar-core-0.13.0/tokens/views.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/userprofile/forms.py` & `django-sodar-core-0.13.0/userprofile/forms.py`

 * *Files 11% similar despite different names*

```diff
@@ -53,34 +53,47 @@
                     'required': False,
                     'label': s_val.get('label') or '{}.{}'.format(name, s_key),
                     'help_text': s_val.get('description'),
                 }
 
                 if s_val['type'] == 'STRING':
                     if 'options' in s_val:
-                        self.fields[s_field] = forms.ChoiceField(
-                            choices=[
-                                (option, option)
-                                for option in s_val.get('options')
-                            ],
-                            **setting_kwargs,
-                        )
+                        if callable(s_val['options']):
+                            self.fields[s_field] = forms.ChoiceField(
+                                choices=[
+                                    (str(value[0]), str(value[1]))
+                                    if isinstance(value, tuple)
+                                    else (str(value), str(value))
+                                    for value in s_val['options'](
+                                        user=self.user
+                                    )
+                                ],
+                                **setting_kwargs,
+                            )
+                        else:
+                            self.fields[s_field] = forms.ChoiceField(
+                                choices=[
+                                    (option, option)
+                                    for option in s_val['options']
+                                ],
+                                **setting_kwargs,
+                            )
                     else:
                         self.fields[s_field] = forms.CharField(
                             max_length=APP_SETTING_VAL_MAXLENGTH,
                             widget=forms.TextInput(attrs=s_widget_attrs),
                             **setting_kwargs,
                         )
 
                 elif s_val['type'] == 'INTEGER':
                     if 'options' in s_val:
                         self.fields[s_field] = forms.ChoiceField(
                             choices=[
                                 (int(option), int(option))
-                                for option in s_val.get('options')
+                                for option in s_val['options']
                             ],
                             **setting_kwargs,
                         )
                     else:
                         self.fields[s_field] = forms.IntegerField(
                             widget=forms.NumberInput(attrs=s_widget_attrs),
                             **setting_kwargs,
@@ -114,48 +127,66 @@
                     self.initial[s_field] = json.dumps(
                         app_settings.get(
                             app_name=name,
                             setting_name=s_key,
                             user=self.user,
                         )
                     )
+                self.fields[s_field].label = self.get_app_setting_label(
+                    plugin, self.fields[s_field].label
+                )
 
     def clean(self):
         """Function for custom form validation and cleanup"""
         for plugin in self.app_plugins + [None]:
             if plugin:
                 name = plugin.name
                 p_settings = app_settings.get_definitions(
                     APP_SETTING_SCOPE_USER, plugin=plugin, user_modifiable=True
                 )
             else:
                 name = 'projectroles'
                 p_settings = app_settings.get_definitions(
                     APP_SETTING_SCOPE_USER, app_name=name, user_modifiable=True
                 )
+            plugin_app_settings = {}
 
             for s_key, s_val in p_settings.items():
                 s_field = 'settings.{}.{}'.format(name, s_key)
+                plugin_app_settings[s_key] = self.cleaned_data.get(s_field)
+
                 if s_val['type'] == 'JSON':
+                    if not self.cleaned_data.get(s_field):
+                        self.cleaned_data[s_field] = '{}'
                     try:
                         self.cleaned_data[s_field] = json.loads(
                             self.cleaned_data.get(s_field)
                         )
                     except json.JSONDecodeError as err:
-                        # TODO: Shouldn't we use add_error() instead?
-                        raise forms.ValidationError(
-                            'Couldn\'t encode JSON\n' + str(err)
-                        )
+                        self.add_error(s_field, 'Invalid JSON\n' + str(err))
+
                 elif s_val['type'] == 'INTEGER':
                     # When field is a select/dropdown, the information of the
                     # data type gets lost. We need to convert that here,
                     # otherwise subsequent checks will fail.
                     self.cleaned_data[s_field] = int(self.cleaned_data[s_field])
 
                 if not app_settings.validate(
                     setting_type=s_val['type'],
                     setting_value=self.cleaned_data.get(s_field),
                     setting_options=s_val.get('options'),
+                    user=self.user,
                 ):
                     self.add_error(s_field, 'Invalid value')
+            try:
+                app_settings_errors = plugin.validate_form_app_settings(
+                    plugin_app_settings, user=self.user
+                )
+                if app_settings_errors:
+                    for field, error in app_settings_errors.items():
+                        if error:
+                            self.add_error(field, error)
+            except AttributeError:
+                # Plugin does not have a validate_form_app_settings method
+                pass
 
         return self.cleaned_data
```

### Comparing `django-sodar-core-0.12.0/userprofile/plugins.py` & `django-sodar-core-0.13.0/userprofile/plugins.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/userprofile/templates/userprofile/detail.html` & `django-sodar-core-0.13.0/userprofile/templates/userprofile/detail.html`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/userprofile/tests/test_permissions.py` & `django-sodar-core-0.13.0/userprofile/tests/test_permissions.py`

 * *Files 5% similar despite different names*

```diff
@@ -17,39 +17,39 @@
         self.superuser.is_staff = True
         self.superuser.save()
         self.regular_user = self.make_user('regular_user')
         # No user
         self.anonymous = None
 
     def test_profile(self):
-        """Test permissions for the user profile view"""
+        """Test permissions for user profile view"""
         url = reverse('userprofile:detail')
         good_users = [self.superuser, self.regular_user]
         bad_users = [self.anonymous]
         self.assert_response(url, good_users, 200)
         self.assert_response(url, bad_users, 302)
 
     @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
     def test_profile_anon(self):
-        """Test permissions for the user profile view with anonymous access"""
+        """Test permissions for user profile view with anonymous access"""
         url = reverse('userprofile:detail')
         good_users = [self.superuser, self.regular_user]
         bad_users = [self.anonymous]
         self.assert_response(url, good_users, 200)
         self.assert_response(url, bad_users, 302)
 
     def test_settings_update(self):
-        """Test permissions for the user settings updating view"""
+        """Test permissions for user settings update view"""
         url = reverse('userprofile:settings_update')
         good_users = [self.superuser, self.regular_user]
         bad_users = [self.anonymous]
         self.assert_response(url, good_users, 200)
         self.assert_response(url, bad_users, 302)
 
     @override_settings(PROJECTROLES_ALLOW_ANONYMOUS=True)
     def test_settings_update_anon(self):
-        """Test permissions for the user settings updating view with anonymous access"""
+        """Test permissions for update view with anonymous access"""
         url = reverse('userprofile:settings_update')
         good_users = [self.superuser, self.regular_user]
         bad_users = [self.anonymous]
         self.assert_response(url, good_users, 200)
         self.assert_response(url, bad_users, 302)
```

### Comparing `django-sodar-core-0.12.0/userprofile/tests/test_views.py` & `django-sodar-core-0.13.0/userprofile/tests/test_views.py`

 * *Files 9% similar despite different names*

```diff
@@ -110,41 +110,41 @@
     def test_get(self):
         """Test GET request on settings update form"""
         with self.login(self.user):
             response = self.client.get(reverse('userprofile:settings_update'))
         self.assertEqual(response.status_code, 200)
         self.assertIsNotNone(response.context['form'])
         field = response.context['form'].fields.get(
-            'settings.%s.user_str_setting' % EXAMPLE_APP_NAME
+            'settings.example_project_app.user_str_setting'
         )
         self.assertIsNotNone(field)
         self.assertEqual(field.widget.attrs['placeholder'], 'Example string')
         field = response.context['form'].fields.get(
-            'settings.%s.user_int_setting' % EXAMPLE_APP_NAME
+            'settings.example_project_app.user_int_setting'
         )
         self.assertIsNotNone(field)
         self.assertEqual(field.widget.attrs['placeholder'], 0)
         self.assertIsNotNone(
             response.context['form'].fields.get(
-                'settings.%s.user_str_setting_options' % EXAMPLE_APP_NAME
+                'settings.example_project_app.user_str_setting_options'
             )
         )
         self.assertIsNotNone(
             response.context['form'].fields.get(
-                'settings.%s.user_int_setting_options' % EXAMPLE_APP_NAME
+                'settings.example_project_app.user_int_setting_options'
             )
         )
         self.assertIsNotNone(
             response.context['form'].fields.get(
-                'settings.%s.user_bool_setting' % EXAMPLE_APP_NAME
+                'settings.example_project_app.user_bool_setting'
             )
         )
         self.assertIsNotNone(
             response.context['form'].fields.get(
-                'settings.%s.user_json_setting' % EXAMPLE_APP_NAME
+                'settings.example_project_app.user_json_setting'
             )
         )
 
     def test_post(self):
         """Test POST request on settings update form"""
         self.assertEqual(
             app_settings.get(
@@ -180,22 +180,25 @@
             app_settings.get(
                 EXAMPLE_APP_NAME, 'user_json_setting', user=self.user
             ),
             {'Test': 'More'},
         )
 
         values = {
-            'settings.%s.user_str_setting' % EXAMPLE_APP_NAME: 'another-text',
-            'settings.%s.user_int_setting' % EXAMPLE_APP_NAME: '123',
-            'settings.%s.user_str_setting_options'
-            % EXAMPLE_APP_NAME: 'string2',
-            'settings.%s.user_int_setting_options' % EXAMPLE_APP_NAME: 1,
-            'settings.%s.user_bool_setting' % EXAMPLE_APP_NAME: False,
-            'settings.%s.user_json_setting'
-            % EXAMPLE_APP_NAME: '{"Test": "Less"}',
+            'settings.example_project_app.user_str_setting': 'another-text',
+            'settings.example_project_app.user_int_setting': '123',
+            'settings.example_project_app.user_str_setting_options': 'string2',
+            'settings.example_project_app.user_int_setting_options': 1,
+            'settings.example_project_app.user_bool_setting': False,
+            'settings.example_project_app.'
+            'user_json_setting': '{"Test": "Less"}',
+            'settings.example_project_app.user_callable_setting': 'Test',
+            'settings.example_project_app.user_callable_setting_options': str(
+                self.user.sodar_uuid
+            ),
         }
 
         with self.login(self.user):
             response = self.client.post(
                 reverse('userprofile:settings_update'), values
             )
 
@@ -240,7 +243,21 @@
         )
         self.assertEqual(
             app_settings.get(
                 EXAMPLE_APP_NAME, 'user_json_setting', user=self.user
             ),
             {'Test': 'Less'},
         )
+        self.assertEqual(
+            app_settings.get(
+                EXAMPLE_APP_NAME, 'user_callable_setting', user=self.user
+            ),
+            'Test',
+        )
+        self.assertEqual(
+            app_settings.get(
+                EXAMPLE_APP_NAME,
+                'user_callable_setting_options',
+                user=self.user,
+            ),
+            str(self.user.sodar_uuid),
+        )
```

### Comparing `django-sodar-core-0.12.0/userprofile/views.py` & `django-sodar-core-0.13.0/userprofile/views.py`

 * *Files identical despite different names*

### Comparing `django-sodar-core-0.12.0/versioneer.py` & `django-sodar-core-0.13.0/versioneer.py`

 * *Files 2% similar despite different names*

```diff
@@ -1,36 +1,64 @@
 
-# Version: 0.23
+# Version: 0.28
 
 """The Versioneer - like a rocketeer, but for versions.
 
 The Versioneer
 ==============
 
 * like a rocketeer, but for versions!
 * https://github.com/python-versioneer/python-versioneer
 * Brian Warner
-* License: Public Domain (CC0-1.0)
+* License: Public Domain (Unlicense)
 * Compatible with: Python 3.7, 3.8, 3.9, 3.10 and pypy3
 * [![Latest Version][pypi-image]][pypi-url]
 * [![Build Status][travis-image]][travis-url]
 
-This is a tool for managing a recorded version number in distutils/setuptools-based
+This is a tool for managing a recorded version number in setuptools-based
 python projects. The goal is to remove the tedious and error-prone "update
 the embedded version string" step from your release process. Making a new
 release should be as easy as recording a new tag in your version-control
 system, and maybe making new tarballs.
 
 
 ## Quick Install
 
+Versioneer provides two installation modes. The "classic" vendored mode installs
+a copy of versioneer into your repository. The experimental build-time dependency mode
+is intended to allow you to skip this step and simplify the process of upgrading.
+
+### Vendored mode
+
+* `pip install versioneer` to somewhere in your $PATH
+   * A [conda-forge recipe](https://github.com/conda-forge/versioneer-feedstock) is
+     available, so you can also use `conda install -c conda-forge versioneer`
+* add a `[tool.versioneer]` section to your `pyproject.toml` or a
+  `[versioneer]` section to your `setup.cfg` (see [Install](INSTALL.md))
+   * Note that you will need to add `tomli; python_version < "3.11"` to your
+     build-time dependencies if you use `pyproject.toml`
+* run `versioneer install --vendor` in your source tree, commit the results
+* verify version information with `python setup.py version`
+
+### Build-time dependency mode
+
 * `pip install versioneer` to somewhere in your $PATH
-* add a `[versioneer]` section to your setup.cfg (see [Install](INSTALL.md))
-* run `versioneer install` in your source tree, commit the results
-* Verify version information with `python setup.py version`
+   * A [conda-forge recipe](https://github.com/conda-forge/versioneer-feedstock) is
+     available, so you can also use `conda install -c conda-forge versioneer`
+* add a `[tool.versioneer]` section to your `pyproject.toml` or a
+  `[versioneer]` section to your `setup.cfg` (see [Install](INSTALL.md))
+* add `versioneer` (with `[toml]` extra, if configuring in `pyproject.toml`)
+  to the `requires` key of the `build-system` table in `pyproject.toml`:
+  ```toml
+  [build-system]
+  requires = ["setuptools", "versioneer[toml]"]
+  build-backend = "setuptools.build_meta"
+  ```
+* run `versioneer install --no-vendor` in your source tree, commit the results
+* verify version information with `python setup.py version`
 
 ## Version Identifiers
 
 Source trees come from a variety of places:
 
 * a version-control system checkout (mostly used by developers)
 * a nightly tarball, produced by build automation
@@ -227,17 +255,18 @@
 
 
 ## Updating Versioneer
 
 To upgrade your project to a new release of Versioneer, do the following:
 
 * install the new Versioneer (`pip install -U versioneer` or equivalent)
-* edit `setup.cfg`, if necessary, to include any new configuration settings
-  indicated by the release notes. See [UPGRADING](./UPGRADING.md) for details.
-* re-run `versioneer install` in your source tree, to replace
+* edit `setup.cfg` and `pyproject.toml`, if necessary,
+  to include any new configuration settings indicated by the release notes.
+  See [UPGRADING](./UPGRADING.md) for details.
+* re-run `versioneer install --[no-]vendor` in your source tree, to replace
   `SRC/_version.py`
 * commit any changed files
 
 ## Future Directions
 
 This tool is designed to make it easily extended to other version-control
 systems: all VCS-specific components are in separate directories like
@@ -259,17 +288,16 @@
 * [versioningit](https://github.com/jwodder/versioningit) - a PEP 518-based setuptools
   plugin
 
 ## License
 
 To make Versioneer easier to embed, all its code is dedicated to the public
 domain. The `_version.py` that it creates is also in the public domain.
-Specifically, both are released under the Creative Commons "Public Domain
-Dedication" license (CC0-1.0), as described in
-https://creativecommons.org/publicdomain/zero/1.0/ .
+Specifically, both are released under the "Unlicense", as described in
+https://unlicense.org/.
 
 [pypi-image]: https://img.shields.io/pypi/v/versioneer.svg
 [pypi-url]: https://pypi.python.org/pypi/versioneer/
 [travis-image]:
 https://img.shields.io/travis/com/python-versioneer/python-versioneer.svg
 [travis-url]: https://travis-ci.com/github/python-versioneer/python-versioneer
 
@@ -283,17 +311,27 @@
 import configparser
 import errno
 import json
 import os
 import re
 import subprocess
 import sys
+from pathlib import Path
 from typing import Callable, Dict
 import functools
 
+have_tomllib = True
+if sys.version_info >= (3, 11):
+    import tomllib
+else:
+    try:
+        import tomli as tomllib
+    except ImportError:
+        have_tomllib = False
+
 
 class VersioneerConfig:
     """Container for Versioneer configuration parameters."""
 
 
 def get_root():
     """Get the project root directory.
@@ -322,39 +360,49 @@
         # "versioneer" may be imported multiple times, and python's shared
         # module-import table will cache the first one. So we can't use
         # os.path.dirname(__file__), as that will find whichever
         # versioneer.py was first imported, even in later projects.
         my_path = os.path.realpath(os.path.abspath(__file__))
         me_dir = os.path.normcase(os.path.splitext(my_path)[0])
         vsr_dir = os.path.normcase(os.path.splitext(versioneer_py)[0])
-        if me_dir != vsr_dir:
+        if me_dir != vsr_dir and "VERSIONEER_PEP518" not in globals():
             print("Warning: build in %s is using versioneer.py from %s"
                   % (os.path.dirname(my_path), versioneer_py))
     except NameError:
         pass
     return root
 
 
 def get_config_from_root(root):
     """Read the project setup.cfg file to determine Versioneer config."""
     # This might raise OSError (if setup.cfg is missing), or
     # configparser.NoSectionError (if it lacks a [versioneer] section), or
     # configparser.NoOptionError (if it lacks "VCS="). See the docstring at
     # the top of versioneer.py for instructions on writing your setup.cfg .
-    setup_cfg = os.path.join(root, "setup.cfg")
-    parser = configparser.ConfigParser()
-    with open(setup_cfg, "r") as cfg_file:
-        parser.read_file(cfg_file)
-    VCS = parser.get("versioneer", "VCS")  # mandatory
+    root = Path(root)
+    pyproject_toml = root / "pyproject.toml"
+    setup_cfg = root / "setup.cfg"
+    section = None
+    if pyproject_toml.exists() and have_tomllib:
+        try:
+            with open(pyproject_toml, 'rb') as fobj:
+                pp = tomllib.load(fobj)
+            section = pp['tool']['versioneer']
+        except (tomllib.TOMLDecodeError, KeyError):
+            pass
+    if not section:
+        parser = configparser.ConfigParser()
+        with open(setup_cfg) as cfg_file:
+            parser.read_file(cfg_file)
+        parser.get("versioneer", "VCS")  # raise error if missing
 
-    # Dict-like interface for non-mandatory entries
-    section = parser["versioneer"]
+        section = parser["versioneer"]
 
     cfg = VersioneerConfig()
-    cfg.VCS = VCS
+    cfg.VCS = section['VCS']
     cfg.style = section.get("style", "")
     cfg.versionfile_source = section.get("versionfile_source")
     cfg.versionfile_build = section.get("versionfile_build")
     cfg.tag_prefix = section.get("tag_prefix")
     if cfg.tag_prefix in ("''", '""', None):
         cfg.tag_prefix = ""
     cfg.parentdir_prefix = section.get("parentdir_prefix")
@@ -426,16 +474,17 @@
 LONG_VERSION_PY['git'] = r'''
 # This file helps to compute a version number in source trees obtained from
 # git-archive tarball (such as those provided by githubs download-from-tag
 # feature). Distribution tarballs (built by setup.py sdist) and build
 # directories (produced by setup.py build) will contain a much shorter file
 # that just contains the computed version number.
 
-# This file is released into the public domain. Generated by
-# versioneer-0.23 (https://github.com/python-versioneer/python-versioneer)
+# This file is released into the public domain.
+# Generated by versioneer-0.28
+# https://github.com/python-versioneer/python-versioneer
 
 """Git implementation of _version.py."""
 
 import errno
 import os
 import re
 import subprocess
@@ -669,26 +718,26 @@
     # It may be intended to be passed to the Versioneer-versioned project,
     # but that should not change where we get our version from.
     env = os.environ.copy()
     env.pop("GIT_DIR", None)
     runner = functools.partial(runner, env=env)
 
     _, rc = runner(GITS, ["rev-parse", "--git-dir"], cwd=root,
-                   hide_stderr=True)
+                   hide_stderr=not verbose)
     if rc != 0:
         if verbose:
             print("Directory %%s not under git control" %% root)
         raise NotThisMethod("'git rev-parse --git-dir' returned error")
 
     # if there is a tag matching tag_prefix, this yields TAG-NUM-gHEX[-dirty]
     # if there isn't one, this yields HEX[-dirty] (no NUM)
     describe_out, rc = runner(GITS, [
         "describe", "--tags", "--dirty", "--always", "--long",
         "--match", f"{tag_prefix}[[:digit:]]*"
-        ], cwd=root)
+    ], cwd=root)
     # --long was added in git-1.5.5
     if describe_out is None:
         raise NotThisMethod("'git describe' failed")
     describe_out = describe_out.strip()
     full_out, rc = runner(GITS, ["rev-parse", "HEAD"], cwd=root)
     if full_out is None:
         raise NotThisMethod("'git rev-parse' failed")
@@ -1191,26 +1240,26 @@
     # It may be intended to be passed to the Versioneer-versioned project,
     # but that should not change where we get our version from.
     env = os.environ.copy()
     env.pop("GIT_DIR", None)
     runner = functools.partial(runner, env=env)
 
     _, rc = runner(GITS, ["rev-parse", "--git-dir"], cwd=root,
-                   hide_stderr=True)
+                   hide_stderr=not verbose)
     if rc != 0:
         if verbose:
             print("Directory %s not under git control" % root)
         raise NotThisMethod("'git rev-parse --git-dir' returned error")
 
     # if there is a tag matching tag_prefix, this yields TAG-NUM-gHEX[-dirty]
     # if there isn't one, this yields HEX[-dirty] (no NUM)
     describe_out, rc = runner(GITS, [
         "describe", "--tags", "--dirty", "--always", "--long",
         "--match", f"{tag_prefix}[[:digit:]]*"
-        ], cwd=root)
+    ], cwd=root)
     # --long was added in git-1.5.5
     if describe_out is None:
         raise NotThisMethod("'git describe' failed")
     describe_out = describe_out.strip()
     full_out, rc = runner(GITS, ["rev-parse", "HEAD"], cwd=root)
     if full_out is None:
         raise NotThisMethod("'git rev-parse' failed")
@@ -1316,22 +1365,23 @@
     """
     GITS = ["git"]
     if sys.platform == "win32":
         GITS = ["git.cmd", "git.exe"]
     files = [versionfile_source]
     if ipy:
         files.append(ipy)
-    try:
-        my_path = __file__
-        if my_path.endswith(".pyc") or my_path.endswith(".pyo"):
-            my_path = os.path.splitext(my_path)[0] + ".py"
-        versioneer_file = os.path.relpath(my_path)
-    except NameError:
-        versioneer_file = "versioneer.py"
-    files.append(versioneer_file)
+    if "VERSIONEER_PEP518" not in globals():
+        try:
+            my_path = __file__
+            if my_path.endswith((".pyc", ".pyo")):
+                my_path = os.path.splitext(my_path)[0] + ".py"
+            versioneer_file = os.path.relpath(my_path)
+        except NameError:
+            versioneer_file = "versioneer.py"
+        files.append(versioneer_file)
     present = False
     try:
         with open(".gitattributes", "r") as fobj:
             for line in fobj:
                 if line.strip().startswith(versionfile_source):
                     if "export-subst" in line.strip().split()[1:]:
                         present = True
@@ -1366,15 +1416,15 @@
     if verbose:
         print("Tried directories %s but none started with prefix %s" %
               (str(rootdirs), parentdir_prefix))
     raise NotThisMethod("rootdir doesn't start with parentdir_prefix")
 
 
 SHORT_VERSION_PY = """
-# This file was generated by 'versioneer.py' (0.23) from
+# This file was generated by 'versioneer.py' (0.28) from
 # revision-control system data, or from the parent directory name of an
 # unpacked source archive. Distribution tarballs contain a pre-generated copy
 # of this file.
 
 import json
 
 version_json = '''
@@ -1855,14 +1905,16 @@
                 # build_ext --inplace will only build extensions in
                 # build/lib<..> dir with no _version.py to write to.
                 # As in place builds will already have a _version.py
                 # in the module dir, we do not need to write one.
                 return
             # now locate _version.py in the new build/ directory and replace
             # it with an updated value
+            if not cfg.versionfile_build:
+                return
             target_versionfile = os.path.join(self.build_lib,
                                               cfg.versionfile_build)
             if not os.path.exists(target_versionfile):
                 print(f"Warning: {target_versionfile} does not exist, skipping "
                       "version update. This can happen if you are running build_ext "
                       "without first running build_py.")
                 return
@@ -1899,15 +1951,18 @@
                              "PARENTDIR_PREFIX": cfg.parentdir_prefix,
                              "VERSIONFILE_SOURCE": cfg.versionfile_source,
                              })
         cmds["build_exe"] = cmd_build_exe
         del cmds["build_py"]
 
     if 'py2exe' in sys.modules:  # py2exe enabled?
-        from py2exe.distutils_buildexe import py2exe as _py2exe
+        try:
+            from py2exe.setuptools_buildexe import py2exe as _py2exe
+        except ImportError:
+            from py2exe.distutils_buildexe import py2exe as _py2exe
 
         class cmd_py2exe(_py2exe):
             def run(self):
                 root = get_root()
                 cfg = get_config_from_root(root)
                 versions = get_versions()
                 target_versionfile = cfg.versionfile_source
@@ -1925,15 +1980,15 @@
                              "PARENTDIR_PREFIX": cfg.parentdir_prefix,
                              "VERSIONFILE_SOURCE": cfg.versionfile_source,
                              })
         cmds["py2exe"] = cmd_py2exe
 
     # sdist farms its file list building out to egg_info
     if 'egg_info' in cmds:
-        _sdist = cmds['egg_info']
+        _egg_info = cmds['egg_info']
     else:
         from setuptools.command.egg_info import egg_info as _egg_info
 
     class cmd_egg_info(_egg_info):
         def find_sources(self):
             # egg_info.find_sources builds the manifest list and writes it
             # in one shot
@@ -2133,14 +2188,18 @@
         print("'versioneer.versionfile_source = ' . This configuration")
         print("now lives in setup.cfg, and should be removed from setup.py")
         print("")
         errors += 1
     return errors
 
 
+def setup_command():
+    """Set up Versioneer and exit with appropriate error code."""
+    errors = do_setup()
+    errors += scan_setup_py()
+    sys.exit(1 if errors else 0)
+
+
 if __name__ == "__main__":
     cmd = sys.argv[1]
     if cmd == "setup":
-        errors = do_setup()
-        errors += scan_setup_py()
-        if errors:
-            sys.exit(1)
+        setup_command()
```

