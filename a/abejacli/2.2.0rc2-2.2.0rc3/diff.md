# Comparing `tmp/abejacli-2.2.0rc2-py3-none-any.whl.zip` & `tmp/abejacli-2.2.0rc3-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,8 +1,8 @@
-Zip file size: 84302 bytes, number of entries: 52
+Zip file size: 84334 bytes, number of entries: 52
 -rw-r--r--  2.0 unx        0 b- defN 80-Jan-01 00:00 abejacli/__init__.py
 -rw-r--r--  2.0 unx     3756 b- defN 80-Jan-01 00:00 abejacli/bucket/__init__.py
 -rw-r--r--  2.0 unx     4355 b- defN 80-Jan-01 00:00 abejacli/bucket/download_job.py
 -rw-r--r--  2.0 unx     6484 b- defN 80-Jan-01 00:00 abejacli/bucket/process_file_job.py
 -rw-r--r--  2.0 unx     3200 b- defN 80-Jan-01 00:00 abejacli/bucket/upload_job.py
 -rw-r--r--  2.0 unx     5354 b- defN 80-Jan-01 00:00 abejacli/click_custom.py
 -rw-r--r--  2.0 unx     5278 b- defN 80-Jan-01 00:00 abejacli/common/__init__.py
@@ -19,15 +19,15 @@
 -rw-r--r--  2.0 unx     9753 b- defN 80-Jan-01 00:00 abejacli/dataset/commands.py
 -rw-r--r--  2.0 unx        0 b- defN 80-Jan-01 00:00 abejacli/docker/__init__.py
 -rw-r--r--  2.0 unx        0 b- defN 80-Jan-01 00:00 abejacli/docker/commands/__init__.py
 -rw-r--r--  2.0 unx     8452 b- defN 80-Jan-01 00:00 abejacli/docker/commands/run.py
 -rw-r--r--  2.0 unx     9155 b- defN 80-Jan-01 00:00 abejacli/docker/container_run.py
 -rw-r--r--  2.0 unx      746 b- defN 80-Jan-01 00:00 abejacli/docker/utils.py
 -rw-r--r--  2.0 unx        0 b- defN 80-Jan-01 00:00 abejacli/dx_template/__init__.py
--rw-r--r--  2.0 unx    10530 b- defN 80-Jan-01 00:00 abejacli/dx_template/commands.py
+-rw-r--r--  2.0 unx    10763 b- defN 80-Jan-01 00:00 abejacli/dx_template/commands.py
 -rw-r--r--  2.0 unx      282 b- defN 80-Jan-01 00:00 abejacli/exceptions.py
 -rw-r--r--  2.0 unx     6964 b- defN 80-Jan-01 00:00 abejacli/fs_utils.py
 -rw-r--r--  2.0 unx     1228 b- defN 80-Jan-01 00:00 abejacli/logger.py
 -rw-r--r--  2.0 unx      217 b- defN 80-Jan-01 00:00 abejacli/model/__init__.py
 -rw-r--r--  2.0 unx     6405 b- defN 80-Jan-01 00:00 abejacli/model/docker_handler.py
 -rw-r--r--  2.0 unx     1731 b- defN 80-Jan-01 00:00 abejacli/model/local_server_manager.py
 -rw-r--r--  2.0 unx      831 b- defN 80-Jan-01 00:00 abejacli/model/runtime_utils.py
@@ -42,13 +42,13 @@
 -rw-r--r--  2.0 unx       25 b- defN 80-Jan-01 00:00 abejacli/template/requirements-local.txt-tpl
 -rw-r--r--  2.0 unx     1432 b- defN 80-Jan-01 00:00 abejacli/template/train.py-tpl
 -rw-r--r--  2.0 unx     6891 b- defN 80-Jan-01 00:00 abejacli/training/__init__.py
 -rw-r--r--  2.0 unx      905 b- defN 80-Jan-01 00:00 abejacli/training/client.py
 -rw-r--r--  2.0 unx    59110 b- defN 80-Jan-01 00:00 abejacli/training/commands.py
 -rw-r--r--  2.0 unx    17869 b- defN 80-Jan-01 00:00 abejacli/training/jobs.py
 -rw-r--r--  2.0 unx       83 b- defN 80-Jan-01 00:00 abejacli/version.py
--rw-r--r--  2.0 unx    11344 b- defN 80-Jan-01 00:00 abejacli-2.2.0rc2.dist-info/LICENSE
--rw-r--r--  2.0 unx     1107 b- defN 80-Jan-01 00:00 abejacli-2.2.0rc2.dist-info/METADATA
--rw-r--r--  2.0 unx       88 b- defN 80-Jan-01 00:00 abejacli-2.2.0rc2.dist-info/WHEEL
--rw-r--r--  2.0 unx       43 b- defN 80-Jan-01 00:00 abejacli-2.2.0rc2.dist-info/entry_points.txt
-?rw-r--r--  2.0 unx     4415 b- defN 16-Jan-01 00:00 abejacli-2.2.0rc2.dist-info/RECORD
-52 files, 326378 bytes uncompressed, 77264 bytes compressed:  76.3%
+-rw-r--r--  2.0 unx    11344 b- defN 80-Jan-01 00:00 abejacli-2.2.0rc3.dist-info/LICENSE
+-rw-r--r--  2.0 unx     1146 b- defN 80-Jan-01 00:00 abejacli-2.2.0rc3.dist-info/METADATA
+-rw-r--r--  2.0 unx       88 b- defN 80-Jan-01 00:00 abejacli-2.2.0rc3.dist-info/WHEEL
+-rw-r--r--  2.0 unx       43 b- defN 80-Jan-01 00:00 abejacli-2.2.0rc3.dist-info/entry_points.txt
+?rw-r--r--  2.0 unx     4415 b- defN 16-Jan-01 00:00 abejacli-2.2.0rc3.dist-info/RECORD
+52 files, 326650 bytes uncompressed, 77296 bytes compressed:  76.3%
```

## zipnote {}

```diff
@@ -135,23 +135,23 @@
 
 Filename: abejacli/training/jobs.py
 Comment: 
 
 Filename: abejacli/version.py
 Comment: 
 
-Filename: abejacli-2.2.0rc2.dist-info/LICENSE
+Filename: abejacli-2.2.0rc3.dist-info/LICENSE
 Comment: 
 
-Filename: abejacli-2.2.0rc2.dist-info/METADATA
+Filename: abejacli-2.2.0rc3.dist-info/METADATA
 Comment: 
 
-Filename: abejacli-2.2.0rc2.dist-info/WHEEL
+Filename: abejacli-2.2.0rc3.dist-info/WHEEL
 Comment: 
 
-Filename: abejacli-2.2.0rc2.dist-info/entry_points.txt
+Filename: abejacli-2.2.0rc3.dist-info/entry_points.txt
 Comment: 
 
-Filename: abejacli-2.2.0rc2.dist-info/RECORD
+Filename: abejacli-2.2.0rc3.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## abejacli/dx_template/commands.py

```diff
@@ -3,26 +3,29 @@
 import re
 import subprocess
 import sys
 import zipfile
 
 import click
 import yaml
+from PIL import Image
 
-from abejacli.common import __try_get_organization_id
 from abejacli.config import (
     ERROR_EXITCODE,
     ORGANIZATION_ENDPOINT,
     SUCCESS_EXITCODE
 )
 from abejacli.configuration import __ensure_configuration_exists
 from abejacli.logger import get_logger
 from abejacli.session import generate_user_session
 
-DX_TEMPLATE_SKELETON_REPO = 'https://github.com/abeja-inc/platform-dx-template-samples.git'
+DX_TEMPLATE_SKELETON_REPO = 'https://github.com/abeja-inc/platform-dx-template-skeleton-v1.git'
+DX_TEMPLATE_THUMBNAIL_WIDTH_MAX = 800
+DX_TEMPLATE_THUMBNAIL_HEIGHT_MAX = 600
+DX_TEMPLATE_THUMBNAIL_SIZE_KB_MAX = 512
 
 logger = get_logger()
 
 
 @click.group(help='dx-template commands')
 @click.pass_context
 def dx_template(ctx):
@@ -31,63 +34,51 @@
 
 # ---------------------------------------------------
 # dx_template command
 # ---------------------------------------------------
 @dx_template.command(name='init', help='Prepare and create your own DX template definition files')
 @click.option('-n', '--name', 'name', prompt='Please enter your DX template name', type=str, required=False,
               help='DX template name')
-@click.option('-o', '--organization_id', '--organization-id', 'organization_id', type=str, required=False,
-              help='Organization ID, organization_id of current credential organization is used by default. '
-                   'This value is set as an environment variable named `ABEJA_ORGANIZATION_ID`. '
-                   '`ABEJA_ORGANIZATION_ID` from this arg takes priority over one in `--environment`.',
-              callback=__try_get_organization_id)
-@click.option('-s', '--skeleton_file', '--skeleton-file', 'skeleton_file', type=click.Choice(['Y', 'n']), default='Y',
-              prompt='want DX template definition skeleton files?',
-              help='get (or not get) skeleton files')
-def init(name, organization_id, skeleton_file):
+def init(name):
     """dx-template init コマンド
+    DX テンプレート開発者に開発環境を提供するコマンド。
+    git hub で管理しているDX テンプレート用のskeleton ファイルを元に各種定義ファイルを用意する。
+
     Args:
         name(str) : DX テンプレート名
-        organization_id(str) : オーガニゼーションID
-        skeleton_file(str) : skeleton ファイルの要否（Y or n）
     """
     click.echo('\n==== Your Settings ============================')
 
     # 入力されたDX テンプレート名でファイルやフォルダ名に入れない方が良い文字は削除する
     name = re.sub(r'[\\/:*?"<>|\.]+', '', name)
     click.echo(f'DX Template name: {name}')
 
     # DX テンプレートのサンプルファイル取得要否
-    if skeleton_file == 'Y':
-        click.echo(f'Download the skeleton file from {DX_TEMPLATE_SKELETON_REPO}.')
-    else:
-        click.echo('Skeleton files will not be downloaded.')
+    click.echo(f'Download the skeleton file from {DX_TEMPLATE_SKELETON_REPO}.')
 
     # Future Work: 公開/非公開設定
     click.echo('This DX template is used only inside your organization.')
-    publish_type = 'private'
+    template_scope = 'private'
 
     # Future Work: ABEJA only　設定
     click.echo('This DX template is used only inside ABEJA inc.')
     abeja_user_only = True
 
     click.echo('================================')
 
     # ファイルの自動作成前にユーザに確認する
     answer = click.prompt('Are you sure you want to create the above?', type=click.Choice(['Y', 'n']))
     if answer == 'n':
         click.echo('Aborted!')
         sys.exit(ERROR_EXITCODE)
 
-    # skeleton ファイルの取得と保存
-    if skeleton_file == 'Y':
-        git_clone_skeleton_files(DX_TEMPLATE_SKELETON_REPO, name)
+    git_clone_skeleton_files(DX_TEMPLATE_SKELETON_REPO, name)
 
-    # template.yaml の作成
-    create_and_save_template_yaml(organization_id, name, publish_type, abeja_user_only)
+    # template.yaml の更新
+    update_template_yaml(name, template_scope, abeja_user_only)
 
     # 処理正常終了
     click.echo('✨✨✨✨ It\'s done!! Happy DX! ✨✨✨✨\n')
     sys.exit(SUCCESS_EXITCODE)
 
 
 # type 引数で渡しているclick.Path指定されたパスが実際に存在するかどうかを検証する
@@ -114,14 +105,34 @@
         'how_to_use_jp': os.path.join(directory_path, 'DxTemplate_JP.md'),
     }
     for path in upload_files.values():
         if not os.path.isfile(path):
             click.echo(f'A required file is missing: {path}')
             sys.exit(ERROR_EXITCODE)
 
+    # Thumbnail.jpg の解像度を確認する
+    thumbnail_img = Image.open(upload_files["thumbnail"])
+    if thumbnail_img.width > DX_TEMPLATE_THUMBNAIL_WIDTH_MAX or thumbnail_img.height > DX_TEMPLATE_THUMBNAIL_HEIGHT_MAX:
+        click.echo('Resolution of "{}" is {}x{}. Please fix thumbnail resolution under {}x{}.'.format(
+            upload_files["thumbnail"],
+            thumbnail_img.width, thumbnail_img.height,
+            DX_TEMPLATE_THUMBNAIL_WIDTH_MAX, DX_TEMPLATE_THUMBNAIL_HEIGHT_MAX
+        ))
+        sys.exit(ERROR_EXITCODE)
+
+    # Thumbnail.jpg のファイルサイズを確認する
+    thumbnail_size_kb = int(round(os.path.getsize(upload_files["thumbnail"]) / 1024, 0))
+    if thumbnail_size_kb > DX_TEMPLATE_THUMBNAIL_SIZE_KB_MAX:
+        click.echo('File size of "{}" is {}KB. Please fix thumbnail file size under {}KB.'.format(
+            upload_files["thumbnail"],
+            thumbnail_size_kb,
+            DX_TEMPLATE_THUMBNAIL_SIZE_KB_MAX
+        ))
+        sys.exit(ERROR_EXITCODE)
+
     # handler.py をrun ディレクトリごとzip で固める
     handler_dire_path = os.path.join(directory_path, 'src/abeja_platform/deployments/run')
     zip_path = os.path.join(directory_path, 'src/abeja_platform/deployments/handler.zip')
     try:
         files_and_directorys_to_zip(handler_dire_path, zip_path)
     except Exception as e:
         print(f"Failed to create zip file: {zip_path}\nError: {str(e)}")
@@ -162,52 +173,54 @@
             os.remove(zip_path)
 
     # 処理正常終了
     click.echo('✨✨✨✨ It\'s done!! Happy DX! ✨✨✨✨\n')
     sys.exit(SUCCESS_EXITCODE)
 
 
-def create_and_save_template_yaml(organization_id, name, publish_type, abeja_user_only):
-    """引数で渡された内容をもとにtemplate.yaml を作成して保存する
+def update_template_yaml(name, template_scope='private', abeja_user_only=True):
+    """引数で渡された内容をもとにtemplate.yaml を更新する
+    template.yaml は`./{name}/template.yaml` に配置されていることを想定している
+
     Args:
-        organization_id (str): オーガニゼーションID
         name (str): DX テンプレート名
-        publish_type (str): DX テンプレートの公開設定 'public' or 'private'
+        template_scope (str): DX テンプレートの公開設定 'public' or 'private'
         abeja_user_only (bool): ABEJA Only か否か
     """
 
-    # YAML 生成に使う辞書作成
-    yaml_data = {
-        'organization_id': organization_id,
-        'name': name,
-        'descripton': '',
-        'type': publish_type,
-        'abeja_user_only': abeja_user_only
-    }
+    template_yaml_path = f'./{name}/template.yaml'
 
-    # ディレクトリ作成しYAML ファイルを保存する（既に同名ディレクトリ、ファイルがある場合は上書き）
-    output_dir = f'./{name}'
-    os.makedirs(output_dir, exist_ok=True)
-    output_file = f'./{name}/template.yaml'
     try:
-        with open(output_file, 'w') as file:
-            yaml.dump(yaml_data, file)
-    except FileNotFoundError:
-        click.echo('failed to create the directory or yaml file. check DX template name you input.\n')
-        sys.exit(ERROR_EXITCODE)
+        # YAML ファイルを読み込み
+        with open(template_yaml_path, 'r') as file:
+            data = yaml.safe_load(file)
+
+        # 内容を編集
+        data['metadata']['templateName'] = name
+        data['metadata']['templateScope'] = template_scope
+        data['metadata']['abejaUserOnly'] = abeja_user_only
+
+        # 編集後の内容をYAMLファイルに書き込み
+        with open(template_yaml_path, 'w') as file:
+            yaml.dump(data, file)
 
-    click.echo(f'YAML file saved as: {output_file}\n')
+    except yaml.YAMLError as e:
+        click.echo(f"YAML Error: {str(e)}")
+        sys.exit(ERROR_EXITCODE)
+    except Exception as e:
+        click.echo(f"An unexpected error has occurred.: {str(e)}")
+        sys.exit(ERROR_EXITCODE)
 
 
 def git_clone_skeleton_files(repository_url, destination_path, git_branch='main'):
     """引数で指定されたリポジトリからgit clone で宛先のパスにファイルをダウンロードする
     Args:
         repository_url (str): git hub リポジトリ のhttps のURL
         destination_path (str): git clone するローカルのパス
-        git_branch (str): 取得先のリポジトリのブランチ名（していなければmain）
+        git_branch (str): 取得先のリポジトリのブランチ名（指定がなければmain）
     """
     try:
         click.echo('================================')
         click.echo(f'Cloning repository: {repository_url} to {destination_path}')
         # check=Trueを指定することで、git cloneがエラーを返した場合にCalledProcessError が発生
         subprocess.run(['git', 'clone', '-b', git_branch, repository_url, destination_path], check=True)
         click.echo('\nRepository cloned successfully!\n')
```

## Comparing `abejacli-2.2.0rc2.dist-info/LICENSE` & `abejacli-2.2.0rc3.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `abejacli-2.2.0rc2.dist-info/METADATA` & `abejacli-2.2.0rc3.dist-info/METADATA`

 * *Files 6% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: abejacli
-Version: 2.2.0rc2
+Version: 2.2.0rc3
 Summary: ABEJA Platform Command line tool
 License: Apache-2.0
 Author: ABEJA Inc.
 Author-email: platform-support@abejainc.com
 Requires-Python: >=3.9,<4.0
 Classifier: Development Status :: 3 - Alpha
 Classifier: Intended Audience :: Developers
@@ -15,14 +15,15 @@
 Classifier: Programming Language :: Python :: 3.10
 Classifier: Programming Language :: Python :: 3.11
 Classifier: Topic :: Internet :: WWW/HTTP
 Requires-Dist: cerberus (>=1.3.0,<1.4.0)
 Requires-Dist: click (>=7.0.0,<7.1.0)
 Requires-Dist: click-config-file (>=0.5.0,<0.6.0)
 Requires-Dist: docker (>=2.5.1,<2.6.0)
+Requires-Dist: pillow (>=9.4.0,<9.5.0)
 Requires-Dist: pygments (>=2.0)
 Requires-Dist: python-dateutil (>=2.6.0,<2.7.0)
 Requires-Dist: requests (>=2.25.0,<2.26.0)
 Requires-Dist: retrying (>=1.3.0,<1.4.0)
 Requires-Dist: ruamel.yaml (>=0.17.21,<0.18.0)
 Requires-Dist: tomlkit (>=0.5.11,<0.6.0)
 Requires-Dist: tqdm (>=4.15.0,<4.16.0)
```

## Comparing `abejacli-2.2.0rc2.dist-info/RECORD` & `abejacli-2.2.0rc3.dist-info/RECORD`

 * *Files 4% similar despite different names*

```diff
@@ -18,15 +18,15 @@
 abejacli/dataset/commands.py,sha256=gWtysraygVHBy19pxk0OQWAJpF12PX5BtpOMdLaxJP8,9753
 abejacli/docker/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 abejacli/docker/commands/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 abejacli/docker/commands/run.py,sha256=plvtD0m5sHL2IzmpGMNc4SOH_ed1SL9lJ9qEav1Nhrk,8452
 abejacli/docker/container_run.py,sha256=9xZ3Y4hwszpLST1MUnf5tseZ2h2Eoc9vrdB9Q2rR-e0,9155
 abejacli/docker/utils.py,sha256=nCTlrvmWreW9jf5gg5ZCotFxq8k2-EWY2jtijkdrd60,746
 abejacli/dx_template/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-abejacli/dx_template/commands.py,sha256=T8SHxk30uHqJKTQD99DftQDLMjjkXagycYNGY-XLGW0,10530
+abejacli/dx_template/commands.py,sha256=T72G387CZ1eXUU4wxBXRl8p71Ggv2inQfRmNr-zUlkE,10763
 abejacli/exceptions.py,sha256=BOSeNT7GgQMQ0-IVdbzCKtflAqWfQUT58LydccKCMIY,282
 abejacli/fs_utils.py,sha256=V6uWQ1knu0OOxGdG2XHGwOEeUTwFpMd1T9a_eF85GkA,6964
 abejacli/logger.py,sha256=skvYF-qmkGVBbs6rzDvqibz91xoxKLh54NQGWUb8PbE,1228
 abejacli/model/__init__.py,sha256=yn_QtqimDjul0PCLa2Ps4guoDzoZcZzo4twuPuuaE-o,217
 abejacli/model/docker_handler.py,sha256=Oh5QrGHzQMwFeqea4-XuEIBf9goSPtDKU72DWa4uGqE,6405
 abejacli/model/local_server_manager.py,sha256=TRGOVSLNYbZooTNppBoKHJcoJQBqcakJNjQCFTXonnY,1731
 abejacli/model/runtime_utils.py,sha256=GsCmE-Avb4oOrreSRh_YNc-KQ4M-G5Vi370gAERgkQk,831
@@ -41,12 +41,12 @@
 abejacli/template/requirements-local.txt-tpl,sha256=i_YQz8eFRWEs7hEWL-ww8UyVhLAzQcasrROGjVWp0nk,25
 abejacli/template/train.py-tpl,sha256=fTqep3aHzojqX664KExwotET8WihoqLMlSZhpybQZTc,1432
 abejacli/training/__init__.py,sha256=G8P-bJOy0Hjb-C_EA7NfP-M884PWlIAKLXwf53B9E54,6891
 abejacli/training/client.py,sha256=CLjI_UojbGLiTJg-mPFIcAv4-2npGCM3Se1TniB6hp8,905
 abejacli/training/commands.py,sha256=3WpVkEEnHT5GAkhSFnCa3lrsSN7xhFgJbSg7YAfFf9A,59110
 abejacli/training/jobs.py,sha256=PN1oW40dZNoJbdcxmyeF_8tlbNFog8RpKOQZvnGHegA,17869
 abejacli/version.py,sha256=g4QC6oBBD54l5EAZFkxCrEY9h47YON2VDCA9PItYOQM,83
-abejacli-2.2.0rc2.dist-info/LICENSE,sha256=LasG9nAf8e8HZVQSsSkIKAm0s_kjYPGuk968yRClNSw,11344
-abejacli-2.2.0rc2.dist-info/METADATA,sha256=kkl7QjH2qjjq8fqOZC7xS7LLx6flLcS9b3BfK9oMQA0,1107
-abejacli-2.2.0rc2.dist-info/WHEEL,sha256=Zb28QaM1gQi8f4VCBhsUklF61CTlNYfs9YAZn-TOGFk,88
-abejacli-2.2.0rc2.dist-info/entry_points.txt,sha256=0sfIdUU9v0_JsInKJ7Qf5pVUSL9wbAlOOXp7qCHDDjg,43
-abejacli-2.2.0rc2.dist-info/RECORD,,
+abejacli-2.2.0rc3.dist-info/LICENSE,sha256=LasG9nAf8e8HZVQSsSkIKAm0s_kjYPGuk968yRClNSw,11344
+abejacli-2.2.0rc3.dist-info/METADATA,sha256=nBBGHTu2he-duhrNSojC4GZKowlQU7RmbcXEU91hNGk,1146
+abejacli-2.2.0rc3.dist-info/WHEEL,sha256=Zb28QaM1gQi8f4VCBhsUklF61CTlNYfs9YAZn-TOGFk,88
+abejacli-2.2.0rc3.dist-info/entry_points.txt,sha256=0sfIdUU9v0_JsInKJ7Qf5pVUSL9wbAlOOXp7qCHDDjg,43
+abejacli-2.2.0rc3.dist-info/RECORD,,
```

